<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UploadItem.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.upload</a> &gt; <span class="el_source">UploadItem.java</span></div><h1>UploadItem.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.upload;

import android.annotation.SuppressLint;
import android.net.Uri;
import androidx.annotation.Nullable;
import fr.free.nrw.commons.Utils;
import fr.free.nrw.commons.filepicker.MimeTypeMapWrapper;
import fr.free.nrw.commons.nearby.Place;
import fr.free.nrw.commons.utils.ImageUtils;
import io.reactivex.subjects.BehaviorSubject;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

public class UploadItem {

    private Uri mediaUri;

    private final String mimeType;

    private ImageCoordinates gpsCoords;

    private List&lt;UploadMediaDetail&gt; uploadMediaDetails;

    private Place place;

    private final long createdTimestamp;

    private final String createdTimestampSource;

    private final BehaviorSubject&lt;Integer&gt; imageQuality;

    private boolean hasInvalidLocation;

<span class="nc" id="L36">    private boolean isWLMUpload = false;</span>

    private String countryCode;

    // according to EXIF data
    private String fileCreatedDateString;

    /**
     * Uri of uploadItem
     * Uri points to image location or name, eg content://media/external/images/camera/10495 (Android 10)
     */
    private Uri contentUri;

    @SuppressLint(&quot;CheckResult&quot;)
<span class="nc" id="L50">    UploadItem(final Uri mediaUri, final String mimeType, final ImageCoordinates gpsCoords, final Place place, final long createdTimestamp, final String createdTimestampSource, final Uri contentUri, final String fileCreatedDateString) {</span>
<span class="nc" id="L51">        this.createdTimestampSource = createdTimestampSource;</span>
<span class="nc bnc" id="L52" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7803)) {</span>
<span class="nc" id="L53">            uploadMediaDetails = new ArrayList&lt;&gt;(Collections.singletonList(new UploadMediaDetail()));</span>
        }
<span class="nc bnc" id="L55" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7804)) {</span>
<span class="nc" id="L56">            this.place = place;</span>
        }
<span class="nc bnc" id="L58" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7805)) {</span>
<span class="nc" id="L59">            this.mediaUri = mediaUri;</span>
        }
<span class="nc" id="L61">        this.mimeType = mimeType;</span>
<span class="nc bnc" id="L62" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7806)) {</span>
<span class="nc" id="L63">            this.gpsCoords = gpsCoords;</span>
        }
<span class="nc" id="L65">        this.createdTimestamp = createdTimestamp;</span>
<span class="nc bnc" id="L66" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7807)) {</span>
<span class="nc" id="L67">            this.contentUri = contentUri;</span>
        }
<span class="nc" id="L69">        imageQuality = BehaviorSubject.createDefault(ImageUtils.IMAGE_WAIT);</span>
<span class="nc bnc" id="L70" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7808)) {</span>
<span class="nc" id="L71">            this.fileCreatedDateString = fileCreatedDateString;</span>
        }
<span class="nc" id="L73">    }</span>

    public String getCreatedTimestampSource() {
<span class="nc" id="L76">        return createdTimestampSource;</span>
    }

    public ImageCoordinates getGpsCoords() {
<span class="nc" id="L80">        return gpsCoords;</span>
    }

    public List&lt;UploadMediaDetail&gt; getUploadMediaDetails() {
<span class="nc" id="L84">        return uploadMediaDetails;</span>
    }

    public long getCreatedTimestamp() {
<span class="nc" id="L88">        return createdTimestamp;</span>
    }

    public Uri getMediaUri() {
<span class="nc" id="L92">        return mediaUri;</span>
    }

    public int getImageQuality() {
<span class="nc" id="L96">        return imageQuality.getValue();</span>
    }

    /**
     * getContentUri.
     * @return Uri of uploadItem
     * Uri points to image location or name, eg content://media/external/images/camera/10495 (Android 10)
     */
    public Uri getContentUri() {
<span class="nc" id="L105">        return contentUri;</span>
    }

    public String getFileCreatedDateString() {
<span class="nc" id="L109">        return fileCreatedDateString;</span>
    }

    public void setImageQuality(final int imageQuality) {
<span class="nc bnc" id="L113" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7809)) {</span>
<span class="nc" id="L114">            this.imageQuality.onNext(imageQuality);</span>
        }
<span class="nc" id="L116">    }</span>

    /**
     * Sets the corresponding place to the uploadItem
     *
     * @param place geolocated Wikidata item
     */
    public void setPlace(Place place) {
<span class="nc bnc" id="L124" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7810)) {</span>
<span class="nc" id="L125">            this.place = place;</span>
        }
<span class="nc" id="L127">    }</span>

    public Place getPlace() {
<span class="nc" id="L130">        return place;</span>
    }

    public void setMediaDetails(final List&lt;UploadMediaDetail&gt; uploadMediaDetails) {
<span class="nc bnc" id="L134" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7811)) {</span>
<span class="nc" id="L135">            this.uploadMediaDetails = uploadMediaDetails;</span>
        }
<span class="nc" id="L137">    }</span>

    public void setWLMUpload(final boolean WLMUpload) {
<span class="nc bnc" id="L140" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7812)) {</span>
<span class="nc" id="L141">            isWLMUpload = WLMUpload;</span>
        }
<span class="nc" id="L143">    }</span>

    public boolean isWLMUpload() {
<span class="nc" id="L146">        return isWLMUpload;</span>
    }

    @Override
    public boolean equals(@Nullable final Object obj) {
<span class="nc bnc" id="L151" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7813)) {</span>
<span class="nc bnc" id="L152" title="All 2 branches missed.">            if (!(obj instanceof UploadItem)) {</span>
<span class="nc" id="L153">                return false;</span>
            }
        }
<span class="nc" id="L156">        return mediaUri.toString().contains(((UploadItem) (obj)).mediaUri.toString());</span>
    }

    @Override
    public int hashCode() {
<span class="nc" id="L161">        return mediaUri.hashCode();</span>
    }

    /**
     * Choose a filename for the media. Currently, the caption is used as a filename. If several
     * languages have been entered, the first language is used.
     */
    public String getFileName() {
<span class="nc" id="L169">        return Utils.fixExtension(uploadMediaDetails.get(0).getCaptionText(), MimeTypeMapWrapper.getExtensionFromMimeType(mimeType));</span>
    }

    public void setGpsCoords(final ImageCoordinates gpsCoords) {
<span class="nc bnc" id="L173" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7814)) {</span>
<span class="nc" id="L174">            this.gpsCoords = gpsCoords;</span>
        }
<span class="nc" id="L176">    }</span>

    public void setHasInvalidLocation(boolean hasInvalidLocation) {
<span class="nc bnc" id="L179" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7815)) {</span>
<span class="nc" id="L180">            this.hasInvalidLocation = hasInvalidLocation;</span>
        }
<span class="nc" id="L182">    }</span>

    public boolean hasInvalidLocation() {
<span class="nc" id="L185">        return hasInvalidLocation;</span>
    }

    public void setCountryCode(final String countryCode) {
<span class="nc bnc" id="L189" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7816)) {</span>
<span class="nc" id="L190">            this.countryCode = countryCode;</span>
        }
<span class="nc" id="L192">    }</span>

    @Nullable
    public String getCountryCode() {
<span class="nc" id="L196">        return countryCode;</span>
    }

    /**
     * Sets both the contentUri and mediaUri to the specified Uri.
     * This method allows you to assign the same Uri to both the contentUri and mediaUri
     * properties.
     *
     * @param uri The Uri to be set as both the contentUri and mediaUri.
     */
    public void setContentUri(Uri uri) {
<span class="nc bnc" id="L207" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7817)) {</span>
<span class="nc" id="L208">            contentUri = uri;</span>
        }
<span class="nc bnc" id="L210" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(7818)) {</span>
<span class="nc" id="L211">            mediaUri = uri;</span>
        }
<span class="nc" id="L213">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>