<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>QuizChecker.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.quiz</a> &gt; <span class="el_source">QuizChecker.java</span></div><h1>QuizChecker.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.quiz;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import javax.inject.Inject;
import javax.inject.Named;
import javax.inject.Singleton;
import fr.free.nrw.commons.R;
import fr.free.nrw.commons.WelcomeActivity;
import fr.free.nrw.commons.auth.SessionManager;
import fr.free.nrw.commons.kvstore.JsonKvStore;
import fr.free.nrw.commons.mwapi.OkHttpJsonApiClient;
import fr.free.nrw.commons.utils.DialogUtil;
import io.reactivex.android.schedulers.AndroidSchedulers;
import io.reactivex.disposables.CompositeDisposable;
import io.reactivex.schedulers.Schedulers;
import timber.log.Timber;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

/**
 * fetches the number of images uploaded and number of images reverted.
 * Then it calculates the percentage of the images reverted
 * if the percentage of images reverted after last quiz exceeds 50% and number of images uploaded is
 * greater than 50, then quiz is popped up
 */
@Singleton
public class QuizChecker {

    private int revertCount;

    private int totalUploadCount;

    private boolean isRevertCountFetched;

    private boolean isUploadCountFetched;

<span class="fc" id="L38">    private CompositeDisposable compositeDisposable = new CompositeDisposable();</span>

    private final SessionManager sessionManager;

    private final OkHttpJsonApiClient okHttpJsonApiClient;

    private final JsonKvStore revertKvStore;

    private static final int UPLOAD_COUNT_THRESHOLD = 5;

    private static final String REVERT_PERCENTAGE_FOR_MESSAGE = &quot;50%&quot;;

<span class="fc" id="L50">    private final String REVERT_SHARED_PREFERENCE = &quot;revertCount&quot;;</span>

<span class="fc" id="L52">    private final String UPLOAD_SHARED_PREFERENCE = &quot;uploadCount&quot;;</span>

    /**
     * constructor to set the parameters for quiz
     * @param sessionManager
     * @param okHttpJsonApiClient
     */
    @Inject
<span class="fc" id="L60">    public QuizChecker(SessionManager sessionManager, OkHttpJsonApiClient okHttpJsonApiClient, @Named(&quot;default_preferences&quot;) JsonKvStore revertKvStore) {</span>
<span class="fc" id="L61">        this.sessionManager = sessionManager;</span>
<span class="fc" id="L62">        this.okHttpJsonApiClient = okHttpJsonApiClient;</span>
<span class="fc" id="L63">        this.revertKvStore = revertKvStore;</span>
<span class="fc" id="L64">    }</span>

    public void initQuizCheck(Activity activity) {
<span class="nc bnc" id="L67" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1994)) {</span>
<span class="nc" id="L68">            calculateRevertParameterAndShowQuiz(activity);</span>
        }
<span class="nc" id="L70">    }</span>

    public void cleanup() {
<span class="pc bpc" id="L73" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1995)) {</span>
<span class="fc" id="L74">            compositeDisposable.clear();</span>
        }
<span class="fc" id="L76">    }</span>

    /**
     * to fet the total number of images uploaded
     */
    private void setUploadCount() {
<span class="nc bnc" id="L82" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1996)) {</span>
<span class="nc" id="L83">            compositeDisposable.add(okHttpJsonApiClient.getUploadCount(sessionManager.getUserName()).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(this::setTotalUploadCount, t -&gt; Timber.e(t, &quot;Fetching upload count failed&quot;)));</span>
        }
<span class="nc" id="L85">    }</span>

    /**
     * set the sub Title of Contibutions Activity and
     * call function to check for quiz
     * @param uploadCount user's upload count
     */
    private void setTotalUploadCount(int uploadCount) {
<span class="nc bnc" id="L93" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2001)) {</span>
<span class="nc bnc" id="L94" title="All 8 branches missed.">            totalUploadCount = (ListenerUtil.mutListener.listen(2000) ? (uploadCount % revertKvStore.getInt(UPLOAD_SHARED_PREFERENCE, 0)) : (ListenerUtil.mutListener.listen(1999) ? (uploadCount / revertKvStore.getInt(UPLOAD_SHARED_PREFERENCE, 0)) : (ListenerUtil.mutListener.listen(1998) ? (uploadCount * revertKvStore.getInt(UPLOAD_SHARED_PREFERENCE, 0)) : (ListenerUtil.mutListener.listen(1997) ? (uploadCount + revertKvStore.getInt(UPLOAD_SHARED_PREFERENCE, 0)) : (uploadCount - revertKvStore.getInt(UPLOAD_SHARED_PREFERENCE, 0))))));</span>
        }
<span class="nc bnc" id="L96" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2009)) {</span>
<span class="nc bnc" id="L97" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(2006) ? (totalUploadCount &gt;= 0) : (ListenerUtil.mutListener.listen(2005) ? (totalUploadCount &lt;= 0) : (ListenerUtil.mutListener.listen(2004) ? (totalUploadCount &gt; 0) : (ListenerUtil.mutListener.listen(2003) ? (totalUploadCount != 0) : (ListenerUtil.mutListener.listen(2002) ? (totalUploadCount == 0) : (totalUploadCount &lt; 0))))))) {</span>
<span class="nc bnc" id="L98" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(2007)) {</span>
<span class="nc" id="L99">                    totalUploadCount = 0;</span>
                }
<span class="nc bnc" id="L101" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(2008)) {</span>
<span class="nc" id="L102">                    revertKvStore.putInt(UPLOAD_SHARED_PREFERENCE, 0);</span>
                }
            }
        }
<span class="nc bnc" id="L106" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2010)) {</span>
<span class="nc" id="L107">            isUploadCountFetched = true;</span>
        }
<span class="nc" id="L109">    }</span>

    /**
     * To call the API to get reverts count in form of JSONObject
     */
    private void setRevertCount() {
<span class="nc bnc" id="L115" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2011)) {</span>
<span class="nc" id="L116">            compositeDisposable.add(okHttpJsonApiClient.getAchievements(sessionManager.getUserName()).subscribeOn(Schedulers.io()).observeOn(AndroidSchedulers.mainThread()).subscribe(response -&gt; {</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">                if (response != null) {</span>
<span class="nc" id="L118">                    setRevertParameter(response.getDeletedUploads());</span>
                }
<span class="nc" id="L120">            }, throwable -&gt; Timber.e(throwable, &quot;Fetching feedback failed&quot;)));</span>
        }
<span class="nc" id="L122">    }</span>

    /**
     * to calculate the number of images reverted after previous quiz
     * @param revertCountFetched count of deleted uploads
     */
    private void setRevertParameter(int revertCountFetched) {
<span class="nc bnc" id="L129" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2016)) {</span>
<span class="nc bnc" id="L130" title="All 8 branches missed.">            revertCount = (ListenerUtil.mutListener.listen(2015) ? (revertCountFetched % revertKvStore.getInt(REVERT_SHARED_PREFERENCE, 0)) : (ListenerUtil.mutListener.listen(2014) ? (revertCountFetched / revertKvStore.getInt(REVERT_SHARED_PREFERENCE, 0)) : (ListenerUtil.mutListener.listen(2013) ? (revertCountFetched * revertKvStore.getInt(REVERT_SHARED_PREFERENCE, 0)) : (ListenerUtil.mutListener.listen(2012) ? (revertCountFetched + revertKvStore.getInt(REVERT_SHARED_PREFERENCE, 0)) : (revertCountFetched - revertKvStore.getInt(REVERT_SHARED_PREFERENCE, 0))))));</span>
        }
<span class="nc bnc" id="L132" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2024)) {</span>
<span class="nc bnc" id="L133" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(2021) ? (revertCount &gt;= 0) : (ListenerUtil.mutListener.listen(2020) ? (revertCount &lt;= 0) : (ListenerUtil.mutListener.listen(2019) ? (revertCount &gt; 0) : (ListenerUtil.mutListener.listen(2018) ? (revertCount != 0) : (ListenerUtil.mutListener.listen(2017) ? (revertCount == 0) : (revertCount &lt; 0))))))) {</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(2022)) {</span>
<span class="nc" id="L135">                    revertCount = 0;</span>
                }
<span class="nc bnc" id="L137" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(2023)) {</span>
<span class="nc" id="L138">                    revertKvStore.putInt(REVERT_SHARED_PREFERENCE, 0);</span>
                }
            }
        }
<span class="nc bnc" id="L142" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2025)) {</span>
<span class="nc" id="L143">            isRevertCountFetched = true;</span>
        }
<span class="nc" id="L145">    }</span>

    /**
     * to check whether the criterion to call quiz is satisfied
     */
    private void calculateRevertParameterAndShowQuiz(Activity activity) {
<span class="nc bnc" id="L151" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2026)) {</span>
<span class="nc" id="L152">            setUploadCount();</span>
        }
<span class="nc bnc" id="L154" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2027)) {</span>
<span class="nc" id="L155">            setRevertCount();</span>
        }
<span class="nc bnc" id="L157" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2041)) {</span>
<span class="nc bnc" id="L158" title="All 90 branches missed.">            if ((ListenerUtil.mutListener.listen(2038) ? ((ListenerUtil.mutListener.listen(2032) ? (revertCount &gt;= 0) : (ListenerUtil.mutListener.listen(2031) ? (revertCount &lt;= 0) : (ListenerUtil.mutListener.listen(2030) ? (revertCount &gt; 0) : (ListenerUtil.mutListener.listen(2029) ? (revertCount != 0) : (ListenerUtil.mutListener.listen(2028) ? (revertCount == 0) : (revertCount &lt; 0)))))) &amp;&amp; (ListenerUtil.mutListener.listen(2037) ? (totalUploadCount &gt;= 0) : (ListenerUtil.mutListener.listen(2036) ? (totalUploadCount &lt;= 0) : (ListenerUtil.mutListener.listen(2035) ? (totalUploadCount &gt; 0) : (ListenerUtil.mutListener.listen(2034) ? (totalUploadCount != 0) : (ListenerUtil.mutListener.listen(2033) ? (totalUploadCount == 0) : (totalUploadCount &lt; 0))))))) : ((ListenerUtil.mutListener.listen(2032) ? (revertCount &gt;= 0) : (ListenerUtil.mutListener.listen(2031) ? (revertCount &lt;= 0) : (ListenerUtil.mutListener.listen(2030) ? (revertCount &gt; 0) : (ListenerUtil.mutListener.listen(2029) ? (revertCount != 0) : (ListenerUtil.mutListener.listen(2028) ? (revertCount == 0) : (revertCount &lt; 0)))))) || (ListenerUtil.mutListener.listen(2037) ? (totalUploadCount &gt;= 0) : (ListenerUtil.mutListener.listen(2036) ? (totalUploadCount &lt;= 0) : (ListenerUtil.mutListener.listen(2035) ? (totalUploadCount &gt; 0) : (ListenerUtil.mutListener.listen(2034) ? (totalUploadCount != 0) : (ListenerUtil.mutListener.listen(2033) ? (totalUploadCount == 0) : (totalUploadCount &lt; 0))))))))) {</span>
<span class="nc bnc" id="L159" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(2039)) {</span>
<span class="nc" id="L160">                    revertKvStore.putInt(REVERT_SHARED_PREFERENCE, 0);</span>
                }
<span class="nc bnc" id="L162" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(2040)) {</span>
<span class="nc" id="L163">                    revertKvStore.putInt(UPLOAD_SHARED_PREFERENCE, 0);</span>
                }
<span class="nc" id="L165">                return;</span>
            }
        }
<span class="nc bnc" id="L168" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2064)) {</span>
<span class="nc bnc" id="L169" title="All 754 branches missed.">            if ((ListenerUtil.mutListener.listen(2062) ? ((ListenerUtil.mutListener.listen(2048) ? ((ListenerUtil.mutListener.listen(2042) ? (isRevertCountFetched || isUploadCountFetched) : (isRevertCountFetched &amp;&amp; isUploadCountFetched)) || (ListenerUtil.mutListener.listen(2047) ? (totalUploadCount &lt;= UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2046) ? (totalUploadCount &gt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2045) ? (totalUploadCount &lt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2044) ? (totalUploadCount != UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2043) ? (totalUploadCount == UPLOAD_COUNT_THRESHOLD) : (totalUploadCount &gt;= UPLOAD_COUNT_THRESHOLD))))))) : ((ListenerUtil.mutListener.listen(2042) ? (isRevertCountFetched || isUploadCountFetched) : (isRevertCountFetched &amp;&amp; isUploadCountFetched)) &amp;&amp; (ListenerUtil.mutListener.listen(2047) ? (totalUploadCount &lt;= UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2046) ? (totalUploadCount &gt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2045) ? (totalUploadCount &lt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2044) ? (totalUploadCount != UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2043) ? (totalUploadCount == UPLOAD_COUNT_THRESHOLD) : (totalUploadCount &gt;= UPLOAD_COUNT_THRESHOLD)))))))) || (ListenerUtil.mutListener.listen(2061) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &lt;= 50) : (ListenerUtil.mutListener.listen(2060) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &gt; 50) : (ListenerUtil.mutListener.listen(2059) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &lt; 50) : (ListenerUtil.mutListener.listen(2058) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) != 50) : (ListenerUtil.mutListener.listen(2057) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) == 50) : ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &gt;= 50))))))) : ((ListenerUtil.mutListener.listen(2048) ? ((ListenerUtil.mutListener.listen(2042) ? (isRevertCountFetched || isUploadCountFetched) : (isRevertCountFetched &amp;&amp; isUploadCountFetched)) || (ListenerUtil.mutListener.listen(2047) ? (totalUploadCount &lt;= UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2046) ? (totalUploadCount &gt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2045) ? (totalUploadCount &lt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2044) ? (totalUploadCount != UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2043) ? (totalUploadCount == UPLOAD_COUNT_THRESHOLD) : (totalUploadCount &gt;= UPLOAD_COUNT_THRESHOLD))))))) : ((ListenerUtil.mutListener.listen(2042) ? (isRevertCountFetched || isUploadCountFetched) : (isRevertCountFetched &amp;&amp; isUploadCountFetched)) &amp;&amp; (ListenerUtil.mutListener.listen(2047) ? (totalUploadCount &lt;= UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2046) ? (totalUploadCount &gt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2045) ? (totalUploadCount &lt; UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2044) ? (totalUploadCount != UPLOAD_COUNT_THRESHOLD) : (ListenerUtil.mutListener.listen(2043) ? (totalUploadCount == UPLOAD_COUNT_THRESHOLD) : (totalUploadCount &gt;= UPLOAD_COUNT_THRESHOLD)))))))) &amp;&amp; (ListenerUtil.mutListener.listen(2061) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &lt;= 50) : (ListenerUtil.mutListener.listen(2060) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &gt; 50) : (ListenerUtil.mutListener.listen(2059) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &lt; 50) : (ListenerUtil.mutListener.listen(2058) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) != 50) : (ListenerUtil.mutListener.listen(2057) ? ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) == 50) : ((ListenerUtil.mutListener.listen(2056) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) % totalUploadCount) : (ListenerUtil.mutListener.listen(2055) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) * totalUploadCount) : (ListenerUtil.mutListener.listen(2054) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) - totalUploadCount) : (ListenerUtil.mutListener.listen(2053) ? (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) + totalUploadCount) : (((ListenerUtil.mutListener.listen(2052) ? (revertCount % 100) : (ListenerUtil.mutListener.listen(2051) ? (revertCount / 100) : (ListenerUtil.mutListener.listen(2050) ? (revertCount - 100) : (ListenerUtil.mutListener.listen(2049) ? (revertCount + 100) : (revertCount * 100)))))) / totalUploadCount))))) &gt;= 50))))))))) {</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(2063)) {</span>
<span class="nc" id="L171">                    callQuiz(activity);</span>
                }
            }
        }
<span class="nc" id="L175">    }</span>

    /**
     * Alert which prompts to quiz
     */
    @SuppressLint(&quot;StringFormatInvalid&quot;)
    private void callQuiz(Activity activity) {
<span class="nc bnc" id="L182" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2065)) {</span>
<span class="nc" id="L183">            DialogUtil.showAlertDialog(activity, activity.getString(R.string.quiz), activity.getString(R.string.quiz_alert_message, REVERT_PERCENTAGE_FOR_MESSAGE), activity.getString(R.string.about_translate_proceed), activity.getString(android.R.string.cancel), () -&gt; startQuizActivity(activity), null);</span>
        }
<span class="nc" id="L185">    }</span>

    private void startQuizActivity(Activity activity) {
<span class="nc" id="L188">        int newRevetSharedPrefs = revertCount + revertKvStore.getInt(REVERT_SHARED_PREFERENCE, 0);</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2066)) {</span>
<span class="nc" id="L190">            revertKvStore.putInt(REVERT_SHARED_PREFERENCE, newRevetSharedPrefs);</span>
        }
<span class="nc" id="L192">        int newUploadCount = totalUploadCount + revertKvStore.getInt(UPLOAD_SHARED_PREFERENCE, 0);</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2067)) {</span>
<span class="nc" id="L194">            revertKvStore.putInt(UPLOAD_SHARED_PREFERENCE, newUploadCount);</span>
        }
<span class="nc" id="L196">        Intent i = new Intent(activity, WelcomeActivity.class);</span>
<span class="nc bnc" id="L197" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2068)) {</span>
<span class="nc" id="L198">            i.putExtra(&quot;isQuiz&quot;, true);</span>
        }
<span class="nc bnc" id="L200" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2069)) {</span>
<span class="nc" id="L201">            activity.startActivity(i);</span>
        }
<span class="nc" id="L203">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>