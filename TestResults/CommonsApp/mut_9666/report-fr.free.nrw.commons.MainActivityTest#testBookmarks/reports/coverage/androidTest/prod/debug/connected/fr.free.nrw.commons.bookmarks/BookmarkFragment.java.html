<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BookmarkFragment.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.bookmarks</a> &gt; <span class="el_source">BookmarkFragment.java</span></div><h1>BookmarkFragment.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.bookmarks;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.FrameLayout;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.FragmentManager;
import com.google.android.material.tabs.TabLayout;
import fr.free.nrw.commons.contributions.MainActivity;
import fr.free.nrw.commons.di.CommonsDaggerSupportFragment;
import fr.free.nrw.commons.explore.ParentViewPager;
import fr.free.nrw.commons.kvstore.JsonKvStore;
import fr.free.nrw.commons.theme.BaseActivity;
import javax.inject.Inject;
import butterknife.BindView;
import butterknife.ButterKnife;
import fr.free.nrw.commons.R;
import fr.free.nrw.commons.contributions.ContributionController;
import javax.inject.Named;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

<span class="fc" id="L25">public class BookmarkFragment extends CommonsDaggerSupportFragment {</span>

    private FragmentManager supportFragmentManager;

    private BookmarksPagerAdapter adapter;

    @BindView(R.id.viewPagerBookmarks)
    ParentViewPager viewPager;

    @BindView(R.id.tab_layout)
    TabLayout tabLayout;

    @BindView(R.id.fragmentContainer)
    FrameLayout fragmentContainer;

    @Inject
    ContributionController controller;

    /**
     * To check if the user is loggedIn or not.
     */
    @Inject
    @Named(&quot;default_preferences&quot;)
    public JsonKvStore applicationKvStore;

    @NonNull
    public static BookmarkFragment newInstance() {
<span class="fc" id="L52">        BookmarkFragment fragment = new BookmarkFragment();</span>
<span class="pc bpc" id="L53" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5084)) {</span>
<span class="fc" id="L54">            fragment.setRetainInstance(true);</span>
        }
<span class="fc" id="L56">        return fragment;</span>
    }

    public void setScroll(boolean canScroll) {
<span class="nc bnc" id="L60" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5085)) {</span>
<span class="nc" id="L61">            viewPager.setCanScroll(canScroll);</span>
        }
<span class="nc" id="L63">    }</span>

    @Override
    public void onCreate(@Nullable final Bundle savedInstanceState) {
<span class="pc bpc" id="L67" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5086)) {</span>
<span class="fc" id="L68">            super.onCreate(savedInstanceState);</span>
        }
<span class="fc" id="L70">    }</span>

    @Nullable
    @Override
    public View onCreateView(@NonNull final LayoutInflater inflater, @Nullable final ViewGroup container, @Nullable final Bundle savedInstanceState) {
<span class="pc bpc" id="L75" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5087)) {</span>
<span class="fc" id="L76">            super.onCreateView(inflater, container, savedInstanceState);</span>
        }
<span class="fc" id="L78">        View view = inflater.inflate(R.layout.fragment_bookmarks, container, false);</span>
<span class="pc bpc" id="L79" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5088)) {</span>
<span class="fc" id="L80">            ButterKnife.bind(this, view);</span>
        }
<span class="pc bpc" id="L82" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5089)) {</span>
            // reference to the Fragment from FragmentManager, using findFragmentById()
<span class="fc" id="L84">            supportFragmentManager = getChildFragmentManager();</span>
        }
<span class="pc bpc" id="L86" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5090)) {</span>
<span class="fc" id="L87">            adapter = new BookmarksPagerAdapter(supportFragmentManager, getContext(), applicationKvStore.getBoolean(&quot;login_skipped&quot;));</span>
        }
<span class="pc bpc" id="L89" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5091)) {</span>
<span class="fc" id="L90">            viewPager.setAdapter(adapter);</span>
        }
<span class="pc bpc" id="L92" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5092)) {</span>
<span class="fc" id="L93">            tabLayout.setupWithViewPager(viewPager);</span>
        }
<span class="pc bpc" id="L95" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5093)) {</span>
<span class="fc" id="L96">            ((MainActivity) getActivity()).showTabs();</span>
        }
<span class="pc bpc" id="L98" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5094)) {</span>
<span class="fc" id="L99">            ((BaseActivity) getActivity()).getSupportActionBar().setDisplayHomeAsUpEnabled(false);</span>
        }
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5095)) {</span>
<span class="fc" id="L102">            setupTabLayout();</span>
        }
<span class="fc" id="L104">        return view;</span>
    }

    /**
     * This method sets up the tab layout. If the adapter has only one element it sets the
     * visibility of tabLayout to gone.
     */
    public void setupTabLayout() {
<span class="pc bpc" id="L112" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5096)) {</span>
<span class="fc" id="L113">            tabLayout.setVisibility(View.VISIBLE);</span>
        }
<span class="pc bpc" id="L115" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5098)) {</span>
<span class="pc bpc" id="L116" title="1 of 2 branches missed.">            if (adapter.getCount() == 1) {</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5097)) {</span>
<span class="nc" id="L118">                    tabLayout.setVisibility(View.GONE);</span>
                }
            }
        }
<span class="fc" id="L122">    }</span>

    public void onBackPressed() {
<span class="nc bnc" id="L125" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5099)) {</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">            if (((BookmarkListRootFragment) (adapter.getItem(tabLayout.getSelectedTabPosition()))).backPressed()) {</span>
                // The event is handled internally by the adapter , no further action required.
<span class="nc" id="L128">                return;</span>
            }
        }
<span class="nc bnc" id="L131" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5100)) {</span>
            // Event is not handled by the adapter ( performed back action ) change action bar.
<span class="nc" id="L133">            ((BaseActivity) getActivity()).getSupportActionBar().setDisplayHomeAsUpEnabled(false);</span>
        }
<span class="nc" id="L135">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>