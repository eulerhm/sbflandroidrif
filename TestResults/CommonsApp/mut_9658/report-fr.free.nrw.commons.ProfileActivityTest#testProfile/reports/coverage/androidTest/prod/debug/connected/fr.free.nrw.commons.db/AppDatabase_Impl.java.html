<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AppDatabase_Impl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.db</a> &gt; <span class="el_source">AppDatabase_Impl.java</span></div><h1>AppDatabase_Impl.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.db;

import androidx.annotation.NonNull;
import androidx.room.DatabaseConfiguration;
import androidx.room.InvalidationTracker;
import androidx.room.RoomOpenHelper;
import androidx.room.RoomOpenHelper.Delegate;
import androidx.room.RoomOpenHelper.ValidationResult;
import androidx.room.migration.AutoMigrationSpec;
import androidx.room.migration.Migration;
import androidx.room.util.DBUtil;
import androidx.room.util.TableInfo;
import androidx.room.util.TableInfo.Column;
import androidx.room.util.TableInfo.ForeignKey;
import androidx.room.util.TableInfo.Index;
import androidx.sqlite.db.SupportSQLiteDatabase;
import androidx.sqlite.db.SupportSQLiteOpenHelper;
import androidx.sqlite.db.SupportSQLiteOpenHelper.Callback;
import androidx.sqlite.db.SupportSQLiteOpenHelper.Configuration;
import fr.free.nrw.commons.contributions.ContributionDao;
import fr.free.nrw.commons.contributions.ContributionDao_Impl;
import fr.free.nrw.commons.customselector.database.NotForUploadStatusDao;
import fr.free.nrw.commons.customselector.database.NotForUploadStatusDao_Impl;
import fr.free.nrw.commons.customselector.database.UploadedStatusDao;
import fr.free.nrw.commons.customselector.database.UploadedStatusDao_Impl;
import fr.free.nrw.commons.review.ReviewDao;
import fr.free.nrw.commons.review.ReviewDao_Impl;
import fr.free.nrw.commons.upload.depicts.DepictsDao;
import fr.free.nrw.commons.upload.depicts.DepictsDao_Impl;
import java.lang.Class;
import java.lang.Override;
import java.lang.String;
import java.lang.SuppressWarnings;
import java.util.Arrays;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;

@SuppressWarnings({&quot;unchecked&quot;, &quot;deprecation&quot;})
<span class="fc" id="L42">public final class AppDatabase_Impl extends AppDatabase {</span>
  private volatile ContributionDao _contributionDao;

  private volatile DepictsDao _depictsDao;

  private volatile UploadedStatusDao _uploadedStatusDao;

  private volatile NotForUploadStatusDao _notForUploadStatusDao;

  private volatile ReviewDao _reviewDao;

  @Override
  protected SupportSQLiteOpenHelper createOpenHelper(DatabaseConfiguration configuration) {
<span class="fc" id="L55">    final SupportSQLiteOpenHelper.Callback _openCallback = new RoomOpenHelper(configuration, new RoomOpenHelper.Delegate(16) {</span>
      @Override
      public void createAllTables(SupportSQLiteDatabase _db) {
<span class="nc" id="L58">        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `contribution` (`pageId` TEXT NOT NULL, `state` INTEGER NOT NULL, `transferred` INTEGER NOT NULL, `decimalCoords` TEXT, `dateCreatedSource` TEXT, `wikidataPlace` TEXT, `chunkInfo` TEXT, `depictedItems` TEXT NOT NULL, `mimeType` TEXT, `localUri` TEXT, `dataLength` INTEGER NOT NULL, `dateCreated` INTEGER, `dateCreatedString` TEXT, `dateModified` INTEGER, `hasInvalidLocation` INTEGER NOT NULL, `contentUri` TEXT, `countryCode` TEXT, `imageSHA1` TEXT, `retries` INTEGER NOT NULL, `media_pageId` TEXT NOT NULL, `media_thumbUrl` TEXT, `media_imageUrl` TEXT, `media_filename` TEXT, `media_fallbackDescription` TEXT, `media_dateUploaded` INTEGER, `media_license` TEXT, `media_licenseUrl` TEXT, `media_author` TEXT, `media_user` TEXT, `media_categories` TEXT, `media_coordinates` TEXT, `media_captions` TEXT NOT NULL, `media_descriptions` TEXT NOT NULL, `media_depictionIds` TEXT NOT NULL, `media_categoriesHiddenStatus` TEXT NOT NULL, `media_addedCategories` TEXT, PRIMARY KEY(`pageId`))&quot;);</span>
<span class="nc" id="L59">        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `depicts_table` (`item` TEXT NOT NULL, `lastUsed` INTEGER NOT NULL, PRIMARY KEY(`item`))&quot;);</span>
<span class="nc" id="L60">        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `uploaded_table` (`imageSHA1` TEXT NOT NULL, `modifiedImageSHA1` TEXT NOT NULL, `imageResult` INTEGER NOT NULL, `modifiedImageResult` INTEGER NOT NULL, `lastUpdated` INTEGER, PRIMARY KEY(`imageSHA1`))&quot;);</span>
<span class="nc" id="L61">        _db.execSQL(&quot;CREATE UNIQUE INDEX IF NOT EXISTS `index_uploaded_table_modifiedImageSHA1` ON `uploaded_table` (`modifiedImageSHA1`)&quot;);</span>
<span class="nc" id="L62">        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `images_not_for_upload_table` (`imageSHA1` TEXT NOT NULL, PRIMARY KEY(`imageSHA1`))&quot;);</span>
<span class="nc" id="L63">        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS `reviewed-images` (`imageId` TEXT NOT NULL, PRIMARY KEY(`imageId`))&quot;);</span>
<span class="nc" id="L64">        _db.execSQL(&quot;CREATE TABLE IF NOT EXISTS room_master_table (id INTEGER PRIMARY KEY,identity_hash TEXT)&quot;);</span>
<span class="nc" id="L65">        _db.execSQL(&quot;INSERT OR REPLACE INTO room_master_table (id,identity_hash) VALUES(42, 'b695c4418b419999c2371b795cceac17')&quot;);</span>
<span class="nc" id="L66">      }</span>

      @Override
      public void dropAllTables(SupportSQLiteDatabase _db) {
<span class="nc" id="L70">        _db.execSQL(&quot;DROP TABLE IF EXISTS `contribution`&quot;);</span>
<span class="nc" id="L71">        _db.execSQL(&quot;DROP TABLE IF EXISTS `depicts_table`&quot;);</span>
<span class="nc" id="L72">        _db.execSQL(&quot;DROP TABLE IF EXISTS `uploaded_table`&quot;);</span>
<span class="nc" id="L73">        _db.execSQL(&quot;DROP TABLE IF EXISTS `images_not_for_upload_table`&quot;);</span>
<span class="nc" id="L74">        _db.execSQL(&quot;DROP TABLE IF EXISTS `reviewed-images`&quot;);</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">        if (mCallbacks != null) {</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">          for (int _i = 0, _size = mCallbacks.size(); _i &lt; _size; _i++) {</span>
<span class="nc" id="L77">            mCallbacks.get(_i).onDestructiveMigration(_db);</span>
          }
        }
<span class="nc" id="L80">      }</span>

      @Override
      public void onCreate(SupportSQLiteDatabase _db) {
<span class="nc bnc" id="L84" title="All 2 branches missed.">        if (mCallbacks != null) {</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">          for (int _i = 0, _size = mCallbacks.size(); _i &lt; _size; _i++) {</span>
<span class="nc" id="L86">            mCallbacks.get(_i).onCreate(_db);</span>
          }
        }
<span class="nc" id="L89">      }</span>

      @Override
      public void onOpen(SupportSQLiteDatabase _db) {
<span class="fc" id="L93">        mDatabase = _db;</span>
<span class="fc" id="L94">        internalInitInvalidationTracker(_db);</span>
<span class="pc bpc" id="L95" title="1 of 2 branches missed.">        if (mCallbacks != null) {</span>
<span class="pc bpc" id="L96" title="1 of 2 branches missed.">          for (int _i = 0, _size = mCallbacks.size(); _i &lt; _size; _i++) {</span>
<span class="nc" id="L97">            mCallbacks.get(_i).onOpen(_db);</span>
          }
        }
<span class="fc" id="L100">      }</span>

      @Override
      public void onPreMigrate(SupportSQLiteDatabase _db) {
<span class="nc" id="L104">        DBUtil.dropFtsSyncTriggers(_db);</span>
<span class="nc" id="L105">      }</span>

      @Override
      public void onPostMigrate(SupportSQLiteDatabase _db) {
<span class="nc" id="L109">      }</span>

      @Override
      public RoomOpenHelper.ValidationResult onValidateSchema(SupportSQLiteDatabase _db) {
<span class="nc" id="L113">        final HashMap&lt;String, TableInfo.Column&gt; _columnsContribution = new HashMap&lt;String, TableInfo.Column&gt;(36);</span>
<span class="nc" id="L114">        _columnsContribution.put(&quot;pageId&quot;, new TableInfo.Column(&quot;pageId&quot;, &quot;TEXT&quot;, true, 1, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L115">        _columnsContribution.put(&quot;state&quot;, new TableInfo.Column(&quot;state&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L116">        _columnsContribution.put(&quot;transferred&quot;, new TableInfo.Column(&quot;transferred&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L117">        _columnsContribution.put(&quot;decimalCoords&quot;, new TableInfo.Column(&quot;decimalCoords&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L118">        _columnsContribution.put(&quot;dateCreatedSource&quot;, new TableInfo.Column(&quot;dateCreatedSource&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L119">        _columnsContribution.put(&quot;wikidataPlace&quot;, new TableInfo.Column(&quot;wikidataPlace&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L120">        _columnsContribution.put(&quot;chunkInfo&quot;, new TableInfo.Column(&quot;chunkInfo&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L121">        _columnsContribution.put(&quot;depictedItems&quot;, new TableInfo.Column(&quot;depictedItems&quot;, &quot;TEXT&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L122">        _columnsContribution.put(&quot;mimeType&quot;, new TableInfo.Column(&quot;mimeType&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L123">        _columnsContribution.put(&quot;localUri&quot;, new TableInfo.Column(&quot;localUri&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L124">        _columnsContribution.put(&quot;dataLength&quot;, new TableInfo.Column(&quot;dataLength&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L125">        _columnsContribution.put(&quot;dateCreated&quot;, new TableInfo.Column(&quot;dateCreated&quot;, &quot;INTEGER&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L126">        _columnsContribution.put(&quot;dateCreatedString&quot;, new TableInfo.Column(&quot;dateCreatedString&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L127">        _columnsContribution.put(&quot;dateModified&quot;, new TableInfo.Column(&quot;dateModified&quot;, &quot;INTEGER&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L128">        _columnsContribution.put(&quot;hasInvalidLocation&quot;, new TableInfo.Column(&quot;hasInvalidLocation&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L129">        _columnsContribution.put(&quot;contentUri&quot;, new TableInfo.Column(&quot;contentUri&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L130">        _columnsContribution.put(&quot;countryCode&quot;, new TableInfo.Column(&quot;countryCode&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L131">        _columnsContribution.put(&quot;imageSHA1&quot;, new TableInfo.Column(&quot;imageSHA1&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L132">        _columnsContribution.put(&quot;retries&quot;, new TableInfo.Column(&quot;retries&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L133">        _columnsContribution.put(&quot;media_pageId&quot;, new TableInfo.Column(&quot;media_pageId&quot;, &quot;TEXT&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L134">        _columnsContribution.put(&quot;media_thumbUrl&quot;, new TableInfo.Column(&quot;media_thumbUrl&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L135">        _columnsContribution.put(&quot;media_imageUrl&quot;, new TableInfo.Column(&quot;media_imageUrl&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L136">        _columnsContribution.put(&quot;media_filename&quot;, new TableInfo.Column(&quot;media_filename&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L137">        _columnsContribution.put(&quot;media_fallbackDescription&quot;, new TableInfo.Column(&quot;media_fallbackDescription&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L138">        _columnsContribution.put(&quot;media_dateUploaded&quot;, new TableInfo.Column(&quot;media_dateUploaded&quot;, &quot;INTEGER&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L139">        _columnsContribution.put(&quot;media_license&quot;, new TableInfo.Column(&quot;media_license&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L140">        _columnsContribution.put(&quot;media_licenseUrl&quot;, new TableInfo.Column(&quot;media_licenseUrl&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L141">        _columnsContribution.put(&quot;media_author&quot;, new TableInfo.Column(&quot;media_author&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L142">        _columnsContribution.put(&quot;media_user&quot;, new TableInfo.Column(&quot;media_user&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L143">        _columnsContribution.put(&quot;media_categories&quot;, new TableInfo.Column(&quot;media_categories&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L144">        _columnsContribution.put(&quot;media_coordinates&quot;, new TableInfo.Column(&quot;media_coordinates&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L145">        _columnsContribution.put(&quot;media_captions&quot;, new TableInfo.Column(&quot;media_captions&quot;, &quot;TEXT&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L146">        _columnsContribution.put(&quot;media_descriptions&quot;, new TableInfo.Column(&quot;media_descriptions&quot;, &quot;TEXT&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L147">        _columnsContribution.put(&quot;media_depictionIds&quot;, new TableInfo.Column(&quot;media_depictionIds&quot;, &quot;TEXT&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L148">        _columnsContribution.put(&quot;media_categoriesHiddenStatus&quot;, new TableInfo.Column(&quot;media_categoriesHiddenStatus&quot;, &quot;TEXT&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L149">        _columnsContribution.put(&quot;media_addedCategories&quot;, new TableInfo.Column(&quot;media_addedCategories&quot;, &quot;TEXT&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L150">        final HashSet&lt;TableInfo.ForeignKey&gt; _foreignKeysContribution = new HashSet&lt;TableInfo.ForeignKey&gt;(0);</span>
<span class="nc" id="L151">        final HashSet&lt;TableInfo.Index&gt; _indicesContribution = new HashSet&lt;TableInfo.Index&gt;(0);</span>
<span class="nc" id="L152">        final TableInfo _infoContribution = new TableInfo(&quot;contribution&quot;, _columnsContribution, _foreignKeysContribution, _indicesContribution);</span>
<span class="nc" id="L153">        final TableInfo _existingContribution = TableInfo.read(_db, &quot;contribution&quot;);</span>
<span class="nc bnc" id="L154" title="All 2 branches missed.">        if (! _infoContribution.equals(_existingContribution)) {</span>
<span class="nc" id="L155">          return new RoomOpenHelper.ValidationResult(false, &quot;contribution(fr.free.nrw.commons.contributions.Contribution).\n&quot;</span>
                  + &quot; Expected:\n&quot; + _infoContribution + &quot;\n&quot;
                  + &quot; Found:\n&quot; + _existingContribution);
        }
<span class="nc" id="L159">        final HashMap&lt;String, TableInfo.Column&gt; _columnsDepictsTable = new HashMap&lt;String, TableInfo.Column&gt;(2);</span>
<span class="nc" id="L160">        _columnsDepictsTable.put(&quot;item&quot;, new TableInfo.Column(&quot;item&quot;, &quot;TEXT&quot;, true, 1, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L161">        _columnsDepictsTable.put(&quot;lastUsed&quot;, new TableInfo.Column(&quot;lastUsed&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L162">        final HashSet&lt;TableInfo.ForeignKey&gt; _foreignKeysDepictsTable = new HashSet&lt;TableInfo.ForeignKey&gt;(0);</span>
<span class="nc" id="L163">        final HashSet&lt;TableInfo.Index&gt; _indicesDepictsTable = new HashSet&lt;TableInfo.Index&gt;(0);</span>
<span class="nc" id="L164">        final TableInfo _infoDepictsTable = new TableInfo(&quot;depicts_table&quot;, _columnsDepictsTable, _foreignKeysDepictsTable, _indicesDepictsTable);</span>
<span class="nc" id="L165">        final TableInfo _existingDepictsTable = TableInfo.read(_db, &quot;depicts_table&quot;);</span>
<span class="nc bnc" id="L166" title="All 2 branches missed.">        if (! _infoDepictsTable.equals(_existingDepictsTable)) {</span>
<span class="nc" id="L167">          return new RoomOpenHelper.ValidationResult(false, &quot;depicts_table(fr.free.nrw.commons.upload.depicts.Depicts).\n&quot;</span>
                  + &quot; Expected:\n&quot; + _infoDepictsTable + &quot;\n&quot;
                  + &quot; Found:\n&quot; + _existingDepictsTable);
        }
<span class="nc" id="L171">        final HashMap&lt;String, TableInfo.Column&gt; _columnsUploadedTable = new HashMap&lt;String, TableInfo.Column&gt;(5);</span>
<span class="nc" id="L172">        _columnsUploadedTable.put(&quot;imageSHA1&quot;, new TableInfo.Column(&quot;imageSHA1&quot;, &quot;TEXT&quot;, true, 1, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L173">        _columnsUploadedTable.put(&quot;modifiedImageSHA1&quot;, new TableInfo.Column(&quot;modifiedImageSHA1&quot;, &quot;TEXT&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L174">        _columnsUploadedTable.put(&quot;imageResult&quot;, new TableInfo.Column(&quot;imageResult&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L175">        _columnsUploadedTable.put(&quot;modifiedImageResult&quot;, new TableInfo.Column(&quot;modifiedImageResult&quot;, &quot;INTEGER&quot;, true, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L176">        _columnsUploadedTable.put(&quot;lastUpdated&quot;, new TableInfo.Column(&quot;lastUpdated&quot;, &quot;INTEGER&quot;, false, 0, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L177">        final HashSet&lt;TableInfo.ForeignKey&gt; _foreignKeysUploadedTable = new HashSet&lt;TableInfo.ForeignKey&gt;(0);</span>
<span class="nc" id="L178">        final HashSet&lt;TableInfo.Index&gt; _indicesUploadedTable = new HashSet&lt;TableInfo.Index&gt;(1);</span>
<span class="nc" id="L179">        _indicesUploadedTable.add(new TableInfo.Index(&quot;index_uploaded_table_modifiedImageSHA1&quot;, true, Arrays.asList(&quot;modifiedImageSHA1&quot;), Arrays.asList(&quot;ASC&quot;)));</span>
<span class="nc" id="L180">        final TableInfo _infoUploadedTable = new TableInfo(&quot;uploaded_table&quot;, _columnsUploadedTable, _foreignKeysUploadedTable, _indicesUploadedTable);</span>
<span class="nc" id="L181">        final TableInfo _existingUploadedTable = TableInfo.read(_db, &quot;uploaded_table&quot;);</span>
<span class="nc bnc" id="L182" title="All 2 branches missed.">        if (! _infoUploadedTable.equals(_existingUploadedTable)) {</span>
<span class="nc" id="L183">          return new RoomOpenHelper.ValidationResult(false, &quot;uploaded_table(fr.free.nrw.commons.customselector.database.UploadedStatus).\n&quot;</span>
                  + &quot; Expected:\n&quot; + _infoUploadedTable + &quot;\n&quot;
                  + &quot; Found:\n&quot; + _existingUploadedTable);
        }
<span class="nc" id="L187">        final HashMap&lt;String, TableInfo.Column&gt; _columnsImagesNotForUploadTable = new HashMap&lt;String, TableInfo.Column&gt;(1);</span>
<span class="nc" id="L188">        _columnsImagesNotForUploadTable.put(&quot;imageSHA1&quot;, new TableInfo.Column(&quot;imageSHA1&quot;, &quot;TEXT&quot;, true, 1, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L189">        final HashSet&lt;TableInfo.ForeignKey&gt; _foreignKeysImagesNotForUploadTable = new HashSet&lt;TableInfo.ForeignKey&gt;(0);</span>
<span class="nc" id="L190">        final HashSet&lt;TableInfo.Index&gt; _indicesImagesNotForUploadTable = new HashSet&lt;TableInfo.Index&gt;(0);</span>
<span class="nc" id="L191">        final TableInfo _infoImagesNotForUploadTable = new TableInfo(&quot;images_not_for_upload_table&quot;, _columnsImagesNotForUploadTable, _foreignKeysImagesNotForUploadTable, _indicesImagesNotForUploadTable);</span>
<span class="nc" id="L192">        final TableInfo _existingImagesNotForUploadTable = TableInfo.read(_db, &quot;images_not_for_upload_table&quot;);</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">        if (! _infoImagesNotForUploadTable.equals(_existingImagesNotForUploadTable)) {</span>
<span class="nc" id="L194">          return new RoomOpenHelper.ValidationResult(false, &quot;images_not_for_upload_table(fr.free.nrw.commons.customselector.database.NotForUploadStatus).\n&quot;</span>
                  + &quot; Expected:\n&quot; + _infoImagesNotForUploadTable + &quot;\n&quot;
                  + &quot; Found:\n&quot; + _existingImagesNotForUploadTable);
        }
<span class="nc" id="L198">        final HashMap&lt;String, TableInfo.Column&gt; _columnsReviewedImages = new HashMap&lt;String, TableInfo.Column&gt;(1);</span>
<span class="nc" id="L199">        _columnsReviewedImages.put(&quot;imageId&quot;, new TableInfo.Column(&quot;imageId&quot;, &quot;TEXT&quot;, true, 1, null, TableInfo.CREATED_FROM_ENTITY));</span>
<span class="nc" id="L200">        final HashSet&lt;TableInfo.ForeignKey&gt; _foreignKeysReviewedImages = new HashSet&lt;TableInfo.ForeignKey&gt;(0);</span>
<span class="nc" id="L201">        final HashSet&lt;TableInfo.Index&gt; _indicesReviewedImages = new HashSet&lt;TableInfo.Index&gt;(0);</span>
<span class="nc" id="L202">        final TableInfo _infoReviewedImages = new TableInfo(&quot;reviewed-images&quot;, _columnsReviewedImages, _foreignKeysReviewedImages, _indicesReviewedImages);</span>
<span class="nc" id="L203">        final TableInfo _existingReviewedImages = TableInfo.read(_db, &quot;reviewed-images&quot;);</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">        if (! _infoReviewedImages.equals(_existingReviewedImages)) {</span>
<span class="nc" id="L205">          return new RoomOpenHelper.ValidationResult(false, &quot;reviewed-images(fr.free.nrw.commons.review.ReviewEntity).\n&quot;</span>
                  + &quot; Expected:\n&quot; + _infoReviewedImages + &quot;\n&quot;
                  + &quot; Found:\n&quot; + _existingReviewedImages);
        }
<span class="nc" id="L209">        return new RoomOpenHelper.ValidationResult(true, null);</span>
      }
    }, &quot;b695c4418b419999c2371b795cceac17&quot;, &quot;675958ab7438063d1c03abef9610399e&quot;);
<span class="fc" id="L212">    final SupportSQLiteOpenHelper.Configuration _sqliteConfig = SupportSQLiteOpenHelper.Configuration.builder(configuration.context)</span>
<span class="fc" id="L213">        .name(configuration.name)</span>
<span class="fc" id="L214">        .callback(_openCallback)</span>
<span class="fc" id="L215">        .build();</span>
<span class="fc" id="L216">    final SupportSQLiteOpenHelper _helper = configuration.sqliteOpenHelperFactory.create(_sqliteConfig);</span>
<span class="fc" id="L217">    return _helper;</span>
  }

  @Override
  protected InvalidationTracker createInvalidationTracker() {
<span class="fc" id="L222">    final HashMap&lt;String, String&gt; _shadowTablesMap = new HashMap&lt;String, String&gt;(0);</span>
<span class="fc" id="L223">    HashMap&lt;String, Set&lt;String&gt;&gt; _viewTables = new HashMap&lt;String, Set&lt;String&gt;&gt;(0);</span>
<span class="fc" id="L224">    return new InvalidationTracker(this, _shadowTablesMap, _viewTables, &quot;contribution&quot;,&quot;depicts_table&quot;,&quot;uploaded_table&quot;,&quot;images_not_for_upload_table&quot;,&quot;reviewed-images&quot;);</span>
  }

  @Override
  public void clearAllTables() {
<span class="nc" id="L229">    super.assertNotMainThread();</span>
<span class="nc" id="L230">    final SupportSQLiteDatabase _db = super.getOpenHelper().getWritableDatabase();</span>
    try {
<span class="nc" id="L232">      super.beginTransaction();</span>
<span class="nc" id="L233">      _db.execSQL(&quot;DELETE FROM `contribution`&quot;);</span>
<span class="nc" id="L234">      _db.execSQL(&quot;DELETE FROM `depicts_table`&quot;);</span>
<span class="nc" id="L235">      _db.execSQL(&quot;DELETE FROM `uploaded_table`&quot;);</span>
<span class="nc" id="L236">      _db.execSQL(&quot;DELETE FROM `images_not_for_upload_table`&quot;);</span>
<span class="nc" id="L237">      _db.execSQL(&quot;DELETE FROM `reviewed-images`&quot;);</span>
<span class="nc" id="L238">      super.setTransactionSuccessful();</span>
    } finally {
<span class="nc" id="L240">      super.endTransaction();</span>
<span class="nc" id="L241">      _db.query(&quot;PRAGMA wal_checkpoint(FULL)&quot;).close();</span>
<span class="nc bnc" id="L242" title="All 2 branches missed.">      if (!_db.inTransaction()) {</span>
<span class="nc" id="L243">        _db.execSQL(&quot;VACUUM&quot;);</span>
      }
    }
<span class="nc" id="L246">  }</span>

  @Override
  protected Map&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; getRequiredTypeConverters() {
<span class="fc" id="L250">    final HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt; _typeConvertersMap = new HashMap&lt;Class&lt;?&gt;, List&lt;Class&lt;?&gt;&gt;&gt;();</span>
<span class="fc" id="L251">    _typeConvertersMap.put(ContributionDao.class, ContributionDao_Impl.getRequiredConverters());</span>
<span class="fc" id="L252">    _typeConvertersMap.put(DepictsDao.class, DepictsDao_Impl.getRequiredConverters());</span>
<span class="fc" id="L253">    _typeConvertersMap.put(UploadedStatusDao.class, UploadedStatusDao_Impl.getRequiredConverters());</span>
<span class="fc" id="L254">    _typeConvertersMap.put(NotForUploadStatusDao.class, NotForUploadStatusDao_Impl.getRequiredConverters());</span>
<span class="fc" id="L255">    _typeConvertersMap.put(ReviewDao.class, ReviewDao_Impl.getRequiredConverters());</span>
<span class="fc" id="L256">    return _typeConvertersMap;</span>
  }

  @Override
  public Set&lt;Class&lt;? extends AutoMigrationSpec&gt;&gt; getRequiredAutoMigrationSpecs() {
<span class="fc" id="L261">    final HashSet&lt;Class&lt;? extends AutoMigrationSpec&gt;&gt; _autoMigrationSpecsSet = new HashSet&lt;Class&lt;? extends AutoMigrationSpec&gt;&gt;();</span>
<span class="fc" id="L262">    return _autoMigrationSpecsSet;</span>
  }

  @Override
  public List&lt;Migration&gt; getAutoMigrations(
      @NonNull Map&lt;Class&lt;? extends AutoMigrationSpec&gt;, AutoMigrationSpec&gt; autoMigrationSpecsMap) {
<span class="fc" id="L268">    return Arrays.asList();</span>
  }

  @Override
  public ContributionDao contributionDao() {
<span class="fc bfc" id="L273" title="All 2 branches covered.">    if (_contributionDao != null) {</span>
<span class="fc" id="L274">      return _contributionDao;</span>
    } else {
<span class="fc" id="L276">      synchronized(this) {</span>
<span class="pc bpc" id="L277" title="1 of 2 branches missed.">        if(_contributionDao == null) {</span>
<span class="fc" id="L278">          _contributionDao = new ContributionDao_Impl(this);</span>
        }
<span class="fc" id="L280">        return _contributionDao;</span>
      }
    }
  }

  @Override
  public DepictsDao DepictsDao() {
<span class="nc bnc" id="L287" title="All 2 branches missed.">    if (_depictsDao != null) {</span>
<span class="nc" id="L288">      return _depictsDao;</span>
    } else {
<span class="nc" id="L290">      synchronized(this) {</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">        if(_depictsDao == null) {</span>
<span class="nc" id="L292">          _depictsDao = new DepictsDao_Impl(this);</span>
        }
<span class="nc" id="L294">        return _depictsDao;</span>
      }
    }
  }

  @Override
  public UploadedStatusDao UploadedStatusDao() {
<span class="nc bnc" id="L301" title="All 2 branches missed.">    if (_uploadedStatusDao != null) {</span>
<span class="nc" id="L302">      return _uploadedStatusDao;</span>
    } else {
<span class="nc" id="L304">      synchronized(this) {</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">        if(_uploadedStatusDao == null) {</span>
<span class="nc" id="L306">          _uploadedStatusDao = new UploadedStatusDao_Impl(this);</span>
        }
<span class="nc" id="L308">        return _uploadedStatusDao;</span>
      }
    }
  }

  @Override
  public NotForUploadStatusDao NotForUploadStatusDao() {
<span class="nc bnc" id="L315" title="All 2 branches missed.">    if (_notForUploadStatusDao != null) {</span>
<span class="nc" id="L316">      return _notForUploadStatusDao;</span>
    } else {
<span class="nc" id="L318">      synchronized(this) {</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">        if(_notForUploadStatusDao == null) {</span>
<span class="nc" id="L320">          _notForUploadStatusDao = new NotForUploadStatusDao_Impl(this);</span>
        }
<span class="nc" id="L322">        return _notForUploadStatusDao;</span>
      }
    }
  }

  @Override
  public ReviewDao ReviewDao() {
<span class="nc bnc" id="L329" title="All 2 branches missed.">    if (_reviewDao != null) {</span>
<span class="nc" id="L330">      return _reviewDao;</span>
    } else {
<span class="nc" id="L332">      synchronized(this) {</span>
<span class="nc bnc" id="L333" title="All 2 branches missed.">        if(_reviewDao == null) {</span>
<span class="nc" id="L334">          _reviewDao = new ReviewDao_Impl(this);</span>
        }
<span class="nc" id="L336">        return _reviewDao;</span>
      }
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>