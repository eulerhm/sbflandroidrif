<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LatLng.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.location</a> &gt; <span class="el_source">LatLng.java</span></div><h1>LatLng.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.location;

import android.location.Location;
import android.net.Uri;
import android.os.Parcel;
import android.os.Parcelable;

import androidx.annotation.NonNull;

/**
 * a latitude and longitude point with accuracy information, often of a picture
 */
public class LatLng implements Parcelable {

    private final double latitude;
    private final double longitude;
    private final float accuracy;

    /**
     * Accepts latitude and longitude.
     * North and South values are cut off at 90°
     *
     * @param latitude the latitude
     * @param longitude the longitude
     * @param accuracy the accuracy
     *
     * Examples:
     * the Statue of Liberty is located at 40.69° N, 74.04° W
     * The Statue of Liberty could be constructed as LatLng(40.69, -74.04, 1.0)
     * where positive signifies north, east and negative signifies south, west.
     */
<span class="fc" id="L32">    public LatLng(double latitude, double longitude, float accuracy) {</span>
<span class="pc bpc" id="L33" title="2 of 4 branches missed.">        if (-180.0D &lt;= longitude &amp;&amp; longitude &lt; 180.0D) {</span>
<span class="fc" id="L34">            this.longitude = longitude;</span>
        } else {
<span class="nc" id="L36">            this.longitude = ((longitude - 180.0D) % 360.0D + 360.0D) % 360.0D - 180.0D;</span>
        }
<span class="fc" id="L38">        this.latitude = Math.max(-90.0D, Math.min(90.0D, latitude));</span>
<span class="fc" id="L39">        this.accuracy = accuracy;</span>
<span class="fc" id="L40">    }</span>
    /**
     * An alternate constructor for this class.
     * @param in A parcelable which contains the latitude, longitude, and accuracy
     */
<span class="nc" id="L45">    public LatLng(Parcel in) {</span>
<span class="nc" id="L46">        latitude = in.readDouble();</span>
<span class="nc" id="L47">        longitude = in.readDouble();</span>
<span class="nc" id="L48">        accuracy = in.readFloat();</span>
<span class="nc" id="L49">    }</span>

    /**
     * gets the latitude and longitude of a given non-null location
     * @param location the non-null location of the user
     * @return LatLng the Latitude and Longitude of a given location
     */
    public static LatLng from(@NonNull Location location) {
<span class="nc" id="L57">        return new LatLng(location.getLatitude(), location.getLongitude(), location.getAccuracy());</span>
    }

    /**
     * creates a hash code for the longitude and longitude
     */
    public int hashCode() {
<span class="nc" id="L64">        byte var1 = 1;</span>
<span class="nc" id="L65">        long var2 = Double.doubleToLongBits(this.latitude);</span>
<span class="nc" id="L66">        int var3 = 31 * var1 + (int)(var2 ^ var2 &gt;&gt;&gt; 32);</span>
<span class="nc" id="L67">        var2 = Double.doubleToLongBits(this.longitude);</span>
<span class="nc" id="L68">        var3 = 31 * var3 + (int)(var2 ^ var2 &gt;&gt;&gt; 32);</span>
<span class="nc" id="L69">        return var3;</span>
    }

    /**
     * checks for equality of two LatLng objects
     * @param o the second LatLng object
     */
    public boolean equals(Object o) {
<span class="nc bnc" id="L77" title="All 2 branches missed.">        if (this == o) {</span>
<span class="nc" id="L78">            return true;</span>
<span class="nc bnc" id="L79" title="All 2 branches missed.">        } else if (!(o instanceof LatLng)) {</span>
<span class="nc" id="L80">            return false;</span>
        } else {
<span class="nc" id="L82">            LatLng var2 = (LatLng)o;</span>
<span class="nc bnc" id="L83" title="All 4 branches missed.">            return Double.doubleToLongBits(this.latitude) == Double.doubleToLongBits(var2.latitude) &amp;&amp; Double.doubleToLongBits(this.longitude) == Double.doubleToLongBits(var2.longitude);</span>
        }
    }

    /**
     * returns a string representation of the latitude and longitude
     */
    public String toString() {
<span class="nc" id="L91">        return &quot;lat/lng: (&quot; + this.latitude + &quot;,&quot; + this.longitude + &quot;)&quot;;</span>
    }

    /**
     * Rounds the float to 4 digits and returns absolute value.
     *
     * @param coordinate A coordinate value as string.
     * @return String of the rounded number.
     */
    private String formatCoordinate(double coordinate) {
<span class="nc" id="L101">        double roundedNumber = Math.round(coordinate * 10000d) / 10000d;</span>
<span class="nc" id="L102">        double absoluteNumber = Math.abs(roundedNumber);</span>
<span class="nc" id="L103">        return String.valueOf(absoluteNumber);</span>
    }

    /**
     * Returns &quot;N&quot; or &quot;S&quot; depending on the latitude.
     *
     * @return &quot;N&quot; or &quot;S&quot;.
     */
    private String getNorthSouth() {
<span class="nc bnc" id="L112" title="All 2 branches missed.">        if (this.latitude &lt; 0) {</span>
<span class="nc" id="L113">            return &quot;S&quot;;</span>
        }

<span class="nc" id="L116">        return &quot;N&quot;;</span>
    }

    /**
     * Returns &quot;E&quot; or &quot;W&quot; depending on the longitude.
     *
     * @return &quot;E&quot; or &quot;W&quot;.
     */
    private String getEastWest() {
<span class="nc bnc" id="L125" title="All 4 branches missed.">        if (this.longitude &gt;= 0 &amp;&amp; this.longitude &lt; 180) {</span>
<span class="nc" id="L126">            return &quot;E&quot;;</span>
        }

<span class="nc" id="L129">        return &quot;W&quot;;</span>
    }

    /**
     * Returns a nicely formatted coordinate string. Used e.g. in
     * the detail view.
     *
     * @return The formatted string.
     */
    public String getPrettyCoordinateString() {
<span class="nc" id="L139">        return formatCoordinate(this.latitude) + &quot; &quot; + this.getNorthSouth() + &quot;, &quot;</span>
<span class="nc" id="L140">               + formatCoordinate(this.longitude) + &quot; &quot; + this.getEastWest();</span>
    }

    /**
     * Return the location accuracy in meter.
     *
     * @return float
     */
    public float getAccuracy() {
<span class="nc" id="L149">        return accuracy;</span>
    }

    /**
     * Return the longitude in degrees.
     *
     * @return double
     */
    public double getLongitude() {
<span class="nc" id="L158">        return longitude;</span>
    }

    /**
     * Return the latitude in degrees.
     *
     * @return double
     */
    public double getLatitude() {
<span class="nc" id="L167">        return latitude;</span>
    }

    public Uri getGmmIntentUri() {
<span class="nc" id="L171">        return Uri.parse(&quot;geo:&quot; + latitude + &quot;,&quot; + longitude + &quot;?z=16&quot;);</span>
    }

    @Override
    public int describeContents() {
<span class="nc" id="L176">        return 0;</span>
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
<span class="nc" id="L181">        dest.writeDouble(latitude);</span>
<span class="nc" id="L182">        dest.writeDouble(longitude);</span>
<span class="nc" id="L183">        dest.writeFloat(accuracy);</span>
<span class="nc" id="L184">    }</span>

<span class="fc" id="L186">    public static final Creator&lt;LatLng&gt; CREATOR = new Creator&lt;LatLng&gt;() {</span>
        @Override
        public LatLng createFromParcel(Parcel in) {
<span class="nc" id="L189">            return new LatLng(in);</span>
        }

        @Override
        public LatLng[] newArray(int size) {
<span class="nc" id="L194">            return new LatLng[size];</span>
        }
    };
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>