<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Converters.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.db</a> &gt; <span class="el_source">Converters.java</span></div><h1>Converters.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.db;

import android.net.Uri;
import androidx.room.TypeConverter;
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;
import fr.free.nrw.commons.CommonsApplication;
import fr.free.nrw.commons.contributions.ChunkInfo;
import fr.free.nrw.commons.di.ApplicationlessInjection;
import fr.free.nrw.commons.location.LatLng;
import fr.free.nrw.commons.upload.WikidataPlace;
import fr.free.nrw.commons.upload.structure.depictions.DepictedItem;
import java.util.Date;
import java.util.List;
import java.util.Map;

/**
 * This class supplies converters to write/read types to/from the database.
 */
<span class="nc" id="L20">public class Converters {</span>

    public static Gson getGson() {
<span class="nc" id="L23">        return ApplicationlessInjection.getInstance(CommonsApplication.getInstance()).getCommonsApplicationComponent().gson();</span>
    }

    /**
     * convert DepictedItem object to string
     * input Example -&gt; DepictedItem depictedItem=new DepictedItem ()
     * output Example -&gt; string
     */
    @TypeConverter
    public static String depictsItemToString(DepictedItem objects) {
<span class="nc" id="L33">        return writeObjectToString(objects);</span>
    }

    /**
     * convert string to DepictedItem object
     * output Example -&gt; DepictedItem depictedItem=new DepictedItem ()
     * input Example -&gt; string 
     */
    @TypeConverter
    public static DepictedItem stringToDepicts(String objectList) {
<span class="nc" id="L43">        return readObjectWithTypeToken(objectList, new TypeToken&lt;DepictedItem&gt;() {</span>
        });
    }

    @TypeConverter
    public static Date fromTimestamp(Long value) {
<span class="nc bnc" id="L49" title="All 2 branches missed.">        return value == null ? null : new Date(value);</span>
    }

    @TypeConverter
    public static Long dateToTimestamp(Date date) {
<span class="nc bnc" id="L54" title="All 2 branches missed.">        return date == null ? null : date.getTime();</span>
    }

    @TypeConverter
    public static Uri fromString(String value) {
<span class="nc bnc" id="L59" title="All 2 branches missed.">        return value == null ? null : Uri.parse(value);</span>
    }

    @TypeConverter
    public static String uriToString(Uri uri) {
<span class="nc bnc" id="L64" title="All 2 branches missed.">        return uri == null ? null : uri.toString();</span>
    }

    @TypeConverter
    public static String listObjectToString(List&lt;String&gt; objectList) {
<span class="nc" id="L69">        return writeObjectToString(objectList);</span>
    }

    @TypeConverter
    public static List&lt;String&gt; stringToListObject(String objectList) {
<span class="nc" id="L74">        return readObjectWithTypeToken(objectList, new TypeToken&lt;List&lt;String&gt;&gt;() {});</span>
    }

    @TypeConverter
    public static String mapObjectToString(Map&lt;String,String&gt; objectList) {
<span class="nc" id="L79">        return writeObjectToString(objectList);</span>
    }

    @TypeConverter
    public static String mapObjectToString2(Map&lt;String,Boolean&gt; objectList) {
<span class="nc" id="L84">        return writeObjectToString(objectList);</span>
    }

    @TypeConverter
    public static Map&lt;String,String&gt; stringToMap(String objectList) {
<span class="nc" id="L89">        return readObjectWithTypeToken(objectList, new TypeToken&lt;Map&lt;String,String&gt;&gt;(){});</span>
    }

    @TypeConverter
    public static Map&lt;String,Boolean&gt; stringToMap2(String objectList) {
<span class="nc" id="L94">        return readObjectWithTypeToken(objectList, new TypeToken&lt;Map&lt;String,Boolean&gt;&gt;(){});</span>
    }

    @TypeConverter
    public static String latlngObjectToString(LatLng latlng) {
<span class="nc" id="L99">        return writeObjectToString(latlng);</span>
    }

    @TypeConverter
    public static LatLng stringToLatLng(String objectList) {
<span class="nc" id="L104">        return readObjectFromString(objectList,LatLng.class);</span>
    }

    @TypeConverter
    public static String wikidataPlaceToString(WikidataPlace wikidataPlace) {
<span class="nc" id="L109">        return writeObjectToString(wikidataPlace);</span>
    }

    @TypeConverter
    public static WikidataPlace stringToWikidataPlace(String wikidataPlace) {
<span class="nc" id="L114">        return readObjectFromString(wikidataPlace, WikidataPlace.class);</span>
    }

    @TypeConverter
    public static String chunkInfoToString(ChunkInfo chunkInfo) {
<span class="nc" id="L119">        return writeObjectToString(chunkInfo);</span>
    }

    @TypeConverter
    public static ChunkInfo stringToChunkInfo(String chunkInfo) {
<span class="nc" id="L124">        return readObjectFromString(chunkInfo, ChunkInfo.class);</span>
    }

    @TypeConverter
    public static String depictionListToString(List&lt;DepictedItem&gt; depictedItems) {
<span class="nc" id="L129">        return writeObjectToString(depictedItems);</span>
    }

    @TypeConverter
    public static List&lt;DepictedItem&gt; stringToList(String depictedItems) {
<span class="nc" id="L134">        return readObjectWithTypeToken(depictedItems, new TypeToken&lt;List&lt;DepictedItem&gt;&gt;() {});</span>
    }

    private static String writeObjectToString(Object object) {
<span class="nc bnc" id="L138" title="All 2 branches missed.">        return object == null ? null : getGson().toJson(object);</span>
    }

    private static&lt;T&gt; T readObjectFromString(String objectAsString, Class&lt;T&gt; clazz) {
<span class="nc bnc" id="L142" title="All 2 branches missed.">        return objectAsString == null ? null : getGson().fromJson(objectAsString, clazz);</span>
    }

    private static &lt;T&gt; T readObjectWithTypeToken(String objectList, TypeToken&lt;T&gt; typeToken) {
<span class="nc bnc" id="L146" title="All 2 branches missed.">        return objectList == null ? null : getGson().fromJson(objectList, typeToken.getType());</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>