<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NearbyParentFragmentPresenter.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.nearby.presenter</a> &gt; <span class="el_source">NearbyParentFragmentPresenter.java</span></div><h1>NearbyParentFragmentPresenter.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.nearby.presenter;

import static fr.free.nrw.commons.location.LocationServiceManager.LocationChangeType.CUSTOM_QUERY;
import static fr.free.nrw.commons.location.LocationServiceManager.LocationChangeType.LOCATION_SIGNIFICANTLY_CHANGED;
import static fr.free.nrw.commons.location.LocationServiceManager.LocationChangeType.LOCATION_SLIGHTLY_CHANGED;
import static fr.free.nrw.commons.location.LocationServiceManager.LocationChangeType.MAP_UPDATED;
import static fr.free.nrw.commons.location.LocationServiceManager.LocationChangeType.SEARCH_CUSTOM_AREA;
import static fr.free.nrw.commons.nearby.CheckBoxTriStates.CHECKED;
import static fr.free.nrw.commons.nearby.CheckBoxTriStates.UNCHECKED;
import static fr.free.nrw.commons.nearby.CheckBoxTriStates.UNKNOWN;
import static fr.free.nrw.commons.wikidata.WikidataConstants.PLACE_OBJECT;
import android.location.Location;
import android.view.View;
import androidx.annotation.MainThread;
import androidx.annotation.Nullable;
import com.mapbox.mapboxsdk.annotations.Marker;
import fr.free.nrw.commons.bookmarks.locations.BookmarkLocationsDao;
import fr.free.nrw.commons.kvstore.JsonKvStore;
import fr.free.nrw.commons.location.LatLng;
import fr.free.nrw.commons.location.LocationServiceManager.LocationChangeType;
import fr.free.nrw.commons.location.LocationUpdateListener;
import fr.free.nrw.commons.nearby.CheckBoxTriStates;
import fr.free.nrw.commons.nearby.Label;
import fr.free.nrw.commons.nearby.MarkerPlaceGroup;
import fr.free.nrw.commons.nearby.NearbyBaseMarker;
import fr.free.nrw.commons.nearby.NearbyController;
import fr.free.nrw.commons.nearby.NearbyFilterState;
import fr.free.nrw.commons.nearby.contract.NearbyParentFragmentContract;
import fr.free.nrw.commons.utils.LocationUtils;
import fr.free.nrw.commons.wikidata.WikidataEditListener;
import java.lang.reflect.Proxy;
import java.util.HashMap;
import java.util.List;
import timber.log.Timber;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

public class NearbyParentFragmentPresenter implements NearbyParentFragmentContract.UserActions, WikidataEditListener.WikidataP18EditListener, LocationUpdateListener {

    private boolean isNearbyLocked;

    private LatLng curLatLng;

    private boolean placesLoadedOnce;

    BookmarkLocationsDao bookmarkLocationDao;

    @Nullable
    private String customQuery;

<span class="fc" id="L50">    private static final NearbyParentFragmentContract.View DUMMY = (NearbyParentFragmentContract.View) Proxy.newProxyInstance(NearbyParentFragmentContract.View.class.getClassLoader(), new Class[] { NearbyParentFragmentContract.View.class }, (proxy, method, args) -&gt; {</span>
<span class="nc bnc" id="L51" title="All 2 branches missed.">        if (method.getName().equals(&quot;onMyEvent&quot;)) {</span>
<span class="nc" id="L52">            return null;</span>
<span class="nc bnc" id="L53" title="All 2 branches missed.">        } else if (String.class == method.getReturnType()) {</span>
<span class="nc" id="L54">            return &quot;&quot;;</span>
<span class="nc bnc" id="L55" title="All 2 branches missed.">        } else if (Integer.class == method.getReturnType()) {</span>
<span class="nc" id="L56">            return Integer.valueOf(0);</span>
<span class="nc bnc" id="L57" title="All 2 branches missed.">        } else if (int.class == method.getReturnType()) {</span>
<span class="nc" id="L58">            return 0;</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">        } else if (Boolean.class == method.getReturnType()) {</span>
<span class="nc" id="L60">            return Boolean.FALSE;</span>
<span class="nc bnc" id="L61" title="All 2 branches missed.">        } else if (boolean.class == method.getReturnType()) {</span>
<span class="nc" id="L62">            return false;</span>
        } else {
<span class="nc" id="L64">            return null;</span>
        }
    });

<span class="fc" id="L68">    private NearbyParentFragmentContract.View nearbyParentFragmentView = DUMMY;</span>

<span class="fc" id="L70">    public NearbyParentFragmentPresenter(BookmarkLocationsDao bookmarkLocationDao) {</span>
<span class="pc bpc" id="L71" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3331)) {</span>
<span class="fc" id="L72">            this.bookmarkLocationDao = bookmarkLocationDao;</span>
        }
<span class="fc" id="L74">    }</span>

    @Override
    public void attachView(NearbyParentFragmentContract.View view) {
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3332)) {</span>
<span class="fc" id="L79">            this.nearbyParentFragmentView = view;</span>
        }
<span class="fc" id="L81">    }</span>

    @Override
    public void detachView() {
<span class="pc bpc" id="L85" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3333)) {</span>
<span class="fc" id="L86">            this.nearbyParentFragmentView = DUMMY;</span>
        }
<span class="fc" id="L88">    }</span>

    @Override
    public void removeNearbyPreferences(JsonKvStore applicationKvStore) {
<span class="pc bpc" id="L92" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3334)) {</span>
<span class="fc" id="L93">            Timber.d(&quot;Remove place objects&quot;);</span>
        }
<span class="pc bpc" id="L95" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3335)) {</span>
<span class="fc" id="L96">            applicationKvStore.remove(PLACE_OBJECT);</span>
        }
<span class="fc" id="L98">    }</span>

    public void initializeMapOperations() {
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3336)) {</span>
<span class="fc" id="L102">            lockUnlockNearby(false);</span>
        }
<span class="pc bpc" id="L104" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3337)) {</span>
<span class="fc" id="L105">            updateMapAndList(LOCATION_SIGNIFICANTLY_CHANGED);</span>
        }
<span class="pc bpc" id="L107" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3338)) {</span>
<span class="fc" id="L108">            this.nearbyParentFragmentView.addSearchThisAreaButtonAction();</span>
        }
<span class="pc bpc" id="L110" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3339)) {</span>
<span class="fc" id="L111">            nearbyParentFragmentView.setCheckBoxAction();</span>
        }
<span class="fc" id="L113">    }</span>

    /**
     * Sets click listeners of FABs, and 2 bottom sheets
     */
    @Override
    public void setActionListeners(JsonKvStore applicationKvStore) {
<span class="pc bpc" id="L120" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3340)) {</span>
<span class="fc" id="L121">            nearbyParentFragmentView.setFABPlusAction(v -&gt; {</span>
<span class="nc bnc" id="L122" title="All 2 branches missed.">                if (applicationKvStore.getBoolean(&quot;login_skipped&quot;, false)) {</span>
                    // prompt the user to login
<span class="nc" id="L124">                    nearbyParentFragmentView.displayLoginSkippedWarning();</span>
                } else {
<span class="nc" id="L126">                    nearbyParentFragmentView.animateFABs();</span>
                }
<span class="nc" id="L128">            });</span>
        }
<span class="pc bpc" id="L130" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3341)) {</span>
<span class="fc" id="L131">            nearbyParentFragmentView.setFABRecenterAction(v -&gt; {</span>
<span class="nc" id="L132">                nearbyParentFragmentView.recenterMap(curLatLng);</span>
<span class="nc" id="L133">            });</span>
        }
<span class="fc" id="L135">    }</span>

    @Override
    public boolean backButtonClicked() {
<span class="nc bnc" id="L139" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3345)) {</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">            if (nearbyParentFragmentView.isAdvancedQueryFragmentVisible()) {</span>
<span class="nc bnc" id="L141" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3344)) {</span>
<span class="nc" id="L142">                    nearbyParentFragmentView.showHideAdvancedQueryFragment(false);</span>
                }
<span class="nc" id="L144">                return true;</span>
<span class="nc bnc" id="L145" title="All 2 branches missed.">            } else if (nearbyParentFragmentView.isListBottomSheetExpanded()) {</span>
<span class="nc bnc" id="L146" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3343)) {</span>
                    // Back should first hide the bottom sheet if it is expanded
<span class="nc" id="L148">                    nearbyParentFragmentView.listOptionMenuItemClicked();</span>
                }
<span class="nc" id="L150">                return true;</span>
<span class="nc bnc" id="L151" title="All 2 branches missed.">            } else if (nearbyParentFragmentView.isDetailsBottomSheetVisible()) {</span>
<span class="nc bnc" id="L152" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3342)) {</span>
<span class="nc" id="L153">                    nearbyParentFragmentView.setBottomSheetDetailsSmaller();</span>
                }
<span class="nc" id="L155">                return true;</span>
            }
        }
<span class="nc" id="L158">        return false;</span>
    }

    public void markerUnselected() {
<span class="nc bnc" id="L162" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3346)) {</span>
<span class="nc" id="L163">            nearbyParentFragmentView.hideBottomSheet();</span>
        }
<span class="nc" id="L165">    }</span>

    public void markerSelected(Marker marker) {
<span class="nc bnc" id="L168" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3347)) {</span>
<span class="nc" id="L169">            nearbyParentFragmentView.displayBottomSheetWithInfo(marker);</span>
        }
<span class="nc" id="L171">    }</span>

    /**
     * Nearby updates takes time, since they are network operations. During update time, we don't
     * want to get any other calls from user. So locking nearby.
     *
     * @param isNearbyLocked true means lock, false means unlock
     */
    @Override
    public void lockUnlockNearby(boolean isNearbyLocked) {
<span class="pc bpc" id="L181" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3348)) {</span>
<span class="fc" id="L182">            this.isNearbyLocked = isNearbyLocked;</span>
        }
<span class="pc bpc" id="L184" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3351)) {</span>
<span class="fc bfc" id="L185" title="All 2 branches covered.">            if (isNearbyLocked) {</span>
<span class="pc bpc" id="L186" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3350)) {</span>
<span class="fc" id="L187">                    nearbyParentFragmentView.disableFABRecenter();</span>
                }
            } else {
<span class="pc bpc" id="L190" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3349)) {</span>
<span class="fc" id="L191">                    nearbyParentFragmentView.enableFABRecenter();</span>
                }
            }
        }
<span class="fc" id="L195">    }</span>

    /**
     * This method should be the single point to update Map and List. Triggered by location changes
     *
     * @param locationChangeType defines if location changed significantly or slightly
     */
    @Override
    public void updateMapAndList(LocationChangeType locationChangeType) {
<span class="pc bpc" id="L204" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3352)) {</span>
<span class="fc" id="L205">            Timber.d(&quot;Presenter updates map and list&quot;);</span>
        }
<span class="pc bpc" id="L207" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3354)) {</span>
<span class="pc bpc" id="L208" title="1 of 2 branches missed.">            if (isNearbyLocked) {</span>
<span class="nc bnc" id="L209" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3353)) {</span>
<span class="nc" id="L210">                    Timber.d(&quot;Nearby is locked, so updateMapAndList returns&quot;);</span>
                }
<span class="nc" id="L212">                return;</span>
            }
        }
<span class="pc bpc" id="L215" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3356)) {</span>
<span class="pc bpc" id="L216" title="1 of 2 branches missed.">            if (!nearbyParentFragmentView.isNetworkConnectionEstablished()) {</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3355)) {</span>
<span class="nc" id="L218">                    Timber.d(&quot;Network connection is not established&quot;);</span>
                }
<span class="nc" id="L220">                return;</span>
            }
        }
<span class="fc" id="L223">        LatLng lastLocation = nearbyParentFragmentView.getLastMapFocus();</span>
<span class="pc bpc" id="L224" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3359)) {</span>
<span class="pc bpc" id="L225" title="1 of 2 branches missed.">            if (nearbyParentFragmentView.getMapCenter() != null) {</span>
<span class="pc bpc" id="L226" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3358)) {</span>
<span class="fc" id="L227">                    curLatLng = nearbyParentFragmentView.getMapCenter();</span>
                }
            } else {
<span class="nc bnc" id="L230" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3357)) {</span>
<span class="nc" id="L231">                    curLatLng = lastLocation;</span>
                }
            }
        }
<span class="pc bpc" id="L235" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3361)) {</span>
<span class="pc bpc" id="L236" title="1 of 2 branches missed.">            if (curLatLng == null) {</span>
<span class="nc bnc" id="L237" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3360)) {</span>
<span class="nc" id="L238">                    Timber.d(&quot;Skipping update of nearby places as location is unavailable&quot;);</span>
                }
<span class="nc" id="L240">                return;</span>
            }
        }
<span class="pc bpc" id="L243" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3379)) {</span>
            /**
             * Significant changed - Markers and current location will be updated together
             * Slightly changed - Only current position marker will be updated
             */
<span class="pc bpc" id="L248" title="1 of 2 branches missed.">            if (locationChangeType.equals(CUSTOM_QUERY)) {</span>
<span class="nc bnc" id="L249" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3373)) {</span>
<span class="nc" id="L250">                    Timber.d(&quot;ADVANCED_QUERY_SEARCH&quot;);</span>
                }
<span class="nc bnc" id="L252" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3374)) {</span>
<span class="nc" id="L253">                    lockUnlockNearby(true);</span>
                }
<span class="nc bnc" id="L255" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3375)) {</span>
<span class="nc" id="L256">                    nearbyParentFragmentView.setProgressBarVisibility(true);</span>
                }
<span class="nc" id="L258">                LatLng updatedLocationByUser = LocationUtils.deriveUpdatedLocationFromSearchQuery(customQuery);</span>
<span class="nc bnc" id="L259" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3377)) {</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">                    if (updatedLocationByUser == null) {</span>
<span class="nc bnc" id="L261" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(3376)) {</span>
<span class="nc" id="L262">                            updatedLocationByUser = lastLocation;</span>
                        }
                    }
                }
<span class="nc bnc" id="L266" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3378)) {</span>
<span class="nc" id="L267">                    nearbyParentFragmentView.populatePlaces(updatedLocationByUser, customQuery);</span>
                }
<span class="pc bpc" id="L269" title="8 of 10 branches missed.">            } else if ((ListenerUtil.mutListener.listen(3362) ? (locationChangeType.equals(LOCATION_SIGNIFICANTLY_CHANGED) &amp;&amp; locationChangeType.equals(MAP_UPDATED)) : (locationChangeType.equals(LOCATION_SIGNIFICANTLY_CHANGED) || locationChangeType.equals(MAP_UPDATED)))) {</span>
<span class="pc bpc" id="L270" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3370)) {</span>
<span class="fc" id="L271">                    lockUnlockNearby(true);</span>
                }
<span class="pc bpc" id="L273" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3371)) {</span>
<span class="fc" id="L274">                    nearbyParentFragmentView.setProgressBarVisibility(true);</span>
                }
<span class="pc bpc" id="L276" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3372)) {</span>
<span class="fc" id="L277">                    nearbyParentFragmentView.populatePlaces(nearbyParentFragmentView.getMapCenter());</span>
                }
<span class="nc bnc" id="L279" title="All 2 branches missed.">            } else if (locationChangeType.equals(SEARCH_CUSTOM_AREA)) {</span>
<span class="nc bnc" id="L280" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3366)) {</span>
<span class="nc" id="L281">                    Timber.d(&quot;SEARCH_CUSTOM_AREA&quot;);</span>
                }
<span class="nc bnc" id="L283" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3367)) {</span>
<span class="nc" id="L284">                    lockUnlockNearby(true);</span>
                }
<span class="nc bnc" id="L286" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3368)) {</span>
<span class="nc" id="L287">                    nearbyParentFragmentView.setProgressBarVisibility(true);</span>
                }
<span class="nc bnc" id="L289" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3369)) {</span>
<span class="nc" id="L290">                    nearbyParentFragmentView.populatePlaces(nearbyParentFragmentView.getMapFocus());</span>
                }
            } else {
<span class="nc bnc" id="L293" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3363)) {</span>
                    // Means location changed slightly, ie user is walking or driving.
<span class="nc" id="L295">                    Timber.d(&quot;Means location changed slightly&quot;);</span>
                }
<span class="nc bnc" id="L297" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3365)) {</span>
<span class="nc bnc" id="L298" title="All 2 branches missed.">                    if (nearbyParentFragmentView.isCurrentLocationMarkerVisible()) {</span>
<span class="nc bnc" id="L299" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(3364)) {</span>
                            // Means user wants to see their live location
<span class="nc" id="L301">                            nearbyParentFragmentView.recenterMap(curLatLng);</span>
                        }
                    }
                }
            }
        }
<span class="fc" id="L307">    }</span>

    /**
     * Populates places for custom location, should be used for finding nearby places around a
     * location where you are not at.
     *
     * @param nearbyPlacesInfo This variable has placeToCenter list information and distances.
     */
    public void updateMapMarkers(NearbyController.NearbyPlacesInfo nearbyPlacesInfo, Marker selectedMarker, boolean shouldTrackPosition) {
<span class="pc bpc" id="L316" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3385)) {</span>
<span class="pc bpc" id="L317" title="1 of 2 branches missed.">            if (null != nearbyParentFragmentView) {</span>
<span class="pc bpc" id="L318" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3380)) {</span>
<span class="fc" id="L319">                    nearbyParentFragmentView.clearAllMarkers();</span>
                }
<span class="fc" id="L321">                List&lt;NearbyBaseMarker&gt; nearbyBaseMarkers = NearbyController.loadAttractionsFromLocationToBaseMarkerOptions(nearbyPlacesInfo.curLatLng, // Curlatlang will be used to calculate distances</span>
<span class="fc" id="L322">                nearbyPlacesInfo.placeList, nearbyParentFragmentView.getContext(), bookmarkLocationDao.getAllBookmarksLocations());</span>
<span class="pc bpc" id="L323" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3381)) {</span>
<span class="fc" id="L324">                    nearbyParentFragmentView.updateMapMarkers(nearbyBaseMarkers, selectedMarker);</span>
                }
<span class="pc bpc" id="L326" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3382)) {</span>
                    // So that new location updates wont come
<span class="fc" id="L328">                    lockUnlockNearby(false);</span>
                }
<span class="pc bpc" id="L330" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3383)) {</span>
<span class="fc" id="L331">                    nearbyParentFragmentView.setProgressBarVisibility(false);</span>
                }
<span class="pc bpc" id="L333" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3384)) {</span>
<span class="fc" id="L334">                    nearbyParentFragmentView.updateListFragment(nearbyPlacesInfo.placeList);</span>
                }
            }
        }
<span class="fc" id="L338">    }</span>

    /**
     * Some centering task may need to wait for map to be ready, if they are requested before map is
     * ready. So we will remember it when the map is ready
     */
    private void handleCenteringTaskIfAny() {
<span class="nc bnc" id="L345" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3388)) {</span>
<span class="nc bnc" id="L346" title="All 2 branches missed.">            if (!placesLoadedOnce) {</span>
<span class="nc bnc" id="L347" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3386)) {</span>
<span class="nc" id="L348">                    placesLoadedOnce = true;</span>
                }
<span class="nc bnc" id="L350" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3387)) {</span>
<span class="nc" id="L351">                    nearbyParentFragmentView.centerMapToPlace(null);</span>
                }
            }
        }
<span class="nc" id="L355">    }</span>

    @Override
    public void onWikidataEditSuccessful() {
<span class="nc bnc" id="L359" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3389)) {</span>
<span class="nc" id="L360">            updateMapAndList(MAP_UPDATED);</span>
        }
<span class="nc" id="L362">    }</span>

    @Override
    public void onLocationChangedSignificantly(LatLng latLng) {
<span class="nc bnc" id="L366" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3390)) {</span>
<span class="nc" id="L367">            Timber.d(&quot;Location significantly changed&quot;);</span>
        }
<span class="nc bnc" id="L369" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3391)) {</span>
<span class="nc" id="L370">            updateMapAndList(LOCATION_SIGNIFICANTLY_CHANGED);</span>
        }
<span class="nc" id="L372">    }</span>

    @Override
    public void onLocationChangedSlightly(LatLng latLng) {
<span class="nc bnc" id="L376" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3392)) {</span>
<span class="nc" id="L377">            Timber.d(&quot;Location significantly changed&quot;);</span>
        }
<span class="nc bnc" id="L379" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3393)) {</span>
<span class="nc" id="L380">            updateMapAndList(LOCATION_SLIGHTLY_CHANGED);</span>
        }
<span class="nc" id="L382">    }</span>

    @Override
    public void onLocationChangedMedium(LatLng latLng) {
<span class="nc bnc" id="L386" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3394)) {</span>
<span class="nc" id="L387">            Timber.d(&quot;Location changed medium&quot;);</span>
        }
<span class="nc" id="L389">    }</span>

    @Override
    public void onCameraMove(com.mapbox.mapboxsdk.geometry.LatLng latLng) {
<span class="nc bnc" id="L393" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3404)) {</span>
            // If our nearby markers are calculated at least once
<span class="nc bnc" id="L395" title="All 2 branches missed.">            if (NearbyController.latestSearchLocation != null) {</span>
<span class="nc" id="L396">                double distance = latLng.distanceTo(LocationUtils.commonsLatLngToMapBoxLatLng(NearbyController.latestSearchLocation));</span>
<span class="nc bnc" id="L397" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3403)) {</span>
<span class="nc bnc" id="L398" title="All 2 branches missed.">                    if (nearbyParentFragmentView.isNetworkConnectionEstablished()) {</span>
<span class="nc bnc" id="L399" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(3402)) {</span>
<span class="nc bnc" id="L400" title="All 22 branches missed.">                            if ((ListenerUtil.mutListener.listen(3400) ? (distance &gt;= NearbyController.latestSearchRadius) : (ListenerUtil.mutListener.listen(3399) ? (distance &lt;= NearbyController.latestSearchRadius) : (ListenerUtil.mutListener.listen(3398) ? (distance &lt; NearbyController.latestSearchRadius) : (ListenerUtil.mutListener.listen(3397) ? (distance != NearbyController.latestSearchRadius) : (ListenerUtil.mutListener.listen(3396) ? (distance == NearbyController.latestSearchRadius) : (distance &gt; NearbyController.latestSearchRadius))))))) {</span>
                            } else {
<span class="nc bnc" id="L402" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(3401)) {</span>
<span class="nc" id="L403">                                    nearbyParentFragmentView.setSearchThisAreaButtonVisibility(false);</span>
                                }
                            }
                        }
                    }
                }
<span class="nc" id="L409">            } else {</span>
<span class="nc bnc" id="L410" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3395)) {</span>
<span class="nc" id="L411">                    nearbyParentFragmentView.setSearchThisAreaButtonVisibility(false);</span>
                }
            }
        }
<span class="nc" id="L415">    }</span>

    @Override
    public void filterByMarkerType(List&lt;Label&gt; selectedLabels, int state, boolean filterForPlaceState, boolean filterForAllNoneType) {
<span class="pc bpc" id="L419" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3411)) {</span>
<span class="fc bfc" id="L420" title="All 2 branches covered.">            if (filterForAllNoneType) {</span>
<span class="pc bpc" id="L421" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3410)) {</span>
                    // Means we will set labels based on states
<span class="pc bpc" id="L423" title="3 of 4 branches missed.">                    switch(state) {</span>
                        case UNKNOWN:
                            // Do nothing
<span class="nc" id="L426">                            break;</span>
                        case UNCHECKED:
<span class="nc bnc" id="L428" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(3406)) {</span>
                                // TODO
<span class="nc" id="L430">                                nearbyParentFragmentView.filterOutAllMarkers();</span>
                            }
<span class="nc bnc" id="L432" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(3407)) {</span>
<span class="nc" id="L433">                                nearbyParentFragmentView.setRecyclerViewAdapterItemsGreyedOut();</span>
                            }
                            break;
                        case CHECKED:
<span class="pc bpc" id="L437" title="1 of 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(3408)) {</span>
                                // Despite showing all labels NearbyFilterState still should be applied
<span class="fc" id="L439">                                nearbyParentFragmentView.filterMarkersByLabels(selectedLabels, NearbyFilterState.getInstance().isExistsSelected(), NearbyFilterState.getInstance().isNeedPhotoSelected(), NearbyFilterState.getInstance().isWlmSelected(), filterForPlaceState, false);</span>
                            }
<span class="pc bpc" id="L441" title="1 of 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(3409)) {</span>
<span class="fc" id="L442">                                nearbyParentFragmentView.setRecyclerViewAdapterAllSelected();</span>
                            }
<span class="fc" id="L444">                            break;</span>
                    }
                }
            } else {
<span class="pc bpc" id="L448" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3405)) {</span>
<span class="fc" id="L449">                    nearbyParentFragmentView.filterMarkersByLabels(selectedLabels, NearbyFilterState.getInstance().isExistsSelected(), NearbyFilterState.getInstance().isNeedPhotoSelected(), NearbyFilterState.getInstance().isWlmSelected(), filterForPlaceState, false);</span>
                }
            }
        }
<span class="fc" id="L453">    }</span>

    @Override
    @MainThread
    public void updateMapMarkersToController(List&lt;NearbyBaseMarker&gt; nearbyBaseMarkers) {
<span class="pc bpc" id="L458" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3412)) {</span>
<span class="fc" id="L459">            NearbyController.markerExistsMap = new HashMap&lt;&gt;();</span>
        }
<span class="pc bpc" id="L461" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3413)) {</span>
<span class="fc" id="L462">            NearbyController.markerNeedPicMap = new HashMap&lt;&gt;();</span>
        }
<span class="pc bpc" id="L464" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3414)) {</span>
<span class="fc" id="L465">            NearbyController.markerLabelList.clear();</span>
        }
<span class="pc bpc" id="L467" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3423)) {</span>
            {
<span class="fc" id="L469">                long _loopCounter49 = 0;</span>
<span class="pc bpc" id="L470" title="15 of 22 branches missed.">                for (int i = 0; (ListenerUtil.mutListener.listen(3422) ? (i &gt;= nearbyBaseMarkers.size()) : (ListenerUtil.mutListener.listen(3421) ? (i &lt;= nearbyBaseMarkers.size()) : (ListenerUtil.mutListener.listen(3420) ? (i &gt; nearbyBaseMarkers.size()) : (ListenerUtil.mutListener.listen(3419) ? (i != nearbyBaseMarkers.size()) : (ListenerUtil.mutListener.listen(3418) ? (i == nearbyBaseMarkers.size()) : (i &lt; nearbyBaseMarkers.size())))))); i++) {</span>
<span class="fc" id="L471">                    ListenerUtil.loopListener.listen(&quot;_loopCounter49&quot;, ++_loopCounter49);</span>
<span class="fc" id="L472">                    NearbyBaseMarker nearbyBaseMarker = nearbyBaseMarkers.get(i);</span>
<span class="pc bpc" id="L473" title="1 of 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3415)) {</span>
<span class="fc" id="L474">                        NearbyController.markerLabelList.add(new MarkerPlaceGroup(nearbyBaseMarker.getMarker(), bookmarkLocationDao.findBookmarkLocation(nearbyBaseMarker.getPlace()), nearbyBaseMarker.getPlace()));</span>
                    }
<span class="pc bpc" id="L476" title="1 of 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3416)) {</span>
                        // TODO: fix bookmark location
<span class="fc" id="L478">                        NearbyController.markerExistsMap.put((nearbyBaseMarkers.get(i).getPlace().hasWikidataLink()), nearbyBaseMarkers.get(i).getMarker());</span>
                    }
<span class="pc bpc" id="L480" title="1 of 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3417)) {</span>
<span class="pc bpc" id="L481" title="1 of 2 branches missed.">                        NearbyController.markerNeedPicMap.put(((nearbyBaseMarkers.get(i).getPlace().pic == null) ? true : false), nearbyBaseMarkers.get(i).getMarker());</span>
                    }
                }
            }
        }
<span class="fc" id="L486">    }</span>

    @Override
    public void setCheckboxUnknown() {
<span class="nc bnc" id="L490" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3424)) {</span>
<span class="nc" id="L491">            nearbyParentFragmentView.setCheckBoxState(CheckBoxTriStates.UNKNOWN);</span>
        }
<span class="nc" id="L493">    }</span>

    @Override
    public void setAdvancedQuery(String query) {
<span class="nc bnc" id="L497" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3425)) {</span>
<span class="nc" id="L498">            this.customQuery = query;</span>
        }
<span class="nc" id="L500">    }</span>

    @Override
    public void searchViewGainedFocus() {
<span class="nc bnc" id="L504" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3428)) {</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">            if (nearbyParentFragmentView.isListBottomSheetExpanded()) {</span>
<span class="nc bnc" id="L506" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3427)) {</span>
                    // Back should first hide the bottom sheet if it is expanded
<span class="nc" id="L508">                    nearbyParentFragmentView.hideBottomSheet();</span>
                }
<span class="nc bnc" id="L510" title="All 2 branches missed.">            } else if (nearbyParentFragmentView.isDetailsBottomSheetVisible()) {</span>
<span class="nc bnc" id="L511" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3426)) {</span>
<span class="nc" id="L512">                    nearbyParentFragmentView.hideBottomDetailsSheet();</span>
                }
            }
        }
<span class="nc" id="L516">    }</span>

    public View.OnClickListener onSearchThisAreaClicked() {
<span class="fc" id="L519">        return v -&gt; {</span>
            // nearbyParentFragmentView.setMapCenter();
<span class="nc" id="L521">            nearbyParentFragmentView.setSearchThisAreaButtonVisibility(false);</span>
<span class="nc bnc" id="L522" title="All 2 branches missed.">            if (searchCloseToCurrentLocation()) {</span>
<span class="nc" id="L523">                updateMapAndList(LOCATION_SIGNIFICANTLY_CHANGED);</span>
            } else {
<span class="nc" id="L525">                updateMapAndList(SEARCH_CUSTOM_AREA);</span>
            }
<span class="nc" id="L527">        };</span>
    }

    /**
     * Returns true if search this area button is used around our current location, so that we can
     * continue following our current location again
     *
     * @return Returns true if search this area button is used around our current location
     */
    public boolean searchCloseToCurrentLocation() {
<span class="nc bnc" id="L537" title="All 2 branches missed.">        if (null == nearbyParentFragmentView.getLastMapFocus()) {</span>
<span class="nc" id="L538">            return true;</span>
        }
        // TODO
<span class="nc" id="L541">        Location mylocation = new Location(&quot;&quot;);</span>
<span class="nc" id="L542">        Location dest_location = new Location(&quot;&quot;);</span>
<span class="nc bnc" id="L543" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3429)) {</span>
<span class="nc" id="L544">            dest_location.setLatitude(nearbyParentFragmentView.getMapFocus().getLatitude());</span>
        }
<span class="nc bnc" id="L546" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3430)) {</span>
<span class="nc" id="L547">            dest_location.setLongitude(nearbyParentFragmentView.getMapFocus().getLongitude());</span>
        }
<span class="nc bnc" id="L549" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3431)) {</span>
<span class="nc" id="L550">            mylocation.setLatitude(nearbyParentFragmentView.getLastMapFocus().getLatitude());</span>
        }
<span class="nc bnc" id="L552" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3432)) {</span>
<span class="nc" id="L553">            mylocation.setLongitude(nearbyParentFragmentView.getLastMapFocus().getLongitude());</span>
        }
<span class="nc" id="L555">        Float distance = mylocation.distanceTo(dest_location);</span>
<span class="nc bnc" id="L556" title="All 310 branches missed.">        if ((ListenerUtil.mutListener.listen(3445) ? (distance &gt;= (ListenerUtil.mutListener.listen(3440) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) % 4) : (ListenerUtil.mutListener.listen(3439) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) * 4) : (ListenerUtil.mutListener.listen(3438) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) - 4) : (ListenerUtil.mutListener.listen(3437) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3444) ? (distance &lt;= (ListenerUtil.mutListener.listen(3440) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) % 4) : (ListenerUtil.mutListener.listen(3439) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) * 4) : (ListenerUtil.mutListener.listen(3438) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) - 4) : (ListenerUtil.mutListener.listen(3437) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3443) ? (distance &lt; (ListenerUtil.mutListener.listen(3440) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) % 4) : (ListenerUtil.mutListener.listen(3439) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) * 4) : (ListenerUtil.mutListener.listen(3438) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) - 4) : (ListenerUtil.mutListener.listen(3437) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3442) ? (distance != (ListenerUtil.mutListener.listen(3440) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) % 4) : (ListenerUtil.mutListener.listen(3439) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) * 4) : (ListenerUtil.mutListener.listen(3438) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) - 4) : (ListenerUtil.mutListener.listen(3437) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3441) ? (distance == (ListenerUtil.mutListener.listen(3440) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) % 4) : (ListenerUtil.mutListener.listen(3439) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) * 4) : (ListenerUtil.mutListener.listen(3438) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) - 4) : (ListenerUtil.mutListener.listen(3437) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) / 4)))))) : (distance &gt; (ListenerUtil.mutListener.listen(3440) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) % 4) : (ListenerUtil.mutListener.listen(3439) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) * 4) : (ListenerUtil.mutListener.listen(3438) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) - 4) : (ListenerUtil.mutListener.listen(3437) ? ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3436) ? (2000.0 % 3) : (ListenerUtil.mutListener.listen(3435) ? (2000.0 / 3) : (ListenerUtil.mutListener.listen(3434) ? (2000.0 - 3) : (ListenerUtil.mutListener.listen(3433) ? (2000.0 + 3) : (2000.0 * 3))))) / 4)))))))))))) {</span>
<span class="nc" id="L557">            return false;</span>
        } else {
<span class="nc" id="L559">            return true;</span>
        }
    }

    public void onMapReady() {
<span class="pc bpc" id="L564" title="1 of 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3448)) {</span>
<span class="pc bpc" id="L565" title="1 of 2 branches missed.">            if (null != nearbyParentFragmentView) {</span>
<span class="pc bpc" id="L566" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3446)) {</span>
<span class="fc" id="L567">                    nearbyParentFragmentView.addSearchThisAreaButtonAction();</span>
                }
<span class="pc bpc" id="L569" title="1 of 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3447)) {</span>
<span class="fc" id="L570">                    initializeMapOperations();</span>
                }
            }
        }
<span class="fc" id="L574">    }</span>

    public boolean areLocationsClose(LatLng cameraTarget, LatLng lastKnownLocation) {
<span class="nc" id="L577">        double distance = LocationUtils.commonsLatLngToMapBoxLatLng(cameraTarget).distanceTo(LocationUtils.commonsLatLngToMapBoxLatLng(lastKnownLocation));</span>
<span class="nc bnc" id="L578" title="All 310 branches missed.">        if ((ListenerUtil.mutListener.listen(3461) ? (distance &gt;= (ListenerUtil.mutListener.listen(3456) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) % 4) : (ListenerUtil.mutListener.listen(3455) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) * 4) : (ListenerUtil.mutListener.listen(3454) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) - 4) : (ListenerUtil.mutListener.listen(3453) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3460) ? (distance &lt;= (ListenerUtil.mutListener.listen(3456) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) % 4) : (ListenerUtil.mutListener.listen(3455) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) * 4) : (ListenerUtil.mutListener.listen(3454) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) - 4) : (ListenerUtil.mutListener.listen(3453) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3459) ? (distance &lt; (ListenerUtil.mutListener.listen(3456) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) % 4) : (ListenerUtil.mutListener.listen(3455) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) * 4) : (ListenerUtil.mutListener.listen(3454) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) - 4) : (ListenerUtil.mutListener.listen(3453) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3458) ? (distance != (ListenerUtil.mutListener.listen(3456) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) % 4) : (ListenerUtil.mutListener.listen(3455) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) * 4) : (ListenerUtil.mutListener.listen(3454) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) - 4) : (ListenerUtil.mutListener.listen(3453) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) / 4)))))) : (ListenerUtil.mutListener.listen(3457) ? (distance == (ListenerUtil.mutListener.listen(3456) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) % 4) : (ListenerUtil.mutListener.listen(3455) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) * 4) : (ListenerUtil.mutListener.listen(3454) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) - 4) : (ListenerUtil.mutListener.listen(3453) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) / 4)))))) : (distance &gt; (ListenerUtil.mutListener.listen(3456) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) % 4) : (ListenerUtil.mutListener.listen(3455) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) * 4) : (ListenerUtil.mutListener.listen(3454) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) - 4) : (ListenerUtil.mutListener.listen(3453) ? ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) + 4) : ((ListenerUtil.mutListener.listen(3452) ? (NearbyController.currentLocationSearchRadius % 3) : (ListenerUtil.mutListener.listen(3451) ? (NearbyController.currentLocationSearchRadius / 3) : (ListenerUtil.mutListener.listen(3450) ? (NearbyController.currentLocationSearchRadius - 3) : (ListenerUtil.mutListener.listen(3449) ? (NearbyController.currentLocationSearchRadius + 3) : (NearbyController.currentLocationSearchRadius * 3))))) / 4)))))))))))) {</span>
<span class="nc" id="L579">            return false;</span>
        } else {
<span class="nc" id="L581">            return true;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>