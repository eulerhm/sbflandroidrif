<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CustomToolbarButton.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">AnkiDroid</a> &gt; <a href="index.source.html" class="el_package">com.ichi2.anki.noteeditor</a> &gt; <span class="el_source">CustomToolbarButton.java</span></div><h1>CustomToolbarButton.java</h1><pre class="source lang-java linenums">/*
 *  Copyright (c) 2020 David Allison &lt;davidallisongithub@gmail.com&gt;
 *
 *  This program is free software; you can redistribute it and/or modify it under
 *  the terms of the GNU General Public License as published by the Free Software
 *  Foundation; either version 3 of the License, or (at your option) any later
 *  version.
 *
 *  This program is distributed in the hope that it will be useful, but WITHOUT ANY
 *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 *  PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License along with
 *  this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
package com.ichi2.anki.noteeditor;

import android.text.TextUtils;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashSet;
import java.util.Set;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import static com.ichi2.libanki.Consts.FIELD_SEPARATOR;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

public class CustomToolbarButton {

    private static final int KEEP_EMPTY_ENTRIES = -1;

    private int mIndex;

    private final String mPrefix;

    private final String mSuffix;

<span class="nc" id="L38">    public CustomToolbarButton(int index, String prefix, String suffix) {</span>
<span class="nc bnc" id="L39" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2184)) {</span>
<span class="nc" id="L40">            mIndex = index;</span>
        }
<span class="nc" id="L42">        mPrefix = prefix;</span>
<span class="nc" id="L43">        mSuffix = suffix;</span>
<span class="nc" id="L44">    }</span>

    @Nullable
    public static CustomToolbarButton fromString(String s) {
<span class="nc bnc" id="L48" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2191)) {</span>
<span class="nc bnc" id="L49" title="All 50 branches missed.">            if ((ListenerUtil.mutListener.listen(2190) ? (s == null &amp;&amp; (ListenerUtil.mutListener.listen(2189) ? (s.length() &gt;= 0) : (ListenerUtil.mutListener.listen(2188) ? (s.length() &lt;= 0) : (ListenerUtil.mutListener.listen(2187) ? (s.length() &gt; 0) : (ListenerUtil.mutListener.listen(2186) ? (s.length() &lt; 0) : (ListenerUtil.mutListener.listen(2185) ? (s.length() != 0) : (s.length() == 0))))))) : (s == null || (ListenerUtil.mutListener.listen(2189) ? (s.length() &gt;= 0) : (ListenerUtil.mutListener.listen(2188) ? (s.length() &lt;= 0) : (ListenerUtil.mutListener.listen(2187) ? (s.length() &gt; 0) : (ListenerUtil.mutListener.listen(2186) ? (s.length() &lt; 0) : (ListenerUtil.mutListener.listen(2185) ? (s.length() != 0) : (s.length() == 0))))))))) {</span>
<span class="nc" id="L50">                return null;</span>
            }
        }
<span class="nc" id="L53">        String[] fields = s.split(FIELD_SEPARATOR, KEEP_EMPTY_ENTRIES);</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2197)) {</span>
<span class="nc bnc" id="L55" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(2196) ? (fields.length &gt;= 3) : (ListenerUtil.mutListener.listen(2195) ? (fields.length &lt;= 3) : (ListenerUtil.mutListener.listen(2194) ? (fields.length &gt; 3) : (ListenerUtil.mutListener.listen(2193) ? (fields.length &lt; 3) : (ListenerUtil.mutListener.listen(2192) ? (fields.length == 3) : (fields.length != 3))))))) {</span>
<span class="nc" id="L56">                return null;</span>
            }
        }
        int index;
        try {
<span class="nc" id="L61">            index = Integer.parseInt(fields[0]);</span>
<span class="nc" id="L62">        } catch (Exception e) {</span>
<span class="nc" id="L63">            return null;</span>
<span class="nc" id="L64">        }</span>
<span class="nc" id="L65">        return new CustomToolbarButton(index, fields[1], fields[2]);</span>
    }

    @NonNull
    public static ArrayList&lt;CustomToolbarButton&gt; fromStringSet(Set&lt;String&gt; hs) {
<span class="nc" id="L70">        ArrayList&lt;CustomToolbarButton&gt; buttons = new ArrayList&lt;&gt;(hs.size());</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2200)) {</span>
            {
<span class="nc" id="L73">                long _loopCounter29 = 0;</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">                for (String s : hs) {</span>
<span class="nc" id="L75">                    ListenerUtil.loopListener.listen(&quot;_loopCounter29&quot;, ++_loopCounter29);</span>
<span class="nc" id="L76">                    CustomToolbarButton customToolbarButton = CustomToolbarButton.fromString(s);</span>
<span class="nc bnc" id="L77" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(2199)) {</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">                        if (customToolbarButton != null) {</span>
<span class="nc bnc" id="L79" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(2198)) {</span>
<span class="nc" id="L80">                                buttons.add(customToolbarButton);</span>
                            }
                        }
                    }
<span class="nc" id="L84">                }</span>
            }
        }
<span class="nc bnc" id="L87" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2201)) {</span>
<span class="nc" id="L88">            Collections.sort(buttons, (o1, o2) -&gt; Integer.compare(o1.getIndex(), o2.getIndex()));</span>
        }
<span class="nc bnc" id="L90" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2208)) {</span>
            {
<span class="nc" id="L92">                long _loopCounter30 = 0;</span>
<span class="nc bnc" id="L93" title="All 22 branches missed.">                for (int i = 0; (ListenerUtil.mutListener.listen(2207) ? (i &gt;= buttons.size()) : (ListenerUtil.mutListener.listen(2206) ? (i &lt;= buttons.size()) : (ListenerUtil.mutListener.listen(2205) ? (i &gt; buttons.size()) : (ListenerUtil.mutListener.listen(2204) ? (i != buttons.size()) : (ListenerUtil.mutListener.listen(2203) ? (i == buttons.size()) : (i &lt; buttons.size())))))); i++) {</span>
<span class="nc" id="L94">                    ListenerUtil.loopListener.listen(&quot;_loopCounter30&quot;, ++_loopCounter30);</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(2202)) {</span>
<span class="nc" id="L96">                        buttons.get(i).mIndex = i;</span>
                    }
                }
            }
        }
<span class="nc" id="L101">        return buttons;</span>
    }

    public static Set&lt;String&gt; toStringSet(ArrayList&lt;CustomToolbarButton&gt; buttons) {
<span class="nc" id="L105">        HashSet&lt;String&gt; ret = new HashSet&lt;&gt;(buttons.size());</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(2217)) {</span>
            {
<span class="nc" id="L108">                long _loopCounter32 = 0;</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">                for (CustomToolbarButton b : buttons) {</span>
<span class="nc" id="L110">                    ListenerUtil.loopListener.listen(&quot;_loopCounter32&quot;, ++_loopCounter32);</span>
<span class="nc" id="L111">                    String[] values = new String[] { Integer.toString(b.mIndex), b.mPrefix, b.mSuffix };</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(2215)) {</span>
                        {
<span class="nc" id="L114">                            long _loopCounter31 = 0;</span>
<span class="nc bnc" id="L115" title="All 22 branches missed.">                            for (int i = 0; (ListenerUtil.mutListener.listen(2214) ? (i &gt;= values.length) : (ListenerUtil.mutListener.listen(2213) ? (i &lt;= values.length) : (ListenerUtil.mutListener.listen(2212) ? (i &gt; values.length) : (ListenerUtil.mutListener.listen(2211) ? (i != values.length) : (ListenerUtil.mutListener.listen(2210) ? (i == values.length) : (i &lt; values.length)))))); i++) {</span>
<span class="nc" id="L116">                                ListenerUtil.loopListener.listen(&quot;_loopCounter31&quot;, ++_loopCounter31);</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(2209)) {</span>
<span class="nc" id="L118">                                    values[i] = values[i].replace(FIELD_SEPARATOR, &quot;&quot;);</span>
                                }
                            }
                        }
                    }
<span class="nc bnc" id="L123" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(2216)) {</span>
<span class="nc" id="L124">                        ret.add(TextUtils.join(FIELD_SEPARATOR, values));</span>
                    }
<span class="nc" id="L126">                }</span>
            }
        }
<span class="nc" id="L129">        return ret;</span>
    }

    public Toolbar.TextFormatter toFormatter() {
<span class="nc" id="L133">        return new Toolbar.TextWrapper(mPrefix, mSuffix);</span>
    }

    public int getIndex() {
<span class="nc" id="L137">        return mIndex;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>