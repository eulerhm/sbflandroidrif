<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AdvancedStatistics.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">AnkiDroid</a> &gt; <a href="index.source.html" class="el_package">com.ichi2.libanki.stats</a> &gt; <span class="el_source">AdvancedStatistics.java</span></div><h1>AdvancedStatistics.java</h1><pre class="source lang-java linenums">/**
 * *************************************************************************************
 * /****************************************************************************************
 *  Copyright (c) 2016 Jeffrey van Prehn &lt;jvanprehn@gmail.com&gt;                           *
 *                                                                                       *
 *  This program is free software; you can redistribute it and/or modify it under        *
 *  the terms of the GNU General Public License as published by the Free Software        *
 *  Foundation; either version 3 of the License, or (at your option) any later           *
 *  version.                                                                             *
 *                                                                                       *
 *  This program is distributed in the hope that it will be useful, but WITHOUT ANY      *
 *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A      *
 *  PARTICULAR PURPOSE. See the GNU General Public License for more details.             *
 *                                                                                       *
 *  You should have received a copy of the GNU General Public License along with         *
 *  this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.                           *
 * **************************************************************************************
 */
package com.ichi2.libanki.stats;

import android.content.Context;
import android.content.SharedPreferences;
import android.database.Cursor;
import com.ichi2.anki.AnkiDroidApp;
import com.ichi2.anki.CollectionHelper;
import com.ichi2.anki.R;
import com.ichi2.anki.stats.StatsMetaInfo;
import com.ichi2.libanki.Collection;
import com.ichi2.libanki.Consts;
import com.ichi2.libanki.DB;
import com.ichi2.libanki.Decks;
import com.ichi2.libanki.DeckConfig;
import com.ichi2.libanki.utils.Time;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Random;
import java.util.Stack;
import androidx.annotation.NonNull;
import androidx.sqlite.db.SupportSQLiteDatabase;
import timber.log.Timber;
import static com.ichi2.libanki.stats.Stats.SECONDS_PER_DAY;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

/**
 * Display forecast statistics based on a simulation of future reviews.
 *
 * Sequence diagram (https://www.websequencediagrams.com/):
 * Stats-&gt;+AdvancedStatistics: runFilter
 * AdvancedStatistics-&gt;+ReviewSimulator: simNreviews
 * loop dids
 *   loop nIterations
 *       loop cards
 *           ReviewSimulator-&gt;+Review: newCard
 *           Review-&gt;+NewCardSimulator: simulateNewCard
 *           NewCardSimulator-&gt;-Review: tElapsed:int
 *           Review--&gt;-ReviewSimulator: SimulationResult, Review
 *
 *           loop reviews
 *               ReviewSimulator-&gt;+Review: simulateReview
 *               Review-&gt;+EaseClassifier: simSingleReview
 *               EaseClassifier-&gt;+Card:getType
 *               Card--&gt;-EaseClassifier:cardType:int
 *               EaseClassifier--&gt;-Review: ReviewOutcome
 *               Review--&gt;-ReviewSimulator: SimulationResult, Review[]
 *           end
 *        end
 *   end
 * end
 * ReviewSimulator--&gt;-AdvancedStatistics: SimulationResult
 * AdvancedStatistics--&gt;-Stats: StatsMetaInfo
 *
 * %2F%2F Class diagram (http://yuml.me/diagram/scruffy/class/draw; http://yuml.me/edit/e0ad47bf):
 * [AdvancedStatistics]
 * [ReviewSimulator]
 * [StatsMetaInfo|mTitle:int;mType:int;mAxisTitles:int［］;mValueLabels:int［］;mColors:int［］;]
 * [Settings|computeNDays:int;computeMaxError:double;simulateNIterations:int]
 * [Deck|-did:long;newPerDay:int;revPerDay:int]
 * [Card|-id:long;ivl:int;factor:double;lastReview:int;due:int;correct:int|setAll();getType()]
 * [Review|prob:double;tElapsed:int]
 * [SimulationResult|nReviews［CARD_TYPE］［t］;nInState［CARD_TYPE］［t］]
 * [ReviewOutcome|prob:double]
 * [ReviewSimulator]uses -.-&gt;[CardIterator]
 * [ReviewSimulator]uses -.-&gt;[DeckFactory]
 * [ReviewSimulator]creates -.-&gt;[SimulationResult]
 * [ReviewSimulator]creates -.-&gt;[Review]
 * [Card]belongs to-.-&gt;[Deck]
 * [Review]updates -.-&gt;[SimulationResult]
 * [Review]]++-1&gt;[Card]
 * [Review]creates -.-&gt;[Review]
 * [AdvancedStatistics]uses -.-&gt;[ReviewSimulator]
 * [Review]uses -.-&gt;[NewCardSimulator|nAddedToday:int;tAdd:int]
 * [Review]uses -.-&gt;[EaseClassifier|probabilities:double［CARD_TYPE］［REVIEW_OUTCOME］]
 * [EaseClassifier]creates -.-&gt;[ReviewOutcome]
 * [ReviewOutcome]++-1&gt;[Card]
 * [AdvancedStatistics]creates -.-&gt; [StatsMetaInfo]
 */
@SuppressWarnings({ &quot;PMD.AvoidThrowingRawExceptionTypes&quot;, &quot;PMD.ExcessiveClassLength&quot;, &quot;PMD.ExcessiveMethodLength&quot;, &quot;PMD.AvoidReassigningParameters&quot;, &quot;PMD.FieldDeclarationsShouldBeAtStartOfClass&quot;, &quot;PMD.SwitchStatementsShouldHaveDefault&quot;, &quot;PMD.NPathComplexity&quot;, &quot;PMD.OneDeclarationPerLine&quot;, &quot;PMD.SwitchStmtsShouldHaveDefault&quot; })
<span class="nc" id="L101">public class AdvancedStatistics {</span>

    private static final int TIME = 0;

    // the time dimension at index 0.
    private static final int CARD_TYPE_COUNT = 3;

    private static final int CARD_TYPE_NEW = 0;

    private static final int CARD_TYPE_YOUNG = 1;

    private static final int CARD_TYPE_MATURE = 2;

    private static final int CARD_TYPE_NEW_PLUS_1 = 1;

    private static final int CARD_TYPE_YOUNG_PLUS_1 = 2;

    private static final int CARD_TYPE_MATURE_PLUS_1 = 3;

    private static final int REVIEW_TYPE_COUNT = 4;

    private static final int REVIEW_TYPE_LEARN = 0;

    private static final int REVIEW_TYPE_YOUNG = 1;

    private static final int REVIEW_TYPE_MATURE = 2;

    private static final int REVIEW_TYPE_RELEARN = 3;

    private static final int REVIEW_TYPE_COUNT_PLUS_1 = 5;

    private static final int REVIEW_TYPE_LEARN_PLUS_1 = 1;

    private static final int REVIEW_TYPE_YOUNG_PLUS_1 = 2;

    private static final int REVIEW_TYPE_MATURE_PLUS_1 = 3;

    private static final int REVIEW_TYPE_RELEARN_PLUS_1 = 4;

    private static final int REVIEW_OUTCOME_REPEAT = 0;

    private static final int REVIEW_OUTCOME_HARD = 1;

    private static final int REVIEW_OUTCOME_GOOD = 2;

    private static final int REVIEW_OUTCOME_EASY = 3;

    private static final int REVIEW_OUTCOME_REPEAT_PLUS_1 = 1;

    private static final int REVIEW_OUTCOME_HARD_PLUS_1 = 2;

    private static final int REVIEW_OUTCOME_GOOD_PLUS_1 = 3;

    private static final int REVIEW_OUTCOME_EASY_PLUS_1 = 4;

<span class="nc" id="L156">    private final ArrayUtils ArrayUtils = new ArrayUtils();</span>

<span class="nc" id="L158">    private final DeckFactory Decks = new DeckFactory();</span>

    private Settings Settings;

    /**
     * Determine forecast statistics based on a computation or simulation of future reviews.
     * Returns all information required by stats.java to plot the 'forecast' chart based on these statistics.
     * The chart will display:
     * - The forecasted number of reviews per review type (relearn, mature, young, learn) as bars
     * - The forecasted number of cards in each state (new, young, mature) as lines
     * @param metaInfo Object which will be filled with all information required by stats.java to plot the 'forecast' chart and returned by this method.
     * @param type Type of 'forecast' chart for which to determine forecast statistics. Accepted values:
     *             Stats.TYPE_MONTH: Determine forecast statistics for next 30 days with 1-day chunks
     *             Stats.TYPE_YEAR:  Determine forecast statistics for next year with 7-day chunks
     *             Stats.TYPE_LIFE:  Determine forecast statistics for next 2 years with 30-day chunks
     * @param context Contains The collection which contains the decks to be simulated.
     *             Also used for access to the database and access to the creation time of the collection.
     *             The creation time of the collection is needed since due times of cards are relative to the creation time of the collection.
     *             So we could pass mCol here.
     * @param dids Deck id's
     * @return @see #metaInfo
     */
    public StatsMetaInfo calculateDueAsMetaInfo(StatsMetaInfo metaInfo, Stats.AxisType type, Context context, String dids) {
<span class="nc bnc" id="L181" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17353)) {</span>
<span class="nc bnc" id="L182" title="All 2 branches missed.">            if (!AnkiDroidApp.getSharedPrefs(context).getBoolean(&quot;advanced_statistics_enabled&quot;, false)) {</span>
<span class="nc" id="L183">                return metaInfo;</span>
            }
        }
<span class="nc bnc" id="L186" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17354)) {</span>
            // To indicate that we calculated the statistics so that Stats.java knows that it shouldn't display the standard Forecast chart.
<span class="nc" id="L188">            Settings = new Settings(context);</span>
        }
<span class="nc bnc" id="L190" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17355)) {</span>
<span class="nc" id="L191">            metaInfo.setStatsCalculated(true);</span>
        }
<span class="nc" id="L193">        Collection mCol = CollectionHelper.getInstance().getCol(context);</span>
<span class="nc" id="L194">        int mMaxCards = 0;</span>
<span class="nc" id="L195">        double mLastElement = 0;</span>
<span class="nc" id="L196">        int mZeroIndex = 0;</span>
<span class="nc" id="L197">        int[] mValueLabels = { R.string.statistics_relearn, R.string.statistics_mature, R.string.statistics_young, R.string.statistics_learn };</span>
<span class="nc" id="L198">        int[] mColors = { R.attr.stats_relearn, R.attr.stats_mature, R.attr.stats_young, R.attr.stats_learn };</span>
<span class="nc" id="L199">        int[] mAxisTitles = { type.ordinal(), R.string.stats_cards, R.string.stats_cumulative_cards };</span>
<span class="nc" id="L200">        PlottableSimulationResult simuationResult = calculateDueAsPlottableSimulationResult(type, mCol, dids);</span>
<span class="nc" id="L201">        ArrayList&lt;int[]&gt; dues = simuationResult.getNReviews();</span>
<span class="nc" id="L202">        double[][] mSeriesList = new double[REVIEW_TYPE_COUNT_PLUS_1][dues.size()];</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17423)) {</span>
            {
<span class="nc" id="L205">                long _loopCounter332 = 0;</span>
<span class="nc bnc" id="L206" title="All 22 branches missed.">                for (int t = 0; (ListenerUtil.mutListener.listen(17422) ? (t &gt;= dues.size()) : (ListenerUtil.mutListener.listen(17421) ? (t &lt;= dues.size()) : (ListenerUtil.mutListener.listen(17420) ? (t &gt; dues.size()) : (ListenerUtil.mutListener.listen(17419) ? (t != dues.size()) : (ListenerUtil.mutListener.listen(17418) ? (t == dues.size()) : (t &lt; dues.size())))))); t++) {</span>
<span class="nc" id="L207">                    ListenerUtil.loopListener.listen(&quot;_loopCounter332&quot;, ++_loopCounter332);</span>
<span class="nc" id="L208">                    int[] data = dues.get(t);</span>
<span class="nc bnc" id="L209" title="All 248 branches missed.">                    int nReviews = (ListenerUtil.mutListener.listen(17367) ? ((ListenerUtil.mutListener.listen(17363) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17362) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17361) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17360) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) % data[REVIEW_TYPE_RELEARN_PLUS_1]) : (ListenerUtil.mutListener.listen(17366) ? ((ListenerUtil.mutListener.listen(17363) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17362) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17361) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17360) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) / data[REVIEW_TYPE_RELEARN_PLUS_1]) : (ListenerUtil.mutListener.listen(17365) ? ((ListenerUtil.mutListener.listen(17363) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17362) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17361) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17360) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) * data[REVIEW_TYPE_RELEARN_PLUS_1]) : (ListenerUtil.mutListener.listen(17364) ? ((ListenerUtil.mutListener.listen(17363) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17362) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17361) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17360) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) - data[REVIEW_TYPE_RELEARN_PLUS_1]) : ((ListenerUtil.mutListener.listen(17363) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17362) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17361) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17360) ? ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17359) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17358) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17357) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17356) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) + data[REVIEW_TYPE_RELEARN_PLUS_1])))));</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17374)) {</span>
<span class="nc bnc" id="L211" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(17372) ? (nReviews &gt;= mMaxCards) : (ListenerUtil.mutListener.listen(17371) ? (nReviews &lt;= mMaxCards) : (ListenerUtil.mutListener.listen(17370) ? (nReviews &lt; mMaxCards) : (ListenerUtil.mutListener.listen(17369) ? (nReviews != mMaxCards) : (ListenerUtil.mutListener.listen(17368) ? (nReviews == mMaxCards) : (nReviews &gt; mMaxCards)))))))</span>
<span class="nc bnc" id="L212" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17373)) {</span>
                                // Y-Axis: Max. value
<span class="nc" id="L214">                                mMaxCards = nReviews;</span>
                            }
                    }
<span class="nc bnc" id="L217" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17375)) {</span>
                        // X-Axis: Day / Week / Month
<span class="nc" id="L219">                        mSeriesList[TIME][t] = data[TIME];</span>
                    }
<span class="nc bnc" id="L221" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17388)) {</span>
<span class="nc bnc" id="L222" title="All 50 branches missed.">                        mSeriesList[REVIEW_TYPE_LEARN_PLUS_1][t] = (ListenerUtil.mutListener.listen(17387) ? ((ListenerUtil.mutListener.listen(17383) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17382) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17381) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17380) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) % // Y-Axis: # Cards</span>
<span class="nc bnc" id="L223" title="All 50 branches missed.">                        data[REVIEW_TYPE_RELEARN_PLUS_1]) : (ListenerUtil.mutListener.listen(17386) ? ((ListenerUtil.mutListener.listen(17383) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17382) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17381) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17380) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) / // Y-Axis: # Cards</span>
<span class="nc bnc" id="L224" title="All 50 branches missed.">                        data[REVIEW_TYPE_RELEARN_PLUS_1]) : (ListenerUtil.mutListener.listen(17385) ? ((ListenerUtil.mutListener.listen(17383) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17382) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17381) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17380) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) * // Y-Axis: # Cards</span>
<span class="nc bnc" id="L225" title="All 50 branches missed.">                        data[REVIEW_TYPE_RELEARN_PLUS_1]) : (ListenerUtil.mutListener.listen(17384) ? ((ListenerUtil.mutListener.listen(17383) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17382) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17381) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17380) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) - // Y-Axis: # Cards</span>
<span class="nc bnc" id="L226" title="All 48 branches missed.">                        data[REVIEW_TYPE_RELEARN_PLUS_1]) : ((ListenerUtil.mutListener.listen(17383) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17382) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17381) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17380) ? ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17379) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17378) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17377) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17376) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + data[REVIEW_TYPE_MATURE_PLUS_1]))))) + // Y-Axis: # Cards</span>
                        data[REVIEW_TYPE_RELEARN_PLUS_1])))));
                    }
<span class="nc bnc" id="L229" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17397)) {</span>
<span class="nc bnc" id="L230" title="All 10 branches missed.">                        mSeriesList[REVIEW_TYPE_YOUNG_PLUS_1][t] = (ListenerUtil.mutListener.listen(17396) ? ((ListenerUtil.mutListener.listen(17392) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17391) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17390) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17389) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) % // Y-Axis: # Mature cards</span>
<span class="nc bnc" id="L231" title="All 10 branches missed.">                        data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17395) ? ((ListenerUtil.mutListener.listen(17392) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17391) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17390) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17389) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) / // Y-Axis: # Mature cards</span>
<span class="nc bnc" id="L232" title="All 10 branches missed.">                        data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17394) ? ((ListenerUtil.mutListener.listen(17392) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17391) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17390) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17389) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) * // Y-Axis: # Mature cards</span>
<span class="nc bnc" id="L233" title="All 10 branches missed.">                        data[REVIEW_TYPE_MATURE_PLUS_1]) : (ListenerUtil.mutListener.listen(17393) ? ((ListenerUtil.mutListener.listen(17392) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17391) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17390) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17389) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) - // Y-Axis: # Mature cards</span>
<span class="nc bnc" id="L234" title="All 8 branches missed.">                        data[REVIEW_TYPE_MATURE_PLUS_1]) : ((ListenerUtil.mutListener.listen(17392) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17391) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17390) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17389) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + data[REVIEW_TYPE_YOUNG_PLUS_1]))))) + // Y-Axis: # Mature cards</span>
                        data[REVIEW_TYPE_MATURE_PLUS_1])))));
                    }
<span class="nc bnc" id="L237" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17402)) {</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">                        mSeriesList[REVIEW_TYPE_MATURE_PLUS_1][t] = (ListenerUtil.mutListener.listen(17401) ? (data[REVIEW_TYPE_LEARN_PLUS_1] % // Y-Axis: # Young</span>
<span class="nc bnc" id="L239" title="All 2 branches missed.">                        data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17400) ? (data[REVIEW_TYPE_LEARN_PLUS_1] / // Y-Axis: # Young</span>
<span class="nc bnc" id="L240" title="All 2 branches missed.">                        data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17399) ? (data[REVIEW_TYPE_LEARN_PLUS_1] * // Y-Axis: # Young</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">                        data[REVIEW_TYPE_YOUNG_PLUS_1]) : (ListenerUtil.mutListener.listen(17398) ? (data[REVIEW_TYPE_LEARN_PLUS_1] - // Y-Axis: # Young</span>
<span class="nc" id="L242">                        data[REVIEW_TYPE_YOUNG_PLUS_1]) : (data[REVIEW_TYPE_LEARN_PLUS_1] + // Y-Axis: # Young</span>
                        data[REVIEW_TYPE_YOUNG_PLUS_1])))));
                    }
<span class="nc bnc" id="L245" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17403)) {</span>
                        // Y-Axis: # Learn
<span class="nc" id="L247">                        mSeriesList[REVIEW_TYPE_RELEARN_PLUS_1][t] = data[REVIEW_TYPE_LEARN_PLUS_1];</span>
                    }
<span class="nc bnc" id="L249" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17410)) {</span>
<span class="nc bnc" id="L250" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(17408) ? (data[TIME] &gt;= mLastElement) : (ListenerUtil.mutListener.listen(17407) ? (data[TIME] &lt;= mLastElement) : (ListenerUtil.mutListener.listen(17406) ? (data[TIME] &lt; mLastElement) : (ListenerUtil.mutListener.listen(17405) ? (data[TIME] != mLastElement) : (ListenerUtil.mutListener.listen(17404) ? (data[TIME] == mLastElement) : (data[TIME] &gt; mLastElement)))))))</span>
<span class="nc bnc" id="L251" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17409)) {</span>
                                // X-Axis: Max. value (only for TYPE_LIFE)
<span class="nc" id="L253">                                mLastElement = data[TIME];</span>
                            }
                    }
<span class="nc bnc" id="L256" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17417)) {</span>
<span class="nc bnc" id="L257" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(17415) ? (data[TIME] &gt;= 0) : (ListenerUtil.mutListener.listen(17414) ? (data[TIME] &lt;= 0) : (ListenerUtil.mutListener.listen(17413) ? (data[TIME] &gt; 0) : (ListenerUtil.mutListener.listen(17412) ? (data[TIME] &lt; 0) : (ListenerUtil.mutListener.listen(17411) ? (data[TIME] != 0) : (data[TIME] == 0))))))) {</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17416)) {</span>
                                // Because we retrieve dues in the past and we should not cumulate them
<span class="nc" id="L260">                                mZeroIndex = t;</span>
                            }
                        }
                    }
                }
            }
        }
        // # X values
<span class="nc bnc" id="L268" title="All 8 branches missed.">        int mMaxElements = (ListenerUtil.mutListener.listen(17427) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17426) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17425) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17424) ? (dues.size() + 1) : (dues.size() - 1)))));</span>
<span class="nc bnc" id="L269" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17430)) {</span>
<span class="nc bnc" id="L270" title="All 3 branches missed.">            switch(type) {</span>
                case TYPE_MONTH:
<span class="nc bnc" id="L272" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17428)) {</span>
                        // X-Axis: Max. value
<span class="nc" id="L274">                        mLastElement = 31;</span>
                    }
                    break;
                case TYPE_YEAR:
<span class="nc bnc" id="L278" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17429)) {</span>
                        // X-Axis: Max. value
<span class="nc" id="L280">                        mLastElement = 52;</span>
                    }
                    break;
                default:
            }
        }
        // X-Axis: Min. value
<span class="nc" id="L287">        double mFirstElement = 0;</span>
        // Day starting at mZeroIndex, Cumulative # cards
<span class="nc" id="L289">        double[][] mCumulative = simuationResult.getNInState();</span>
<span class="nc bnc" id="L290" title="All 4 branches missed.">        double mMcount = (ListenerUtil.mutListener.listen(17450) ? ((ListenerUtil.mutListener.listen(17442) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L291" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] % mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17441) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L292" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] / mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17440) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L293" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] * mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17439) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L294" title="All 16 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] - mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L295" title="All 28 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] + mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]))))) % mCumulative[CARD_TYPE_MATURE_PLUS_1][(ListenerUtil.mutListener.listen(17446) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17445) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17444) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17443) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_MATURE_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17449) ? ((ListenerUtil.mutListener.listen(17442) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L296" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] % mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17441) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L297" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] / mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17440) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L298" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] * mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17439) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L299" title="All 16 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] - mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L300" title="All 28 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] + mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]))))) / mCumulative[CARD_TYPE_MATURE_PLUS_1][(ListenerUtil.mutListener.listen(17446) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17445) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17444) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17443) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_MATURE_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17448) ? ((ListenerUtil.mutListener.listen(17442) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L301" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] % mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17441) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L302" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] / mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17440) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L303" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] * mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17439) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L304" title="All 16 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] - mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L305" title="All 28 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] + mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]))))) * mCumulative[CARD_TYPE_MATURE_PLUS_1][(ListenerUtil.mutListener.listen(17446) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17445) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17444) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17443) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_MATURE_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17447) ? ((ListenerUtil.mutListener.listen(17442) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L306" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] % mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17441) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L307" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] / mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17440) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L308" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] * mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17439) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L309" title="All 16 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] - mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L310" title="All 26 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] + mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]))))) - mCumulative[CARD_TYPE_MATURE_PLUS_1][(ListenerUtil.mutListener.listen(17446) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17445) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17444) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17443) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_MATURE_PLUS_1].length - 1)))))]) : ((ListenerUtil.mutListener.listen(17442) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L311" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] % mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17441) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L312" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] / mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17440) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L313" title="All 18 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] * mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (ListenerUtil.mutListener.listen(17439) ? (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L314" title="All 16 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] - mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]) : (// Y-Axis: Max. cumulative value</span>
<span class="nc bnc" id="L315" title="All 24 branches missed.">        mCumulative[CARD_TYPE_NEW_PLUS_1][(ListenerUtil.mutListener.listen(17434) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17433) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17432) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17431) ? (mCumulative[CARD_TYPE_NEW_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_NEW_PLUS_1].length - 1)))))] + mCumulative[CARD_TYPE_YOUNG_PLUS_1][(ListenerUtil.mutListener.listen(17438) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17437) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17436) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17435) ? (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_YOUNG_PLUS_1].length - 1)))))]))))) + mCumulative[CARD_TYPE_MATURE_PLUS_1][(ListenerUtil.mutListener.listen(17446) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length % 1) : (ListenerUtil.mutListener.listen(17445) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length / 1) : (ListenerUtil.mutListener.listen(17444) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length * 1) : (ListenerUtil.mutListener.listen(17443) ? (mCumulative[CARD_TYPE_MATURE_PLUS_1].length + 1) : (mCumulative[CARD_TYPE_MATURE_PLUS_1].length - 1)))))])))));</span>
<span class="nc bnc" id="L316" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17457)) {</span>
            // some adjustments to not crash the chartbuilding with empty data
<span class="nc bnc" id="L318" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(17455) ? (mMaxElements &gt;= 0) : (ListenerUtil.mutListener.listen(17454) ? (mMaxElements &lt;= 0) : (ListenerUtil.mutListener.listen(17453) ? (mMaxElements &gt; 0) : (ListenerUtil.mutListener.listen(17452) ? (mMaxElements &lt; 0) : (ListenerUtil.mutListener.listen(17451) ? (mMaxElements != 0) : (mMaxElements == 0))))))) {</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17456)) {</span>
<span class="nc" id="L320">                    mMaxElements = 10;</span>
                }
            }
        }
<span class="nc bnc" id="L324" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17464)) {</span>
<span class="nc bnc" id="L325" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(17462) ? (mMcount &gt;= 0) : (ListenerUtil.mutListener.listen(17461) ? (mMcount &lt;= 0) : (ListenerUtil.mutListener.listen(17460) ? (mMcount &gt; 0) : (ListenerUtil.mutListener.listen(17459) ? (mMcount &lt; 0) : (ListenerUtil.mutListener.listen(17458) ? (mMcount != 0) : (mMcount == 0))))))) {</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17463)) {</span>
<span class="nc" id="L327">                    mMcount = 10;</span>
                }
            }
        }
<span class="nc bnc" id="L331" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17472)) {</span>
<span class="nc bnc" id="L332" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(17469) ? (mFirstElement &gt;= mLastElement) : (ListenerUtil.mutListener.listen(17468) ? (mFirstElement &lt;= mLastElement) : (ListenerUtil.mutListener.listen(17467) ? (mFirstElement &gt; mLastElement) : (ListenerUtil.mutListener.listen(17466) ? (mFirstElement &lt; mLastElement) : (ListenerUtil.mutListener.listen(17465) ? (mFirstElement != mLastElement) : (mFirstElement == mLastElement))))))) {</span>
<span class="nc bnc" id="L333" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17470)) {</span>
<span class="nc" id="L334">                    mFirstElement = 0;</span>
                }
<span class="nc bnc" id="L336" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17471)) {</span>
<span class="nc" id="L337">                    mLastElement = 6;</span>
                }
            }
        }
<span class="nc bnc" id="L341" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17479)) {</span>
<span class="nc bnc" id="L342" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(17477) ? (mMaxCards &gt;= 0) : (ListenerUtil.mutListener.listen(17476) ? (mMaxCards &lt;= 0) : (ListenerUtil.mutListener.listen(17475) ? (mMaxCards &gt; 0) : (ListenerUtil.mutListener.listen(17474) ? (mMaxCards &lt; 0) : (ListenerUtil.mutListener.listen(17473) ? (mMaxCards != 0) : (mMaxCards == 0)))))))</span>
<span class="nc bnc" id="L343" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17478)) {</span>
<span class="nc" id="L344">                    mMaxCards = 10;</span>
                }
        }
<span class="nc bnc" id="L347" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17480)) {</span>
<span class="nc" id="L348">            metaInfo.setmDynamicAxis(true);</span>
        }
<span class="nc bnc" id="L350" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17481)) {</span>
<span class="nc" id="L351">            metaInfo.setmHasColoredCumulative(true);</span>
        }
<span class="nc bnc" id="L353" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17482)) {</span>
<span class="nc" id="L354">            metaInfo.setmType(type);</span>
        }
<span class="nc bnc" id="L356" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17483)) {</span>
<span class="nc" id="L357">            metaInfo.setmTitle(R.string.stats_forecast);</span>
        }
<span class="nc bnc" id="L359" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17484)) {</span>
<span class="nc" id="L360">            metaInfo.setmBackwards(true);</span>
        }
<span class="nc bnc" id="L362" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17485)) {</span>
<span class="nc" id="L363">            metaInfo.setmValueLabels(mValueLabels);</span>
        }
<span class="nc bnc" id="L365" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17486)) {</span>
<span class="nc" id="L366">            metaInfo.setmColors(mColors);</span>
        }
<span class="nc bnc" id="L368" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17487)) {</span>
<span class="nc" id="L369">            metaInfo.setmAxisTitles(mAxisTitles);</span>
        }
<span class="nc bnc" id="L371" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17488)) {</span>
<span class="nc" id="L372">            metaInfo.setmMaxCards(mMaxCards);</span>
        }
<span class="nc bnc" id="L374" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17489)) {</span>
<span class="nc" id="L375">            metaInfo.setmMaxElements(mMaxElements);</span>
        }
<span class="nc bnc" id="L377" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17490)) {</span>
<span class="nc" id="L378">            metaInfo.setmFirstElement(mFirstElement);</span>
        }
<span class="nc bnc" id="L380" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17491)) {</span>
<span class="nc" id="L381">            metaInfo.setmLastElement(mLastElement);</span>
        }
<span class="nc bnc" id="L383" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17492)) {</span>
<span class="nc" id="L384">            metaInfo.setmZeroIndex(mZeroIndex);</span>
        }
<span class="nc bnc" id="L386" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17493)) {</span>
<span class="nc" id="L387">            metaInfo.setmCumulative(mCumulative);</span>
        }
<span class="nc bnc" id="L389" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17494)) {</span>
<span class="nc" id="L390">            metaInfo.setmMcount(mMcount);</span>
        }
<span class="nc bnc" id="L392" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17495)) {</span>
<span class="nc" id="L393">            metaInfo.setmSeriesList(mSeriesList);</span>
        }
<span class="nc bnc" id="L395" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17501)) {</span>
<span class="nc bnc" id="L396" title="All 22 branches missed.">            metaInfo.setDataAvailable((ListenerUtil.mutListener.listen(17500) ? (dues.size() &gt;= 0) : (ListenerUtil.mutListener.listen(17499) ? (dues.size() &lt;= 0) : (ListenerUtil.mutListener.listen(17498) ? (dues.size() &lt; 0) : (ListenerUtil.mutListener.listen(17497) ? (dues.size() != 0) : (ListenerUtil.mutListener.listen(17496) ? (dues.size() == 0) : (dues.size() &gt; 0)))))));</span>
        }
<span class="nc" id="L398">        return metaInfo;</span>
    }

    /**
     * Determine forecast statistics based on a computation or simulation of future reviews and returns the results of the simulation.
     * @param type @see #calculateDueOriginal(StatsMetaInfo, int, Context, String)
     * @param mCol @see #calculateDueOriginal(StatsMetaInfo, int, Context, String)
     * @param dids @see #calculateDueOriginal(StatsMetaInfo, int, Context, String)
     * @return An object containing the results of the simulation:
     *        - The forecasted number of reviews per review type (relearn, mature, young, learn)
     *        - The forecasted number of cards in each state (new, young, mature)
     */
    private PlottableSimulationResult calculateDueAsPlottableSimulationResult(Stats.AxisType type, Collection mCol, String dids) {
<span class="nc" id="L411">        int end = 0;</span>
<span class="nc" id="L412">        int chunk = 0;</span>
<span class="nc bnc" id="L413" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17508)) {</span>
<span class="nc bnc" id="L414" title="All 4 branches missed.">            switch(type) {</span>
                case TYPE_MONTH:
<span class="nc bnc" id="L416" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17502)) {</span>
<span class="nc" id="L417">                        end = 31;</span>
                    }
<span class="nc bnc" id="L419" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17503)) {</span>
<span class="nc" id="L420">                        chunk = 1;</span>
                    }
                    break;
                case TYPE_YEAR:
<span class="nc bnc" id="L424" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17504)) {</span>
<span class="nc" id="L425">                        end = 52;</span>
                    }
<span class="nc bnc" id="L427" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17505)) {</span>
<span class="nc" id="L428">                        chunk = 7;</span>
                    }
                    break;
                case TYPE_LIFE:
<span class="nc bnc" id="L432" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17506)) {</span>
<span class="nc" id="L433">                        end = 24;</span>
                    }
<span class="nc bnc" id="L435" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17507)) {</span>
<span class="nc" id="L436">                        chunk = 30;</span>
                    }
                    break;
            }
        }
<span class="nc" id="L441">        EaseClassifier classifier = new EaseClassifier(mCol.getTime(), mCol.getDb());</span>
<span class="nc" id="L442">        ReviewSimulator reviewSimulator = new ReviewSimulator(mCol.getDb(), classifier, end, chunk);</span>
<span class="nc" id="L443">        TodayStats todayStats = new TodayStats(mCol, Settings.getDayStartCutoff(mCol.getCrt()));</span>
<span class="nc" id="L444">        long t0 = mCol.getTime().intTimeMS();</span>
<span class="nc" id="L445">        SimulationResult simulationResult = reviewSimulator.simNreviews(Settings.getToday((int) mCol.getCrt()), mCol.getDecks(), dids, todayStats);</span>
<span class="nc" id="L446">        long t1 = mCol.getTime().intTimeMS();</span>
<span class="nc bnc" id="L447" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17513)) {</span>
<span class="nc bnc" id="L448" title="All 8 branches missed.">            Timber.d(&quot;Simulation of all decks took: %d ms&quot;, (ListenerUtil.mutListener.listen(17512) ? (t1 % t0) : (ListenerUtil.mutListener.listen(17511) ? (t1 / t0) : (ListenerUtil.mutListener.listen(17510) ? (t1 * t0) : (ListenerUtil.mutListener.listen(17509) ? (t1 + t0) : (t1 - t0))))));</span>
        }
<span class="nc" id="L450">        int[][] nReviews = ArrayUtils.transposeMatrix(simulationResult.getNReviews());</span>
<span class="nc" id="L451">        int[][] nInState = ArrayUtils.transposeMatrix(simulationResult.getNInState());</span>
<span class="nc bnc" id="L452" title="All 8 branches missed.">        ArrayList&lt;int[]&gt; dues = new ArrayList&lt;&gt;((ListenerUtil.mutListener.listen(17517) ? (nReviews.length % 2) : (ListenerUtil.mutListener.listen(17516) ? (nReviews.length / 2) : (ListenerUtil.mutListener.listen(17515) ? (nReviews.length * 2) : (ListenerUtil.mutListener.listen(17514) ? (nReviews.length - 2) : (nReviews.length + 2))))));</span>
<span class="nc bnc" id="L453" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17524)) {</span>
            {
<span class="nc" id="L455">                long _loopCounter333 = 0;</span>
                // Forecasted number of reviews
<span class="nc bnc" id="L457" title="All 22 branches missed.">                for (int i = 0; (ListenerUtil.mutListener.listen(17523) ? (i &gt;= nReviews.length) : (ListenerUtil.mutListener.listen(17522) ? (i &lt;= nReviews.length) : (ListenerUtil.mutListener.listen(17521) ? (i &gt; nReviews.length) : (ListenerUtil.mutListener.listen(17520) ? (i != nReviews.length) : (ListenerUtil.mutListener.listen(17519) ? (i == nReviews.length) : (i &lt; nReviews.length)))))); i++) {</span>
<span class="nc" id="L458">                    ListenerUtil.loopListener.listen(&quot;_loopCounter333&quot;, ++_loopCounter333);</span>
<span class="nc bnc" id="L459" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17518)) {</span>
<span class="nc" id="L460">                        dues.add(new int[] { // Time</span>
                        i, nReviews[i][REVIEW_TYPE_LEARN], nReviews[i][REVIEW_TYPE_YOUNG], nReviews[i][REVIEW_TYPE_MATURE], nReviews[i][REVIEW_TYPE_RELEARN] });
                    }
                }
            }
        }
<span class="nc bnc" id="L466" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17537)) {</span>
            // small adjustment for a proper chartbuilding
<span class="nc bnc" id="L468" title="All 90 branches missed.">            if ((ListenerUtil.mutListener.listen(17535) ? ((ListenerUtil.mutListener.listen(17529) ? (dues.size() &gt;= 0) : (ListenerUtil.mutListener.listen(17528) ? (dues.size() &lt;= 0) : (ListenerUtil.mutListener.listen(17527) ? (dues.size() &gt; 0) : (ListenerUtil.mutListener.listen(17526) ? (dues.size() &lt; 0) : (ListenerUtil.mutListener.listen(17525) ? (dues.size() != 0) : (dues.size() == 0)))))) &amp;&amp; (ListenerUtil.mutListener.listen(17534) ? (dues.get(0)[0] &gt;= 0) : (ListenerUtil.mutListener.listen(17533) ? (dues.get(0)[0] &lt;= 0) : (ListenerUtil.mutListener.listen(17532) ? (dues.get(0)[0] &lt; 0) : (ListenerUtil.mutListener.listen(17531) ? (dues.get(0)[0] != 0) : (ListenerUtil.mutListener.listen(17530) ? (dues.get(0)[0] == 0) : (dues.get(0)[0] &gt; 0))))))) : ((ListenerUtil.mutListener.listen(17529) ? (dues.size() &gt;= 0) : (ListenerUtil.mutListener.listen(17528) ? (dues.size() &lt;= 0) : (ListenerUtil.mutListener.listen(17527) ? (dues.size() &gt; 0) : (ListenerUtil.mutListener.listen(17526) ? (dues.size() &lt; 0) : (ListenerUtil.mutListener.listen(17525) ? (dues.size() != 0) : (dues.size() == 0)))))) || (ListenerUtil.mutListener.listen(17534) ? (dues.get(0)[0] &gt;= 0) : (ListenerUtil.mutListener.listen(17533) ? (dues.get(0)[0] &lt;= 0) : (ListenerUtil.mutListener.listen(17532) ? (dues.get(0)[0] &lt; 0) : (ListenerUtil.mutListener.listen(17531) ? (dues.get(0)[0] != 0) : (ListenerUtil.mutListener.listen(17530) ? (dues.get(0)[0] == 0) : (dues.get(0)[0] &gt; 0))))))))) {</span>
<span class="nc bnc" id="L469" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17536)) {</span>
<span class="nc" id="L470">                    dues.add(0, new int[] { 0, 0, 0, 0, 0 });</span>
                }
            }
        }
<span class="nc bnc" id="L474" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17545)) {</span>
<span class="nc bnc" id="L475" title="All 50 branches missed.">            if ((ListenerUtil.mutListener.listen(17543) ? (type == Stats.AxisType.TYPE_LIFE || (ListenerUtil.mutListener.listen(17542) ? (dues.size() &gt;= 2) : (ListenerUtil.mutListener.listen(17541) ? (dues.size() &lt;= 2) : (ListenerUtil.mutListener.listen(17540) ? (dues.size() &gt; 2) : (ListenerUtil.mutListener.listen(17539) ? (dues.size() != 2) : (ListenerUtil.mutListener.listen(17538) ? (dues.size() == 2) : (dues.size() &lt; 2))))))) : (type == Stats.AxisType.TYPE_LIFE &amp;&amp; (ListenerUtil.mutListener.listen(17542) ? (dues.size() &gt;= 2) : (ListenerUtil.mutListener.listen(17541) ? (dues.size() &lt;= 2) : (ListenerUtil.mutListener.listen(17540) ? (dues.size() &gt; 2) : (ListenerUtil.mutListener.listen(17539) ? (dues.size() != 2) : (ListenerUtil.mutListener.listen(17538) ? (dues.size() == 2) : (dues.size() &lt; 2))))))))) {</span>
<span class="nc bnc" id="L476" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17544)) {</span>
<span class="nc" id="L477">                    end = 31;</span>
                }
            }
        }
<span class="nc bnc" id="L481" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17572)) {</span>
<span class="nc bnc" id="L482" title="All 146 branches missed.">            if ((ListenerUtil.mutListener.listen(17555) ? (type != Stats.AxisType.TYPE_LIFE || (ListenerUtil.mutListener.listen(17554) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &gt;= end) : (ListenerUtil.mutListener.listen(17553) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &lt;= end) : (ListenerUtil.mutListener.listen(17552) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &gt; end) : (ListenerUtil.mutListener.listen(17551) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] != end) : (ListenerUtil.mutListener.listen(17550) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] == end) : (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &lt; end))))))) : (type != Stats.AxisType.TYPE_LIFE &amp;&amp; (ListenerUtil.mutListener.listen(17554) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &gt;= end) : (ListenerUtil.mutListener.listen(17553) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &lt;= end) : (ListenerUtil.mutListener.listen(17552) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &gt; end) : (ListenerUtil.mutListener.listen(17551) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] != end) : (ListenerUtil.mutListener.listen(17550) ? (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] == end) : (dues.get((ListenerUtil.mutListener.listen(17549) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17548) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17547) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17546) ? (dues.size() + 1) : (dues.size() - 1))))))[0] &lt; end))))))))) {</span>
<span class="nc bnc" id="L483" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17571)) {</span>
<span class="nc" id="L484">                    dues.add(new int[] { end, 0, 0, 0, 0 });</span>
                }
<span class="nc bnc" id="L486" title="All 50 branches missed.">            } else if ((ListenerUtil.mutListener.listen(17561) ? (type == Stats.AxisType.TYPE_LIFE || (ListenerUtil.mutListener.listen(17560) ? (dues.size() &gt;= 2) : (ListenerUtil.mutListener.listen(17559) ? (dues.size() &lt;= 2) : (ListenerUtil.mutListener.listen(17558) ? (dues.size() &gt; 2) : (ListenerUtil.mutListener.listen(17557) ? (dues.size() != 2) : (ListenerUtil.mutListener.listen(17556) ? (dues.size() == 2) : (dues.size() &lt; 2))))))) : (type == Stats.AxisType.TYPE_LIFE &amp;&amp; (ListenerUtil.mutListener.listen(17560) ? (dues.size() &gt;= 2) : (ListenerUtil.mutListener.listen(17559) ? (dues.size() &lt;= 2) : (ListenerUtil.mutListener.listen(17558) ? (dues.size() &gt; 2) : (ListenerUtil.mutListener.listen(17557) ? (dues.size() != 2) : (ListenerUtil.mutListener.listen(17556) ? (dues.size() == 2) : (dues.size() &lt; 2))))))))) {</span>
<span class="nc bnc" id="L487" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17570)) {</span>
<span class="nc bnc" id="L488" title="All 48 branches missed.">                    dues.add(new int[] { Math.max(12, (ListenerUtil.mutListener.listen(17569) ? (dues.get((ListenerUtil.mutListener.listen(17565) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17564) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17563) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17562) ? (dues.size() + 1) : (dues.size() - 1))))))[0] % 1) : (ListenerUtil.mutListener.listen(17568) ? (dues.get((ListenerUtil.mutListener.listen(17565) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17564) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17563) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17562) ? (dues.size() + 1) : (dues.size() - 1))))))[0] / 1) : (ListenerUtil.mutListener.listen(17567) ? (dues.get((ListenerUtil.mutListener.listen(17565) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17564) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17563) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17562) ? (dues.size() + 1) : (dues.size() - 1))))))[0] * 1) : (ListenerUtil.mutListener.listen(17566) ? (dues.get((ListenerUtil.mutListener.listen(17565) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17564) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17563) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17562) ? (dues.size() + 1) : (dues.size() - 1))))))[0] - 1) : (dues.get((ListenerUtil.mutListener.listen(17565) ? (dues.size() % 1) : (ListenerUtil.mutListener.listen(17564) ? (dues.size() / 1) : (ListenerUtil.mutListener.listen(17563) ? (dues.size() * 1) : (ListenerUtil.mutListener.listen(17562) ? (dues.size() + 1) : (dues.size() - 1))))))[0] + 1)))))), 0, 0, 0, 0 });</span>
                }
            }
        }
<span class="nc" id="L492">        double[][] nInStateCum = new double[dues.size()][];</span>
<span class="nc bnc" id="L493" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(17597)) {</span>
            {
<span class="nc" id="L495">                long _loopCounter334 = 0;</span>
<span class="nc bnc" id="L496" title="All 22 branches missed.">                for (int i = 0; (ListenerUtil.mutListener.listen(17596) ? (i &gt;= dues.size()) : (ListenerUtil.mutListener.listen(17595) ? (i &lt;= dues.size()) : (ListenerUtil.mutListener.listen(17594) ? (i &gt; dues.size()) : (ListenerUtil.mutListener.listen(17593) ? (i != dues.size()) : (ListenerUtil.mutListener.listen(17592) ? (i == dues.size()) : (i &lt; dues.size())))))); i++) {</span>
<span class="nc" id="L497">                    ListenerUtil.loopListener.listen(&quot;_loopCounter334&quot;, ++_loopCounter334);</span>
<span class="nc bnc" id="L498" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17591)) {</span>
<span class="nc bnc" id="L499" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(17577) ? (i &gt;= nInState.length) : (ListenerUtil.mutListener.listen(17576) ? (i &lt;= nInState.length) : (ListenerUtil.mutListener.listen(17575) ? (i &gt; nInState.length) : (ListenerUtil.mutListener.listen(17574) ? (i != nInState.length) : (ListenerUtil.mutListener.listen(17573) ? (i == nInState.length) : (i &lt; nInState.length))))))) {</span>
<span class="nc bnc" id="L500" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17590)) {</span>
<span class="nc" id="L501">                                nInStateCum[i] = new double[] { i, // Y-Axis: Relearn = 0 (we can't say 'we know x relearn cards on day d')</span>
                                0, // Y-Axis: Mature
                                nInState[i][CARD_TYPE_MATURE], // Y-Axis: Young
                                nInState[i][CARD_TYPE_YOUNG], // Y-Axis: New
                                nInState[i][CARD_TYPE_NEW] };
                            }
                        } else {
<span class="nc bnc" id="L508" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17589)) {</span>
<span class="nc bnc" id="L509" title="All 22 branches missed.">                                if ((ListenerUtil.mutListener.listen(17582) ? (i &gt;= 0) : (ListenerUtil.mutListener.listen(17581) ? (i &lt;= 0) : (ListenerUtil.mutListener.listen(17580) ? (i &gt; 0) : (ListenerUtil.mutListener.listen(17579) ? (i &lt; 0) : (ListenerUtil.mutListener.listen(17578) ? (i != 0) : (i == 0))))))) {</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17588)) {</span>
<span class="nc" id="L511">                                        nInStateCum[i] = new double[] { i, 0, 0, 0, 0 };</span>
                                    }
                                } else {
<span class="nc bnc" id="L514" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17587)) {</span>
<span class="nc bnc" id="L515" title="All 8 branches missed.">                                        nInStateCum[i] = nInStateCum[(ListenerUtil.mutListener.listen(17586) ? (i % 1) : (ListenerUtil.mutListener.listen(17585) ? (i / 1) : (ListenerUtil.mutListener.listen(17584) ? (i * 1) : (ListenerUtil.mutListener.listen(17583) ? (i + 1) : (i - 1)))))];</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
<span class="nc" id="L524">        return new PlottableSimulationResult(dues, ArrayUtils.transposeMatrix(nInStateCum));</span>
    }

    private static class Card {

        private int ivl;

        private double factor;

        private int lastReview;

        private int due;

        private int correct;

        private long id;

        @Override
        @NonNull
        public String toString() {
<span class="nc" id="L544">            return &quot;Card [ivl=&quot; + ivl + &quot;, factor=&quot; + factor + &quot;, due=&quot; + due + &quot;, correct=&quot; + correct + &quot;, id=&quot; + id + &quot;]&quot;;</span>
        }

        public Card(long id, int ivl, int factor, int due, int correct, int lastReview) {
<span class="nc" id="L548">            super();</span>
<span class="nc bnc" id="L549" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17598)) {</span>
<span class="nc" id="L550">                this.id = id;</span>
            }
<span class="nc bnc" id="L552" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17599)) {</span>
<span class="nc" id="L553">                this.ivl = ivl;</span>
            }
<span class="nc bnc" id="L555" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17604)) {</span>
<span class="nc bnc" id="L556" title="All 8 branches missed.">                this.factor = (ListenerUtil.mutListener.listen(17603) ? (factor % 1000.0) : (ListenerUtil.mutListener.listen(17602) ? (factor * 1000.0) : (ListenerUtil.mutListener.listen(17601) ? (factor - 1000.0) : (ListenerUtil.mutListener.listen(17600) ? (factor + 1000.0) : (factor / 1000.0)))));</span>
            }
<span class="nc bnc" id="L558" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17605)) {</span>
<span class="nc" id="L559">                this.due = due;</span>
            }
<span class="nc bnc" id="L561" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17606)) {</span>
<span class="nc" id="L562">                this.correct = correct;</span>
            }
<span class="nc bnc" id="L564" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17607)) {</span>
<span class="nc" id="L565">                this.lastReview = lastReview;</span>
            }
<span class="nc" id="L567">        }</span>

        public void setAll(long id, int ivl, int factor, int due, int correct, int lastReview) {
<span class="nc bnc" id="L570" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17608)) {</span>
<span class="nc" id="L571">                this.id = id;</span>
            }
<span class="nc bnc" id="L573" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17609)) {</span>
<span class="nc" id="L574">                this.ivl = ivl;</span>
            }
<span class="nc bnc" id="L576" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17614)) {</span>
<span class="nc bnc" id="L577" title="All 8 branches missed.">                this.factor = (ListenerUtil.mutListener.listen(17613) ? (factor % 1000.0) : (ListenerUtil.mutListener.listen(17612) ? (factor * 1000.0) : (ListenerUtil.mutListener.listen(17611) ? (factor - 1000.0) : (ListenerUtil.mutListener.listen(17610) ? (factor + 1000.0) : (factor / 1000.0)))));</span>
            }
<span class="nc bnc" id="L579" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17615)) {</span>
<span class="nc" id="L580">                this.due = due;</span>
            }
<span class="nc bnc" id="L582" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17616)) {</span>
<span class="nc" id="L583">                this.correct = correct;</span>
            }
<span class="nc bnc" id="L585" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17617)) {</span>
<span class="nc" id="L586">                this.lastReview = lastReview;</span>
            }
<span class="nc" id="L588">        }</span>

        public void setAll(Card card) {
<span class="nc bnc" id="L591" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17618)) {</span>
<span class="nc" id="L592">                this.id = card.id;</span>
            }
<span class="nc bnc" id="L594" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17619)) {</span>
<span class="nc" id="L595">                this.ivl = card.ivl;</span>
            }
<span class="nc bnc" id="L597" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17620)) {</span>
<span class="nc" id="L598">                this.factor = card.factor;</span>
            }
<span class="nc bnc" id="L600" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17621)) {</span>
<span class="nc" id="L601">                this.due = card.due;</span>
            }
<span class="nc bnc" id="L603" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17622)) {</span>
<span class="nc" id="L604">                this.correct = card.correct;</span>
            }
<span class="nc bnc" id="L606" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17623)) {</span>
<span class="nc" id="L607">                this.lastReview = card.lastReview;</span>
            }
<span class="nc" id="L609">        }</span>

        public long getId() {
<span class="nc" id="L612">            return id;</span>
        }

        public int getIvl() {
<span class="nc" id="L616">            return ivl;</span>
        }

        public void setIvl(int ivl) {
<span class="nc bnc" id="L620" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17624)) {</span>
<span class="nc" id="L621">                this.ivl = ivl;</span>
            }
<span class="nc" id="L623">        }</span>

        public double getFactor() {
<span class="nc" id="L626">            return factor;</span>
        }

        public void setFactor(double factor) {
<span class="nc bnc" id="L630" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17625)) {</span>
<span class="nc" id="L631">                this.factor = factor;</span>
            }
<span class="nc" id="L633">        }</span>

        public int getDue() {
<span class="nc" id="L636">            return due;</span>
        }

        public void setDue(int due) {
<span class="nc bnc" id="L640" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17626)) {</span>
<span class="nc" id="L641">                this.due = due;</span>
            }
<span class="nc" id="L643">        }</span>

        /**
         * Type of the card, based on the interval.
         * @return CARD_TYPE_NEW if interval = 0, CARD_TYPE_YOUNG if interval 1-20, CARD_TYPE_MATURE if interval &gt;= 20
         */
        public int getType() {
<span class="nc bnc" id="L650" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(17631) ? (ivl &gt;= 0) : (ListenerUtil.mutListener.listen(17630) ? (ivl &lt;= 0) : (ListenerUtil.mutListener.listen(17629) ? (ivl &gt; 0) : (ListenerUtil.mutListener.listen(17628) ? (ivl &lt; 0) : (ListenerUtil.mutListener.listen(17627) ? (ivl != 0) : (ivl == 0))))))) {</span>
<span class="nc" id="L651">                return CARD_TYPE_NEW;</span>
<span class="nc bnc" id="L652" title="All 22 branches missed.">            } else if ((ListenerUtil.mutListener.listen(17636) ? (ivl &lt;= 21) : (ListenerUtil.mutListener.listen(17635) ? (ivl &gt; 21) : (ListenerUtil.mutListener.listen(17634) ? (ivl &lt; 21) : (ListenerUtil.mutListener.listen(17633) ? (ivl != 21) : (ListenerUtil.mutListener.listen(17632) ? (ivl == 21) : (ivl &gt;= 21))))))) {</span>
<span class="nc" id="L653">                return CARD_TYPE_MATURE;</span>
            } else {
<span class="nc" id="L655">                return CARD_TYPE_YOUNG;</span>
            }
        }

        public int getCorrect() {
<span class="nc" id="L660">            return correct;</span>
        }

        public void setCorrect(int correct) {
<span class="nc bnc" id="L664" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17637)) {</span>
<span class="nc" id="L665">                this.correct = correct;</span>
            }
<span class="nc" id="L667">        }</span>

        public int getLastReview() {
<span class="nc" id="L670">            return lastReview;</span>
        }

        public void setLastReview(int lastReview) {
<span class="nc bnc" id="L674" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17638)) {</span>
<span class="nc" id="L675">                this.lastReview = lastReview;</span>
            }
<span class="nc" id="L677">        }</span>
    }

<span class="nc" id="L680">    private class DeckFactory {</span>

        public Deck createDeck(long did, Decks decks) {
<span class="nc bnc" id="L683" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17639)) {</span>
<span class="nc" id="L684">                Timber.d(&quot;Trying to get deck settings for deck with id=&quot; + did);</span>
            }
<span class="nc" id="L686">            DeckConfig conf = decks.confForDid(did);</span>
<span class="nc" id="L687">            int newPerDay = Settings.getMaxNewPerDay();</span>
<span class="nc" id="L688">            int revPerDay = Settings.getMaxReviewsPerDay();</span>
<span class="nc" id="L689">            int initialFactor = Settings.getInitialFactor();</span>
<span class="nc bnc" id="L690" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17647)) {</span>
<span class="nc bnc" id="L691" title="All 2 branches missed.">                if (conf.getInt(&quot;dyn&quot;) == Consts.DECK_STD) {</span>
<span class="nc bnc" id="L692" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17641)) {</span>
<span class="nc" id="L693">                        revPerDay = conf.getJSONObject(&quot;rev&quot;).getInt(&quot;perDay&quot;);</span>
                    }
<span class="nc bnc" id="L695" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17642)) {</span>
<span class="nc" id="L696">                        newPerDay = conf.getJSONObject(&quot;new&quot;).getInt(&quot;perDay&quot;);</span>
                    }
<span class="nc bnc" id="L698" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17643)) {</span>
<span class="nc" id="L699">                        initialFactor = conf.getJSONObject(&quot;new&quot;).getInt(&quot;initialFactor&quot;);</span>
                    }
<span class="nc bnc" id="L701" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17644)) {</span>
<span class="nc" id="L702">                        Timber.d(&quot;rev.perDay=%d&quot;, revPerDay);</span>
                    }
<span class="nc bnc" id="L704" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17645)) {</span>
<span class="nc" id="L705">                        Timber.d(&quot;new.perDay=%d&quot;, newPerDay);</span>
                    }
<span class="nc bnc" id="L707" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17646)) {</span>
<span class="nc" id="L708">                        Timber.d(&quot;new.initialFactor=%d&quot;, initialFactor);</span>
                    }
                } else {
<span class="nc bnc" id="L711" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17640)) {</span>
<span class="nc" id="L712">                        Timber.d(&quot;dyn=%d&quot;, conf.getInt(&quot;dyn&quot;));</span>
                    }
                }
            }
<span class="nc" id="L716">            return new Deck(did, newPerDay, revPerDay, initialFactor);</span>
        }
    }

    /**
     * Stores settings that are deck-specific.
     */
    private static class Deck {

        private final long did;

        private final int newPerDay;

        private final int revPerDay;

        private final int initialFactor;

<span class="nc" id="L733">        public Deck(long did, int newPerDay, int revPerDay, int initialFactor) {</span>
<span class="nc" id="L734">            this.did = did;</span>
<span class="nc" id="L735">            this.newPerDay = newPerDay;</span>
<span class="nc" id="L736">            this.revPerDay = revPerDay;</span>
<span class="nc" id="L737">            this.initialFactor = initialFactor;</span>
<span class="nc" id="L738">        }</span>

        public long getDid() {
<span class="nc" id="L741">            return did;</span>
        }

        public int getNewPerDay() {
<span class="nc" id="L745">            return newPerDay;</span>
        }

        public int getRevPerDay() {
<span class="nc" id="L749">            return revPerDay;</span>
        }

        public int getInitialFactor() {
<span class="nc" id="L753">            return initialFactor;</span>
        }
    }

    private static class CardIterator {

        private final Cursor cur;

        private final int today;

        private final Deck deck;

<span class="nc" id="L765">        public CardIterator(DB db, int today, Deck deck) {</span>
<span class="nc" id="L766">            this.today = today;</span>
<span class="nc" id="L767">            this.deck = deck;</span>
<span class="nc" id="L768">            long did = deck.getDid();</span>
<span class="nc" id="L769">            String query = &quot;SELECT id, due, ivl, factor, type, reps &quot; + &quot;FROM cards &quot; + &quot;WHERE did IN (&quot; + did + &quot;) &quot; + &quot;AND queue != &quot; + Consts.QUEUE_TYPE_SUSPENDED + // ignore suspended cards</span>
            &quot; &quot; + &quot;order by id;&quot;;
<span class="nc bnc" id="L771" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17648)) {</span>
<span class="nc" id="L772">                Timber.d(&quot;Forecast query: %s&quot;, query);</span>
            }
<span class="nc" id="L774">            cur = db.query(query);</span>
<span class="nc" id="L775">        }</span>

        public boolean moveToNext() {
<span class="nc" id="L778">            return cur.moveToNext();</span>
        }

        public void current(Card card) {
<span class="nc bnc" id="L782" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17658)) {</span>
                // Id
<span class="nc" id="L784">                card.setAll(// Id</span>
<span class="nc" id="L785">                cur.getLong(0), // reps = 0 ? 0 : card interval</span>
<span class="nc bnc" id="L786" title="All 2 branches missed.">                cur.getInt(5) == 0 ? 0 : cur.getInt(2), // factor</span>
<span class="nc bnc" id="L787" title="All 22 branches missed.">                (ListenerUtil.mutListener.listen(17653) ? (cur.getInt(3) &gt;= 0) : (ListenerUtil.mutListener.listen(17652) ? (cur.getInt(3) &lt;= 0) : (ListenerUtil.mutListener.listen(17651) ? (cur.getInt(3) &lt; 0) : (ListenerUtil.mutListener.listen(17650) ? (cur.getInt(3) != 0) : (ListenerUtil.mutListener.listen(17649) ? (cur.getInt(3) == 0) : (cur.getInt(3) &gt; 0)))))) ? cur.getInt(3) : deck.getInitialFactor(), // due</span>
<span class="nc bnc" id="L788" title="All 8 branches missed.">                Math.max((ListenerUtil.mutListener.listen(17657) ? (cur.getInt(1) % today) : (ListenerUtil.mutListener.listen(17656) ? (cur.getInt(1) / today) : (ListenerUtil.mutListener.listen(17655) ? (cur.getInt(1) * today) : (ListenerUtil.mutListener.listen(17654) ? (cur.getInt(1) + today) : (cur.getInt(1) - today))))), 0), // correct</span>
                1, // lastreview
                -1);
            }
<span class="nc" id="L792">        }</span>

        public void close() {
<span class="nc bnc" id="L795" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17661)) {</span>
<span class="nc bnc" id="L796" title="All 10 branches missed.">                if ((ListenerUtil.mutListener.listen(17659) ? (cur != null || !cur.isClosed()) : (cur != null &amp;&amp; !cur.isClosed())))</span>
<span class="nc bnc" id="L797" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17660)) {</span>
<span class="nc" id="L798">                        cur.close();</span>
                    }
            }
<span class="nc" id="L801">        }</span>
    }

    /**
     * Based on the current type of the card (@see Card#getType()), determines the interval of the card after review and the probability of the card having that interval after review.
     * This is done using a discrete probability distribution, which is built on construction.
     * For each possible current type of the card, it gives the probability of each possible review outcome (repeat, hard, good, easy).
     * The review outcome determines the next interval of the card.
     *
     * If the review outcome is specified by the caller, the next interval of the card will be determined based on the review outcome
     * and the probability will be fetched from the probability distribution.
     * If the review outcome is not specified by the caller, the review outcome will be sampled randomly from the probability distribution
     * and the probability will be 1.
     */
    private static class EaseClassifier {

        private final Random random;

        private final DB db;

        private double[][] probabilities;

        private double[][] probabilitiesCumulative;

        // half of new cards are answered correctly
<span class="nc" id="L826">        private final int[] priorNew = { 5, 0, 5, 0 };</span>

        // 90% of young cards get &quot;good&quot; response
<span class="nc" id="L829">        private final int[] priorYoung = { 1, 0, 9, 0 };</span>

        // 90% of mature cards get &quot;good&quot; response
<span class="nc" id="L832">        private final int[] priorMature = { 1, 0, 9, 0 };</span>

        // Over decks means more data, but not tuned to deck.
        private static final String queryBaseNew = &quot;select &quot; + &quot;count() as N, &quot; + &quot;sum(case when ease=1 then 1 else 0 end) as repeat, &quot; + // Doesn't occur in query_new
        &quot;0 as hard, &quot; + &quot;sum(case when ease=2 then 1 else 0 end) as good, &quot; + &quot;sum(case when ease=3 then 1 else 0 end) as easy &quot; + &quot;from revlog &quot;;

        private static final String queryBaseYoungMature = &quot;select &quot; + &quot;count() as N, &quot; + &quot;sum(case when ease=1 then 1 else 0 end) as repeat, &quot; + // Doesn't occur in query_new
        &quot;sum(case when ease=2 then 1 else 0 end) as hard, &quot; + &quot;sum(case when ease=3 then 1 else 0 end) as good, &quot; + &quot;sum(case when ease=4 then 1 else 0 end) as easy &quot; + &quot;from revlog &quot;;

        private static final String queryNew = queryBaseNew + &quot;where type=&quot; + CARD_TYPE_NEW + &quot;;&quot;;

        private static final String queryYoung = queryBaseYoungMature + &quot;where type=&quot; + Consts.CARD_TYPE_LRN + &quot; and lastIvl &lt; 21;&quot;;

        private static final String queryMature = queryBaseYoungMature + &quot;where type=&quot; + Consts.CARD_TYPE_LRN + &quot; and lastIvl &gt;= 21;&quot;;

<span class="nc" id="L847">        public EaseClassifier(Time time, DB db) {</span>
<span class="nc" id="L848">            this.db = db;</span>
<span class="nc" id="L849">            singleReviewOutcome = new ReviewOutcome(null, 0);</span>
<span class="nc" id="L850">            long t0 = time.intTimeMS();</span>
<span class="nc bnc" id="L851" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17662)) {</span>
<span class="nc" id="L852">                calculateCumProbabilitiesForNewEasePerCurrentEase();</span>
            }
<span class="nc" id="L854">            long t1 = time.intTimeMS();</span>
<span class="nc bnc" id="L855" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17667)) {</span>
<span class="nc bnc" id="L856" title="All 8 branches missed.">                Timber.d(&quot;Calculating probability distributions took: %d ms&quot;, (ListenerUtil.mutListener.listen(17666) ? (t1 % t0) : (ListenerUtil.mutListener.listen(17665) ? (t1 / t0) : (ListenerUtil.mutListener.listen(17664) ? (t1 * t0) : (ListenerUtil.mutListener.listen(17663) ? (t1 + t0) : (t1 - t0))))));</span>
            }
<span class="nc bnc" id="L858" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17668)) {</span>
<span class="nc" id="L859">                Timber.d(&quot;new\t\t%s&quot;, Arrays.toString(this.probabilities[0]));</span>
            }
<span class="nc bnc" id="L861" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17669)) {</span>
<span class="nc" id="L862">                Timber.d(&quot;young\t\t%s&quot;, Arrays.toString(this.probabilities[1]));</span>
            }
<span class="nc bnc" id="L864" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17670)) {</span>
<span class="nc" id="L865">                Timber.d(&quot;mature\t%s&quot;, Arrays.toString(this.probabilities[2]));</span>
            }
<span class="nc bnc" id="L867" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17671)) {</span>
<span class="nc" id="L868">                Timber.d(&quot;Cumulative new\t\t%s&quot;, Arrays.toString(this.probabilitiesCumulative[0]));</span>
            }
<span class="nc bnc" id="L870" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17672)) {</span>
<span class="nc" id="L871">                Timber.d(&quot;Cumulative young\t\t%s&quot;, Arrays.toString(this.probabilitiesCumulative[1]));</span>
            }
<span class="nc bnc" id="L873" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17673)) {</span>
<span class="nc" id="L874">                Timber.d(&quot;Cumulative mature\t%s&quot;, Arrays.toString(this.probabilitiesCumulative[2]));</span>
            }
<span class="nc" id="L876">            random = new Random();</span>
<span class="nc" id="L877">        }</span>

        private double[] cumsum(double[] p) {
<span class="nc" id="L880">            double[] q = new double[4];</span>
<span class="nc bnc" id="L881" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17674)) {</span>
<span class="nc" id="L882">                q[0] = p[0];</span>
            }
<span class="nc bnc" id="L884" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17679)) {</span>
<span class="nc bnc" id="L885" title="All 8 branches missed.">                q[1] = (ListenerUtil.mutListener.listen(17678) ? (q[0] % p[1]) : (ListenerUtil.mutListener.listen(17677) ? (q[0] / p[1]) : (ListenerUtil.mutListener.listen(17676) ? (q[0] * p[1]) : (ListenerUtil.mutListener.listen(17675) ? (q[0] - p[1]) : (q[0] + p[1])))));</span>
            }
<span class="nc bnc" id="L887" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17684)) {</span>
<span class="nc bnc" id="L888" title="All 8 branches missed.">                q[2] = (ListenerUtil.mutListener.listen(17683) ? (q[1] % p[2]) : (ListenerUtil.mutListener.listen(17682) ? (q[1] / p[2]) : (ListenerUtil.mutListener.listen(17681) ? (q[1] * p[2]) : (ListenerUtil.mutListener.listen(17680) ? (q[1] - p[2]) : (q[1] + p[2])))));</span>
            }
<span class="nc bnc" id="L890" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17689)) {</span>
<span class="nc bnc" id="L891" title="All 8 branches missed.">                q[3] = (ListenerUtil.mutListener.listen(17688) ? (q[2] % p[3]) : (ListenerUtil.mutListener.listen(17687) ? (q[2] / p[3]) : (ListenerUtil.mutListener.listen(17686) ? (q[2] * p[3]) : (ListenerUtil.mutListener.listen(17685) ? (q[2] - p[3]) : (q[2] + p[3])))));</span>
            }
<span class="nc" id="L893">            return q;</span>
        }

        private void calculateCumProbabilitiesForNewEasePerCurrentEase() {
<span class="nc bnc" id="L897" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17690)) {</span>
<span class="nc" id="L898">                this.probabilities = new double[3][];</span>
            }
<span class="nc bnc" id="L900" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17691)) {</span>
<span class="nc" id="L901">                this.probabilitiesCumulative = new double[3][];</span>
            }
<span class="nc bnc" id="L903" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17692)) {</span>
<span class="nc" id="L904">                this.probabilities[CARD_TYPE_NEW] = calculateProbabilitiesForNewEaseForCurrentEase(queryNew, priorNew);</span>
            }
<span class="nc bnc" id="L906" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17693)) {</span>
<span class="nc" id="L907">                this.probabilities[CARD_TYPE_YOUNG] = calculateProbabilitiesForNewEaseForCurrentEase(queryYoung, priorYoung);</span>
            }
<span class="nc bnc" id="L909" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17694)) {</span>
<span class="nc" id="L910">                this.probabilities[CARD_TYPE_MATURE] = calculateProbabilitiesForNewEaseForCurrentEase(queryMature, priorMature);</span>
            }
<span class="nc bnc" id="L912" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17695)) {</span>
<span class="nc" id="L913">                this.probabilitiesCumulative[CARD_TYPE_NEW] = cumsum(this.probabilities[CARD_TYPE_NEW]);</span>
            }
<span class="nc bnc" id="L915" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17696)) {</span>
<span class="nc" id="L916">                this.probabilitiesCumulative[CARD_TYPE_YOUNG] = cumsum(this.probabilities[CARD_TYPE_YOUNG]);</span>
            }
<span class="nc bnc" id="L918" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17697)) {</span>
<span class="nc" id="L919">                this.probabilitiesCumulative[CARD_TYPE_MATURE] = cumsum(this.probabilities[CARD_TYPE_MATURE]);</span>
            }
<span class="nc" id="L921">        }</span>

        /**
         * Given a query which selects the frequency of each review outcome for the current type of the card,
         * and an array containing the prior frequency of each review outcome for the current type of the card,
         * it gives the probability of each possible review outcome (repeat, hard, good, easy).
         * @param queryNewEaseCountForCurrentEase Query which selects the frequency of each review outcome for the current type of the card.
         * @param prior Array containing the prior frequency of each review outcome for the current type of the card.
         * @return The probability of each possible review outcome (repeat, hard, good, easy).
         */
        private double[] calculateProbabilitiesForNewEaseForCurrentEase(String queryNewEaseCountForCurrentEase, int[] prior) {
<span class="nc" id="L932">            int[] freqs = new int[] { prior[REVIEW_OUTCOME_REPEAT], prior[REVIEW_OUTCOME_HARD], prior[REVIEW_OUTCOME_GOOD], prior[REVIEW_OUTCOME_EASY] };</span>
<span class="nc bnc" id="L933" title="All 248 branches missed.">            int n = (ListenerUtil.mutListener.listen(17709) ? ((ListenerUtil.mutListener.listen(17705) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) % prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17704) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) / prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17703) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) * prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17702) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) - prior[REVIEW_OUTCOME_GOOD]) : ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) + prior[REVIEW_OUTCOME_GOOD]))))) % prior[REVIEW_OUTCOME_EASY]) : (ListenerUtil.mutListener.listen(17708) ? ((ListenerUtil.mutListener.listen(17705) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) % prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17704) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) / prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17703) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) * prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17702) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) - prior[REVIEW_OUTCOME_GOOD]) : ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) + prior[REVIEW_OUTCOME_GOOD]))))) / prior[REVIEW_OUTCOME_EASY]) : (ListenerUtil.mutListener.listen(17707) ? ((ListenerUtil.mutListener.listen(17705) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) % prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17704) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) / prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17703) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) * prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17702) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) - prior[REVIEW_OUTCOME_GOOD]) : ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) + prior[REVIEW_OUTCOME_GOOD]))))) * prior[REVIEW_OUTCOME_EASY]) : (ListenerUtil.mutListener.listen(17706) ? ((ListenerUtil.mutListener.listen(17705) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) % prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17704) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) / prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17703) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) * prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17702) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) - prior[REVIEW_OUTCOME_GOOD]) : ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) + prior[REVIEW_OUTCOME_GOOD]))))) - prior[REVIEW_OUTCOME_EASY]) : ((ListenerUtil.mutListener.listen(17705) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) % prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17704) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) / prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17703) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) * prior[REVIEW_OUTCOME_GOOD]) : (ListenerUtil.mutListener.listen(17702) ? ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) - prior[REVIEW_OUTCOME_GOOD]) : ((ListenerUtil.mutListener.listen(17701) ? (prior[REVIEW_OUTCOME_REPEAT] % prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17700) ? (prior[REVIEW_OUTCOME_REPEAT] / prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17699) ? (prior[REVIEW_OUTCOME_REPEAT] * prior[REVIEW_OUTCOME_HARD]) : (ListenerUtil.mutListener.listen(17698) ? (prior[REVIEW_OUTCOME_REPEAT] - prior[REVIEW_OUTCOME_HARD]) : (prior[REVIEW_OUTCOME_REPEAT] + prior[REVIEW_OUTCOME_HARD]))))) + prior[REVIEW_OUTCOME_GOOD]))))) + prior[REVIEW_OUTCOME_EASY])))));</span>
<span class="nc" id="L934">            try (Cursor cur = db.query(queryNewEaseCountForCurrentEase)) {</span>
<span class="nc bnc" id="L935" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17710)) {</span>
<span class="nc" id="L936">                    cur.moveToNext();</span>
                }
<span class="nc bnc" id="L938" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17711)) {</span>
                    // Repeat
<span class="nc" id="L940">                    freqs[REVIEW_OUTCOME_REPEAT] += cur.getInt(REVIEW_OUTCOME_REPEAT_PLUS_1);</span>
                }
<span class="nc bnc" id="L942" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17712)) {</span>
                    // Hard
<span class="nc" id="L944">                    freqs[REVIEW_OUTCOME_HARD] += cur.getInt(REVIEW_OUTCOME_HARD_PLUS_1);</span>
                }
<span class="nc bnc" id="L946" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17713)) {</span>
                    // Good
<span class="nc" id="L948">                    freqs[REVIEW_OUTCOME_GOOD] += cur.getInt(REVIEW_OUTCOME_GOOD_PLUS_1);</span>
                }
<span class="nc bnc" id="L950" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17714)) {</span>
                    // Easy
<span class="nc" id="L952">                    freqs[REVIEW_OUTCOME_EASY] += cur.getInt(REVIEW_OUTCOME_EASY_PLUS_1);</span>
                }
                // N
<span class="nc" id="L955">                int nQuery = cur.getInt(0);</span>
<span class="nc bnc" id="L956" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17715)) {</span>
<span class="nc" id="L957">                    n += nQuery;</span>
                }
            }
<span class="nc bnc" id="L960" title="All 32 branches missed.">            return new double[] { (ListenerUtil.mutListener.listen(17719) ? (freqs[REVIEW_OUTCOME_REPEAT] % (double) n) : (ListenerUtil.mutListener.listen(17718) ? (freqs[REVIEW_OUTCOME_REPEAT] * (double) n) : (ListenerUtil.mutListener.listen(17717) ? (freqs[REVIEW_OUTCOME_REPEAT] - (double) n) : (ListenerUtil.mutListener.listen(17716) ? (freqs[REVIEW_OUTCOME_REPEAT] + (double) n) : (freqs[REVIEW_OUTCOME_REPEAT] / (double) n))))), (ListenerUtil.mutListener.listen(17723) ? (freqs[REVIEW_OUTCOME_HARD] % (double) n) : (ListenerUtil.mutListener.listen(17722) ? (freqs[REVIEW_OUTCOME_HARD] * (double) n) : (ListenerUtil.mutListener.listen(17721) ? (freqs[REVIEW_OUTCOME_HARD] - (double) n) : (ListenerUtil.mutListener.listen(17720) ? (freqs[REVIEW_OUTCOME_HARD] + (double) n) : (freqs[REVIEW_OUTCOME_HARD] / (double) n))))), (ListenerUtil.mutListener.listen(17727) ? (freqs[REVIEW_OUTCOME_GOOD] % (double) n) : (ListenerUtil.mutListener.listen(17726) ? (freqs[REVIEW_OUTCOME_GOOD] * (double) n) : (ListenerUtil.mutListener.listen(17725) ? (freqs[REVIEW_OUTCOME_GOOD] - (double) n) : (ListenerUtil.mutListener.listen(17724) ? (freqs[REVIEW_OUTCOME_GOOD] + (double) n) : (freqs[REVIEW_OUTCOME_GOOD] / (double) n))))), (ListenerUtil.mutListener.listen(17731) ? (freqs[REVIEW_OUTCOME_EASY] % (double) n) : (ListenerUtil.mutListener.listen(17730) ? (freqs[REVIEW_OUTCOME_EASY] * (double) n) : (ListenerUtil.mutListener.listen(17729) ? (freqs[REVIEW_OUTCOME_EASY] - (double) n) : (ListenerUtil.mutListener.listen(17728) ? (freqs[REVIEW_OUTCOME_EASY] + (double) n) : (freqs[REVIEW_OUTCOME_EASY] / (double) n))))) };</span>
        }

        private int draw(double[] p) {
<span class="nc" id="L964">            return searchsorted(p, random.nextDouble());</span>
        }

        private int searchsorted(double[] p, double random) {
<span class="nc bnc" id="L968" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17737)) {</span>
<span class="nc bnc" id="L969" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17736) ? (random &gt;= p[0]) : (ListenerUtil.mutListener.listen(17735) ? (random &gt; p[0]) : (ListenerUtil.mutListener.listen(17734) ? (random &lt; p[0]) : (ListenerUtil.mutListener.listen(17733) ? (random != p[0]) : (ListenerUtil.mutListener.listen(17732) ? (random == p[0]) : (random &lt;= p[0])))))))</span>
<span class="nc" id="L970">                    return 0;</span>
            }
<span class="nc bnc" id="L972" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17743)) {</span>
<span class="nc bnc" id="L973" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17742) ? (random &gt;= p[1]) : (ListenerUtil.mutListener.listen(17741) ? (random &gt; p[1]) : (ListenerUtil.mutListener.listen(17740) ? (random &lt; p[1]) : (ListenerUtil.mutListener.listen(17739) ? (random != p[1]) : (ListenerUtil.mutListener.listen(17738) ? (random == p[1]) : (random &lt;= p[1])))))))</span>
<span class="nc" id="L974">                    return 1;</span>
            }
<span class="nc bnc" id="L976" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17749)) {</span>
<span class="nc bnc" id="L977" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17748) ? (random &gt;= p[2]) : (ListenerUtil.mutListener.listen(17747) ? (random &gt; p[2]) : (ListenerUtil.mutListener.listen(17746) ? (random &lt; p[2]) : (ListenerUtil.mutListener.listen(17745) ? (random != p[2]) : (ListenerUtil.mutListener.listen(17744) ? (random == p[2]) : (random &lt;= p[2])))))))</span>
<span class="nc" id="L978">                    return 2;</span>
            }
<span class="nc" id="L980">            return 3;</span>
        }

        private final ReviewOutcome singleReviewOutcome;

        public ReviewOutcome simSingleReview(Card c) {
            @Consts.CARD_TYPE
<span class="nc" id="L987">            int type = c.getType();</span>
<span class="nc" id="L988">            int outcome = draw(probabilitiesCumulative[type]);</span>
<span class="nc bnc" id="L989" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17750)) {</span>
<span class="nc" id="L990">                applyOutcomeToCard(c, outcome);</span>
            }
<span class="nc bnc" id="L992" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17751)) {</span>
<span class="nc" id="L993">                singleReviewOutcome.setAll(c, 1);</span>
            }
<span class="nc" id="L995">            return singleReviewOutcome;</span>
        }

        public ReviewOutcome simSingleReview(Card c, int outcome) {
<span class="nc" id="L999">            int c_type = c.getType();</span>
<span class="nc bnc" id="L1000" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17752)) {</span>
                // For first review, re-use current card to prevent creating too many objects
<span class="nc" id="L1002">                applyOutcomeToCard(c, outcome);</span>
            }
<span class="nc bnc" id="L1004" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17753)) {</span>
<span class="nc" id="L1005">                singleReviewOutcome.setAll(c, probabilities[c_type][outcome]);</span>
            }
<span class="nc" id="L1007">            return singleReviewOutcome;</span>
        }

        private void applyOutcomeToCard(Card c, int outcome) {
            @Consts.CARD_TYPE
<span class="nc" id="L1012">            int type = c.getType();</span>
<span class="nc" id="L1013">            int ivl = c.getIvl();</span>
<span class="nc" id="L1014">            double factor = c.getFactor();</span>
<span class="nc bnc" id="L1015" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17784)) {</span>
<span class="nc bnc" id="L1016" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17758) ? (type &gt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(17757) ? (type &lt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(17756) ? (type &gt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(17755) ? (type &lt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(17754) ? (type != CARD_TYPE_NEW) : (type == CARD_TYPE_NEW))))))) {</span>
<span class="nc bnc" id="L1017" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17783)) {</span>
<span class="nc bnc" id="L1018" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(17780) ? (outcome &gt;= 2) : (ListenerUtil.mutListener.listen(17779) ? (outcome &gt; 2) : (ListenerUtil.mutListener.listen(17778) ? (outcome &lt; 2) : (ListenerUtil.mutListener.listen(17777) ? (outcome != 2) : (ListenerUtil.mutListener.listen(17776) ? (outcome == 2) : (outcome &lt;= 2))))))) {</span>
<span class="nc bnc" id="L1019" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17782)) {</span>
<span class="nc" id="L1020">                                ivl = 1;</span>
                            }
                        } else {
<span class="nc bnc" id="L1023" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17781)) {</span>
<span class="nc" id="L1024">                                ivl = 4;</span>
                            }
                        }
                    }
                } else {
<span class="nc bnc" id="L1029" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17775)) {</span>
<span class="nc bnc" id="L1030" title="All 4 branches missed.">                        switch(outcome) {</span>
                            case REVIEW_OUTCOME_REPEAT:
<span class="nc bnc" id="L1032" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(17759)) {</span>
<span class="nc" id="L1033">                                    ivl = 1;</span>
                                }
                                // factor = Math.max(1300, factor - 200);
                                break;
                            case REVIEW_OUTCOME_HARD:
<span class="nc bnc" id="L1038" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(17760)) {</span>
<span class="nc" id="L1039">                                    ivl *= 1.2;</span>
                                }
                                break;
                            case REVIEW_OUTCOME_GOOD:
<span class="nc bnc" id="L1043" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(17765)) {</span>
<span class="nc bnc" id="L1044" title="All 8 branches missed.">                                    ivl *= (ListenerUtil.mutListener.listen(17764) ? (1.2 % factor) : (ListenerUtil.mutListener.listen(17763) ? (1.2 / factor) : (ListenerUtil.mutListener.listen(17762) ? (1.2 - factor) : (ListenerUtil.mutListener.listen(17761) ? (1.2 + factor) : (1.2 * factor)))));</span>
                                }
                                break;
                            case REVIEW_OUTCOME_EASY:
                            default:
<span class="nc bnc" id="L1049" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(17774)) {</span>
<span class="nc bnc" id="L1050" title="All 48 branches missed.">                                    ivl *= (ListenerUtil.mutListener.listen(17773) ? ((ListenerUtil.mutListener.listen(17769) ? (1.2 % 2.) : (ListenerUtil.mutListener.listen(17768) ? (1.2 / 2.) : (ListenerUtil.mutListener.listen(17767) ? (1.2 - 2.) : (ListenerUtil.mutListener.listen(17766) ? (1.2 + 2.) : (1.2 * 2.))))) % factor) : (ListenerUtil.mutListener.listen(17772) ? ((ListenerUtil.mutListener.listen(17769) ? (1.2 % 2.) : (ListenerUtil.mutListener.listen(17768) ? (1.2 / 2.) : (ListenerUtil.mutListener.listen(17767) ? (1.2 - 2.) : (ListenerUtil.mutListener.listen(17766) ? (1.2 + 2.) : (1.2 * 2.))))) / factor) : (ListenerUtil.mutListener.listen(17771) ? ((ListenerUtil.mutListener.listen(17769) ? (1.2 % 2.) : (ListenerUtil.mutListener.listen(17768) ? (1.2 / 2.) : (ListenerUtil.mutListener.listen(17767) ? (1.2 - 2.) : (ListenerUtil.mutListener.listen(17766) ? (1.2 + 2.) : (1.2 * 2.))))) - factor) : (ListenerUtil.mutListener.listen(17770) ? ((ListenerUtil.mutListener.listen(17769) ? (1.2 % 2.) : (ListenerUtil.mutListener.listen(17768) ? (1.2 / 2.) : (ListenerUtil.mutListener.listen(17767) ? (1.2 - 2.) : (ListenerUtil.mutListener.listen(17766) ? (1.2 + 2.) : (1.2 * 2.))))) + factor) : ((ListenerUtil.mutListener.listen(17769) ? (1.2 % 2.) : (ListenerUtil.mutListener.listen(17768) ? (1.2 / 2.) : (ListenerUtil.mutListener.listen(17767) ? (1.2 - 2.) : (ListenerUtil.mutListener.listen(17766) ? (1.2 + 2.) : (1.2 * 2.))))) * factor)))));</span>
                                }
                                break;
                        }
                    }
                }
            }
<span class="nc bnc" id="L1057" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17785)) {</span>
<span class="nc" id="L1058">                c.setIvl(ivl);</span>
            }
<span class="nc bnc" id="L1060" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17791)) {</span>
<span class="nc bnc" id="L1061" title="All 22 branches missed.">                c.setCorrect(((ListenerUtil.mutListener.listen(17790) ? (outcome &gt;= 0) : (ListenerUtil.mutListener.listen(17789) ? (outcome &lt;= 0) : (ListenerUtil.mutListener.listen(17788) ? (outcome &lt; 0) : (ListenerUtil.mutListener.listen(17787) ? (outcome != 0) : (ListenerUtil.mutListener.listen(17786) ? (outcome == 0) : (outcome &gt; 0))))))) ? 1 : 0);</span>
            }
<span class="nc" id="L1063">        }</span>
    }

    public static class TodayStats {

        private final Map&lt;Long, Integer&gt; nLearnedPerDeckId;

<span class="nc" id="L1070">        public TodayStats(Collection col, long dayStartCutoff) {</span>
<span class="nc" id="L1071">            nLearnedPerDeckId = new HashMap&lt;&gt;(col.getDecks().count());</span>
<span class="nc" id="L1072">            SupportSQLiteDatabase db = col.getDb().getDatabase();</span>
<span class="nc" id="L1073">            String query = &quot;select cards.did, &quot; + &quot;sum(case when revlog.type = &quot; + CARD_TYPE_NEW + &quot; then 1 else 0 end)&quot; + /* learning */</span>
            &quot; from revlog, cards where revlog.cid = cards.id and revlog.id &gt; &quot; + dayStartCutoff + &quot; group by cards.did&quot;;
<span class="nc bnc" id="L1075" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17792)) {</span>
<span class="nc" id="L1076">                Timber.d(&quot;AdvancedStatistics.TodayStats query: %s&quot;, query);</span>
            }
<span class="nc" id="L1078">            try (Cursor cur = db.query(query)) {</span>
<span class="nc bnc" id="L1079" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17794)) {</span>
                    {
<span class="nc" id="L1081">                        long _loopCounter335 = 0;</span>
<span class="nc bnc" id="L1082" title="All 2 branches missed.">                        while (cur.moveToNext()) {</span>
<span class="nc" id="L1083">                            ListenerUtil.loopListener.listen(&quot;_loopCounter335&quot;, ++_loopCounter335);</span>
<span class="nc bnc" id="L1084" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17793)) {</span>
<span class="nc" id="L1085">                                nLearnedPerDeckId.put(cur.getLong(0), cur.getInt(1));</span>
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1091">        }</span>

        public int getNLearned(long did) {
<span class="nc bnc" id="L1094" title="All 2 branches missed.">            if (nLearnedPerDeckId.containsKey(did)) {</span>
<span class="nc" id="L1095">                return nLearnedPerDeckId.get(did);</span>
            } else {
<span class="nc" id="L1097">                return 0;</span>
            }
        }
    }

    public static class NewCardSimulator {

        private int nAddedToday;

        private int tAdd;

<span class="nc" id="L1108">        public NewCardSimulator() {</span>
<span class="nc bnc" id="L1109" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17795)) {</span>
<span class="nc" id="L1110">                reset(0);</span>
            }
<span class="nc" id="L1112">        }</span>

        public int simulateNewCard(Deck deck) {
<span class="nc bnc" id="L1115" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17796)) {</span>
<span class="nc" id="L1116">                nAddedToday++;</span>
            }
            // differs from online
<span class="nc" id="L1119">            int tElapsed = tAdd;</span>
<span class="nc bnc" id="L1120" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17804)) {</span>
<span class="nc bnc" id="L1121" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17801) ? (nAddedToday &lt;= deck.getNewPerDay()) : (ListenerUtil.mutListener.listen(17800) ? (nAddedToday &gt; deck.getNewPerDay()) : (ListenerUtil.mutListener.listen(17799) ? (nAddedToday &lt; deck.getNewPerDay()) : (ListenerUtil.mutListener.listen(17798) ? (nAddedToday != deck.getNewPerDay()) : (ListenerUtil.mutListener.listen(17797) ? (nAddedToday == deck.getNewPerDay()) : (nAddedToday &gt;= deck.getNewPerDay()))))))) {</span>
<span class="nc bnc" id="L1122" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17802)) {</span>
<span class="nc" id="L1123">                        tAdd++;</span>
                    }
<span class="nc bnc" id="L1125" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(17803)) {</span>
<span class="nc" id="L1126">                        nAddedToday = 0;</span>
                    }
                }
            }
<span class="nc" id="L1130">            return tElapsed;</span>
        }

        public void reset(int nAddedToday) {
<span class="nc bnc" id="L1134" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17805)) {</span>
<span class="nc" id="L1135">                this.nAddedToday = nAddedToday;</span>
            }
<span class="nc bnc" id="L1137" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17806)) {</span>
<span class="nc" id="L1138">                this.tAdd = 0;</span>
            }
<span class="nc" id="L1140">        }</span>
    }

    /**
     * Simulates future card reviews, keeping track of statistics and returns those as SimulationResult.
     *
     * A simulation is run for each of the specified decks using the settings (max # cards per day, max # reviews per day, initial factor for new cards) for that deck.
     * Within each deck the simulation consists of one or more simulations of each card within that deck.
     * A simulation of a single card means simulating future card reviews starting from now until the end of the simulation window as specified by nTimeBins and timeBinLength.
     *
     * A review of a single card is run by the specified classifier.
     */
    private class ReviewSimulator {

        private final DB db;

        private final EaseClassifier classifier;

        // TODO: also exists in Review
        private final int nTimeBins;

        private final int timeBinLength;

        private final int tMax;

<span class="nc" id="L1165">        private final NewCardSimulator newCardSimulator = new NewCardSimulator();</span>

<span class="nc" id="L1167">        public ReviewSimulator(DB db, EaseClassifier classifier, int nTimeBins, int timeBinLength) {</span>
<span class="nc" id="L1168">            this.db = db;</span>
<span class="nc" id="L1169">            this.classifier = classifier;</span>
<span class="nc" id="L1170">            this.nTimeBins = nTimeBins;</span>
<span class="nc" id="L1171">            this.timeBinLength = timeBinLength;</span>
<span class="nc bnc" id="L1172" title="All 8 branches missed.">            this.tMax = (ListenerUtil.mutListener.listen(17810) ? (this.nTimeBins % this.timeBinLength) : (ListenerUtil.mutListener.listen(17809) ? (this.nTimeBins / this.timeBinLength) : (ListenerUtil.mutListener.listen(17808) ? (this.nTimeBins - this.timeBinLength) : (ListenerUtil.mutListener.listen(17807) ? (this.nTimeBins + this.timeBinLength) : (this.nTimeBins * this.timeBinLength)))));</span>
<span class="nc" id="L1173">        }</span>

        public SimulationResult simNreviews(int today, Decks decks, String didsStr, TodayStats todayStats) {
<span class="nc" id="L1176">            SimulationResult simulationResultAggregated = new SimulationResult(nTimeBins, timeBinLength, SimulationResult.DOUBLE_TO_INT_MODE_ROUND);</span>
<span class="nc" id="L1177">            long[] dids = ArrayUtils.stringToLongArray(didsStr);</span>
<span class="nc" id="L1178">            int nIterations = Settings.getSimulateNIterations();</span>
<span class="nc bnc" id="L1179" title="All 8 branches missed.">            double nIterationsInv = (ListenerUtil.mutListener.listen(17814) ? (1.0 % nIterations) : (ListenerUtil.mutListener.listen(17813) ? (1.0 * nIterations) : (ListenerUtil.mutListener.listen(17812) ? (1.0 - nIterations) : (ListenerUtil.mutListener.listen(17811) ? (1.0 + nIterations) : (1.0 / nIterations)))));</span>
<span class="nc bnc" id="L1180" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17823)) {</span>
                {
<span class="nc" id="L1182">                    long _loopCounter337 = 0;</span>
<span class="nc bnc" id="L1183" title="All 2 branches missed.">                    for (long did : dids) {</span>
<span class="nc" id="L1184">                        ListenerUtil.loopListener.listen(&quot;_loopCounter337&quot;, ++_loopCounter337);</span>
<span class="nc bnc" id="L1185" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17822)) {</span>
                            {
<span class="nc" id="L1187">                                long _loopCounter336 = 0;</span>
<span class="nc bnc" id="L1188" title="All 22 branches missed.">                                for (int iteration = 0; (ListenerUtil.mutListener.listen(17821) ? (iteration &gt;= nIterations) : (ListenerUtil.mutListener.listen(17820) ? (iteration &lt;= nIterations) : (ListenerUtil.mutListener.listen(17819) ? (iteration &gt; nIterations) : (ListenerUtil.mutListener.listen(17818) ? (iteration != nIterations) : (ListenerUtil.mutListener.listen(17817) ? (iteration == nIterations) : (iteration &lt; nIterations)))))); iteration++) {</span>
<span class="nc" id="L1189">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter336&quot;, ++_loopCounter336);</span>
<span class="nc bnc" id="L1190" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17815)) {</span>
<span class="nc" id="L1191">                                        newCardSimulator.reset(todayStats.getNLearned(did));</span>
                                    }
<span class="nc bnc" id="L1193" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17816)) {</span>
<span class="nc" id="L1194">                                        simulationResultAggregated.add(simNreviews(today, Decks.createDeck(did, decks)), nIterationsInv);</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1202">            return simulationResultAggregated;</span>
        }

        private SimulationResult simNreviews(int today, Deck deck) {
            SimulationResult simulationResult;
            // So if we take the floor when displaying it, we will display the maximum # reviews
<span class="nc bnc" id="L1208" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(17828) ? (Settings.getComputeNDays() &gt;= 0) : (ListenerUtil.mutListener.listen(17827) ? (Settings.getComputeNDays() &lt;= 0) : (ListenerUtil.mutListener.listen(17826) ? (Settings.getComputeNDays() &lt; 0) : (ListenerUtil.mutListener.listen(17825) ? (Settings.getComputeNDays() != 0) : (ListenerUtil.mutListener.listen(17824) ? (Settings.getComputeNDays() == 0) : (Settings.getComputeNDays() &gt; 0)))))))</span>
<span class="nc" id="L1209">                simulationResult = new SimulationResult(nTimeBins, timeBinLength, SimulationResult.DOUBLE_TO_INT_MODE_FLOOR);</span>
            else
<span class="nc" id="L1211">                simulationResult = new SimulationResult(nTimeBins, timeBinLength, SimulationResult.DOUBLE_TO_INT_MODE_ROUND);</span>
<span class="nc bnc" id="L1212" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17829)) {</span>
<span class="nc" id="L1213">                Timber.d(&quot;today: %d&quot;, today);</span>
            }
<span class="nc" id="L1215">            Stack&lt;Review&gt; reviews = new Stack&lt;&gt;();</span>
<span class="nc" id="L1216">            ArrayList&lt;Review&gt; reviewList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L1217">            Card card = new Card(0, 0, 0, 0, 0, 0);</span>
<span class="nc" id="L1218">            CardIterator cardIterator = null;</span>
<span class="nc" id="L1219">            Review review = new Review(deck, simulationResult, classifier, reviews, reviewList);</span>
            try {
<span class="nc bnc" id="L1221" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17832)) {</span>
<span class="nc" id="L1222">                    cardIterator = new CardIterator(db, today, deck);</span>
                }
<span class="nc bnc" id="L1224" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17844)) {</span>
                    {
<span class="nc" id="L1226">                        long _loopCounter339 = 0;</span>
<span class="nc bnc" id="L1227" title="All 2 branches missed.">                        while (cardIterator.moveToNext()) {</span>
<span class="nc" id="L1228">                            ListenerUtil.loopListener.listen(&quot;_loopCounter339&quot;, ++_loopCounter339);</span>
<span class="nc bnc" id="L1229" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17833)) {</span>
<span class="nc" id="L1230">                                cardIterator.current(card);</span>
                            }
<span class="nc bnc" id="L1232" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17834)) {</span>
<span class="nc" id="L1233">                                review.newCard(card, newCardSimulator);</span>
                            }
<span class="nc bnc" id="L1235" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17841)) {</span>
<span class="nc bnc" id="L1236" title="All 22 branches missed.">                                if ((ListenerUtil.mutListener.listen(17839) ? (review.getT() &gt;= tMax) : (ListenerUtil.mutListener.listen(17838) ? (review.getT() &lt;= tMax) : (ListenerUtil.mutListener.listen(17837) ? (review.getT() &gt; tMax) : (ListenerUtil.mutListener.listen(17836) ? (review.getT() != tMax) : (ListenerUtil.mutListener.listen(17835) ? (review.getT() == tMax) : (review.getT() &lt; tMax)))))))</span>
<span class="nc bnc" id="L1237" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17840)) {</span>
<span class="nc" id="L1238">                                        reviews.push(review);</span>
                                    }
                            }
<span class="nc bnc" id="L1241" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(17843)) {</span>
                                {
<span class="nc" id="L1243">                                    long _loopCounter338 = 0;</span>
<span class="nc bnc" id="L1244" title="All 2 branches missed.">                                    while (!reviews.isEmpty()) {</span>
<span class="nc" id="L1245">                                        ListenerUtil.loopListener.listen(&quot;_loopCounter338&quot;, ++_loopCounter338);</span>
<span class="nc bnc" id="L1246" title="All 2 branches missed.">                                        if (!ListenerUtil.mutListener.listen(17842)) {</span>
<span class="nc" id="L1247">                                            reviews.pop().simulateReview();</span>
                                        }
                                    }
<span class="nc" id="L1250">                                }</span>
                            }
                        }
                    }
                }
            } finally {
<span class="nc bnc" id="L1256" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(17831)) {</span>
<span class="nc bnc" id="L1257" title="All 2 branches missed.">                    if (cardIterator != null)</span>
<span class="nc bnc" id="L1258" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17830)) {</span>
<span class="nc" id="L1259">                            cardIterator.close();</span>
                        }
                }
            }
<span class="nc bnc" id="L1263" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17845)) {</span>
<span class="nc" id="L1264">                ArrayUtils.formatMatrix(&quot;nReviews&quot;, simulationResult.getNReviews(), &quot;%04d &quot;);</span>
            }
<span class="nc bnc" id="L1266" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17846)) {</span>
<span class="nc" id="L1267">                ArrayUtils.formatMatrix(&quot;nInState&quot;, simulationResult.getNInState(), &quot;%04d &quot;);</span>
            }
<span class="nc" id="L1269">            return simulationResult;</span>
        }
    }

    /**
     * Stores global settings.
     */
    private static class Settings {

        private final int computeNDays;

        private final double computeMaxError;

        private final int simulateNIterations;

        private final Collection mCol;

<span class="nc" id="L1286">        public Settings(Context context) {</span>
<span class="nc" id="L1287">            SharedPreferences prefs = AnkiDroidApp.getSharedPrefs(context);</span>
<span class="nc" id="L1288">            mCol = CollectionHelper.getInstance().getCol(context);</span>
<span class="nc" id="L1289">            computeNDays = prefs.getInt(&quot;advanced_forecast_stats_compute_n_days&quot;, 0);</span>
<span class="nc" id="L1290">            int computePrecision = prefs.getInt(&quot;advanced_forecast_stats_compute_precision&quot;, 90);</span>
<span class="nc bnc" id="L1291" title="All 48 branches missed.">            computeMaxError = (ListenerUtil.mutListener.listen(17854) ? (((ListenerUtil.mutListener.listen(17850) ? (100 % computePrecision) : (ListenerUtil.mutListener.listen(17849) ? (100 / computePrecision) : (ListenerUtil.mutListener.listen(17848) ? (100 * computePrecision) : (ListenerUtil.mutListener.listen(17847) ? (100 + computePrecision) : (100 - computePrecision)))))) % 100.0) : (ListenerUtil.mutListener.listen(17853) ? (((ListenerUtil.mutListener.listen(17850) ? (100 % computePrecision) : (ListenerUtil.mutListener.listen(17849) ? (100 / computePrecision) : (ListenerUtil.mutListener.listen(17848) ? (100 * computePrecision) : (ListenerUtil.mutListener.listen(17847) ? (100 + computePrecision) : (100 - computePrecision)))))) * 100.0) : (ListenerUtil.mutListener.listen(17852) ? (((ListenerUtil.mutListener.listen(17850) ? (100 % computePrecision) : (ListenerUtil.mutListener.listen(17849) ? (100 / computePrecision) : (ListenerUtil.mutListener.listen(17848) ? (100 * computePrecision) : (ListenerUtil.mutListener.listen(17847) ? (100 + computePrecision) : (100 - computePrecision)))))) - 100.0) : (ListenerUtil.mutListener.listen(17851) ? (((ListenerUtil.mutListener.listen(17850) ? (100 % computePrecision) : (ListenerUtil.mutListener.listen(17849) ? (100 / computePrecision) : (ListenerUtil.mutListener.listen(17848) ? (100 * computePrecision) : (ListenerUtil.mutListener.listen(17847) ? (100 + computePrecision) : (100 - computePrecision)))))) + 100.0) : (((ListenerUtil.mutListener.listen(17850) ? (100 % computePrecision) : (ListenerUtil.mutListener.listen(17849) ? (100 / computePrecision) : (ListenerUtil.mutListener.listen(17848) ? (100 * computePrecision) : (ListenerUtil.mutListener.listen(17847) ? (100 + computePrecision) : (100 - computePrecision)))))) / 100.0)))));</span>
<span class="nc" id="L1292">            simulateNIterations = prefs.getInt(&quot;advanced_forecast_stats_mc_n_iterations&quot;, 1);</span>
<span class="nc bnc" id="L1293" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17855)) {</span>
<span class="nc" id="L1294">                Timber.d(&quot;computeNDays: %s&quot;, computeNDays);</span>
            }
<span class="nc bnc" id="L1296" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17856)) {</span>
<span class="nc" id="L1297">                Timber.d(&quot;computeMaxError: %s&quot;, computeMaxError);</span>
            }
<span class="nc bnc" id="L1299" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17857)) {</span>
<span class="nc" id="L1300">                Timber.d(&quot;simulateNIterations: %s&quot;, simulateNIterations);</span>
            }
<span class="nc" id="L1302">        }</span>

        public int getComputeNDays() {
<span class="nc" id="L1305">            return computeNDays;</span>
        }

        public double getComputeMaxError() {
<span class="nc" id="L1309">            return computeMaxError;</span>
        }

        public int getSimulateNIterations() {
<span class="nc" id="L1313">            return simulateNIterations;</span>
        }

        /**
         * @return Maximum number of new cards per day which will be used if it cannot be read from Deck settings.
         */
        public int getMaxNewPerDay() {
<span class="nc" id="L1320">            return 20;</span>
        }

        /**
         * @return Maximum number of reviews per day which will be used if it cannot be read from Deck settings.
         */
        public int getMaxReviewsPerDay() {
<span class="nc" id="L1327">            return 10000;</span>
        }

        /**
         * @return Factor which will be used if it cannot be read from Deck settings.
         */
        public int getInitialFactor() {
<span class="nc" id="L1334">            return Consts.STARTING_FACTOR;</span>
        }

        /**
         * Today.
         * @param collectionCreatedTime The difference, measured in seconds, between midnight, January 1, 1970 UTC and the time at which the collection was created.
         * @return Today in days counted from the time at which the collection was created
         */
        public int getToday(long collectionCreatedTime) {
<span class="nc bnc" id="L1343" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17858)) {</span>
<span class="nc" id="L1344">                Timber.d(&quot;Collection creation timestamp: %d&quot;, collectionCreatedTime);</span>
            }
<span class="nc" id="L1346">            long currentTime = mCol.getTime().intTime();</span>
<span class="nc bnc" id="L1347" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17859)) {</span>
<span class="nc" id="L1348">                Timber.d(&quot;Now: %d&quot;, currentTime);</span>
            }
<span class="nc bnc" id="L1350" title="All 48 branches missed.">            return (int) ((ListenerUtil.mutListener.listen(17867) ? (((ListenerUtil.mutListener.listen(17863) ? (currentTime % collectionCreatedTime) : (ListenerUtil.mutListener.listen(17862) ? (currentTime / collectionCreatedTime) : (ListenerUtil.mutListener.listen(17861) ? (currentTime * collectionCreatedTime) : (ListenerUtil.mutListener.listen(17860) ? (currentTime + collectionCreatedTime) : (currentTime - collectionCreatedTime)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17866) ? (((ListenerUtil.mutListener.listen(17863) ? (currentTime % collectionCreatedTime) : (ListenerUtil.mutListener.listen(17862) ? (currentTime / collectionCreatedTime) : (ListenerUtil.mutListener.listen(17861) ? (currentTime * collectionCreatedTime) : (ListenerUtil.mutListener.listen(17860) ? (currentTime + collectionCreatedTime) : (currentTime - collectionCreatedTime)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17865) ? (((ListenerUtil.mutListener.listen(17863) ? (currentTime % collectionCreatedTime) : (ListenerUtil.mutListener.listen(17862) ? (currentTime / collectionCreatedTime) : (ListenerUtil.mutListener.listen(17861) ? (currentTime * collectionCreatedTime) : (ListenerUtil.mutListener.listen(17860) ? (currentTime + collectionCreatedTime) : (currentTime - collectionCreatedTime)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17864) ? (((ListenerUtil.mutListener.listen(17863) ? (currentTime % collectionCreatedTime) : (ListenerUtil.mutListener.listen(17862) ? (currentTime / collectionCreatedTime) : (ListenerUtil.mutListener.listen(17861) ? (currentTime * collectionCreatedTime) : (ListenerUtil.mutListener.listen(17860) ? (currentTime + collectionCreatedTime) : (currentTime - collectionCreatedTime)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(17863) ? (currentTime % collectionCreatedTime) : (ListenerUtil.mutListener.listen(17862) ? (currentTime / collectionCreatedTime) : (ListenerUtil.mutListener.listen(17861) ? (currentTime * collectionCreatedTime) : (ListenerUtil.mutListener.listen(17860) ? (currentTime + collectionCreatedTime) : (currentTime - collectionCreatedTime)))))) / SECONDS_PER_DAY))))));</span>
        }

        /**
         * Beginning of today.
         * @param collectionCreatedTime The difference, measured in seconds, between midnight, January 1, 1970 UTC and the time at which the collection was created.
         * @return The beginning of today in milliseconds counted from the time at which the collection was created
         */
        public long getDayStartCutoff(long collectionCreatedTime) {
<span class="nc" id="L1359">            long today = getToday(collectionCreatedTime);</span>
<span class="nc bnc" id="L1360" title="All 248 branches missed.">            return (ListenerUtil.mutListener.listen(17879) ? (((ListenerUtil.mutListener.listen(17875) ? (collectionCreatedTime % ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17874) ? (collectionCreatedTime / ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17873) ? (collectionCreatedTime * ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17872) ? (collectionCreatedTime - ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (collectionCreatedTime + ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY)))))))))))) % 1000) : (ListenerUtil.mutListener.listen(17878) ? (((ListenerUtil.mutListener.listen(17875) ? (collectionCreatedTime % ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17874) ? (collectionCreatedTime / ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17873) ? (collectionCreatedTime * ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17872) ? (collectionCreatedTime - ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (collectionCreatedTime + ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY)))))))))))) / 1000) : (ListenerUtil.mutListener.listen(17877) ? (((ListenerUtil.mutListener.listen(17875) ? (collectionCreatedTime % ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17874) ? (collectionCreatedTime / ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17873) ? (collectionCreatedTime * ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17872) ? (collectionCreatedTime - ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (collectionCreatedTime + ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY)))))))))))) - 1000) : (ListenerUtil.mutListener.listen(17876) ? (((ListenerUtil.mutListener.listen(17875) ? (collectionCreatedTime % ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17874) ? (collectionCreatedTime / ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17873) ? (collectionCreatedTime * ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17872) ? (collectionCreatedTime - ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (collectionCreatedTime + ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY)))))))))))) + 1000) : (((ListenerUtil.mutListener.listen(17875) ? (collectionCreatedTime % ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17874) ? (collectionCreatedTime / ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17873) ? (collectionCreatedTime * ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(17872) ? (collectionCreatedTime - ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY))))))) : (collectionCreatedTime + ((ListenerUtil.mutListener.listen(17871) ? (today % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17870) ? (today / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17869) ? (today - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(17868) ? (today + SECONDS_PER_DAY) : (today * SECONDS_PER_DAY)))))))))))) * 1000)))));</span>
        }
    }

<span class="nc" id="L1364">    private class ArrayUtils {</span>

        public int[][] createIntMatrix(int m, int n) {
<span class="nc" id="L1367">            int[][] matrix = new int[m][];</span>
<span class="nc bnc" id="L1368" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17893)) {</span>
                {
<span class="nc" id="L1370">                    long _loopCounter341 = 0;</span>
<span class="nc bnc" id="L1371" title="All 22 branches missed.">                    for (int i = 0; (ListenerUtil.mutListener.listen(17892) ? (i &gt;= m) : (ListenerUtil.mutListener.listen(17891) ? (i &lt;= m) : (ListenerUtil.mutListener.listen(17890) ? (i &gt; m) : (ListenerUtil.mutListener.listen(17889) ? (i != m) : (ListenerUtil.mutListener.listen(17888) ? (i == m) : (i &lt; m)))))); i++) {</span>
<span class="nc" id="L1372">                        ListenerUtil.loopListener.listen(&quot;_loopCounter341&quot;, ++_loopCounter341);</span>
<span class="nc bnc" id="L1373" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17880)) {</span>
<span class="nc" id="L1374">                            matrix[i] = new int[n];</span>
                        }
<span class="nc bnc" id="L1376" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17887)) {</span>
                            {
<span class="nc" id="L1378">                                long _loopCounter340 = 0;</span>
<span class="nc bnc" id="L1379" title="All 22 branches missed.">                                for (int j = 0; (ListenerUtil.mutListener.listen(17886) ? (j &gt;= n) : (ListenerUtil.mutListener.listen(17885) ? (j &lt;= n) : (ListenerUtil.mutListener.listen(17884) ? (j &gt; n) : (ListenerUtil.mutListener.listen(17883) ? (j != n) : (ListenerUtil.mutListener.listen(17882) ? (j == n) : (j &lt; n)))))); j++) {</span>
<span class="nc" id="L1380">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter340&quot;, ++_loopCounter340);</span>
<span class="nc bnc" id="L1381" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17881)) {</span>
<span class="nc" id="L1382">                                        matrix[i][j] = 0;</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1390">            return matrix;</span>
        }

        public int[][] toIntMatrix(double[][] doubleMatrix, int doubleToIntMode) {
<span class="nc" id="L1394">            int m = doubleMatrix.length;</span>
<span class="nc bnc" id="L1395" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17899)) {</span>
<span class="nc bnc" id="L1396" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17898) ? (m &gt;= 0) : (ListenerUtil.mutListener.listen(17897) ? (m &lt;= 0) : (ListenerUtil.mutListener.listen(17896) ? (m &gt; 0) : (ListenerUtil.mutListener.listen(17895) ? (m &lt; 0) : (ListenerUtil.mutListener.listen(17894) ? (m != 0) : (m == 0)))))))</span>
<span class="nc" id="L1397">                    return new int[0][];</span>
            }
<span class="nc" id="L1399">            int n = doubleMatrix[1].length;</span>
<span class="nc" id="L1400">            int[][] intMatrix = new int[m][];</span>
<span class="nc bnc" id="L1401" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17920)) {</span>
                {
<span class="nc" id="L1403">                    long _loopCounter343 = 0;</span>
<span class="nc bnc" id="L1404" title="All 22 branches missed.">                    for (int i = 0; (ListenerUtil.mutListener.listen(17919) ? (i &gt;= m) : (ListenerUtil.mutListener.listen(17918) ? (i &lt;= m) : (ListenerUtil.mutListener.listen(17917) ? (i &gt; m) : (ListenerUtil.mutListener.listen(17916) ? (i != m) : (ListenerUtil.mutListener.listen(17915) ? (i == m) : (i &lt; m)))))); i++) {</span>
<span class="nc" id="L1405">                        ListenerUtil.loopListener.listen(&quot;_loopCounter343&quot;, ++_loopCounter343);</span>
<span class="nc bnc" id="L1406" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17900)) {</span>
<span class="nc" id="L1407">                            intMatrix[i] = new int[n];</span>
                        }
<span class="nc bnc" id="L1409" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17914)) {</span>
                            {
<span class="nc" id="L1411">                                long _loopCounter342 = 0;</span>
<span class="nc bnc" id="L1412" title="All 22 branches missed.">                                for (int j = 0; (ListenerUtil.mutListener.listen(17913) ? (j &gt;= n) : (ListenerUtil.mutListener.listen(17912) ? (j &lt;= n) : (ListenerUtil.mutListener.listen(17911) ? (j &gt; n) : (ListenerUtil.mutListener.listen(17910) ? (j != n) : (ListenerUtil.mutListener.listen(17909) ? (j == n) : (j &lt; n)))))); j++) {</span>
<span class="nc" id="L1413">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter342&quot;, ++_loopCounter342);</span>
<span class="nc bnc" id="L1414" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17908)) {</span>
<span class="nc bnc" id="L1415" title="All 22 branches missed.">                                        if ((ListenerUtil.mutListener.listen(17905) ? (doubleToIntMode &gt;= SimulationResult.DOUBLE_TO_INT_MODE_ROUND) : (ListenerUtil.mutListener.listen(17904) ? (doubleToIntMode &lt;= SimulationResult.DOUBLE_TO_INT_MODE_ROUND) : (ListenerUtil.mutListener.listen(17903) ? (doubleToIntMode &gt; SimulationResult.DOUBLE_TO_INT_MODE_ROUND) : (ListenerUtil.mutListener.listen(17902) ? (doubleToIntMode &lt; SimulationResult.DOUBLE_TO_INT_MODE_ROUND) : (ListenerUtil.mutListener.listen(17901) ? (doubleToIntMode != SimulationResult.DOUBLE_TO_INT_MODE_ROUND) : (doubleToIntMode == SimulationResult.DOUBLE_TO_INT_MODE_ROUND))))))) {</span>
<span class="nc bnc" id="L1416" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(17907)) {</span>
<span class="nc" id="L1417">                                                intMatrix[i][j] = (int) Math.round(doubleMatrix[i][j]);</span>
                                            }
                                        } else {
<span class="nc bnc" id="L1420" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(17906)) {</span>
<span class="nc" id="L1421">                                                intMatrix[i][j] = (int) doubleMatrix[i][j];</span>
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1431">            return intMatrix;</span>
        }

        public double[][] createDoubleMatrix(int m, int n) {
<span class="nc" id="L1435">            double[][] matrix = new double[m][];</span>
<span class="nc bnc" id="L1436" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17934)) {</span>
                {
<span class="nc" id="L1438">                    long _loopCounter345 = 0;</span>
<span class="nc bnc" id="L1439" title="All 22 branches missed.">                    for (int i = 0; (ListenerUtil.mutListener.listen(17933) ? (i &gt;= m) : (ListenerUtil.mutListener.listen(17932) ? (i &lt;= m) : (ListenerUtil.mutListener.listen(17931) ? (i &gt; m) : (ListenerUtil.mutListener.listen(17930) ? (i != m) : (ListenerUtil.mutListener.listen(17929) ? (i == m) : (i &lt; m)))))); i++) {</span>
<span class="nc" id="L1440">                        ListenerUtil.loopListener.listen(&quot;_loopCounter345&quot;, ++_loopCounter345);</span>
<span class="nc bnc" id="L1441" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17921)) {</span>
<span class="nc" id="L1442">                            matrix[i] = new double[n];</span>
                        }
<span class="nc bnc" id="L1444" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17928)) {</span>
                            {
<span class="nc" id="L1446">                                long _loopCounter344 = 0;</span>
<span class="nc bnc" id="L1447" title="All 22 branches missed.">                                for (int j = 0; (ListenerUtil.mutListener.listen(17927) ? (j &gt;= n) : (ListenerUtil.mutListener.listen(17926) ? (j &lt;= n) : (ListenerUtil.mutListener.listen(17925) ? (j &gt; n) : (ListenerUtil.mutListener.listen(17924) ? (j != n) : (ListenerUtil.mutListener.listen(17923) ? (j == n) : (j &lt; n)))))); j++) {</span>
<span class="nc" id="L1448">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter344&quot;, ++_loopCounter344);</span>
<span class="nc bnc" id="L1449" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17922)) {</span>
<span class="nc" id="L1450">                                        matrix[i][j] = 0;</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1458">            return matrix;</span>
        }

        public &lt;T&gt; T[] append(T[] arr, T element, int n) {
<span class="nc" id="L1462">            final int N0 = arr.length;</span>
<span class="nc bnc" id="L1463" title="All 8 branches missed.">            final int N1 = (ListenerUtil.mutListener.listen(17938) ? (N0 % n) : (ListenerUtil.mutListener.listen(17937) ? (N0 / n) : (ListenerUtil.mutListener.listen(17936) ? (N0 * n) : (ListenerUtil.mutListener.listen(17935) ? (N0 - n) : (N0 + n)))));</span>
<span class="nc bnc" id="L1464" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17939)) {</span>
<span class="nc" id="L1465">                arr = Arrays.copyOf(arr, N1);</span>
            }
<span class="nc bnc" id="L1467" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17946)) {</span>
                {
<span class="nc" id="L1469">                    long _loopCounter346 = 0;</span>
<span class="nc bnc" id="L1470" title="All 22 branches missed.">                    for (int N = N0; (ListenerUtil.mutListener.listen(17945) ? (N &gt;= N1) : (ListenerUtil.mutListener.listen(17944) ? (N &lt;= N1) : (ListenerUtil.mutListener.listen(17943) ? (N &gt; N1) : (ListenerUtil.mutListener.listen(17942) ? (N != N1) : (ListenerUtil.mutListener.listen(17941) ? (N == N1) : (N &lt; N1)))))); N++) {</span>
<span class="nc" id="L1471">                        ListenerUtil.loopListener.listen(&quot;_loopCounter346&quot;, ++_loopCounter346);</span>
<span class="nc bnc" id="L1472" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17940)) {</span>
<span class="nc" id="L1473">                            arr[N] = element;</span>
                        }
                    }
                }
            }
<span class="nc" id="L1478">            return arr;</span>
        }

        public int nRows(int[][] matrix) {
<span class="nc" id="L1482">            return matrix.length;</span>
        }

        public int nCols(int[][] matrix) {
<span class="nc bnc" id="L1486" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17952)) {</span>
<span class="nc bnc" id="L1487" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17951) ? (matrix.length &gt;= 0) : (ListenerUtil.mutListener.listen(17950) ? (matrix.length &lt;= 0) : (ListenerUtil.mutListener.listen(17949) ? (matrix.length &gt; 0) : (ListenerUtil.mutListener.listen(17948) ? (matrix.length &lt; 0) : (ListenerUtil.mutListener.listen(17947) ? (matrix.length != 0) : (matrix.length == 0)))))))</span>
<span class="nc" id="L1488">                    return 0;</span>
            }
<span class="nc" id="L1490">            return matrix[0].length;</span>
        }

        public long[] stringToLongArray(String s) {
<span class="nc bnc" id="L1494" title="All 8 branches missed.">            String[] split = s.substring(1, (ListenerUtil.mutListener.listen(17956) ? (s.length() % 1) : (ListenerUtil.mutListener.listen(17955) ? (s.length() / 1) : (ListenerUtil.mutListener.listen(17954) ? (s.length() * 1) : (ListenerUtil.mutListener.listen(17953) ? (s.length() + 1) : (s.length() - 1)))))).split(&quot;, &quot;);</span>
<span class="nc" id="L1495">            long[] arr = new long[split.length];</span>
<span class="nc bnc" id="L1496" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17963)) {</span>
                {
<span class="nc" id="L1498">                    long _loopCounter347 = 0;</span>
<span class="nc bnc" id="L1499" title="All 22 branches missed.">                    for (int i = 0; (ListenerUtil.mutListener.listen(17962) ? (i &gt;= split.length) : (ListenerUtil.mutListener.listen(17961) ? (i &lt;= split.length) : (ListenerUtil.mutListener.listen(17960) ? (i &gt; split.length) : (ListenerUtil.mutListener.listen(17959) ? (i != split.length) : (ListenerUtil.mutListener.listen(17958) ? (i == split.length) : (i &lt; split.length)))))); i++) {</span>
<span class="nc" id="L1500">                        ListenerUtil.loopListener.listen(&quot;_loopCounter347&quot;, ++_loopCounter347);</span>
<span class="nc bnc" id="L1501" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17957)) {</span>
<span class="nc" id="L1502">                            arr[i] = Long.parseLong(split[i]);</span>
                        }
                    }
                }
            }
<span class="nc" id="L1507">            return arr;</span>
        }

        public int[][] transposeMatrix(int[][] matrix) {
<span class="nc bnc" id="L1511" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17969)) {</span>
<span class="nc bnc" id="L1512" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17968) ? (matrix.length &gt;= 0) : (ListenerUtil.mutListener.listen(17967) ? (matrix.length &lt;= 0) : (ListenerUtil.mutListener.listen(17966) ? (matrix.length &gt; 0) : (ListenerUtil.mutListener.listen(17965) ? (matrix.length &lt; 0) : (ListenerUtil.mutListener.listen(17964) ? (matrix.length != 0) : (matrix.length == 0)))))))</span>
<span class="nc" id="L1513">                    return matrix;</span>
            }
<span class="nc" id="L1515">            int m = matrix.length;</span>
<span class="nc" id="L1516">            int n = matrix[0].length;</span>
<span class="nc" id="L1517">            int[][] transpose = new int[n][m];</span>
            int c, d;
<span class="nc bnc" id="L1519" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17982)) {</span>
                {
<span class="nc" id="L1521">                    long _loopCounter349 = 0;</span>
<span class="nc bnc" id="L1522" title="All 22 branches missed.">                    for (c = 0; (ListenerUtil.mutListener.listen(17981) ? (c &gt;= m) : (ListenerUtil.mutListener.listen(17980) ? (c &lt;= m) : (ListenerUtil.mutListener.listen(17979) ? (c &gt; m) : (ListenerUtil.mutListener.listen(17978) ? (c != m) : (ListenerUtil.mutListener.listen(17977) ? (c == m) : (c &lt; m)))))); c++) {</span>
<span class="nc" id="L1523">                        ListenerUtil.loopListener.listen(&quot;_loopCounter349&quot;, ++_loopCounter349);</span>
<span class="nc bnc" id="L1524" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17976)) {</span>
                            {
<span class="nc" id="L1526">                                long _loopCounter348 = 0;</span>
<span class="nc bnc" id="L1527" title="All 22 branches missed.">                                for (d = 0; (ListenerUtil.mutListener.listen(17975) ? (d &gt;= n) : (ListenerUtil.mutListener.listen(17974) ? (d &lt;= n) : (ListenerUtil.mutListener.listen(17973) ? (d &gt; n) : (ListenerUtil.mutListener.listen(17972) ? (d != n) : (ListenerUtil.mutListener.listen(17971) ? (d == n) : (d &lt; n)))))); d++) {</span>
<span class="nc" id="L1528">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter348&quot;, ++_loopCounter348);</span>
<span class="nc bnc" id="L1529" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17970)) {</span>
<span class="nc" id="L1530">                                        transpose[d][c] = matrix[c][d];</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1538">            return transpose;</span>
        }

        public double[][] transposeMatrix(double[][] matrix) {
<span class="nc bnc" id="L1542" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(17988)) {</span>
<span class="nc bnc" id="L1543" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(17987) ? (matrix.length &gt;= 0) : (ListenerUtil.mutListener.listen(17986) ? (matrix.length &lt;= 0) : (ListenerUtil.mutListener.listen(17985) ? (matrix.length &gt; 0) : (ListenerUtil.mutListener.listen(17984) ? (matrix.length &lt; 0) : (ListenerUtil.mutListener.listen(17983) ? (matrix.length != 0) : (matrix.length == 0)))))))</span>
<span class="nc" id="L1544">                    return matrix;</span>
            }
<span class="nc" id="L1546">            int m = matrix.length;</span>
<span class="nc" id="L1547">            int n = matrix[0].length;</span>
<span class="nc" id="L1548">            double[][] transpose = new double[n][m];</span>
            int c, d;
<span class="nc bnc" id="L1550" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18001)) {</span>
                {
<span class="nc" id="L1552">                    long _loopCounter351 = 0;</span>
<span class="nc bnc" id="L1553" title="All 22 branches missed.">                    for (c = 0; (ListenerUtil.mutListener.listen(18000) ? (c &gt;= m) : (ListenerUtil.mutListener.listen(17999) ? (c &lt;= m) : (ListenerUtil.mutListener.listen(17998) ? (c &gt; m) : (ListenerUtil.mutListener.listen(17997) ? (c != m) : (ListenerUtil.mutListener.listen(17996) ? (c == m) : (c &lt; m)))))); c++) {</span>
<span class="nc" id="L1554">                        ListenerUtil.loopListener.listen(&quot;_loopCounter351&quot;, ++_loopCounter351);</span>
<span class="nc bnc" id="L1555" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(17995)) {</span>
                            {
<span class="nc" id="L1557">                                long _loopCounter350 = 0;</span>
<span class="nc bnc" id="L1558" title="All 22 branches missed.">                                for (d = 0; (ListenerUtil.mutListener.listen(17994) ? (d &gt;= n) : (ListenerUtil.mutListener.listen(17993) ? (d &lt;= n) : (ListenerUtil.mutListener.listen(17992) ? (d &gt; n) : (ListenerUtil.mutListener.listen(17991) ? (d != n) : (ListenerUtil.mutListener.listen(17990) ? (d == n) : (d &lt; n)))))); d++) {</span>
<span class="nc" id="L1559">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter350&quot;, ++_loopCounter350);</span>
<span class="nc bnc" id="L1560" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(17989)) {</span>
<span class="nc" id="L1561">                                        transpose[d][c] = matrix[c][d];</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1569">            return transpose;</span>
        }

        public void formatMatrix(String matrixName, int[][] matrix, String format) {
<span class="nc" id="L1573">            StringBuilder s = new StringBuilder();</span>
<span class="nc bnc" id="L1574" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18002)) {</span>
<span class="nc" id="L1575">                s.append(matrixName);</span>
            }
<span class="nc bnc" id="L1577" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18003)) {</span>
<span class="nc" id="L1578">                s.append(&quot;:&quot;);</span>
            }
<span class="nc bnc" id="L1580" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18004)) {</span>
<span class="nc" id="L1581">                s.append(System.getProperty(&quot;line.separator&quot;));</span>
            }
<span class="nc bnc" id="L1583" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18008)) {</span>
                {
<span class="nc" id="L1585">                    long _loopCounter353 = 0;</span>
<span class="nc bnc" id="L1586" title="All 2 branches missed.">                    for (int[] aMatrix : matrix) {</span>
<span class="nc" id="L1587">                        ListenerUtil.loopListener.listen(&quot;_loopCounter353&quot;, ++_loopCounter353);</span>
<span class="nc bnc" id="L1588" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18006)) {</span>
                            {
<span class="nc" id="L1590">                                long _loopCounter352 = 0;</span>
<span class="nc bnc" id="L1591" title="All 2 branches missed.">                                for (int i : aMatrix) {</span>
<span class="nc" id="L1592">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter352&quot;, ++_loopCounter352);</span>
<span class="nc bnc" id="L1593" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(18005)) {</span>
<span class="nc" id="L1594">                                        s.append(String.format(format, i));</span>
                                    }
                                }
                            }
                        }
<span class="nc bnc" id="L1599" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18007)) {</span>
<span class="nc" id="L1600">                            s.append(System.getProperty(&quot;line.separator&quot;));</span>
                        }
                    }
                }
            }
<span class="nc bnc" id="L1605" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18009)) {</span>
<span class="nc" id="L1606">                Timber.d(s.toString());</span>
            }
<span class="nc" id="L1608">        }</span>
    }

    /**
     * Statistics generated by simulations of Reviews.
     */
    private class SimulationResult {

        public static final int DOUBLE_TO_INT_MODE_FLOOR = 0;

        public static final int DOUBLE_TO_INT_MODE_ROUND = 1;

        private final int doubleToIntMode;

        private final int nTimeBins;

        private final int timeBinLength;

        private final int nDays;

        /**
         * Forecasted number of reviews per time bin (a time bin contains statistics for 1 or a multiple of days)
         * First dimension:
         * 0 = Learn
         * 1 = Young
         * 2 = Mature
         * 3 = Relearn
         * Second dimension: time
         */
        private final double[][] nReviews;

        /**
         * Forecasted number of reviews per day.
         * @see #nReviews
         */
        private final double[][] nReviewsPerDay;

        /**
         * Forecasted number of cards per state
         * First dimension:
         * 0 = New
         * 1 = Young
         * 2 = Mature
         * Second dimension: time
         */
        private final double[][] nInState;

        /**
         * Create an empty SimulationResult.
         * @param nTimeBins Number of time bins.
         * @param timeBinLength Length of 1 time bin in days.
         */
<span class="nc" id="L1660">        public SimulationResult(int nTimeBins, int timeBinLength, int doubleToIntMode) {</span>
<span class="nc" id="L1661">            nReviews = ArrayUtils.createDoubleMatrix(REVIEW_TYPE_COUNT, nTimeBins);</span>
<span class="nc bnc" id="L1662" title="All 8 branches missed.">            nReviewsPerDay = ArrayUtils.createDoubleMatrix(REVIEW_TYPE_COUNT, (ListenerUtil.mutListener.listen(18013) ? (nTimeBins % timeBinLength) : (ListenerUtil.mutListener.listen(18012) ? (nTimeBins / timeBinLength) : (ListenerUtil.mutListener.listen(18011) ? (nTimeBins - timeBinLength) : (ListenerUtil.mutListener.listen(18010) ? (nTimeBins + timeBinLength) : (nTimeBins * timeBinLength))))));</span>
<span class="nc" id="L1663">            nInState = ArrayUtils.createDoubleMatrix(CARD_TYPE_COUNT, nTimeBins);</span>
<span class="nc" id="L1664">            this.nTimeBins = nTimeBins;</span>
<span class="nc" id="L1665">            this.timeBinLength = timeBinLength;</span>
<span class="nc bnc" id="L1666" title="All 8 branches missed.">            this.nDays = (ListenerUtil.mutListener.listen(18017) ? (nTimeBins % timeBinLength) : (ListenerUtil.mutListener.listen(18016) ? (nTimeBins / timeBinLength) : (ListenerUtil.mutListener.listen(18015) ? (nTimeBins - timeBinLength) : (ListenerUtil.mutListener.listen(18014) ? (nTimeBins + timeBinLength) : (nTimeBins * timeBinLength)))));</span>
<span class="nc" id="L1667">            this.doubleToIntMode = doubleToIntMode;</span>
<span class="nc" id="L1668">        }</span>

        public int getnDays() {
<span class="nc" id="L1671">            return nDays;</span>
        }

        /**
         * Adds the statistics generated by another simulation to the current statistics.
         * Use to gather statistics over decks.
         * @param res2Add Statistics to be added to the current statistics.
         */
        public void add(SimulationResult res2Add, double prob) {
<span class="nc" id="L1680">            int[][] nReviews = res2Add.getNReviews();</span>
<span class="nc" id="L1681">            int[][] nInState = res2Add.getNInState();</span>
<span class="nc bnc" id="L1682" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18034)) {</span>
                {
<span class="nc" id="L1684">                    long _loopCounter355 = 0;</span>
<span class="nc bnc" id="L1685" title="All 22 branches missed.">                    for (int i = 0; (ListenerUtil.mutListener.listen(18033) ? (i &gt;= nReviews.length) : (ListenerUtil.mutListener.listen(18032) ? (i &lt;= nReviews.length) : (ListenerUtil.mutListener.listen(18031) ? (i &gt; nReviews.length) : (ListenerUtil.mutListener.listen(18030) ? (i != nReviews.length) : (ListenerUtil.mutListener.listen(18029) ? (i == nReviews.length) : (i &lt; nReviews.length)))))); i++) {</span>
<span class="nc" id="L1686">                        ListenerUtil.loopListener.listen(&quot;_loopCounter355&quot;, ++_loopCounter355);</span>
<span class="nc bnc" id="L1687" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18028)) {</span>
                            {
<span class="nc" id="L1689">                                long _loopCounter354 = 0;</span>
<span class="nc bnc" id="L1690" title="All 22 branches missed.">                                for (int j = 0; (ListenerUtil.mutListener.listen(18027) ? (j &gt;= nReviews[i].length) : (ListenerUtil.mutListener.listen(18026) ? (j &lt;= nReviews[i].length) : (ListenerUtil.mutListener.listen(18025) ? (j &gt; nReviews[i].length) : (ListenerUtil.mutListener.listen(18024) ? (j != nReviews[i].length) : (ListenerUtil.mutListener.listen(18023) ? (j == nReviews[i].length) : (j &lt; nReviews[i].length)))))); j++) {</span>
<span class="nc" id="L1691">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter354&quot;, ++_loopCounter354);</span>
<span class="nc bnc" id="L1692" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(18022)) {</span>
<span class="nc bnc" id="L1693" title="All 8 branches missed.">                                        this.nReviews[i][j] += (ListenerUtil.mutListener.listen(18021) ? (nReviews[i][j] % prob) : (ListenerUtil.mutListener.listen(18020) ? (nReviews[i][j] / prob) : (ListenerUtil.mutListener.listen(18019) ? (nReviews[i][j] - prob) : (ListenerUtil.mutListener.listen(18018) ? (nReviews[i][j] + prob) : (nReviews[i][j] * prob)))));</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc bnc" id="L1701" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18051)) {</span>
                {
<span class="nc" id="L1703">                    long _loopCounter357 = 0;</span>
<span class="nc bnc" id="L1704" title="All 22 branches missed.">                    for (int i = 0; (ListenerUtil.mutListener.listen(18050) ? (i &gt;= nInState.length) : (ListenerUtil.mutListener.listen(18049) ? (i &lt;= nInState.length) : (ListenerUtil.mutListener.listen(18048) ? (i &gt; nInState.length) : (ListenerUtil.mutListener.listen(18047) ? (i != nInState.length) : (ListenerUtil.mutListener.listen(18046) ? (i == nInState.length) : (i &lt; nInState.length)))))); i++) {</span>
<span class="nc" id="L1705">                        ListenerUtil.loopListener.listen(&quot;_loopCounter357&quot;, ++_loopCounter357);</span>
<span class="nc bnc" id="L1706" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18045)) {</span>
                            {
<span class="nc" id="L1708">                                long _loopCounter356 = 0;</span>
<span class="nc bnc" id="L1709" title="All 22 branches missed.">                                for (int j = 0; (ListenerUtil.mutListener.listen(18044) ? (j &gt;= nInState[i].length) : (ListenerUtil.mutListener.listen(18043) ? (j &lt;= nInState[i].length) : (ListenerUtil.mutListener.listen(18042) ? (j &gt; nInState[i].length) : (ListenerUtil.mutListener.listen(18041) ? (j != nInState[i].length) : (ListenerUtil.mutListener.listen(18040) ? (j == nInState[i].length) : (j &lt; nInState[i].length)))))); j++) {</span>
<span class="nc" id="L1710">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter356&quot;, ++_loopCounter356);</span>
<span class="nc bnc" id="L1711" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(18039)) {</span>
<span class="nc bnc" id="L1712" title="All 8 branches missed.">                                        this.nInState[i][j] += (ListenerUtil.mutListener.listen(18038) ? (nInState[i][j] % prob) : (ListenerUtil.mutListener.listen(18037) ? (nInState[i][j] / prob) : (ListenerUtil.mutListener.listen(18036) ? (nInState[i][j] - prob) : (ListenerUtil.mutListener.listen(18035) ? (nInState[i][j] + prob) : (nInState[i][j] * prob)))));</span>
                                    }
                                }
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1720">        }</span>

        public int[][] getNReviews() {
<span class="nc" id="L1723">            return ArrayUtils.toIntMatrix(nReviews, doubleToIntMode);</span>
        }

        public int[][] getNInState() {
<span class="nc" id="L1727">            return ArrayUtils.toIntMatrix(nInState, doubleToIntMode);</span>
        }

        /**
         * Request the number of reviews which have been simulated so far at a particular day
         * (to check if the 'maximum number of reviews per day' limit has been reached).
         * If we are doing more than one simulation this means the average number of reviews
         * simulated so far at the requested day (over simulations).
         * More correct would be simulating all (or several) possible futures and returning here the number of
         * reviews done in the future currently being simulated.
         *
         * But that would change the entire structure of the simulation (which is now in a for each card loop).
         * @param tElapsed Day for which the number of reviews is requested.
         * @return Number of reviews of young and mature cards simulated at time tElapsed.
         * This excludes new cards and relearns as they don't count towards the limit.
         */
        public int nReviewsDoneToday(int tElapsed) {
<span class="nc bnc" id="L1744" title="All 8 branches missed.">            return (int) ((ListenerUtil.mutListener.listen(18055) ? (nReviewsPerDay[REVIEW_TYPE_YOUNG][tElapsed] % nReviewsPerDay[REVIEW_TYPE_MATURE][tElapsed]) : (ListenerUtil.mutListener.listen(18054) ? (nReviewsPerDay[REVIEW_TYPE_YOUNG][tElapsed] / nReviewsPerDay[REVIEW_TYPE_MATURE][tElapsed]) : (ListenerUtil.mutListener.listen(18053) ? (nReviewsPerDay[REVIEW_TYPE_YOUNG][tElapsed] * nReviewsPerDay[REVIEW_TYPE_MATURE][tElapsed]) : (ListenerUtil.mutListener.listen(18052) ? (nReviewsPerDay[REVIEW_TYPE_YOUNG][tElapsed] - nReviewsPerDay[REVIEW_TYPE_MATURE][tElapsed]) : (nReviewsPerDay[REVIEW_TYPE_YOUNG][tElapsed] + nReviewsPerDay[REVIEW_TYPE_MATURE][tElapsed]))))));</span>
        }

        /**
         * Increment the count 'number of reviews of card with type cardType' with one at day t.
         * @param cardType  Card type
         * @param t Day for which to increment
         */
        public void incrementNReviews(int cardType, int t, double prob) {
<span class="nc bnc" id="L1753" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18060)) {</span>
<span class="nc bnc" id="L1754" title="All 8 branches missed.">                nReviews[cardType][(ListenerUtil.mutListener.listen(18059) ? (t % timeBinLength) : (ListenerUtil.mutListener.listen(18058) ? (t * timeBinLength) : (ListenerUtil.mutListener.listen(18057) ? (t - timeBinLength) : (ListenerUtil.mutListener.listen(18056) ? (t + timeBinLength) : (t / timeBinLength)))))] += prob;</span>
            }
<span class="nc bnc" id="L1756" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18061)) {</span>
<span class="nc" id="L1757">                nReviewsPerDay[cardType][t] += prob;</span>
            }
<span class="nc" id="L1759">        }</span>

        /**
         * Increment the count 'number of cards in the state of the given card' with one between tFrom and tTo.
         * @param card Card from which to read the state.
         * @param tFrom The first day for which to update the state.
         * @param tTo The day after the last day for which to update the state.
         */
        public void updateNInState(Card card, int tFrom, int tTo, double prob) {
<span class="nc" id="L1768">            int cardType = card.getType();</span>
<span class="nc bnc" id="L1769" title="All 8 branches missed.">            int t0 = (ListenerUtil.mutListener.listen(18065) ? (tFrom % timeBinLength) : (ListenerUtil.mutListener.listen(18064) ? (tFrom * timeBinLength) : (ListenerUtil.mutListener.listen(18063) ? (tFrom - timeBinLength) : (ListenerUtil.mutListener.listen(18062) ? (tFrom + timeBinLength) : (tFrom / timeBinLength)))));</span>
<span class="nc bnc" id="L1770" title="All 8 branches missed.">            int t1 = (ListenerUtil.mutListener.listen(18069) ? (tTo % timeBinLength) : (ListenerUtil.mutListener.listen(18068) ? (tTo * timeBinLength) : (ListenerUtil.mutListener.listen(18067) ? (tTo - timeBinLength) : (ListenerUtil.mutListener.listen(18066) ? (tTo + timeBinLength) : (tTo / timeBinLength)))));</span>
<span class="nc bnc" id="L1771" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18082)) {</span>
                {
<span class="nc" id="L1773">                    long _loopCounter358 = 0;</span>
<span class="nc bnc" id="L1774" title="All 22 branches missed.">                    for (int t = t0; (ListenerUtil.mutListener.listen(18081) ? (t &gt;= t1) : (ListenerUtil.mutListener.listen(18080) ? (t &lt;= t1) : (ListenerUtil.mutListener.listen(18079) ? (t &gt; t1) : (ListenerUtil.mutListener.listen(18078) ? (t != t1) : (ListenerUtil.mutListener.listen(18077) ? (t == t1) : (t &lt; t1)))))); t++) {</span>
<span class="nc" id="L1775">                        ListenerUtil.loopListener.listen(&quot;_loopCounter358&quot;, ++_loopCounter358);</span>
<span class="nc bnc" id="L1776" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18076)) {</span>
<span class="nc bnc" id="L1777" title="All 22 branches missed.">                            if ((ListenerUtil.mutListener.listen(18074) ? (t &gt;= nTimeBins) : (ListenerUtil.mutListener.listen(18073) ? (t &lt;= nTimeBins) : (ListenerUtil.mutListener.listen(18072) ? (t &gt; nTimeBins) : (ListenerUtil.mutListener.listen(18071) ? (t != nTimeBins) : (ListenerUtil.mutListener.listen(18070) ? (t == nTimeBins) : (t &lt; nTimeBins))))))) {</span>
<span class="nc bnc" id="L1778" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(18075)) {</span>
<span class="nc" id="L1779">                                    nInState[cardType][t] += prob;</span>
                                }
                            } else {
<span class="nc" id="L1782">                                return;</span>
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1788">        }</span>

        /**
         * Increment the count 'number of cards in the state of the given card' with one between tFrom and tTo and
         * replace state set during last review (contained in prevCard) with state set during new review (contained in card).
         *
         * This is necessary because we want to display the state at the end of each time bin.
         * So if two reviews occurred in one time bin, that time bin should display the
         * last review which occurred in it.
         *
         * @see #updateNInState(Card, int, int, double)
         */
        public void updateNInState(Card prevCard, Card card, int tFrom, int tTo, double prob) {
<span class="nc" id="L1801">            int lastReview = prevCard.getLastReview();</span>
<span class="nc" id="L1802">            int prevCardType = prevCard.getType();</span>
<span class="nc" id="L1803">            int cardType = card.getType();</span>
<span class="nc bnc" id="L1804" title="All 8 branches missed.">            int t0 = (ListenerUtil.mutListener.listen(18086) ? (tFrom % timeBinLength) : (ListenerUtil.mutListener.listen(18085) ? (tFrom * timeBinLength) : (ListenerUtil.mutListener.listen(18084) ? (tFrom - timeBinLength) : (ListenerUtil.mutListener.listen(18083) ? (tFrom + timeBinLength) : (tFrom / timeBinLength)))));</span>
<span class="nc bnc" id="L1805" title="All 8 branches missed.">            int t1 = (ListenerUtil.mutListener.listen(18090) ? (Math.min(lastReview, tTo) % timeBinLength) : (ListenerUtil.mutListener.listen(18089) ? (Math.min(lastReview, tTo) * timeBinLength) : (ListenerUtil.mutListener.listen(18088) ? (Math.min(lastReview, tTo) - timeBinLength) : (ListenerUtil.mutListener.listen(18087) ? (Math.min(lastReview, tTo) + timeBinLength) : (Math.min(lastReview, tTo) / timeBinLength)))));</span>
<span class="nc bnc" id="L1806" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18103)) {</span>
                {
<span class="nc" id="L1808">                    long _loopCounter359 = 0;</span>
                    // Replace state set during last review
<span class="nc bnc" id="L1810" title="All 22 branches missed.">                    for (int t = t0; (ListenerUtil.mutListener.listen(18102) ? (t &gt;= t1) : (ListenerUtil.mutListener.listen(18101) ? (t &lt;= t1) : (ListenerUtil.mutListener.listen(18100) ? (t &gt; t1) : (ListenerUtil.mutListener.listen(18099) ? (t != t1) : (ListenerUtil.mutListener.listen(18098) ? (t == t1) : (t &lt; t1)))))); t++) {</span>
<span class="nc" id="L1811">                        ListenerUtil.loopListener.listen(&quot;_loopCounter359&quot;, ++_loopCounter359);</span>
<span class="nc bnc" id="L1812" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18097)) {</span>
<span class="nc bnc" id="L1813" title="All 22 branches missed.">                            if ((ListenerUtil.mutListener.listen(18095) ? (t &gt;= nTimeBins) : (ListenerUtil.mutListener.listen(18094) ? (t &lt;= nTimeBins) : (ListenerUtil.mutListener.listen(18093) ? (t &gt; nTimeBins) : (ListenerUtil.mutListener.listen(18092) ? (t != nTimeBins) : (ListenerUtil.mutListener.listen(18091) ? (t == nTimeBins) : (t &lt; nTimeBins))))))) {</span>
<span class="nc bnc" id="L1814" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(18096)) {</span>
<span class="nc" id="L1815">                                    nInState[prevCardType][t] -= prob;</span>
                                }
                            } else {
                                break;
                            }
                        }
                    }
                }
            }
<span class="nc bnc" id="L1824" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18108)) {</span>
<span class="nc bnc" id="L1825" title="All 8 branches missed.">                t1 = (ListenerUtil.mutListener.listen(18107) ? (tTo % timeBinLength) : (ListenerUtil.mutListener.listen(18106) ? (tTo * timeBinLength) : (ListenerUtil.mutListener.listen(18105) ? (tTo - timeBinLength) : (ListenerUtil.mutListener.listen(18104) ? (tTo + timeBinLength) : (tTo / timeBinLength)))));</span>
            }
<span class="nc bnc" id="L1827" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18121)) {</span>
                {
<span class="nc" id="L1829">                    long _loopCounter360 = 0;</span>
                    // With state set during new review
<span class="nc bnc" id="L1831" title="All 22 branches missed.">                    for (int t = t0; (ListenerUtil.mutListener.listen(18120) ? (t &gt;= t1) : (ListenerUtil.mutListener.listen(18119) ? (t &lt;= t1) : (ListenerUtil.mutListener.listen(18118) ? (t &gt; t1) : (ListenerUtil.mutListener.listen(18117) ? (t != t1) : (ListenerUtil.mutListener.listen(18116) ? (t == t1) : (t &lt; t1)))))); t++) {</span>
<span class="nc" id="L1832">                        ListenerUtil.loopListener.listen(&quot;_loopCounter360&quot;, ++_loopCounter360);</span>
<span class="nc bnc" id="L1833" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18115)) {</span>
<span class="nc bnc" id="L1834" title="All 22 branches missed.">                            if ((ListenerUtil.mutListener.listen(18113) ? (t &gt;= nTimeBins) : (ListenerUtil.mutListener.listen(18112) ? (t &lt;= nTimeBins) : (ListenerUtil.mutListener.listen(18111) ? (t &gt; nTimeBins) : (ListenerUtil.mutListener.listen(18110) ? (t != nTimeBins) : (ListenerUtil.mutListener.listen(18109) ? (t == nTimeBins) : (t &lt; nTimeBins))))))) {</span>
<span class="nc bnc" id="L1835" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(18114)) {</span>
<span class="nc" id="L1836">                                    nInState[cardType][t] += prob;</span>
                                }
                            } else {
<span class="nc" id="L1839">                                return;</span>
                            }
                        }
                    }
                }
            }
<span class="nc" id="L1845">        }</span>
    }

    private static class PlottableSimulationResult {

        // 4 = Relearn
        private final ArrayList&lt;int[]&gt; nReviews;

        // Second dimension: time
        private final double[][] nInState;

<span class="nc" id="L1856">        public PlottableSimulationResult(ArrayList&lt;int[]&gt; nReviews, double[][] nInState) {</span>
<span class="nc" id="L1857">            this.nReviews = nReviews;</span>
<span class="nc" id="L1858">            this.nInState = nInState;</span>
<span class="nc" id="L1859">        }</span>

        public ArrayList&lt;int[]&gt; getNReviews() {
<span class="nc" id="L1862">            return nReviews;</span>
        }

        public double[][] getNInState() {
<span class="nc" id="L1866">            return nInState;</span>
        }
    }

    /**
     * A review has a particular outcome with a particular probability.
     * A review results in the state of the card (card interval) being changed.
     * A ReviewOutcome bundles the probability of the outcome and the card with changed state.
     */
    private static class ReviewOutcome {

        private Card card;

        private double prob;

<span class="nc" id="L1881">        public ReviewOutcome(Card card, double prob) {</span>
<span class="nc bnc" id="L1882" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18122)) {</span>
<span class="nc" id="L1883">                this.card = card;</span>
            }
<span class="nc bnc" id="L1885" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18123)) {</span>
<span class="nc" id="L1886">                this.prob = prob;</span>
            }
<span class="nc" id="L1888">        }</span>

        public void setAll(Card card, double prob) {
<span class="nc bnc" id="L1891" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18124)) {</span>
<span class="nc" id="L1892">                this.card = card;</span>
            }
<span class="nc bnc" id="L1894" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18125)) {</span>
<span class="nc" id="L1895">                this.prob = prob;</span>
            }
<span class="nc" id="L1897">        }</span>

        public Card getCard() {
<span class="nc" id="L1900">            return card;</span>
        }

        public double getProb() {
<span class="nc" id="L1904">            return prob;</span>
        }

        @Override
        @NonNull
        public String toString() {
<span class="nc" id="L1910">            return &quot;ReviewOutcome{&quot; + &quot;card=&quot; + card + &quot;, prob=&quot; + prob + '}';</span>
        }
    }

    /**
     * Bundles the information needed to simulate a review and the objects affected by the review.
     */
    private class Review {

        /**
         * Deck-specific setting stored separately to save a method call on the deck object)
         */
        private final int maxReviewsPerDay;

        /**
         * Number of reviews simulated for this card at time &lt; tElapsed
         */
        private int nPrevRevs;

        /**
         * The probability that the outcomes of the reviews simulated for this card at time &lt; tElapsed are such that
         * this review [with this state of the card] will occur [at this time (tElapsed)].
         */
        private double prob;

        /**
         * The time instant at which the review takes place.
         */
        private int tElapsed;

        /**
         * The outcome of the review.
         * We still have to do the review if the outcome has already been specified
         * (to update statistics, deterime probability of specified outcome, and to schedule subsequent reviews)
         * Only relevant if we are computing (all possible review outcomes), not if simulating (only one possible outcome)
         */
        private int outcome;

        /**
         * Deck-specific settings
         */
        private final Deck deck;

        /**
         * State of the card before current review.
         * Needed to schedule current review but with different outcome and to update statistics.
         */
<span class="nc" id="L1957">        private Card card = new Card(0, 0, 0, 0, 0, 0);</span>

<span class="nc" id="L1959">        private final Card prevCard = new Card(0, 0, 0, 0, 0, 0);</span>

        /**
         * State of the card after current review.
         * Needed to schedule future review.
         */
<span class="nc" id="L1965">        private Card newCard = new Card(0, 0, 0, 0, 0, 0);</span>

        /**
         * Statistics
         */
        private final SimulationResult simulationResult;

        /**
         * Classifier which uses probability distribution from review log to predict outcome of review.
         */
        private final EaseClassifier classifier;

        /**
         * Reviews which are scheduled to be simulated.
         * For adding current review with other outcome and future review.
         */
        private final Stack&lt;Review&gt; reviews;

        /**
         * Review objects to be re-used so that we don't have to create new Review objects all the time.
         * Be careful: it also contains Review objects which are still in use.
         * So the algorithm using this list has to make sure that it only re-uses Review objects which are not in use anymore.
         */
        private final List&lt;Review&gt; reviewList;

        /**
         * For creating future reviews which are to be scheduled as a result of the current review.
         * @see Review(Deck, SimulationResult, EaseClassifier, Stack&lt;Review&gt;)
         */
<span class="nc" id="L1994">        private Review(Review prevReview, Card card, int nPrevRevs, int tElapsed, double prob) {</span>
<span class="nc" id="L1995">            this.deck = prevReview.deck;</span>
<span class="nc bnc" id="L1996" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18126)) {</span>
<span class="nc" id="L1997">                this.card.setAll(card);</span>
            }
<span class="nc" id="L1999">            this.simulationResult = prevReview.simulationResult;</span>
<span class="nc" id="L2000">            this.classifier = prevReview.classifier;</span>
<span class="nc" id="L2001">            this.reviews = prevReview.reviews;</span>
<span class="nc" id="L2002">            this.reviewList = prevReview.reviewList;</span>
<span class="nc bnc" id="L2003" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18127)) {</span>
<span class="nc" id="L2004">                this.nPrevRevs = nPrevRevs;</span>
            }
<span class="nc bnc" id="L2006" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18128)) {</span>
<span class="nc" id="L2007">                this.tElapsed = tElapsed;</span>
            }
<span class="nc bnc" id="L2009" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18129)) {</span>
<span class="nc" id="L2010">                this.prob = prob;</span>
            }
<span class="nc" id="L2012">            this.maxReviewsPerDay = deck.getRevPerDay();</span>
<span class="nc" id="L2013">        }</span>

        /**
         * For creating a review which is to be scheduled.
         * After this constructor, either @see newCard(Card, NewCardSimulator) or existingCard(Card, int, int, double) has to be called.
         * @param deck Information needed to simulate a review: deck settings.
         *             Will be affected by the review. After the review it will contain the card type etc. after the review.
         * @param simulationResult Will be affected by the review. After the review it will contain updated statistics.
         * @param classifier Information needed to simulate a review: transition probabilities to new card state for each possible current card state.
         * @param reviews Will be affected by the review. Scheduled future reviews of this card will be added.
         */
<span class="nc" id="L2024">        public Review(Deck deck, SimulationResult simulationResult, EaseClassifier classifier, Stack&lt;Review&gt; reviews, List&lt;Review&gt; reviewList) {</span>
<span class="nc" id="L2025">            this.deck = deck;</span>
<span class="nc" id="L2026">            this.simulationResult = simulationResult;</span>
<span class="nc" id="L2027">            this.classifier = classifier;</span>
<span class="nc" id="L2028">            this.reviews = reviews;</span>
<span class="nc" id="L2029">            this.reviewList = reviewList;</span>
<span class="nc" id="L2030">            this.maxReviewsPerDay = deck.getRevPerDay();</span>
<span class="nc" id="L2031">        }</span>

        /**
         * Re-use the current review object to schedule a new card. A new card here means that it has not been reviewed yet.
         * @param card Information needed to simulate a review: card due date, type and factor.
         * @param newCardSimulator Information needed to simulate a review: The next day new cards will be added and the number of cards already added on that day.
         *                         Will be affected by the review. After the review of a new card, the number of cards added on that day will be updated.
         *                         Next day new cards will be added might be updated if new card limit has been reached.
         */
        public void newCard(Card card, NewCardSimulator newCardSimulator) {
<span class="nc bnc" id="L2041" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18130)) {</span>
<span class="nc" id="L2042">                this.card = card;</span>
            }
<span class="nc bnc" id="L2044" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18131)) {</span>
<span class="nc" id="L2045">                this.nPrevRevs = 0;</span>
            }
<span class="nc bnc" id="L2047" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18132)) {</span>
<span class="nc" id="L2048">                this.prob = 1;</span>
            }
<span class="nc bnc" id="L2050" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18133)) {</span>
<span class="nc" id="L2051">                this.outcome = 0;</span>
            }
<span class="nc bnc" id="L2053" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18141)) {</span>
                // # Rate-limit new cards by shifting starting time
<span class="nc bnc" id="L2055" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(18138) ? (card.getType() &gt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18137) ? (card.getType() &lt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18136) ? (card.getType() &gt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18135) ? (card.getType() &lt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18134) ? (card.getType() != CARD_TYPE_NEW) : (card.getType() == CARD_TYPE_NEW))))))) {</span>
<span class="nc bnc" id="L2056" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18140)) {</span>
<span class="nc" id="L2057">                        tElapsed = newCardSimulator.simulateNewCard(deck);</span>
                    }
                } else {
<span class="nc bnc" id="L2060" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18139)) {</span>
<span class="nc" id="L2061">                        tElapsed = card.getDue();</span>
                    }
                }
            }
<span class="nc bnc" id="L2065" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18142)) {</span>
                // New reviews happen with probability 1
<span class="nc" id="L2067">                this.simulationResult.updateNInState(card, 0, tElapsed, 1);</span>
            }
<span class="nc" id="L2069">        }</span>

        /**
         * Re-use the current review object to schedule an existing card. An existing card here means that it has been reviewed before (either by the user or by the simulation)
         * and hence the due date is known.
         */
        private void existingCard(Card card, int nPrevRevs, int tElapsed, double prob) {
<span class="nc bnc" id="L2076" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18143)) {</span>
<span class="nc" id="L2077">                this.card.setAll(card);</span>
            }
<span class="nc bnc" id="L2079" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18144)) {</span>
<span class="nc" id="L2080">                this.nPrevRevs = nPrevRevs;</span>
            }
<span class="nc bnc" id="L2082" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18145)) {</span>
<span class="nc" id="L2083">                this.tElapsed = tElapsed;</span>
            }
<span class="nc bnc" id="L2085" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18146)) {</span>
<span class="nc" id="L2086">                this.prob = prob;</span>
            }
<span class="nc bnc" id="L2088" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18147)) {</span>
<span class="nc" id="L2089">                this.outcome = 0;</span>
            }
<span class="nc" id="L2091">        }</span>

        /**
         * Simulates one review of the card. The review results in:
         * - The card (prevCard and newCard) being updated
         * - New card simulator (when to schedule next new card) being updated if the card was new
         * - The simulationResult being updated.
         * - New review(s) being scheduled.
         */
        public void simulateReview() {
<span class="nc bnc" id="L2101" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18239)) {</span>
<span class="nc bnc" id="L2102" title="All 226 branches missed.">                if ((ListenerUtil.mutListener.listen(18164) ? ((ListenerUtil.mutListener.listen(18158) ? ((ListenerUtil.mutListener.listen(18152) ? (card.getType() &gt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18151) ? (card.getType() &lt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18150) ? (card.getType() &gt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18149) ? (card.getType() &lt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18148) ? (card.getType() != CARD_TYPE_NEW) : (card.getType() == CARD_TYPE_NEW)))))) &amp;&amp; (ListenerUtil.mutListener.listen(18157) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18156) ? (simulationResult.nReviewsDoneToday(tElapsed) &lt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18155) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt; maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18154) ? (simulationResult.nReviewsDoneToday(tElapsed) != maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18153) ? (simulationResult.nReviewsDoneToday(tElapsed) == maxReviewsPerDay) : (simulationResult.nReviewsDoneToday(tElapsed) &lt; maxReviewsPerDay))))))) : ((ListenerUtil.mutListener.listen(18152) ? (card.getType() &gt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18151) ? (card.getType() &lt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18150) ? (card.getType() &gt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18149) ? (card.getType() &lt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18148) ? (card.getType() != CARD_TYPE_NEW) : (card.getType() == CARD_TYPE_NEW)))))) || (ListenerUtil.mutListener.listen(18157) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18156) ? (simulationResult.nReviewsDoneToday(tElapsed) &lt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18155) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt; maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18154) ? (simulationResult.nReviewsDoneToday(tElapsed) != maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18153) ? (simulationResult.nReviewsDoneToday(tElapsed) == maxReviewsPerDay) : (simulationResult.nReviewsDoneToday(tElapsed) &lt; maxReviewsPerDay)))))))) &amp;&amp; (ListenerUtil.mutListener.listen(18163) ? (outcome &gt;= 0) : (ListenerUtil.mutListener.listen(18162) ? (outcome &lt;= 0) : (ListenerUtil.mutListener.listen(18161) ? (outcome &lt; 0) : (ListenerUtil.mutListener.listen(18160) ? (outcome != 0) : (ListenerUtil.mutListener.listen(18159) ? (outcome == 0) : (outcome &gt; 0))))))) : ((ListenerUtil.mutListener.listen(18158) ? ((ListenerUtil.mutListener.listen(18152) ? (card.getType() &gt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18151) ? (card.getType() &lt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18150) ? (card.getType() &gt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18149) ? (card.getType() &lt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18148) ? (card.getType() != CARD_TYPE_NEW) : (card.getType() == CARD_TYPE_NEW)))))) &amp;&amp; (ListenerUtil.mutListener.listen(18157) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18156) ? (simulationResult.nReviewsDoneToday(tElapsed) &lt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18155) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt; maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18154) ? (simulationResult.nReviewsDoneToday(tElapsed) != maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18153) ? (simulationResult.nReviewsDoneToday(tElapsed) == maxReviewsPerDay) : (simulationResult.nReviewsDoneToday(tElapsed) &lt; maxReviewsPerDay))))))) : ((ListenerUtil.mutListener.listen(18152) ? (card.getType() &gt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18151) ? (card.getType() &lt;= CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18150) ? (card.getType() &gt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18149) ? (card.getType() &lt; CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(18148) ? (card.getType() != CARD_TYPE_NEW) : (card.getType() == CARD_TYPE_NEW)))))) || (ListenerUtil.mutListener.listen(18157) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18156) ? (simulationResult.nReviewsDoneToday(tElapsed) &lt;= maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18155) ? (simulationResult.nReviewsDoneToday(tElapsed) &gt; maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18154) ? (simulationResult.nReviewsDoneToday(tElapsed) != maxReviewsPerDay) : (ListenerUtil.mutListener.listen(18153) ? (simulationResult.nReviewsDoneToday(tElapsed) == maxReviewsPerDay) : (simulationResult.nReviewsDoneToday(tElapsed) &lt; maxReviewsPerDay)))))))) || (ListenerUtil.mutListener.listen(18163) ? (outcome &gt;= 0) : (ListenerUtil.mutListener.listen(18162) ? (outcome &lt;= 0) : (ListenerUtil.mutListener.listen(18161) ? (outcome &lt; 0) : (ListenerUtil.mutListener.listen(18160) ? (outcome != 0) : (ListenerUtil.mutListener.listen(18159) ? (outcome == 0) : (outcome &gt; 0))))))))) {</span>
<span class="nc bnc" id="L2103" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18181)) {</span>
                        // Update the forecasted number of reviews
<span class="nc bnc" id="L2105" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(18179) ? (outcome &gt;= 0) : (ListenerUtil.mutListener.listen(18178) ? (outcome &lt;= 0) : (ListenerUtil.mutListener.listen(18177) ? (outcome &gt; 0) : (ListenerUtil.mutListener.listen(18176) ? (outcome &lt; 0) : (ListenerUtil.mutListener.listen(18175) ? (outcome != 0) : (outcome == 0)))))))</span>
<span class="nc bnc" id="L2106" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(18180)) {</span>
<span class="nc" id="L2107">                                simulationResult.incrementNReviews(card.getType(), tElapsed, prob);</span>
                            }
                    }
<span class="nc bnc" id="L2110" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18182)) {</span>
                        // Simulate response
<span class="nc" id="L2112">                        prevCard.setAll(card);</span>
                    }
<span class="nc bnc" id="L2114" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18183)) {</span>
<span class="nc" id="L2115">                        newCard.setAll(card);</span>
                    }
                    ReviewOutcome reviewOutcome;
<span class="nc bnc" id="L2118" title="All 90 branches missed.">                    if ((ListenerUtil.mutListener.listen(18194) ? ((ListenerUtil.mutListener.listen(18188) ? (tElapsed &lt;= Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18187) ? (tElapsed &gt; Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18186) ? (tElapsed &lt; Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18185) ? (tElapsed != Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18184) ? (tElapsed == Settings.getComputeNDays()) : (tElapsed &gt;= Settings.getComputeNDays())))))) &amp;&amp; (ListenerUtil.mutListener.listen(18193) ? (prob &gt;= Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18192) ? (prob &lt;= Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18191) ? (prob &gt; Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18190) ? (prob != Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18189) ? (prob == Settings.getComputeMaxError()) : (prob &lt; Settings.getComputeMaxError()))))))) : ((ListenerUtil.mutListener.listen(18188) ? (tElapsed &lt;= Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18187) ? (tElapsed &gt; Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18186) ? (tElapsed &lt; Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18185) ? (tElapsed != Settings.getComputeNDays()) : (ListenerUtil.mutListener.listen(18184) ? (tElapsed == Settings.getComputeNDays()) : (tElapsed &gt;= Settings.getComputeNDays())))))) || (ListenerUtil.mutListener.listen(18193) ? (prob &gt;= Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18192) ? (prob &lt;= Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18191) ? (prob &gt; Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18190) ? (prob != Settings.getComputeMaxError()) : (ListenerUtil.mutListener.listen(18189) ? (prob == Settings.getComputeMaxError()) : (prob &lt; Settings.getComputeMaxError())))))))))</span>
<span class="nc" id="L2119">                        reviewOutcome = classifier.simSingleReview(newCard);</span>
                    else
<span class="nc" id="L2121">                        reviewOutcome = classifier.simSingleReview(newCard, outcome);</span>
<span class="nc bnc" id="L2122" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18195)) {</span>
<span class="nc" id="L2123">                        newCard = reviewOutcome.getCard();</span>
                    }
<span class="nc" id="L2125">                    double outcomeProb = reviewOutcome.getProb();</span>
<span class="nc bnc" id="L2126" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18196)) {</span>
<span class="nc" id="L2127">                        newCard.setLastReview(tElapsed);</span>
                    }
<span class="nc bnc" id="L2129" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18207)) {</span>
                        // If card failed, update &quot;relearn&quot; count
<span class="nc bnc" id="L2131" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(18201) ? (newCard.getCorrect() &gt;= 0) : (ListenerUtil.mutListener.listen(18200) ? (newCard.getCorrect() &lt;= 0) : (ListenerUtil.mutListener.listen(18199) ? (newCard.getCorrect() &gt; 0) : (ListenerUtil.mutListener.listen(18198) ? (newCard.getCorrect() &lt; 0) : (ListenerUtil.mutListener.listen(18197) ? (newCard.getCorrect() != 0) : (newCard.getCorrect() == 0)))))))</span>
<span class="nc bnc" id="L2132" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(18206)) {</span>
<span class="nc bnc" id="L2133" title="All 8 branches missed.">                                simulationResult.incrementNReviews(3, tElapsed, (ListenerUtil.mutListener.listen(18205) ? (prob % outcomeProb) : (ListenerUtil.mutListener.listen(18204) ? (prob / outcomeProb) : (ListenerUtil.mutListener.listen(18203) ? (prob - outcomeProb) : (ListenerUtil.mutListener.listen(18202) ? (prob + outcomeProb) : (prob * outcomeProb))))));</span>
                            }
                    }
<span class="nc bnc" id="L2136" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18216)) {</span>
                        // Set state of card between current and next review
<span class="nc bnc" id="L2138" title="All 16 branches missed.">                        simulationResult.updateNInState(prevCard, newCard, tElapsed, (ListenerUtil.mutListener.listen(18211) ? (tElapsed % newCard.getIvl()) : (ListenerUtil.mutListener.listen(18210) ? (tElapsed / newCard.getIvl()) : (ListenerUtil.mutListener.listen(18209) ? (tElapsed * newCard.getIvl()) : (ListenerUtil.mutListener.listen(18208) ? (tElapsed - newCard.getIvl()) : (tElapsed + newCard.getIvl()))))), (ListenerUtil.mutListener.listen(18215) ? (prob % outcomeProb) : (ListenerUtil.mutListener.listen(18214) ? (prob / outcomeProb) : (ListenerUtil.mutListener.listen(18213) ? (prob - outcomeProb) : (ListenerUtil.mutListener.listen(18212) ? (prob + outcomeProb) : (prob * outcomeProb))))));</span>
                    }
<span class="nc bnc" id="L2140" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18229)) {</span>
                        // Schedule current review, but with other outcome
<span class="nc bnc" id="L2142" title="All 90 branches missed.">                        if ((ListenerUtil.mutListener.listen(18227) ? ((ListenerUtil.mutListener.listen(18221) ? (outcomeProb &gt;= 1.0) : (ListenerUtil.mutListener.listen(18220) ? (outcomeProb &lt;= 1.0) : (ListenerUtil.mutListener.listen(18219) ? (outcomeProb &gt; 1.0) : (ListenerUtil.mutListener.listen(18218) ? (outcomeProb != 1.0) : (ListenerUtil.mutListener.listen(18217) ? (outcomeProb == 1.0) : (outcomeProb &lt; 1.0)))))) || (ListenerUtil.mutListener.listen(18226) ? (outcome &gt;= 3) : (ListenerUtil.mutListener.listen(18225) ? (outcome &lt;= 3) : (ListenerUtil.mutListener.listen(18224) ? (outcome &gt; 3) : (ListenerUtil.mutListener.listen(18223) ? (outcome != 3) : (ListenerUtil.mutListener.listen(18222) ? (outcome == 3) : (outcome &lt; 3))))))) : ((ListenerUtil.mutListener.listen(18221) ? (outcomeProb &gt;= 1.0) : (ListenerUtil.mutListener.listen(18220) ? (outcomeProb &lt;= 1.0) : (ListenerUtil.mutListener.listen(18219) ? (outcomeProb &gt; 1.0) : (ListenerUtil.mutListener.listen(18218) ? (outcomeProb != 1.0) : (ListenerUtil.mutListener.listen(18217) ? (outcomeProb == 1.0) : (outcomeProb &lt; 1.0)))))) &amp;&amp; (ListenerUtil.mutListener.listen(18226) ? (outcome &gt;= 3) : (ListenerUtil.mutListener.listen(18225) ? (outcome &lt;= 3) : (ListenerUtil.mutListener.listen(18224) ? (outcome &gt; 3) : (ListenerUtil.mutListener.listen(18223) ? (outcome != 3) : (ListenerUtil.mutListener.listen(18222) ? (outcome == 3) : (outcome &lt; 3)))))))))</span>
<span class="nc bnc" id="L2143" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(18228)) {</span>
<span class="nc" id="L2144">                                scheduleCurrentReview(prevCard);</span>
                            }
                    }
<span class="nc bnc" id="L2147" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18238)) {</span>
                        // Advance time to next review
<span class="nc bnc" id="L2149" title="All 16 branches missed.">                        scheduleNextReview(newCard, (ListenerUtil.mutListener.listen(18233) ? (tElapsed % newCard.getIvl()) : (ListenerUtil.mutListener.listen(18232) ? (tElapsed / newCard.getIvl()) : (ListenerUtil.mutListener.listen(18231) ? (tElapsed * newCard.getIvl()) : (ListenerUtil.mutListener.listen(18230) ? (tElapsed - newCard.getIvl()) : (tElapsed + newCard.getIvl()))))), (ListenerUtil.mutListener.listen(18237) ? (prob % outcomeProb) : (ListenerUtil.mutListener.listen(18236) ? (prob / outcomeProb) : (ListenerUtil.mutListener.listen(18235) ? (prob - outcomeProb) : (ListenerUtil.mutListener.listen(18234) ? (prob + outcomeProb) : (prob * outcomeProb))))));</span>
                    }
<span class="nc" id="L2151">                } else {</span>
<span class="nc bnc" id="L2152" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18169)) {</span>
                        // Advance time to next review (max. #reviews reached for this day)
<span class="nc bnc" id="L2154" title="All 8 branches missed.">                        simulationResult.updateNInState(card, card, tElapsed, (ListenerUtil.mutListener.listen(18168) ? (tElapsed % 1) : (ListenerUtil.mutListener.listen(18167) ? (tElapsed / 1) : (ListenerUtil.mutListener.listen(18166) ? (tElapsed * 1) : (ListenerUtil.mutListener.listen(18165) ? (tElapsed - 1) : (tElapsed + 1))))), prob);</span>
                    }
<span class="nc bnc" id="L2156" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18174)) {</span>
<span class="nc bnc" id="L2157" title="All 8 branches missed.">                        rescheduleCurrentReview((ListenerUtil.mutListener.listen(18173) ? (tElapsed % 1) : (ListenerUtil.mutListener.listen(18172) ? (tElapsed / 1) : (ListenerUtil.mutListener.listen(18171) ? (tElapsed * 1) : (ListenerUtil.mutListener.listen(18170) ? (tElapsed - 1) : (tElapsed + 1))))));</span>
                    }
                }
            }
<span class="nc" id="L2161">        }</span>

        private void writeLog(Card newCard, double outcomeProb) {
<span class="nc" id="L2164">            String tabs = &quot;&quot;;</span>
<span class="nc bnc" id="L2165" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18246)) {</span>
                {
<span class="nc" id="L2167">                    long _loopCounter361 = 0;</span>
<span class="nc bnc" id="L2168" title="All 22 branches missed.">                    for (int d = 0; (ListenerUtil.mutListener.listen(18245) ? (d &gt;= nPrevRevs) : (ListenerUtil.mutListener.listen(18244) ? (d &lt;= nPrevRevs) : (ListenerUtil.mutListener.listen(18243) ? (d &gt; nPrevRevs) : (ListenerUtil.mutListener.listen(18242) ? (d != nPrevRevs) : (ListenerUtil.mutListener.listen(18241) ? (d == nPrevRevs) : (d &lt; nPrevRevs)))))); d++) {</span>
<span class="nc" id="L2169">                        ListenerUtil.loopListener.listen(&quot;_loopCounter361&quot;, ++_loopCounter361);</span>
<span class="nc bnc" id="L2170" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18240)) {</span>
<span class="nc" id="L2171">                            tabs += &quot;\t&quot;;</span>
                        }
                    }
                }
            }
<span class="nc bnc" id="L2176" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18247)) {</span>
<span class="nc" id="L2177">                Timber.d(&quot;%st=%d p=%f * %s&quot;, tabs, tElapsed, prob, outcomeProb);</span>
            }
<span class="nc bnc" id="L2179" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18248)) {</span>
<span class="nc" id="L2180">                Timber.d(&quot;%s%s&quot;, tabs, prevCard);</span>
            }
<span class="nc bnc" id="L2182" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18249)) {</span>
<span class="nc" id="L2183">                Timber.d(&quot;%s%s&quot;, tabs, newCard);</span>
            }
<span class="nc" id="L2185">        }</span>

        /**
         * Schedule the current review at another time (will re-use current Review).
         */
        private void rescheduleCurrentReview(int newTElapsed) {
<span class="nc bnc" id="L2191" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18257)) {</span>
<span class="nc bnc" id="L2192" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(18254) ? (newTElapsed &gt;= simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18253) ? (newTElapsed &lt;= simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18252) ? (newTElapsed &gt; simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18251) ? (newTElapsed != simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18250) ? (newTElapsed == simulationResult.getnDays()) : (newTElapsed &lt; simulationResult.getnDays()))))))) {</span>
<span class="nc bnc" id="L2193" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18255)) {</span>
<span class="nc" id="L2194">                        this.tElapsed = newTElapsed;</span>
                    }
<span class="nc bnc" id="L2196" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18256)) {</span>
<span class="nc" id="L2197">                        this.reviews.push(this);</span>
                    }
                }
            }
<span class="nc" id="L2201">        }</span>

        /**
         * Schedule the current review at the current time, but with another outcome (will re-use current Review).
         * @param newCard
         */
        private void scheduleCurrentReview(Card newCard) {
<span class="nc bnc" id="L2208" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18258)) {</span>
<span class="nc" id="L2209">                this.card.setAll(newCard);</span>
            }
<span class="nc bnc" id="L2211" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18259)) {</span>
<span class="nc" id="L2212">                this.outcome++;</span>
            }
<span class="nc bnc" id="L2214" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18260)) {</span>
<span class="nc" id="L2215">                this.reviews.push(this);</span>
            }
<span class="nc" id="L2217">        }</span>

        /**
         * Schedule next review (will not re-use current Review).
         */
        private void scheduleNextReview(Card newCard, int newTElapsed, double newProb) {
<span class="nc bnc" id="L2223" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(18287)) {</span>
                // Schedule next review(s) if they are within the time window of the simulation
<span class="nc bnc" id="L2225" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(18265) ? (newTElapsed &gt;= simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18264) ? (newTElapsed &lt;= simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18263) ? (newTElapsed &gt; simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18262) ? (newTElapsed != simulationResult.getnDays()) : (ListenerUtil.mutListener.listen(18261) ? (newTElapsed == simulationResult.getnDays()) : (newTElapsed &lt; simulationResult.getnDays()))))))) {</span>
                    Review review;
                    // This is possible since reviews with nPrevRevs &gt; nPrevRevs of the current review which were already scheduled have all already been processed before we do the current review.
<span class="nc bnc" id="L2228" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(18270) ? (reviewList.size() &gt;= nPrevRevs) : (ListenerUtil.mutListener.listen(18269) ? (reviewList.size() &lt;= nPrevRevs) : (ListenerUtil.mutListener.listen(18268) ? (reviewList.size() &lt; nPrevRevs) : (ListenerUtil.mutListener.listen(18267) ? (reviewList.size() != nPrevRevs) : (ListenerUtil.mutListener.listen(18266) ? (reviewList.size() == nPrevRevs) : (reviewList.size() &gt; nPrevRevs))))))) {</span>
<span class="nc" id="L2229">                        review = reviewList.get(nPrevRevs);</span>
<span class="nc bnc" id="L2230" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(18285)) {</span>
<span class="nc bnc" id="L2231" title="All 8 branches missed.">                            review.existingCard(newCard, (ListenerUtil.mutListener.listen(18284) ? (nPrevRevs % 1) : (ListenerUtil.mutListener.listen(18283) ? (nPrevRevs / 1) : (ListenerUtil.mutListener.listen(18282) ? (nPrevRevs * 1) : (ListenerUtil.mutListener.listen(18281) ? (nPrevRevs - 1) : (nPrevRevs + 1))))), newTElapsed, newProb);</span>
                        }
                    } else {
<span class="nc bnc" id="L2234" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(18275) ? (reviewList.size() &gt;= nPrevRevs) : (ListenerUtil.mutListener.listen(18274) ? (reviewList.size() &lt;= nPrevRevs) : (ListenerUtil.mutListener.listen(18273) ? (reviewList.size() &gt; nPrevRevs) : (ListenerUtil.mutListener.listen(18272) ? (reviewList.size() &lt; nPrevRevs) : (ListenerUtil.mutListener.listen(18271) ? (reviewList.size() != nPrevRevs) : (reviewList.size() == nPrevRevs))))))) {</span>
<span class="nc bnc" id="L2235" title="All 8 branches missed.">                            review = new Review(this, newCard, (ListenerUtil.mutListener.listen(18279) ? (nPrevRevs % 1) : (ListenerUtil.mutListener.listen(18278) ? (nPrevRevs / 1) : (ListenerUtil.mutListener.listen(18277) ? (nPrevRevs * 1) : (ListenerUtil.mutListener.listen(18276) ? (nPrevRevs - 1) : (nPrevRevs + 1))))), newTElapsed, newProb);</span>
<span class="nc bnc" id="L2236" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(18280)) {</span>
<span class="nc" id="L2237">                                reviewList.add(review);</span>
                            }
                        } else {
<span class="nc" id="L2240">                            throw new IllegalStateException(&quot;State of previous reviews of this card should have been saved for determining possible future reviews other than the current one.&quot;);</span>
                        }
                    }
<span class="nc bnc" id="L2243" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(18286)) {</span>
<span class="nc" id="L2244">                        this.reviews.push(review);</span>
                    }
                }
            }
<span class="nc" id="L2248">        }</span>

        public int getT() {
<span class="nc" id="L2251">            return tElapsed;</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>