<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Sched.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">AnkiDroid</a> &gt; <a href="index.source.html" class="el_package">com.ichi2.libanki.sched</a> &gt; <span class="el_source">Sched.java</span></div><h1>Sched.java</h1><pre class="source lang-java linenums">/**
 * *************************************************************************************
 *  Copyright (c) 2011 Norbert Nagold &lt;norbert.nagold@gmail.com&gt;                         *
 *  Copyright (c) 2012 Kostas Spyropoulos &lt;inigo.aldana@gmail.com&gt;                       *
 *  Copyright (c) 2013 Houssam Salem &lt;houssam.salem.au@gmail.com&gt;                        *
 *                                                                                       *
 *  This program is free software; you can redistribute it and/or modify it under        *
 *  the terms of the GNU General private License as published by the Free Software       *
 *  Foundation; either version 3 of the License, or (at your option) any later           *
 *  version.                                                                             *
 *                                                                                       *
 *  This program is distributed in the hope that it will be useful, but WITHOUT ANY      *
 *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A      *
 *  PARTICULAR PURPOSE. See the GNU General private License for more details.            *
 *                                                                                       *
 *  You should have received a copy of the GNU General private License along with        *
 *  this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.                           *
 * **************************************************************************************
 */
package com.ichi2.libanki.sched;

import android.app.Activity;
import android.database.Cursor;
import android.database.SQLException;
import android.text.TextUtils;
import com.ichi2.async.CancelListener;
import com.ichi2.libanki.Card;
import com.ichi2.libanki.Collection;
import com.ichi2.libanki.Consts;
import com.ichi2.libanki.Decks;
import com.ichi2.libanki.Note;
import com.ichi2.libanki.Utils;
import com.ichi2.libanki.Deck;
import com.ichi2.libanki.DeckConfig;
import com.ichi2.utils.Assert;
import com.ichi2.utils.JSONArray;
import com.ichi2.utils.JSONException;
import com.ichi2.utils.JSONObject;
import com.ichi2.utils.SyncStatus;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Locale;
import java.util.Random;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.annotation.VisibleForTesting;
import timber.log.Timber;
import static com.ichi2.async.CancelListener.isCancelled;
import static com.ichi2.libanki.Consts.DECK_DYN;
import static com.ichi2.libanki.Consts.DECK_STD;
import static com.ichi2.libanki.sched.Counts.Queue.*;
import static com.ichi2.libanki.sched.Counts.Queue;
import static com.ichi2.libanki.stats.Stats.SECONDS_PER_DAY;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

@SuppressWarnings({ &quot;PMD.ExcessiveClassLength&quot;, &quot;PMD.AvoidThrowingRawExceptionTypes&quot;, &quot;PMD.AvoidReassigningParameters&quot;, &quot;PMD.NPathComplexity&quot;, &quot;PMD.MethodNamingConventions&quot;, &quot;PMD.AvoidBranchingStatementAsLastInLoop&quot;, &quot;PMD.SwitchStmtsShouldHaveDefault&quot;, &quot;PMD.CollapsibleIfStatements&quot;, &quot;PMD.EmptyIfStmt&quot; })
public class Sched extends SchedV2 {

    // Not in libanki
<span class="nc" id="L62">    private static final int[] FACTOR_ADDITION_VALUES = { -150, 0, 150 };</span>

    // Queues
<span class="nc" id="L65">    @NonNull</span>
    private LinkedList&lt;Long&gt; mRevDids = new LinkedList&lt;&gt;();

    public Sched(@NonNull Collection col) {
<span class="nc" id="L69">        super(col);</span>
<span class="nc" id="L70">    }</span>

    @Override
    public void answerCard(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
<span class="nc bnc" id="L74" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14636)) {</span>
<span class="nc" id="L75">            mCol.log();</span>
        }
<span class="nc bnc" id="L77" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14637)) {</span>
<span class="nc" id="L78">            mCol.markReview(card);</span>
        }
<span class="nc bnc" id="L80" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14638)) {</span>
<span class="nc" id="L81">            discardCurrentCard();</span>
        }
<span class="nc bnc" id="L83" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14639)) {</span>
<span class="nc" id="L84">            _burySiblings(card);</span>
        }
<span class="nc bnc" id="L86" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14640)) {</span>
<span class="nc" id="L87">            card.incrReps();</span>
        }
<span class="nc bnc" id="L89" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14646)) {</span>
            // former is for logging new cards, latter also covers filt. decks
<span class="nc bnc" id="L91" title="All 22 branches missed.">            card.setWasNew(((ListenerUtil.mutListener.listen(14645) ? (card.getType() &gt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14644) ? (card.getType() &lt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14643) ? (card.getType() &gt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14642) ? (card.getType() &lt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14641) ? (card.getType() != Consts.CARD_TYPE_NEW) : (card.getType() == Consts.CARD_TYPE_NEW))))))));</span>
        }
<span class="nc bnc" id="L93" title="All 22 branches missed.">        boolean wasNewQ = ((ListenerUtil.mutListener.listen(14651) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(14650) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(14649) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(14648) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(14647) ? (card.getQueue() != Consts.QUEUE_TYPE_NEW) : (card.getQueue() == Consts.QUEUE_TYPE_NEW)))))));</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14676)) {</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">            if (wasNewQ) {</span>
<span class="nc bnc" id="L96" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14652)) {</span>
                    // came from the new queue, move to learning
<span class="nc" id="L98">                    card.setQueue(Consts.QUEUE_TYPE_LRN);</span>
                }
<span class="nc bnc" id="L100" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14659)) {</span>
                    // if it was a new card, it's now a learning card
<span class="nc bnc" id="L102" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(14657) ? (card.getType() &gt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14656) ? (card.getType() &lt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14655) ? (card.getType() &gt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14654) ? (card.getType() &lt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14653) ? (card.getType() != Consts.CARD_TYPE_NEW) : (card.getType() == Consts.CARD_TYPE_NEW))))))) {</span>
<span class="nc bnc" id="L103" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14658)) {</span>
<span class="nc" id="L104">                            card.setType(Consts.CARD_TYPE_LRN);</span>
                        }
                    }
                }
<span class="nc bnc" id="L108" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14660)) {</span>
                    // init reps to graduation
<span class="nc" id="L110">                    card.setLeft(_startingLeft(card));</span>
                }
<span class="nc bnc" id="L112" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14674)) {</span>
                    // dynamic?
<span class="nc bnc" id="L114" title="All 50 branches missed.">                    if ((ListenerUtil.mutListener.listen(14666) ? (card.isInDynamicDeck() || (ListenerUtil.mutListener.listen(14665) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14664) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14663) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14662) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14661) ? (card.getType() != Consts.CARD_TYPE_REV) : (card.getType() == Consts.CARD_TYPE_REV))))))) : (card.isInDynamicDeck() &amp;&amp; (ListenerUtil.mutListener.listen(14665) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14664) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14663) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14662) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14661) ? (card.getType() != Consts.CARD_TYPE_REV) : (card.getType() == Consts.CARD_TYPE_REV))))))))) {</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14673)) {</span>
<span class="nc bnc" id="L116" title="All 2 branches missed.">                            if (_resched(card)) {</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(14667)) {</span>
                                    // reviews get their ivl boosted on first sight
<span class="nc" id="L119">                                    card.setIvl(_dynIvlBoost(card));</span>
                                }
<span class="nc bnc" id="L121" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(14672)) {</span>
<span class="nc bnc" id="L122" title="All 8 branches missed.">                                    card.setODue((ListenerUtil.mutListener.listen(14671) ? (mToday % card.getIvl()) : (ListenerUtil.mutListener.listen(14670) ? (mToday / card.getIvl()) : (ListenerUtil.mutListener.listen(14669) ? (mToday * card.getIvl()) : (ListenerUtil.mutListener.listen(14668) ? (mToday - card.getIvl()) : (mToday + card.getIvl()))))));</span>
                                }
                            }
                        }
                    }
                }
<span class="nc bnc" id="L128" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14675)) {</span>
<span class="nc" id="L129">                    _updateStats(card, &quot;new&quot;);</span>
                }
            }
        }
<span class="nc bnc" id="L133" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14698)) {</span>
<span class="nc bnc" id="L134" title="All 90 branches missed.">            if ((ListenerUtil.mutListener.listen(14687) ? ((ListenerUtil.mutListener.listen(14681) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14680) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14679) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14678) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14677) ? (card.getQueue() != Consts.QUEUE_TYPE_LRN) : (card.getQueue() == Consts.QUEUE_TYPE_LRN)))))) &amp;&amp; (ListenerUtil.mutListener.listen(14686) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14685) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14684) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14683) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14682) ? (card.getQueue() != Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (card.getQueue() == Consts.QUEUE_TYPE_DAY_LEARN_RELEARN))))))) : ((ListenerUtil.mutListener.listen(14681) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14680) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14679) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14678) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(14677) ? (card.getQueue() != Consts.QUEUE_TYPE_LRN) : (card.getQueue() == Consts.QUEUE_TYPE_LRN)))))) || (ListenerUtil.mutListener.listen(14686) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14685) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14684) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14683) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(14682) ? (card.getQueue() != Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (card.getQueue() == Consts.QUEUE_TYPE_DAY_LEARN_RELEARN))))))))) {</span>
<span class="nc bnc" id="L135" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14695)) {</span>
<span class="nc" id="L136">                    _answerLrnCard(card, ease);</span>
                }
<span class="nc bnc" id="L138" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14697)) {</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">                    if (!wasNewQ) {</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14696)) {</span>
<span class="nc" id="L141">                            _updateStats(card, &quot;lrn&quot;);</span>
                        }
                    }
                }
<span class="nc bnc" id="L145" title="All 22 branches missed.">            } else if ((ListenerUtil.mutListener.listen(14692) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14691) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14690) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14689) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14688) ? (card.getQueue() != Consts.QUEUE_TYPE_REV) : (card.getQueue() == Consts.QUEUE_TYPE_REV))))))) {</span>
<span class="nc bnc" id="L146" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14693)) {</span>
<span class="nc" id="L147">                    _answerRevCard(card, ease);</span>
                }
<span class="nc bnc" id="L149" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14694)) {</span>
<span class="nc" id="L150">                    _updateStats(card, &quot;rev&quot;);</span>
                }
            } else {
<span class="nc" id="L153">                throw new RuntimeException(&quot;Invalid queue&quot;);</span>
            }
        }
<span class="nc bnc" id="L156" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14699)) {</span>
<span class="nc" id="L157">            _updateStats(card, &quot;time&quot;, card.timeTaken());</span>
        }
<span class="nc bnc" id="L159" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14700)) {</span>
<span class="nc" id="L160">            card.setMod(getTime().intTime());</span>
        }
<span class="nc bnc" id="L162" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14701)) {</span>
<span class="nc" id="L163">            card.setUsn(mCol.usn());</span>
        }
<span class="nc bnc" id="L165" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14702)) {</span>
<span class="nc" id="L166">            card.flushSched();</span>
        }
<span class="nc" id="L168">    }</span>

    @Override
    @NonNull
    public Counts counts(@NonNull Card card) {
<span class="nc" id="L173">        Counts counts = counts();</span>
<span class="nc" id="L174">        Counts.Queue idx = countIdx(card);</span>
<span class="nc bnc" id="L175" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14709)) {</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">            if (idx == LRN) {</span>
<span class="nc bnc" id="L177" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14708)) {</span>
<span class="nc bnc" id="L178" title="All 8 branches missed.">                    counts.addLrn((ListenerUtil.mutListener.listen(14707) ? (card.getLeft() % 1000) : (ListenerUtil.mutListener.listen(14706) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14705) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14704) ? (card.getLeft() + 1000) : (card.getLeft() / 1000))))));</span>
                }
            } else {
<span class="nc bnc" id="L181" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14703)) {</span>
<span class="nc" id="L182">                    counts.changeCount(idx, 1);</span>
                }
            }
        }
<span class="nc" id="L186">        return counts;</span>
    }

    @Override
    public Queue countIdx(@NonNull Card card) {
<span class="nc bnc" id="L191" title="All 4 branches missed.">        switch(card.getQueue()) {</span>
            case Consts.QUEUE_TYPE_DAY_LEARN_RELEARN:
            case Consts.QUEUE_TYPE_LRN:
<span class="nc" id="L194">                return LRN;</span>
            case Consts.QUEUE_TYPE_NEW:
<span class="nc" id="L196">                return NEW;</span>
            case Consts.QUEUE_TYPE_REV:
<span class="nc" id="L198">                return REV;</span>
            default:
<span class="nc" id="L200">                throw new RuntimeException(&quot;Index &quot; + card.getQueue() + &quot; does not exists.&quot;);</span>
        }
    }

    @Override
    public int answerButtons(@NonNull Card card) {
<span class="nc bnc" id="L206" title="All 22 branches missed.">        if ((ListenerUtil.mutListener.listen(14714) ? (card.getODue() &gt;= 0) : (ListenerUtil.mutListener.listen(14713) ? (card.getODue() &lt;= 0) : (ListenerUtil.mutListener.listen(14712) ? (card.getODue() &gt; 0) : (ListenerUtil.mutListener.listen(14711) ? (card.getODue() &lt; 0) : (ListenerUtil.mutListener.listen(14710) ? (card.getODue() == 0) : (card.getODue() != 0))))))) {</span>
            // normal review in dyn deck?
<span class="nc bnc" id="L208" title="All 50 branches missed.">            if ((ListenerUtil.mutListener.listen(14725) ? (card.isInDynamicDeck() || (ListenerUtil.mutListener.listen(14724) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14723) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14722) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14721) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14720) ? (card.getQueue() != Consts.QUEUE_TYPE_REV) : (card.getQueue() == Consts.QUEUE_TYPE_REV))))))) : (card.isInDynamicDeck() &amp;&amp; (ListenerUtil.mutListener.listen(14724) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14723) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14722) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14721) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14720) ? (card.getQueue() != Consts.QUEUE_TYPE_REV) : (card.getQueue() == Consts.QUEUE_TYPE_REV))))))))) {</span>
<span class="nc" id="L209">                return 4;</span>
            }
<span class="nc" id="L211">            JSONObject conf = _lrnConf(card);</span>
<span class="nc bnc" id="L212" title="All 226 branches missed.">            if ((ListenerUtil.mutListener.listen(14742) ? ((ListenerUtil.mutListener.listen(14736) ? ((ListenerUtil.mutListener.listen(14730) ? (card.getType() &gt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14729) ? (card.getType() &lt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14728) ? (card.getType() &gt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14727) ? (card.getType() &lt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14726) ? (card.getType() != Consts.CARD_TYPE_NEW) : (card.getType() == Consts.CARD_TYPE_NEW)))))) &amp;&amp; (ListenerUtil.mutListener.listen(14735) ? (card.getType() &gt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14734) ? (card.getType() &lt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14733) ? (card.getType() &gt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14732) ? (card.getType() &lt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14731) ? (card.getType() != Consts.CARD_TYPE_LRN) : (card.getType() == Consts.CARD_TYPE_LRN))))))) : ((ListenerUtil.mutListener.listen(14730) ? (card.getType() &gt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14729) ? (card.getType() &lt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14728) ? (card.getType() &gt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14727) ? (card.getType() &lt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14726) ? (card.getType() != Consts.CARD_TYPE_NEW) : (card.getType() == Consts.CARD_TYPE_NEW)))))) || (ListenerUtil.mutListener.listen(14735) ? (card.getType() &gt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14734) ? (card.getType() &lt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14733) ? (card.getType() &gt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14732) ? (card.getType() &lt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14731) ? (card.getType() != Consts.CARD_TYPE_LRN) : (card.getType() == Consts.CARD_TYPE_LRN)))))))) &amp;&amp; (ListenerUtil.mutListener.listen(14741) ? (conf.getJSONArray(&quot;delays&quot;).length() &gt;= 1) : (ListenerUtil.mutListener.listen(14740) ? (conf.getJSONArray(&quot;delays&quot;).length() &lt;= 1) : (ListenerUtil.mutListener.listen(14739) ? (conf.getJSONArray(&quot;delays&quot;).length() &lt; 1) : (ListenerUtil.mutListener.listen(14738) ? (conf.getJSONArray(&quot;delays&quot;).length() != 1) : (ListenerUtil.mutListener.listen(14737) ? (conf.getJSONArray(&quot;delays&quot;).length() == 1) : (conf.getJSONArray(&quot;delays&quot;).length() &gt; 1))))))) : ((ListenerUtil.mutListener.listen(14736) ? ((ListenerUtil.mutListener.listen(14730) ? (card.getType() &gt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14729) ? (card.getType() &lt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14728) ? (card.getType() &gt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14727) ? (card.getType() &lt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14726) ? (card.getType() != Consts.CARD_TYPE_NEW) : (card.getType() == Consts.CARD_TYPE_NEW)))))) &amp;&amp; (ListenerUtil.mutListener.listen(14735) ? (card.getType() &gt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14734) ? (card.getType() &lt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14733) ? (card.getType() &gt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14732) ? (card.getType() &lt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14731) ? (card.getType() != Consts.CARD_TYPE_LRN) : (card.getType() == Consts.CARD_TYPE_LRN))))))) : ((ListenerUtil.mutListener.listen(14730) ? (card.getType() &gt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14729) ? (card.getType() &lt;= Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14728) ? (card.getType() &gt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14727) ? (card.getType() &lt; Consts.CARD_TYPE_NEW) : (ListenerUtil.mutListener.listen(14726) ? (card.getType() != Consts.CARD_TYPE_NEW) : (card.getType() == Consts.CARD_TYPE_NEW)))))) || (ListenerUtil.mutListener.listen(14735) ? (card.getType() &gt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14734) ? (card.getType() &lt;= Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14733) ? (card.getType() &gt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14732) ? (card.getType() &lt; Consts.CARD_TYPE_LRN) : (ListenerUtil.mutListener.listen(14731) ? (card.getType() != Consts.CARD_TYPE_LRN) : (card.getType() == Consts.CARD_TYPE_LRN)))))))) || (ListenerUtil.mutListener.listen(14741) ? (conf.getJSONArray(&quot;delays&quot;).length() &gt;= 1) : (ListenerUtil.mutListener.listen(14740) ? (conf.getJSONArray(&quot;delays&quot;).length() &lt;= 1) : (ListenerUtil.mutListener.listen(14739) ? (conf.getJSONArray(&quot;delays&quot;).length() &lt; 1) : (ListenerUtil.mutListener.listen(14738) ? (conf.getJSONArray(&quot;delays&quot;).length() != 1) : (ListenerUtil.mutListener.listen(14737) ? (conf.getJSONArray(&quot;delays&quot;).length() == 1) : (conf.getJSONArray(&quot;delays&quot;).length() &gt; 1))))))))) {</span>
<span class="nc" id="L213">                return 3;</span>
            }
<span class="nc" id="L215">            return 2;</span>
<span class="nc bnc" id="L216" title="All 22 branches missed.">        } else if ((ListenerUtil.mutListener.listen(14719) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14718) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14717) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14716) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_REV) : (ListenerUtil.mutListener.listen(14715) ? (card.getQueue() != Consts.QUEUE_TYPE_REV) : (card.getQueue() == Consts.QUEUE_TYPE_REV))))))) {</span>
<span class="nc" id="L217">            return 4;</span>
        } else {
<span class="nc" id="L219">            return 3;</span>
        }
    }

    /*
     * Unbury cards.
     */
    @Override
    public void unburyCards() {
<span class="nc bnc" id="L228" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14743)) {</span>
<span class="nc" id="L229">            mCol.getConf().put(&quot;lastUnburied&quot;, mToday);</span>
        }
<span class="nc bnc" id="L231" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14744)) {</span>
<span class="nc" id="L232">            mCol.log(mCol.getDb().queryLongList(&quot;select id from cards where &quot; + queueIsBuriedSnippet()));</span>
        }
<span class="nc bnc" id="L234" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14745)) {</span>
<span class="nc" id="L235">            mCol.getDb().execute(&quot;update cards set &quot; + _restoreQueueSnippet() + &quot; where &quot; + queueIsBuriedSnippet());</span>
        }
<span class="nc" id="L237">    }</span>

    @Override
    public void unburyCardsForDeck() {
<span class="nc bnc" id="L241" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14746)) {</span>
<span class="nc" id="L242">            unburyCardsForDeck(mCol.getDecks().active());</span>
        }
<span class="nc" id="L244">    }</span>

    private void unburyCardsForDeck(@NonNull List&lt;Long&gt; allDecks) {
        // Refactored to allow unburying an arbitrary deck
<span class="nc" id="L248">        String sids = Utils.ids2str(allDecks);</span>
<span class="nc bnc" id="L249" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14747)) {</span>
<span class="nc" id="L250">            mCol.log(mCol.getDb().queryLongList(&quot;select id from cards where &quot; + queueIsBuriedSnippet() + &quot; and did in &quot; + sids));</span>
        }
<span class="nc bnc" id="L252" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14748)) {</span>
<span class="nc" id="L253">            mCol.getDb().execute(&quot;update cards set mod=?,usn=?,&quot; + _restoreQueueSnippet() + &quot; where &quot; + queueIsBuriedSnippet() + &quot; and did in &quot; + sids, getTime().intTime(), mCol.usn());</span>
        }
<span class="nc" id="L255">    }</span>

    /**
     * Returns [deckname, did, rev, lrn, new]
     */
    @Override
    @Nullable
    public List&lt;DeckDueTreeNode&gt; deckDueList(@Nullable CancelListener cancelListener) {
<span class="nc bnc" id="L263" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14749)) {</span>
<span class="nc" id="L264">            _checkDay();</span>
        }
<span class="nc bnc" id="L266" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14750)) {</span>
<span class="nc" id="L267">            mCol.getDecks().checkIntegrity();</span>
        }
<span class="nc" id="L269">        ArrayList&lt;Deck&gt; decks = mCol.getDecks().allSorted();</span>
<span class="nc" id="L270">        HashMap&lt;String, Integer[]&gt; lims = new HashMap&lt;&gt;(decks.size());</span>
<span class="nc" id="L271">        ArrayList&lt;DeckDueTreeNode&gt; deckNodes = new ArrayList&lt;&gt;(decks.size());</span>
<span class="nc bnc" id="L272" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14758)) {</span>
            {
<span class="nc" id="L274">                long _loopCounter292 = 0;</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">                for (Deck deck : decks) {</span>
<span class="nc" id="L276">                    ListenerUtil.loopListener.listen(&quot;_loopCounter292&quot;, ++_loopCounter292);</span>
<span class="nc bnc" id="L277" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(14751)) {</span>
<span class="nc bnc" id="L278" title="All 2 branches missed.">                        if (isCancelled(cancelListener)) {</span>
<span class="nc" id="L279">                            return null;</span>
                        }
                    }
<span class="nc" id="L282">                    String deckName = deck.getString(&quot;name&quot;);</span>
<span class="nc" id="L283">                    String p = Decks.parent(deckName);</span>
                    // new
<span class="nc" id="L285">                    int nlim = _deckNewLimitSingle(deck, false);</span>
<span class="nc" id="L286">                    int rlim = _deckRevLimitSingle(deck, false);</span>
<span class="nc bnc" id="L287" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(14755)) {</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">                        if (!TextUtils.isEmpty(p)) {</span>
<span class="nc" id="L289">                            Integer[] parentLims = lims.get(Decks.normalizeName(p));</span>
<span class="nc bnc" id="L290" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(14752)) {</span>
                                // 'temporary for diagnosis of bug #6383'
<span class="nc bnc" id="L292" title="All 2 branches missed.">                                Assert.that(parentLims != null, &quot;Deck %s is supposed to have parent %s. It has not be found.&quot;, deckName, p);</span>
                            }
<span class="nc bnc" id="L294" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(14753)) {</span>
<span class="nc" id="L295">                                nlim = Math.min(nlim, parentLims[0]);</span>
                            }
<span class="nc bnc" id="L297" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(14754)) {</span>
                                // review
<span class="nc" id="L299">                                rlim = Math.min(rlim, parentLims[1]);</span>
                            }
                        }
                    }
<span class="nc" id="L303">                    int _new = _newForDeck(deck.getLong(&quot;id&quot;), nlim);</span>
                    // learning
<span class="nc" id="L305">                    int lrn = _lrnForDeck(deck.getLong(&quot;id&quot;));</span>
                    // reviews
<span class="nc" id="L307">                    int rev = _revForDeck(deck.getLong(&quot;id&quot;), rlim);</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(14756)) {</span>
                        // save to list
<span class="nc" id="L310">                        deckNodes.add(new DeckDueTreeNode(mCol, deck.getString(&quot;name&quot;), deck.getLong(&quot;id&quot;), rev, lrn, _new));</span>
                    }
<span class="nc bnc" id="L312" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(14757)) {</span>
                        // add deck as a parent
<span class="nc" id="L314">                        lims.put(Decks.normalizeName(deck.getString(&quot;name&quot;)), new Integer[] { nlim, rlim });</span>
                    }
<span class="nc" id="L316">                }</span>
            }
        }
<span class="nc" id="L319">        return deckNodes;</span>
    }

    /**
     * Return the next due card, or null.
     */
    @Override
    @Nullable
    protected Card _getCard() {
        // learning card due?
        @Nullable
<span class="nc" id="L330">        Card c = _getLrnCard(false);</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14759)) {</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">            if (c != null) {</span>
<span class="nc" id="L333">                return c;</span>
            }
        }
<span class="nc bnc" id="L336" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14762)) {</span>
            // new first, or time for one?
<span class="nc bnc" id="L338" title="All 2 branches missed.">            if (_timeForNewCard()) {</span>
<span class="nc bnc" id="L339" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14760)) {</span>
<span class="nc" id="L340">                    c = _getNewCard();</span>
                }
<span class="nc bnc" id="L342" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14761)) {</span>
<span class="nc bnc" id="L343" title="All 2 branches missed.">                    if (c != null) {</span>
<span class="nc" id="L344">                        return c;</span>
                    }
                }
            }
        }
<span class="nc bnc" id="L349" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14763)) {</span>
            // Card due for review?
<span class="nc" id="L351">            c = _getRevCard();</span>
        }
<span class="nc bnc" id="L353" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14764)) {</span>
<span class="nc bnc" id="L354" title="All 2 branches missed.">            if (c != null) {</span>
<span class="nc" id="L355">                return c;</span>
            }
        }
<span class="nc bnc" id="L358" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14765)) {</span>
            // day learning card due?
<span class="nc" id="L360">            c = _getLrnDayCard();</span>
        }
<span class="nc bnc" id="L362" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14766)) {</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">            if (c != null) {</span>
<span class="nc" id="L364">                return c;</span>
            }
        }
<span class="nc bnc" id="L367" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14767)) {</span>
            // New cards left?
<span class="nc" id="L369">            c = _getNewCard();</span>
        }
<span class="nc bnc" id="L371" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14768)) {</span>
<span class="nc bnc" id="L372" title="All 2 branches missed.">            if (c != null) {</span>
<span class="nc" id="L373">                return c;</span>
            }
        }
        // collapse or finish
<span class="nc" id="L377">        return _getLrnCard(true);</span>
    }

    @NonNull
    protected CardQueue&lt;? extends Card.Cache&gt;[] _fillNextCard() {
<span class="nc bnc" id="L382" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14769)) {</span>
            // learning card due?
<span class="nc bnc" id="L384" title="All 2 branches missed.">            if (_preloadLrnCard(false)) {</span>
<span class="nc" id="L385">                return new CardQueue&lt;?&gt;[] { mLrnQueue };</span>
            }
        }
<span class="nc bnc" id="L388" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14771)) {</span>
            // new first, or time for one?
<span class="nc bnc" id="L390" title="All 2 branches missed.">            if (_timeForNewCard()) {</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14770)) {</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">                    if (_fillNew()) {</span>
<span class="nc" id="L393">                        return new CardQueue&lt;?&gt;[] { mLrnQueue, mNewQueue };</span>
                    }
                }
            }
        }
<span class="nc bnc" id="L398" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14772)) {</span>
            // Card due for review?
<span class="nc bnc" id="L400" title="All 2 branches missed.">            if (_fillRev()) {</span>
<span class="nc" id="L401">                return new CardQueue&lt;?&gt;[] { mLrnQueue, mRevQueue };</span>
            }
        }
<span class="nc bnc" id="L404" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14773)) {</span>
            // day learning card due?
<span class="nc bnc" id="L406" title="All 2 branches missed.">            if (_fillLrnDay()) {</span>
<span class="nc" id="L407">                return new CardQueue&lt;?&gt;[] { mLrnQueue, mLrnDayQueue };</span>
            }
        }
<span class="nc bnc" id="L410" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14774)) {</span>
            // New cards left?
<span class="nc bnc" id="L412" title="All 2 branches missed.">            if (_fillNew()) {</span>
<span class="nc" id="L413">                return new CardQueue&lt;?&gt;[] { mLrnQueue, mNewQueue };</span>
            }
        }
<span class="nc bnc" id="L416" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14775)) {</span>
            // collapse or finish
<span class="nc bnc" id="L418" title="All 2 branches missed.">            if (_preloadLrnCard(true)) {</span>
<span class="nc" id="L419">                return new CardQueue&lt;?&gt;[] { mLrnQueue };</span>
            }
        }
<span class="nc" id="L422">        return new CardQueue&lt;?&gt;[] {};</span>
    }

    @Override
    protected void _resetLrnCount() {
<span class="nc bnc" id="L427" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14776)) {</span>
<span class="nc" id="L428">            _resetLrnCount(null);</span>
        }
<span class="nc" id="L430">    }</span>

    protected void _resetLrnCount(@Nullable CancelListener cancelListener) {
<span class="nc bnc" id="L433" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14777)) {</span>
            // sub-day
<span class="nc" id="L435">            mLrnCount = mCol.getDb().queryScalar(&quot;SELECT sum(left / 1000) FROM (SELECT left FROM cards WHERE did IN &quot; + _deckLimit() + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_LRN + &quot; AND due &lt; ? and id != ? LIMIT ?)&quot;, mDayCutoff, currentCardId(), mReportLimit);</span>
        }
<span class="nc bnc" id="L437" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14778)) {</span>
<span class="nc bnc" id="L438" title="All 2 branches missed.">            if (isCancelled(cancelListener))</span>
<span class="nc" id="L439">                return;</span>
        }
<span class="nc bnc" id="L441" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14779)) {</span>
            // day
<span class="nc" id="L443">            mLrnCount += mCol.getDb().queryScalar(&quot;SELECT count() FROM cards WHERE did IN &quot; + _deckLimit() + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot; AND due &lt;= ? &quot; + &quot;AND id != ? LIMIT ?&quot;, mToday, currentCardId(), mReportLimit);</span>
        }
<span class="nc" id="L445">    }</span>

    @Override
    protected void _resetLrnQueue() {
<span class="nc bnc" id="L449" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14780)) {</span>
<span class="nc" id="L450">            mLrnQueue.clear();</span>
        }
<span class="nc bnc" id="L452" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14781)) {</span>
<span class="nc" id="L453">            mLrnDayQueue.clear();</span>
        }
<span class="nc bnc" id="L455" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14782)) {</span>
<span class="nc" id="L456">            mLrnDids = mCol.getDecks().active();</span>
        }
<span class="nc" id="L458">    }</span>

    // sub-day learning
    @Override
    protected boolean _fillLrn() {
<span class="nc bnc" id="L463" title="All 50 branches missed.">        if ((ListenerUtil.mutListener.listen(14788) ? (mHaveCounts || (ListenerUtil.mutListener.listen(14787) ? (mLrnCount &gt;= 0) : (ListenerUtil.mutListener.listen(14786) ? (mLrnCount &lt;= 0) : (ListenerUtil.mutListener.listen(14785) ? (mLrnCount &gt; 0) : (ListenerUtil.mutListener.listen(14784) ? (mLrnCount &lt; 0) : (ListenerUtil.mutListener.listen(14783) ? (mLrnCount != 0) : (mLrnCount == 0))))))) : (mHaveCounts &amp;&amp; (ListenerUtil.mutListener.listen(14787) ? (mLrnCount &gt;= 0) : (ListenerUtil.mutListener.listen(14786) ? (mLrnCount &lt;= 0) : (ListenerUtil.mutListener.listen(14785) ? (mLrnCount &gt; 0) : (ListenerUtil.mutListener.listen(14784) ? (mLrnCount &lt; 0) : (ListenerUtil.mutListener.listen(14783) ? (mLrnCount != 0) : (mLrnCount == 0))))))))) {</span>
<span class="nc" id="L464">            return false;</span>
        }
<span class="nc bnc" id="L466" title="All 2 branches missed.">        if (!mLrnQueue.isEmpty()) {</span>
<span class="nc" id="L467">            return true;</span>
        }
<span class="nc bnc" id="L469" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14789)) {</span>
<span class="nc" id="L470">            mLrnQueue.clear();</span>
        }
<span class="nc bnc" id="L472" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14790)) {</span>
            /* Difference with upstream:
         * Current card can't come in the queue.
         *
         * In standard usage, a card is not requested before the previous card is marked as reviewed. However, if we
         * decide to query a second card sooner, we don't want to get the same card a second time. This simulate
         * _getLrnCard which did remove the card from the queue. _sortIntoLrn will add the card back to the queue if
         * required when the card is reviewed.
         */
<span class="nc" id="L481">            mLrnQueue.setFilled();</span>
        }
<span class="nc" id="L483">        try (Cursor cur = mCol.getDb().query(&quot;SELECT due, id FROM cards WHERE did IN &quot; + _deckLimit() + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_LRN + &quot; AND due &lt; ? AND id != ? LIMIT ?&quot;, mDayCutoff, currentCardId(), mReportLimit)) {</span>
<span class="nc bnc" id="L484" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(14792)) {</span>
                {
<span class="nc" id="L486">                    long _loopCounter293 = 0;</span>
<span class="nc bnc" id="L487" title="All 2 branches missed.">                    while (cur.moveToNext()) {</span>
<span class="nc" id="L488">                        ListenerUtil.loopListener.listen(&quot;_loopCounter293&quot;, ++_loopCounter293);</span>
<span class="nc bnc" id="L489" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14791)) {</span>
<span class="nc" id="L490">                            mLrnQueue.add(cur.getLong(0), cur.getLong(1));</span>
                        }
                    }
                }
            }
<span class="nc bnc" id="L495" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(14793)) {</span>
                // as it arrives sorted by did first, we need to sort it
<span class="nc" id="L497">                mLrnQueue.sort();</span>
            }
<span class="nc bnc" id="L499" title="All 2 branches missed.">            return !mLrnQueue.isEmpty();</span>
        }
    }

    @Override
    @Nullable
    protected Card _getLrnCard(boolean collapse) {
<span class="nc bnc" id="L506" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14802)) {</span>
<span class="nc bnc" id="L507" title="All 2 branches missed.">            if (_fillLrn()) {</span>
<span class="nc" id="L508">                long cutoff = getTime().intTime();</span>
<span class="nc bnc" id="L509" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14795)) {</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">                    if (collapse) {</span>
<span class="nc bnc" id="L511" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14794)) {</span>
<span class="nc" id="L512">                            cutoff += mCol.getConf().getInt(&quot;collapseTime&quot;);</span>
                        }
                    }
                }
<span class="nc bnc" id="L516" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14801)) {</span>
<span class="nc bnc" id="L517" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(14800) ? (mLrnQueue.getFirstDue() &gt;= cutoff) : (ListenerUtil.mutListener.listen(14799) ? (mLrnQueue.getFirstDue() &lt;= cutoff) : (ListenerUtil.mutListener.listen(14798) ? (mLrnQueue.getFirstDue() &gt; cutoff) : (ListenerUtil.mutListener.listen(14797) ? (mLrnQueue.getFirstDue() != cutoff) : (ListenerUtil.mutListener.listen(14796) ? (mLrnQueue.getFirstDue() == cutoff) : (mLrnQueue.getFirstDue() &lt; cutoff))))))) {</span>
<span class="nc" id="L518">                        return mLrnQueue.removeFirstCard();</span>
                    }
                }
            }
        }
<span class="nc" id="L523">        return null;</span>
    }

    /**
     * @param ease 1=no, 2=yes, 3=remove
     */
    @Override
    protected void _answerLrnCard(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
<span class="nc" id="L531">        JSONObject conf = _lrnConf(card);</span>
        @Consts.CARD_TYPE
        int type;
<span class="nc bnc" id="L534" title="All 10 branches missed.">        if ((ListenerUtil.mutListener.listen(14803) ? (card.isInDynamicDeck() || !card.getWasNew()) : (card.isInDynamicDeck() &amp;&amp; !card.getWasNew()))) {</span>
<span class="nc" id="L535">            type = Consts.CARD_TYPE_RELEARNING;</span>
<span class="nc bnc" id="L536" title="All 22 branches missed.">        } else if ((ListenerUtil.mutListener.listen(14808) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14807) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14806) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14805) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14804) ? (card.getType() != Consts.CARD_TYPE_REV) : (card.getType() == Consts.CARD_TYPE_REV))))))) {</span>
<span class="nc" id="L537">            type = Consts.CARD_TYPE_REV;</span>
        } else {
<span class="nc" id="L539">            type = Consts.CARD_TYPE_NEW;</span>
        }
<span class="nc" id="L541">        boolean leaving = false;</span>
        // lrnCount was decremented once when card was fetched
<span class="nc" id="L543">        int lastLeft = card.getLeft();</span>
<span class="nc bnc" id="L544" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14918)) {</span>
            // immediate graduate?
<span class="nc bnc" id="L546" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(14813) ? (ease &gt;= Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(14812) ? (ease &lt;= Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(14811) ? (ease &gt; Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(14810) ? (ease &lt; Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(14809) ? (ease != Consts.BUTTON_THREE) : (ease == Consts.BUTTON_THREE))))))) {</span>
<span class="nc bnc" id="L547" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14916)) {</span>
<span class="nc" id="L548">                    _rescheduleAsRev(card, conf, true);</span>
                }
<span class="nc bnc" id="L550" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14917)) {</span>
<span class="nc" id="L551">                    leaving = true;</span>
                }
<span class="nc bnc" id="L553" title="All 666 branches missed.">            } else if ((ListenerUtil.mutListener.listen(14832) ? ((ListenerUtil.mutListener.listen(14818) ? (ease &gt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14817) ? (ease &lt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14816) ? (ease &gt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14815) ? (ease &lt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14814) ? (ease != Consts.BUTTON_TWO) : (ease == Consts.BUTTON_TWO)))))) || (ListenerUtil.mutListener.listen(14831) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &gt;= 0) : (ListenerUtil.mutListener.listen(14830) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &gt; 0) : (ListenerUtil.mutListener.listen(14829) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &lt; 0) : (ListenerUtil.mutListener.listen(14828) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) != 0) : (ListenerUtil.mutListener.listen(14827) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) == 0) : ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &lt;= 0))))))) : ((ListenerUtil.mutListener.listen(14818) ? (ease &gt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14817) ? (ease &lt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14816) ? (ease &gt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14815) ? (ease &lt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14814) ? (ease != Consts.BUTTON_TWO) : (ease == Consts.BUTTON_TWO)))))) &amp;&amp; (ListenerUtil.mutListener.listen(14831) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &gt;= 0) : (ListenerUtil.mutListener.listen(14830) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &gt; 0) : (ListenerUtil.mutListener.listen(14829) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &lt; 0) : (ListenerUtil.mutListener.listen(14828) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) != 0) : (ListenerUtil.mutListener.listen(14827) ? ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) == 0) : ((ListenerUtil.mutListener.listen(14826) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14825) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14824) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14823) ? (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14822) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14821) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14820) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14819) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1))))) &lt;= 0))))))))) {</span>
<span class="nc bnc" id="L554" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14914)) {</span>
<span class="nc" id="L555">                    _rescheduleAsRev(card, conf, false);</span>
                }
<span class="nc bnc" id="L557" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14915)) {</span>
<span class="nc" id="L558">                    leaving = true;</span>
                }
            } else {
<span class="nc bnc" id="L561" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14866)) {</span>
                    // one step towards graduation
<span class="nc bnc" id="L563" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(14837) ? (ease &gt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14836) ? (ease &lt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14835) ? (ease &gt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14834) ? (ease &lt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(14833) ? (ease != Consts.BUTTON_TWO) : (ease == Consts.BUTTON_TWO))))))) {</span>
                        // decrement real left count and recalculate left today
<span class="nc bnc" id="L565" title="All 48 branches missed.">                        int left = (ListenerUtil.mutListener.listen(14860) ? (((ListenerUtil.mutListener.listen(14856) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14855) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14854) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14853) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) % 1) : (ListenerUtil.mutListener.listen(14859) ? (((ListenerUtil.mutListener.listen(14856) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14855) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14854) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14853) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) / 1) : (ListenerUtil.mutListener.listen(14858) ? (((ListenerUtil.mutListener.listen(14856) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14855) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14854) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14853) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) * 1) : (ListenerUtil.mutListener.listen(14857) ? (((ListenerUtil.mutListener.listen(14856) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14855) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14854) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14853) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) + 1) : (((ListenerUtil.mutListener.listen(14856) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(14855) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14854) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14853) ? (card.getLeft() + 1000) : (card.getLeft() % 1000)))))) - 1)))));</span>
<span class="nc bnc" id="L566" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14865)) {</span>
<span class="nc bnc" id="L567" title="All 8 branches missed.">                            card.setLeft((ListenerUtil.mutListener.listen(14864) ? (_leftToday(conf.getJSONArray(&quot;delays&quot;), left) % 1000) : (ListenerUtil.mutListener.listen(14863) ? (_leftToday(conf.getJSONArray(&quot;delays&quot;), left) / 1000) : (ListenerUtil.mutListener.listen(14862) ? (_leftToday(conf.getJSONArray(&quot;delays&quot;), left) - 1000) : (ListenerUtil.mutListener.listen(14861) ? (_leftToday(conf.getJSONArray(&quot;delays&quot;), left) + 1000) : (_leftToday(conf.getJSONArray(&quot;delays&quot;), left) * 1000))))) + left);</span>
                        }
<span class="nc" id="L569">                    } else {</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14838)) {</span>
<span class="nc" id="L571">                            card.setLeft(_startingLeft(card));</span>
                        }
<span class="nc" id="L573">                        boolean resched = _resched(card);</span>
<span class="nc bnc" id="L574" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14845)) {</span>
<span class="nc bnc" id="L575" title="All 10 branches missed.">                            if ((ListenerUtil.mutListener.listen(14839) ? (conf.has(&quot;mult&quot;) || resched) : (conf.has(&quot;mult&quot;) &amp;&amp; resched))) {</span>
<span class="nc bnc" id="L576" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(14844)) {</span>
                                    // review that's lapsed
<span class="nc bnc" id="L578" title="All 8 branches missed.">                                    card.setIvl(Math.max(Math.max(1, (int) ((ListenerUtil.mutListener.listen(14843) ? (card.getIvl() % conf.getDouble(&quot;mult&quot;)) : (ListenerUtil.mutListener.listen(14842) ? (card.getIvl() / conf.getDouble(&quot;mult&quot;)) : (ListenerUtil.mutListener.listen(14841) ? (card.getIvl() - conf.getDouble(&quot;mult&quot;)) : (ListenerUtil.mutListener.listen(14840) ? (card.getIvl() + conf.getDouble(&quot;mult&quot;)) : (card.getIvl() * conf.getDouble(&quot;mult&quot;)))))))), conf.getInt(&quot;minInt&quot;)));</span>
                                }
                            } else {
                            }
                        }
<span class="nc bnc" id="L583" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14852)) {</span>
<span class="nc bnc" id="L584" title="All 10 branches missed.">                            if ((ListenerUtil.mutListener.listen(14846) ? (resched || card.isInDynamicDeck()) : (resched &amp;&amp; card.isInDynamicDeck()))) {</span>
<span class="nc bnc" id="L585" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(14851)) {</span>
<span class="nc bnc" id="L586" title="All 8 branches missed.">                                    card.setODue((ListenerUtil.mutListener.listen(14850) ? (mToday % 1) : (ListenerUtil.mutListener.listen(14849) ? (mToday / 1) : (ListenerUtil.mutListener.listen(14848) ? (mToday * 1) : (ListenerUtil.mutListener.listen(14847) ? (mToday - 1) : (mToday + 1))))));</span>
                                }
                            }
                        }
                    }
                }
<span class="nc" id="L592">                int delay = _delayForGrade(conf, card.getLeft());</span>
<span class="nc bnc" id="L593" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14873)) {</span>
<span class="nc bnc" id="L594" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(14871) ? (card.getDue() &gt;= getTime().intTime()) : (ListenerUtil.mutListener.listen(14870) ? (card.getDue() &lt;= getTime().intTime()) : (ListenerUtil.mutListener.listen(14869) ? (card.getDue() &gt; getTime().intTime()) : (ListenerUtil.mutListener.listen(14868) ? (card.getDue() != getTime().intTime()) : (ListenerUtil.mutListener.listen(14867) ? (card.getDue() == getTime().intTime()) : (card.getDue() &lt; getTime().intTime()))))))) {</span>
<span class="nc bnc" id="L595" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14872)) {</span>
                            // not collapsed; add some randomness
<span class="nc" id="L597">                            delay *= Utils.randomFloatInRange(1f, 1.25f);</span>
                        }
                    }
                }
<span class="nc bnc" id="L601" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14874)) {</span>
<span class="nc" id="L602">                    card.setDue(getTime().intTime() + delay);</span>
                }
<span class="nc bnc" id="L604" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14913)) {</span>
                    // due today?
<span class="nc bnc" id="L606" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(14879) ? (card.getDue() &gt;= mDayCutoff) : (ListenerUtil.mutListener.listen(14878) ? (card.getDue() &lt;= mDayCutoff) : (ListenerUtil.mutListener.listen(14877) ? (card.getDue() &gt; mDayCutoff) : (ListenerUtil.mutListener.listen(14876) ? (card.getDue() != mDayCutoff) : (ListenerUtil.mutListener.listen(14875) ? (card.getDue() == mDayCutoff) : (card.getDue() &lt; mDayCutoff))))))) {</span>
<span class="nc bnc" id="L607" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14902)) {</span>
<span class="nc bnc" id="L608" title="All 8 branches missed.">                            mLrnCount += (ListenerUtil.mutListener.listen(14901) ? (card.getLeft() % 1000) : (ListenerUtil.mutListener.listen(14900) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(14899) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(14898) ? (card.getLeft() + 1000) : (card.getLeft() / 1000)))));</span>
                        }
<span class="nc bnc" id="L610" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14903)) {</span>
                            // it twice in a row
<span class="nc" id="L612">                            card.setQueue(Consts.QUEUE_TYPE_LRN);</span>
                        }
<span class="nc bnc" id="L614" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14911)) {</span>
<span class="nc bnc" id="L615" title="All 26 branches missed.">                            if ((ListenerUtil.mutListener.listen(14905) ? ((ListenerUtil.mutListener.listen(14904) ? (!mLrnQueue.isEmpty() || revCount() == 0) : (!mLrnQueue.isEmpty() &amp;&amp; revCount() == 0)) || newCount() == 0) : ((ListenerUtil.mutListener.listen(14904) ? (!mLrnQueue.isEmpty() || revCount() == 0) : (!mLrnQueue.isEmpty() &amp;&amp; revCount() == 0)) &amp;&amp; newCount() == 0))) {</span>
<span class="nc" id="L616">                                long smallestDue = mLrnQueue.getFirstDue();</span>
<span class="nc bnc" id="L617" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(14910)) {</span>
<span class="nc bnc" id="L618" title="All 8 branches missed.">                                    card.setDue(Math.max(card.getDue(), (ListenerUtil.mutListener.listen(14909) ? (smallestDue % 1) : (ListenerUtil.mutListener.listen(14908) ? (smallestDue / 1) : (ListenerUtil.mutListener.listen(14907) ? (smallestDue * 1) : (ListenerUtil.mutListener.listen(14906) ? (smallestDue - 1) : (smallestDue + 1)))))));</span>
                                }
                            }
                        }
<span class="nc bnc" id="L622" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14912)) {</span>
<span class="nc" id="L623">                            _sortIntoLrn(card.getDue(), card.getId());</span>
                        }
                    } else {
                        // the card is due in one or more days, so we need to use the day learn queue
<span class="nc bnc" id="L627" title="All 248 branches missed.">                        long ahead = (ListenerUtil.mutListener.listen(14891) ? (((ListenerUtil.mutListener.listen(14887) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14886) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14885) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14884) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) % 1) : (ListenerUtil.mutListener.listen(14890) ? (((ListenerUtil.mutListener.listen(14887) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14886) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14885) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14884) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) / 1) : (ListenerUtil.mutListener.listen(14889) ? (((ListenerUtil.mutListener.listen(14887) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14886) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14885) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14884) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) * 1) : (ListenerUtil.mutListener.listen(14888) ? (((ListenerUtil.mutListener.listen(14887) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14886) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14885) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14884) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) - 1) : (((ListenerUtil.mutListener.listen(14887) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14886) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14885) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(14884) ? (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(14883) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(14882) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(14881) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(14880) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) + 1)))));</span>
<span class="nc bnc" id="L628" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14896)) {</span>
<span class="nc bnc" id="L629" title="All 8 branches missed.">                            card.setDue((ListenerUtil.mutListener.listen(14895) ? (mToday % ahead) : (ListenerUtil.mutListener.listen(14894) ? (mToday / ahead) : (ListenerUtil.mutListener.listen(14893) ? (mToday * ahead) : (ListenerUtil.mutListener.listen(14892) ? (mToday - ahead) : (mToday + ahead))))));</span>
                        }
<span class="nc bnc" id="L631" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14897)) {</span>
<span class="nc" id="L632">                            card.setQueue(Consts.QUEUE_TYPE_DAY_LEARN_RELEARN);</span>
                        }
                    }
                }
            }
        }
<span class="nc bnc" id="L638" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14919)) {</span>
<span class="nc" id="L639">            _logLrn(card, ease, conf, leaving, type, lastLeft);</span>
        }
<span class="nc" id="L641">    }</span>

    @Override
    @NonNull
    protected JSONObject _lrnConf(@NonNull Card card) {
<span class="nc bnc" id="L646" title="All 22 branches missed.">        if ((ListenerUtil.mutListener.listen(14924) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14923) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14922) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14921) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14920) ? (card.getType() != Consts.CARD_TYPE_REV) : (card.getType() == Consts.CARD_TYPE_REV))))))) {</span>
<span class="nc" id="L647">            return _lapseConf(card);</span>
        } else {
<span class="nc" id="L649">            return _newConf(card);</span>
        }
    }

    @Override
    protected void _rescheduleAsRev(@NonNull Card card, @NonNull JSONObject conf, boolean early) {
<span class="nc bnc" id="L655" title="All 22 branches missed.">        boolean lapse = ((ListenerUtil.mutListener.listen(14929) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14928) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14927) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14926) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14925) ? (card.getType() != Consts.CARD_TYPE_REV) : (card.getType() == Consts.CARD_TYPE_REV)))))));</span>
<span class="nc bnc" id="L656" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14939)) {</span>
<span class="nc bnc" id="L657" title="All 2 branches missed.">            if (lapse) {</span>
<span class="nc bnc" id="L658" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14937)) {</span>
<span class="nc bnc" id="L659" title="All 2 branches missed.">                    if (_resched(card)) {</span>
<span class="nc bnc" id="L660" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14936)) {</span>
<span class="nc bnc" id="L661" title="All 8 branches missed.">                            card.setDue(Math.max((ListenerUtil.mutListener.listen(14935) ? (mToday % 1) : (ListenerUtil.mutListener.listen(14934) ? (mToday / 1) : (ListenerUtil.mutListener.listen(14933) ? (mToday * 1) : (ListenerUtil.mutListener.listen(14932) ? (mToday - 1) : (mToday + 1))))), card.getODue()));</span>
                        }
                    } else {
<span class="nc bnc" id="L664" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14931)) {</span>
<span class="nc" id="L665">                            card.setDue(card.getODue());</span>
                        }
                    }
                }
<span class="nc bnc" id="L669" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14938)) {</span>
<span class="nc" id="L670">                    card.setODue(0);</span>
                }
            } else {
<span class="nc bnc" id="L673" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14930)) {</span>
<span class="nc" id="L674">                    _rescheduleNew(card, conf, early);</span>
                }
            }
        }
<span class="nc bnc" id="L678" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14940)) {</span>
<span class="nc" id="L679">            card.setQueue(Consts.QUEUE_TYPE_REV);</span>
        }
<span class="nc bnc" id="L681" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14941)) {</span>
<span class="nc" id="L682">            card.setType(Consts.CARD_TYPE_REV);</span>
        }
        // if we were dynamic, graduating means moving back to the old deck
<span class="nc" id="L685">        boolean resched = _resched(card);</span>
<span class="nc bnc" id="L686" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14950)) {</span>
<span class="nc bnc" id="L687" title="All 2 branches missed.">            if (card.isInDynamicDeck()) {</span>
<span class="nc bnc" id="L688" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14942)) {</span>
<span class="nc" id="L689">                    card.setDid(card.getODid());</span>
                }
<span class="nc bnc" id="L691" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14943)) {</span>
<span class="nc" id="L692">                    card.setODue(0);</span>
                }
<span class="nc bnc" id="L694" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14944)) {</span>
<span class="nc" id="L695">                    card.setODid(0);</span>
                }
<span class="nc bnc" id="L697" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14949)) {</span>
                    // if rescheduling is off, it needs to be set back to a new card
<span class="nc bnc" id="L699" title="All 10 branches missed.">                    if ((ListenerUtil.mutListener.listen(14945) ? (!resched || !lapse) : (!resched &amp;&amp; !lapse))) {</span>
<span class="nc bnc" id="L700" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14946)) {</span>
<span class="nc" id="L701">                            card.setType(Consts.CARD_TYPE_NEW);</span>
                        }
<span class="nc bnc" id="L703" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14947)) {</span>
<span class="nc" id="L704">                            card.setQueue(Consts.QUEUE_TYPE_NEW);</span>
                        }
<span class="nc bnc" id="L706" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(14948)) {</span>
<span class="nc" id="L707">                            card.setDue(mCol.nextID(&quot;pos&quot;));</span>
                        }
                    }
                }
            }
        }
<span class="nc" id="L713">    }</span>

    @Override
    protected int _startingLeft(@NonNull Card card) {
        JSONObject conf;
<span class="nc bnc" id="L718" title="All 22 branches missed.">        if ((ListenerUtil.mutListener.listen(14955) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14954) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14953) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14952) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14951) ? (card.getType() != Consts.CARD_TYPE_REV) : (card.getType() == Consts.CARD_TYPE_REV))))))) {</span>
<span class="nc" id="L719">            conf = _lapseConf(card);</span>
        } else {
<span class="nc" id="L721">            conf = _lrnConf(card);</span>
        }
<span class="nc" id="L723">        int tot = conf.getJSONArray(&quot;delays&quot;).length();</span>
<span class="nc" id="L724">        int tod = _leftToday(conf.getJSONArray(&quot;delays&quot;), tot);</span>
<span class="nc bnc" id="L725" title="All 48 branches missed.">        return (ListenerUtil.mutListener.listen(14963) ? (tot % (ListenerUtil.mutListener.listen(14959) ? (tod % 1000) : (ListenerUtil.mutListener.listen(14958) ? (tod / 1000) : (ListenerUtil.mutListener.listen(14957) ? (tod - 1000) : (ListenerUtil.mutListener.listen(14956) ? (tod + 1000) : (tod * 1000)))))) : (ListenerUtil.mutListener.listen(14962) ? (tot / (ListenerUtil.mutListener.listen(14959) ? (tod % 1000) : (ListenerUtil.mutListener.listen(14958) ? (tod / 1000) : (ListenerUtil.mutListener.listen(14957) ? (tod - 1000) : (ListenerUtil.mutListener.listen(14956) ? (tod + 1000) : (tod * 1000)))))) : (ListenerUtil.mutListener.listen(14961) ? (tot * (ListenerUtil.mutListener.listen(14959) ? (tod % 1000) : (ListenerUtil.mutListener.listen(14958) ? (tod / 1000) : (ListenerUtil.mutListener.listen(14957) ? (tod - 1000) : (ListenerUtil.mutListener.listen(14956) ? (tod + 1000) : (tod * 1000)))))) : (ListenerUtil.mutListener.listen(14960) ? (tot - (ListenerUtil.mutListener.listen(14959) ? (tod % 1000) : (ListenerUtil.mutListener.listen(14958) ? (tod / 1000) : (ListenerUtil.mutListener.listen(14957) ? (tod - 1000) : (ListenerUtil.mutListener.listen(14956) ? (tod + 1000) : (tod * 1000)))))) : (tot + (ListenerUtil.mutListener.listen(14959) ? (tod % 1000) : (ListenerUtil.mutListener.listen(14958) ? (tod / 1000) : (ListenerUtil.mutListener.listen(14957) ? (tod - 1000) : (ListenerUtil.mutListener.listen(14956) ? (tod + 1000) : (tod * 1000))))))))));</span>
    }

    private int _graduatingIvl(@NonNull Card card, @NonNull JSONObject conf, boolean early, boolean adj) {
<span class="nc bnc" id="L729" title="All 22 branches missed.">        if ((ListenerUtil.mutListener.listen(14968) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14967) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14966) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14965) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(14964) ? (card.getType() != Consts.CARD_TYPE_REV) : (card.getType() == Consts.CARD_TYPE_REV))))))) {</span>
            // lapsed card being relearnt
<span class="nc bnc" id="L731" title="All 2 branches missed.">            if (card.isInDynamicDeck()) {</span>
<span class="nc bnc" id="L732" title="All 2 branches missed.">                if (conf.getBoolean(&quot;resched&quot;)) {</span>
<span class="nc" id="L733">                    return _dynIvlBoost(card);</span>
                }
            }
<span class="nc" id="L736">            return card.getIvl();</span>
        }
        int ideal;
<span class="nc" id="L739">        JSONArray ints = conf.getJSONArray(&quot;ints&quot;);</span>
<span class="nc bnc" id="L740" title="All 2 branches missed.">        if (!early) {</span>
            // graduate
<span class="nc" id="L742">            ideal = ints.getInt(0);</span>
        } else {
<span class="nc" id="L744">            ideal = ints.getInt(1);</span>
        }
<span class="nc bnc" id="L746" title="All 2 branches missed.">        if (adj) {</span>
<span class="nc" id="L747">            return _adjRevIvl(card, ideal);</span>
        } else {
<span class="nc" id="L749">            return ideal;</span>
        }
    }

    /* Reschedule a new card that's graduated for the first time. */
    private void _rescheduleNew(@NonNull Card card, @NonNull JSONObject conf, boolean early) {
<span class="nc bnc" id="L755" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14969)) {</span>
<span class="nc" id="L756">            card.setIvl(_graduatingIvl(card, conf, early));</span>
        }
<span class="nc bnc" id="L758" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14974)) {</span>
<span class="nc bnc" id="L759" title="All 8 branches missed.">            card.setDue((ListenerUtil.mutListener.listen(14973) ? (mToday % card.getIvl()) : (ListenerUtil.mutListener.listen(14972) ? (mToday / card.getIvl()) : (ListenerUtil.mutListener.listen(14971) ? (mToday * card.getIvl()) : (ListenerUtil.mutListener.listen(14970) ? (mToday - card.getIvl()) : (mToday + card.getIvl()))))));</span>
        }
<span class="nc bnc" id="L761" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14975)) {</span>
<span class="nc" id="L762">            card.setFactor(conf.getInt(&quot;initialFactor&quot;));</span>
        }
<span class="nc" id="L764">    }</span>

    @VisibleForTesting
    public void removeLrn() {
<span class="nc bnc" id="L768" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14976)) {</span>
<span class="nc" id="L769">            removeLrn(null);</span>
        }
<span class="nc" id="L771">    }</span>

    /**
     * Remove cards from the learning queues.
     */
    private void removeLrn(@NonNull long[] ids) {
        String extra;
<span class="nc bnc" id="L778" title="All 50 branches missed.">        if ((ListenerUtil.mutListener.listen(14982) ? (ids != null || (ListenerUtil.mutListener.listen(14981) ? (ids.length &gt;= 0) : (ListenerUtil.mutListener.listen(14980) ? (ids.length &lt;= 0) : (ListenerUtil.mutListener.listen(14979) ? (ids.length &lt; 0) : (ListenerUtil.mutListener.listen(14978) ? (ids.length != 0) : (ListenerUtil.mutListener.listen(14977) ? (ids.length == 0) : (ids.length &gt; 0))))))) : (ids != null &amp;&amp; (ListenerUtil.mutListener.listen(14981) ? (ids.length &gt;= 0) : (ListenerUtil.mutListener.listen(14980) ? (ids.length &lt;= 0) : (ListenerUtil.mutListener.listen(14979) ? (ids.length &lt; 0) : (ListenerUtil.mutListener.listen(14978) ? (ids.length != 0) : (ListenerUtil.mutListener.listen(14977) ? (ids.length == 0) : (ids.length &gt; 0))))))))) {</span>
<span class="nc" id="L779">            extra = &quot; AND id IN &quot; + Utils.ids2str(ids);</span>
        } else {
            // benchmarks indicate it's about 10x faster to search all decks with the index than scan the table
<span class="nc" id="L782">            extra = &quot; AND did IN &quot; + Utils.ids2str(mCol.getDecks().allIds());</span>
        }
<span class="nc bnc" id="L784" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14983)) {</span>
            // review cards in relearning
<span class="nc" id="L786">            mCol.getDb().execute(&quot;update cards set due = odue, queue = &quot; + Consts.QUEUE_TYPE_REV + &quot;, mod = ?&quot; + &quot;, usn = ?, odue = 0 where queue IN (&quot; + Consts.QUEUE_TYPE_LRN + &quot;,&quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot;) and type = &quot; + Consts.CARD_TYPE_REV + &quot; &quot; + extra, getTime().intTime(), mCol.usn());</span>
        }
<span class="nc bnc" id="L788" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14984)) {</span>
            // new cards in learning
<span class="nc" id="L790">            forgetCards(mCol.getDb().queryLongList(&quot;SELECT id FROM cards WHERE queue IN (&quot; + Consts.QUEUE_TYPE_LRN + &quot;,&quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot;) &quot; + extra));</span>
        }
<span class="nc" id="L792">    }</span>

    private int _lrnForDeck(long did) {
        try {
<span class="nc" id="L796">            int cnt = mCol.getDb().queryScalar(&quot;SELECT sum(left / 1000) FROM (SELECT left FROM cards WHERE did = ?&quot; + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_LRN + &quot; AND due &lt; ?&quot; + &quot; LIMIT ?)&quot;, did, (getTime().intTime() + mCol.getConf().getInt(&quot;collapseTime&quot;)), mReportLimit);</span>
<span class="nc bnc" id="L797" title="All 8 branches missed.">            return (ListenerUtil.mutListener.listen(14988) ? (cnt % mCol.getDb().queryScalar(&quot;SELECT count() FROM (SELECT 1 FROM cards WHERE did = ?&quot; + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot; AND due &lt;= ?&quot; + &quot; LIMIT ?)&quot;, did, mToday, mReportLimit)) : (ListenerUtil.mutListener.listen(14987) ? (cnt / mCol.getDb().queryScalar(&quot;SELECT count() FROM (SELECT 1 FROM cards WHERE did = ?&quot; + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot; AND due &lt;= ?&quot; + &quot; LIMIT ?)&quot;, did, mToday, mReportLimit)) : (ListenerUtil.mutListener.listen(14986) ? (cnt * mCol.getDb().queryScalar(&quot;SELECT count() FROM (SELECT 1 FROM cards WHERE did = ?&quot; + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot; AND due &lt;= ?&quot; + &quot; LIMIT ?)&quot;, did, mToday, mReportLimit)) : (ListenerUtil.mutListener.listen(14985) ? (cnt - mCol.getDb().queryScalar(&quot;SELECT count() FROM (SELECT 1 FROM cards WHERE did = ?&quot; + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot; AND due &lt;= ?&quot; + &quot; LIMIT ?)&quot;, did, mToday, mReportLimit)) : (cnt + mCol.getDb().queryScalar(&quot;SELECT count() FROM (SELECT 1 FROM cards WHERE did = ?&quot; + &quot; AND queue = &quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot; AND due &lt;= ?&quot; + &quot; LIMIT ?)&quot;, did, mToday, mReportLimit))))));</span>
<span class="nc" id="L798">        } catch (SQLException e) {</span>
<span class="nc" id="L799">            throw new RuntimeException(e);</span>
        }
    }

    /**
     * @param considerCurrentCard Whether current card should be conted if it is in this deck
     */
    protected int _deckRevLimit(long did, boolean considerCurrentCard) {
<span class="nc" id="L807">        return _deckNewLimit(did, d -&gt; _deckRevLimitSingle(d, considerCurrentCard), considerCurrentCard);</span>
    }

    /**
     * Maximal number of rev card still to see today in deck d. It's computed as:
     * the number of rev card to see by day according
     * minus the number of rev cards seen today in deck d or a descendant
     * plus the number of extra cards to see today in deck d, a parent or a descendant.
     *
     * Limits of its ancestors are not applied.  Current card is treated the same way as other cards.
     * @param considerCurrentCard Whether current card should be conted if it is in this deck
     */
    @Override
    protected int _deckRevLimitSingle(@NonNull Deck d, boolean considerCurrentCard) {
<span class="nc bnc" id="L821" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14989)) {</span>
<span class="nc bnc" id="L822" title="All 2 branches missed.">            if (d.getInt(&quot;dyn&quot;) == DECK_DYN) {</span>
<span class="nc" id="L823">                return mReportLimit;</span>
            }
        }
<span class="nc" id="L826">        long did = d.getLong(&quot;id&quot;);</span>
<span class="nc" id="L827">        DeckConfig c = mCol.getDecks().confForDid(did);</span>
<span class="nc bnc" id="L828" title="All 8 branches missed.">        int lim = Math.max(0, (ListenerUtil.mutListener.listen(14993) ? (c.getJSONObject(&quot;rev&quot;).getInt(&quot;perDay&quot;) % d.getJSONArray(&quot;revToday&quot;).getInt(1)) : (ListenerUtil.mutListener.listen(14992) ? (c.getJSONObject(&quot;rev&quot;).getInt(&quot;perDay&quot;) / d.getJSONArray(&quot;revToday&quot;).getInt(1)) : (ListenerUtil.mutListener.listen(14991) ? (c.getJSONObject(&quot;rev&quot;).getInt(&quot;perDay&quot;) * d.getJSONArray(&quot;revToday&quot;).getInt(1)) : (ListenerUtil.mutListener.listen(14990) ? (c.getJSONObject(&quot;rev&quot;).getInt(&quot;perDay&quot;) + d.getJSONArray(&quot;revToday&quot;).getInt(1)) : (c.getJSONObject(&quot;rev&quot;).getInt(&quot;perDay&quot;) - d.getJSONArray(&quot;revToday&quot;).getInt(1)))))));</span>
<span class="nc bnc" id="L829" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14996)) {</span>
<span class="nc bnc" id="L830" title="All 10 branches missed.">            if ((ListenerUtil.mutListener.listen(14994) ? (considerCurrentCard || currentCardIsInQueueWithDeck(Consts.QUEUE_TYPE_REV, did)) : (considerCurrentCard &amp;&amp; currentCardIsInQueueWithDeck(Consts.QUEUE_TYPE_REV, did)))) {</span>
<span class="nc bnc" id="L831" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(14995)) {</span>
<span class="nc" id="L832">                    lim--;</span>
                }
            }
        }
        // So currentCard does not have to be taken into consideration in this method
<span class="nc" id="L837">        return lim;</span>
    }

    private int _revForDeck(long did, int lim) {
<span class="nc bnc" id="L841" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14997)) {</span>
<span class="nc" id="L842">            lim = Math.min(lim, mReportLimit);</span>
        }
<span class="nc" id="L844">        return mCol.getDb().queryScalar(&quot;SELECT count() FROM (SELECT 1 FROM cards WHERE did = ? AND queue = &quot; + Consts.QUEUE_TYPE_REV + &quot; AND due &lt;= ? LIMIT ?)&quot;, did, mToday, lim);</span>
    }

    @Override
    protected void _resetRevCount() {
<span class="nc bnc" id="L849" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14998)) {</span>
<span class="nc" id="L850">            _resetRevCount(null);</span>
        }
<span class="nc" id="L852">    }</span>

    protected void _resetRevCount(@Nullable CancelListener cancelListener) {
<span class="nc bnc" id="L855" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(14999)) {</span>
<span class="nc" id="L856">            mRevCount = _walkingCount(d -&gt; _deckRevLimitSingle(d, true), this::_cntFnRev, cancelListener);</span>
        }
<span class="nc" id="L858">    }</span>

    // Dynamically invoked in _walkingCount, passed as a parameter in _resetRevCount
    @SuppressWarnings(&quot;unused&quot;)
    protected int _cntFnRev(long did, int lim) {
        // protected because _walkingCount need to be able to access it.
<span class="nc" id="L864">        return mCol.getDb().queryScalar(&quot;SELECT count() FROM (SELECT id FROM cards WHERE did = ? AND queue = &quot; + Consts.QUEUE_TYPE_REV + &quot; and due &lt;= ? &quot; + &quot; AND id != ? LIMIT ?)&quot;, did, mToday, currentCardId(), lim);</span>
    }

    @Override
    protected void _resetRevQueue() {
<span class="nc bnc" id="L869" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15000)) {</span>
<span class="nc" id="L870">            mRevQueue.clear();</span>
        }
<span class="nc bnc" id="L872" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15001)) {</span>
<span class="nc" id="L873">            mRevDids = mCol.getDecks().active();</span>
        }
<span class="nc" id="L875">    }</span>

    @Override
    protected boolean _fillRev(boolean allowSibling) {
<span class="nc bnc" id="L879" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15002)) {</span>
<span class="nc bnc" id="L880" title="All 2 branches missed.">            if (!mRevQueue.isEmpty()) {</span>
<span class="nc" id="L881">                return true;</span>
            }
        }
<span class="nc bnc" id="L884" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15009)) {</span>
<span class="nc bnc" id="L885" title="All 50 branches missed.">            if ((ListenerUtil.mutListener.listen(15008) ? (mHaveCounts || (ListenerUtil.mutListener.listen(15007) ? (mRevCount &gt;= 0) : (ListenerUtil.mutListener.listen(15006) ? (mRevCount &lt;= 0) : (ListenerUtil.mutListener.listen(15005) ? (mRevCount &gt; 0) : (ListenerUtil.mutListener.listen(15004) ? (mRevCount &lt; 0) : (ListenerUtil.mutListener.listen(15003) ? (mRevCount != 0) : (mRevCount == 0))))))) : (mHaveCounts &amp;&amp; (ListenerUtil.mutListener.listen(15007) ? (mRevCount &gt;= 0) : (ListenerUtil.mutListener.listen(15006) ? (mRevCount &lt;= 0) : (ListenerUtil.mutListener.listen(15005) ? (mRevCount &gt; 0) : (ListenerUtil.mutListener.listen(15004) ? (mRevCount &lt; 0) : (ListenerUtil.mutListener.listen(15003) ? (mRevCount != 0) : (mRevCount == 0))))))))) {</span>
<span class="nc" id="L886">                return false;</span>
            }
        }
<span class="nc bnc" id="L889" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15031)) {</span>
            {
<span class="nc" id="L891">                long _loopCounter295 = 0;</span>
<span class="nc bnc" id="L892" title="All 2 branches missed.">                while (!mRevDids.isEmpty()) {</span>
<span class="nc" id="L893">                    ListenerUtil.loopListener.listen(&quot;_loopCounter295&quot;, ++_loopCounter295);</span>
<span class="nc" id="L894">                    long did = mRevDids.getFirst();</span>
<span class="nc" id="L895">                    int lim = Math.min(mQueueLimit, _deckRevLimit(did, false));</span>
<span class="nc bnc" id="L896" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15029)) {</span>
<span class="nc bnc" id="L897" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(15014) ? (lim &gt;= 0) : (ListenerUtil.mutListener.listen(15013) ? (lim &lt;= 0) : (ListenerUtil.mutListener.listen(15012) ? (lim &gt; 0) : (ListenerUtil.mutListener.listen(15011) ? (lim &lt; 0) : (ListenerUtil.mutListener.listen(15010) ? (lim == 0) : (lim != 0))))))) {</span>
<span class="nc bnc" id="L898" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(15015)) {</span>
<span class="nc" id="L899">                                mRevQueue.clear();</span>
                            }
                            // fill the queue with the current did
<span class="nc bnc" id="L902" title="All 2 branches missed.">                            String idName = (allowSibling) ? &quot;id&quot; : &quot;nid&quot;;</span>
<span class="nc bnc" id="L903" title="All 2 branches missed.">                            long id = (allowSibling) ? currentCardId() : currentCardNid();</span>
<span class="nc bnc" id="L904" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(15017)) {</span>
                                {
<span class="nc" id="L906">                                    long _loopCounter294 = 0;</span>
<span class="nc bnc" id="L907" title="All 2 branches missed.">                                    for (long cid : mCol.getDb().queryLongList(&quot;SELECT id FROM cards WHERE did = ? AND queue = &quot; + Consts.QUEUE_TYPE_REV + &quot; AND due &lt;= ?&quot; + &quot; AND &quot; + idName + &quot; != ? LIMIT ?&quot;, did, mToday, id, lim)) {</span>
<span class="nc" id="L908">                                        ListenerUtil.loopListener.listen(&quot;_loopCounter294&quot;, ++_loopCounter294);</span>
<span class="nc bnc" id="L909" title="All 2 branches missed.">                                        if (!ListenerUtil.mutListener.listen(15016)) {</span>
                                            /* Difference with upstream: we take current card into account.
                     *
                     * When current card is answered, the card is not due anymore, so does not belong to the queue.
                     * Furthermore, _burySiblings ensure that the siblings of the current cards are removed from the
                     * queue to ensure same day spacing. We simulate this action by ensuring that those siblings are not
                     * filled, except if we know there are cards and we didn't find any non-sibling card. This way, the
                     * queue is not empty if it should not be empty (important for the conditional belows), but the
                     * front of the queue contains distinct card.
                     */
<span class="nc" id="L919">                                            mRevQueue.add(cid);</span>
                                        }
<span class="nc" id="L921">                                    }</span>
                                }
                            }
<span class="nc bnc" id="L924" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(15028)) {</span>
<span class="nc bnc" id="L925" title="All 2 branches missed.">                                if (!mRevQueue.isEmpty()) {</span>
<span class="nc bnc" id="L926" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(15020)) {</span>
                                        // ordering
<span class="nc bnc" id="L928" title="All 2 branches missed.">                                        if (mCol.getDecks().get(did).getInt(&quot;dyn&quot;) == DECK_DYN) {</span>
                                        } else {
<span class="nc" id="L930">                                            Random r = new Random();</span>
<span class="nc bnc" id="L931" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(15018)) {</span>
<span class="nc" id="L932">                                                r.setSeed(mToday);</span>
                                            }
<span class="nc bnc" id="L934" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(15019)) {</span>
<span class="nc" id="L935">                                                mRevQueue.shuffle(r);</span>
                                            }
                                        }
                                    }
<span class="nc bnc" id="L939" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(15027)) {</span>
                                        // is the current did empty?
<span class="nc bnc" id="L941" title="All 22 branches missed.">                                        if ((ListenerUtil.mutListener.listen(15025) ? (mRevQueue.size() &gt;= lim) : (ListenerUtil.mutListener.listen(15024) ? (mRevQueue.size() &lt;= lim) : (ListenerUtil.mutListener.listen(15023) ? (mRevQueue.size() &gt; lim) : (ListenerUtil.mutListener.listen(15022) ? (mRevQueue.size() != lim) : (ListenerUtil.mutListener.listen(15021) ? (mRevQueue.size() == lim) : (mRevQueue.size() &lt; lim))))))) {</span>
<span class="nc bnc" id="L942" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(15026)) {</span>
<span class="nc" id="L943">                                                mRevDids.remove();</span>
                                            }
                                        }
                                    }
<span class="nc" id="L947">                                    return true;</span>
                                }
                            }
                        }
                    }
<span class="nc bnc" id="L952" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15030)) {</span>
                        // nothing left in the deck; move to next
<span class="nc" id="L954">                        mRevDids.remove();</span>
                    }
<span class="nc" id="L956">                }</span>
            }
        }
<span class="nc bnc" id="L959" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15039)) {</span>
<span class="nc bnc" id="L960" title="All 50 branches missed.">            if ((ListenerUtil.mutListener.listen(15037) ? (mHaveCounts || (ListenerUtil.mutListener.listen(15036) ? (mRevCount &gt;= 0) : (ListenerUtil.mutListener.listen(15035) ? (mRevCount &lt;= 0) : (ListenerUtil.mutListener.listen(15034) ? (mRevCount &gt; 0) : (ListenerUtil.mutListener.listen(15033) ? (mRevCount &lt; 0) : (ListenerUtil.mutListener.listen(15032) ? (mRevCount == 0) : (mRevCount != 0))))))) : (mHaveCounts &amp;&amp; (ListenerUtil.mutListener.listen(15036) ? (mRevCount &gt;= 0) : (ListenerUtil.mutListener.listen(15035) ? (mRevCount &lt;= 0) : (ListenerUtil.mutListener.listen(15034) ? (mRevCount &gt; 0) : (ListenerUtil.mutListener.listen(15033) ? (mRevCount &lt; 0) : (ListenerUtil.mutListener.listen(15032) ? (mRevCount == 0) : (mRevCount != 0))))))))) {</span>
<span class="nc bnc" id="L961" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15038)) {</span>
                    // removed from the queue but not buried
<span class="nc" id="L963">                    _resetRev();</span>
                }
<span class="nc" id="L965">                return _fillRev(true);</span>
            }
        }
<span class="nc" id="L968">        return false;</span>
    }

    @Override
    protected void _answerRevCard(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
<span class="nc" id="L973">        int delay = 0;</span>
<span class="nc bnc" id="L974" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15047)) {</span>
<span class="nc bnc" id="L975" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15044) ? (ease &gt;= Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15043) ? (ease &lt;= Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15042) ? (ease &gt; Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15041) ? (ease &lt; Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15040) ? (ease != Consts.BUTTON_ONE) : (ease == Consts.BUTTON_ONE))))))) {</span>
<span class="nc bnc" id="L976" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15046)) {</span>
<span class="nc" id="L977">                    delay = _rescheduleLapse(card);</span>
                }
            } else {
<span class="nc bnc" id="L980" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15045)) {</span>
<span class="nc" id="L981">                    _rescheduleRev(card, ease);</span>
                }
            }
        }
<span class="nc bnc" id="L985" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15048)) {</span>
<span class="nc" id="L986">            _logRev(card, ease, delay, Consts.REVLOG_REV);</span>
        }
<span class="nc" id="L988">    }</span>

    @Override
    protected int _rescheduleLapse(@NonNull Card card) {
<span class="nc" id="L992">        JSONObject conf = _lapseConf(card);</span>
<span class="nc bnc" id="L993" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15049)) {</span>
<span class="nc" id="L994">            card.setLastIvl(card.getIvl());</span>
        }
<span class="nc bnc" id="L996" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15068)) {</span>
<span class="nc bnc" id="L997" title="All 2 branches missed.">            if (_resched(card)) {</span>
<span class="nc bnc" id="L998" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15054)) {</span>
<span class="nc bnc" id="L999" title="All 8 branches missed.">                    card.setLapses((ListenerUtil.mutListener.listen(15053) ? (card.getLapses() % 1) : (ListenerUtil.mutListener.listen(15052) ? (card.getLapses() / 1) : (ListenerUtil.mutListener.listen(15051) ? (card.getLapses() * 1) : (ListenerUtil.mutListener.listen(15050) ? (card.getLapses() - 1) : (card.getLapses() + 1))))));</span>
                }
<span class="nc bnc" id="L1001" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15055)) {</span>
<span class="nc" id="L1002">                    card.setIvl(_nextLapseIvl(card, conf));</span>
                }
<span class="nc bnc" id="L1004" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15060)) {</span>
<span class="nc bnc" id="L1005" title="All 8 branches missed.">                    card.setFactor(Math.max(1300, (ListenerUtil.mutListener.listen(15059) ? (card.getFactor() % 200) : (ListenerUtil.mutListener.listen(15058) ? (card.getFactor() / 200) : (ListenerUtil.mutListener.listen(15057) ? (card.getFactor() * 200) : (ListenerUtil.mutListener.listen(15056) ? (card.getFactor() + 200) : (card.getFactor() - 200)))))));</span>
                }
<span class="nc bnc" id="L1007" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15065)) {</span>
<span class="nc bnc" id="L1008" title="All 8 branches missed.">                    card.setDue((ListenerUtil.mutListener.listen(15064) ? (mToday % card.getIvl()) : (ListenerUtil.mutListener.listen(15063) ? (mToday / card.getIvl()) : (ListenerUtil.mutListener.listen(15062) ? (mToday * card.getIvl()) : (ListenerUtil.mutListener.listen(15061) ? (mToday - card.getIvl()) : (mToday + card.getIvl()))))));</span>
                }
<span class="nc bnc" id="L1010" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15067)) {</span>
                    // if it's a filtered deck, update odue as well
<span class="nc bnc" id="L1012" title="All 2 branches missed.">                    if (card.isInDynamicDeck()) {</span>
<span class="nc bnc" id="L1013" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15066)) {</span>
<span class="nc" id="L1014">                            card.setODue(card.getDue());</span>
                        }
                    }
                }
            }
        }
        // if suspended as a leech, nothing to do
<span class="nc" id="L1021">        int delay = 0;</span>
<span class="nc bnc" id="L1022" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15075)) {</span>
<span class="nc bnc" id="L1023" title="All 50 branches missed.">            if ((ListenerUtil.mutListener.listen(15074) ? (_checkLeech(card, conf) || (ListenerUtil.mutListener.listen(15073) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15072) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15071) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15070) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15069) ? (card.getQueue() != Consts.QUEUE_TYPE_SUSPENDED) : (card.getQueue() == Consts.QUEUE_TYPE_SUSPENDED))))))) : (_checkLeech(card, conf) &amp;&amp; (ListenerUtil.mutListener.listen(15073) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15072) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15071) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15070) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_SUSPENDED) : (ListenerUtil.mutListener.listen(15069) ? (card.getQueue() != Consts.QUEUE_TYPE_SUSPENDED) : (card.getQueue() == Consts.QUEUE_TYPE_SUSPENDED))))))))) {</span>
<span class="nc" id="L1024">                return delay;</span>
            }
        }
<span class="nc bnc" id="L1027" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15076)) {</span>
            // if no relearning steps, nothing to do
<span class="nc bnc" id="L1029" title="All 2 branches missed.">            if (conf.getJSONArray(&quot;delays&quot;).length() == 0) {</span>
<span class="nc" id="L1030">                return delay;</span>
            }
        }
<span class="nc bnc" id="L1033" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15083)) {</span>
            // record rev due date for later
<span class="nc bnc" id="L1035" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15081) ? (card.getODue() &gt;= 0) : (ListenerUtil.mutListener.listen(15080) ? (card.getODue() &lt;= 0) : (ListenerUtil.mutListener.listen(15079) ? (card.getODue() &gt; 0) : (ListenerUtil.mutListener.listen(15078) ? (card.getODue() &lt; 0) : (ListenerUtil.mutListener.listen(15077) ? (card.getODue() != 0) : (card.getODue() == 0))))))) {</span>
<span class="nc bnc" id="L1036" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15082)) {</span>
<span class="nc" id="L1037">                    card.setODue(card.getDue());</span>
                }
            }
        }
<span class="nc bnc" id="L1041" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15084)) {</span>
<span class="nc" id="L1042">            delay = _delayForGrade(conf, 0);</span>
        }
<span class="nc bnc" id="L1044" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15085)) {</span>
<span class="nc" id="L1045">            card.setDue(delay + getTime().intTime());</span>
        }
<span class="nc bnc" id="L1047" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15086)) {</span>
<span class="nc" id="L1048">            card.setLeft(_startingLeft(card));</span>
        }
<span class="nc bnc" id="L1050" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15117)) {</span>
            // queue 1
<span class="nc bnc" id="L1052" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15091) ? (card.getDue() &gt;= mDayCutoff) : (ListenerUtil.mutListener.listen(15090) ? (card.getDue() &lt;= mDayCutoff) : (ListenerUtil.mutListener.listen(15089) ? (card.getDue() &gt; mDayCutoff) : (ListenerUtil.mutListener.listen(15088) ? (card.getDue() != mDayCutoff) : (ListenerUtil.mutListener.listen(15087) ? (card.getDue() == mDayCutoff) : (card.getDue() &lt; mDayCutoff))))))) {</span>
<span class="nc bnc" id="L1053" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15114)) {</span>
<span class="nc bnc" id="L1054" title="All 8 branches missed.">                    mLrnCount += (ListenerUtil.mutListener.listen(15113) ? (card.getLeft() % 1000) : (ListenerUtil.mutListener.listen(15112) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(15111) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(15110) ? (card.getLeft() + 1000) : (card.getLeft() / 1000)))));</span>
                }
<span class="nc bnc" id="L1056" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15115)) {</span>
<span class="nc" id="L1057">                    card.setQueue(Consts.QUEUE_TYPE_LRN);</span>
                }
<span class="nc bnc" id="L1059" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15116)) {</span>
<span class="nc" id="L1060">                    _sortIntoLrn(card.getDue(), card.getId());</span>
                }
            } else {
                // day learn queue
<span class="nc bnc" id="L1064" title="All 248 branches missed.">                long ahead = (ListenerUtil.mutListener.listen(15103) ? (((ListenerUtil.mutListener.listen(15099) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15098) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15097) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15096) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) % 1) : (ListenerUtil.mutListener.listen(15102) ? (((ListenerUtil.mutListener.listen(15099) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15098) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15097) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15096) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) / 1) : (ListenerUtil.mutListener.listen(15101) ? (((ListenerUtil.mutListener.listen(15099) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15098) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15097) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15096) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) * 1) : (ListenerUtil.mutListener.listen(15100) ? (((ListenerUtil.mutListener.listen(15099) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15098) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15097) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15096) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) - 1) : (((ListenerUtil.mutListener.listen(15099) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15098) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15097) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15096) ? (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15095) ? (card.getDue() % mDayCutoff) : (ListenerUtil.mutListener.listen(15094) ? (card.getDue() / mDayCutoff) : (ListenerUtil.mutListener.listen(15093) ? (card.getDue() * mDayCutoff) : (ListenerUtil.mutListener.listen(15092) ? (card.getDue() + mDayCutoff) : (card.getDue() - mDayCutoff)))))) / SECONDS_PER_DAY)))))) + 1)))));</span>
<span class="nc bnc" id="L1065" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15108)) {</span>
<span class="nc bnc" id="L1066" title="All 8 branches missed.">                    card.setDue((ListenerUtil.mutListener.listen(15107) ? (mToday % ahead) : (ListenerUtil.mutListener.listen(15106) ? (mToday / ahead) : (ListenerUtil.mutListener.listen(15105) ? (mToday * ahead) : (ListenerUtil.mutListener.listen(15104) ? (mToday - ahead) : (mToday + ahead))))));</span>
                }
<span class="nc bnc" id="L1068" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15109)) {</span>
<span class="nc" id="L1069">                    card.setQueue(Consts.QUEUE_TYPE_DAY_LEARN_RELEARN);</span>
                }
            }
        }
<span class="nc" id="L1073">        return delay;</span>
    }

    private int _nextLapseIvl(@NonNull Card card, @NonNull JSONObject conf) {
<span class="nc bnc" id="L1077" title="All 8 branches missed.">        return Math.max(conf.getInt(&quot;minInt&quot;), (int) ((ListenerUtil.mutListener.listen(15121) ? (card.getIvl() % conf.getDouble(&quot;mult&quot;)) : (ListenerUtil.mutListener.listen(15120) ? (card.getIvl() / conf.getDouble(&quot;mult&quot;)) : (ListenerUtil.mutListener.listen(15119) ? (card.getIvl() - conf.getDouble(&quot;mult&quot;)) : (ListenerUtil.mutListener.listen(15118) ? (card.getIvl() + conf.getDouble(&quot;mult&quot;)) : (card.getIvl() * conf.getDouble(&quot;mult&quot;))))))));</span>
    }

    private void _rescheduleRev(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
<span class="nc bnc" id="L1081" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15122)) {</span>
            // update interval
<span class="nc" id="L1083">            card.setLastIvl(card.getIvl());</span>
        }
<span class="nc bnc" id="L1085" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15139)) {</span>
<span class="nc bnc" id="L1086" title="All 2 branches missed.">            if (_resched(card)) {</span>
<span class="nc bnc" id="L1087" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15124)) {</span>
<span class="nc" id="L1088">                    _updateRevIvl(card, ease);</span>
                }
<span class="nc bnc" id="L1090" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15133)) {</span>
                    // then the rest
<span class="nc bnc" id="L1092" title="All 48 branches missed.">                    card.setFactor(Math.max(1300, (ListenerUtil.mutListener.listen(15132) ? (card.getFactor() % FACTOR_ADDITION_VALUES[(ListenerUtil.mutListener.listen(15128) ? (ease % 2) : (ListenerUtil.mutListener.listen(15127) ? (ease / 2) : (ListenerUtil.mutListener.listen(15126) ? (ease * 2) : (ListenerUtil.mutListener.listen(15125) ? (ease + 2) : (ease - 2)))))]) : (ListenerUtil.mutListener.listen(15131) ? (card.getFactor() / FACTOR_ADDITION_VALUES[(ListenerUtil.mutListener.listen(15128) ? (ease % 2) : (ListenerUtil.mutListener.listen(15127) ? (ease / 2) : (ListenerUtil.mutListener.listen(15126) ? (ease * 2) : (ListenerUtil.mutListener.listen(15125) ? (ease + 2) : (ease - 2)))))]) : (ListenerUtil.mutListener.listen(15130) ? (card.getFactor() * FACTOR_ADDITION_VALUES[(ListenerUtil.mutListener.listen(15128) ? (ease % 2) : (ListenerUtil.mutListener.listen(15127) ? (ease / 2) : (ListenerUtil.mutListener.listen(15126) ? (ease * 2) : (ListenerUtil.mutListener.listen(15125) ? (ease + 2) : (ease - 2)))))]) : (ListenerUtil.mutListener.listen(15129) ? (card.getFactor() - FACTOR_ADDITION_VALUES[(ListenerUtil.mutListener.listen(15128) ? (ease % 2) : (ListenerUtil.mutListener.listen(15127) ? (ease / 2) : (ListenerUtil.mutListener.listen(15126) ? (ease * 2) : (ListenerUtil.mutListener.listen(15125) ? (ease + 2) : (ease - 2)))))]) : (card.getFactor() + FACTOR_ADDITION_VALUES[(ListenerUtil.mutListener.listen(15128) ? (ease % 2) : (ListenerUtil.mutListener.listen(15127) ? (ease / 2) : (ListenerUtil.mutListener.listen(15126) ? (ease * 2) : (ListenerUtil.mutListener.listen(15125) ? (ease + 2) : (ease - 2)))))])))))));</span>
                }
<span class="nc bnc" id="L1094" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15138)) {</span>
<span class="nc bnc" id="L1095" title="All 8 branches missed.">                    card.setDue((ListenerUtil.mutListener.listen(15137) ? (mToday % card.getIvl()) : (ListenerUtil.mutListener.listen(15136) ? (mToday / card.getIvl()) : (ListenerUtil.mutListener.listen(15135) ? (mToday * card.getIvl()) : (ListenerUtil.mutListener.listen(15134) ? (mToday - card.getIvl()) : (mToday + card.getIvl()))))));</span>
                }
            } else {
<span class="nc bnc" id="L1098" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15123)) {</span>
<span class="nc" id="L1099">                    card.setDue(card.getODue());</span>
                }
            }
        }
<span class="nc bnc" id="L1103" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15143)) {</span>
<span class="nc bnc" id="L1104" title="All 2 branches missed.">            if (card.isInDynamicDeck()) {</span>
<span class="nc bnc" id="L1105" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15140)) {</span>
<span class="nc" id="L1106">                    card.setDid(card.getODid());</span>
                }
<span class="nc bnc" id="L1108" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15141)) {</span>
<span class="nc" id="L1109">                    card.setODid(0);</span>
                }
<span class="nc bnc" id="L1111" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15142)) {</span>
<span class="nc" id="L1112">                    card.setODue(0);</span>
                }
            }
        }
<span class="nc" id="L1116">    }</span>

    /**
     * Ideal next interval for CARD, given EASE.
     */
    private int _nextRevIvl(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
<span class="nc" id="L1122">        long delay = _daysLate(card);</span>
<span class="nc" id="L1123">        int interval = 0;</span>
<span class="nc" id="L1124">        JSONObject conf = _revConf(card);</span>
<span class="nc bnc" id="L1125" title="All 8 branches missed.">        double fct = (ListenerUtil.mutListener.listen(15147) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15146) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15145) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15144) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))));</span>
<span class="nc bnc" id="L1126" title="All 248 branches missed.">        int ivl2 = _constrainedIvl((int) ((ListenerUtil.mutListener.listen(15159) ? (((ListenerUtil.mutListener.listen(15155) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15154) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15153) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15152) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4))))))))))) % 1.2) : (ListenerUtil.mutListener.listen(15158) ? (((ListenerUtil.mutListener.listen(15155) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15154) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15153) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15152) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4))))))))))) / 1.2) : (ListenerUtil.mutListener.listen(15157) ? (((ListenerUtil.mutListener.listen(15155) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15154) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15153) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15152) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4))))))))))) - 1.2) : (ListenerUtil.mutListener.listen(15156) ? (((ListenerUtil.mutListener.listen(15155) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15154) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15153) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15152) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4))))))))))) + 1.2) : (((ListenerUtil.mutListener.listen(15155) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15154) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15153) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (ListenerUtil.mutListener.listen(15152) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15151) ? (delay % 4) : (ListenerUtil.mutListener.listen(15150) ? (delay * 4) : (ListenerUtil.mutListener.listen(15149) ? (delay - 4) : (ListenerUtil.mutListener.listen(15148) ? (delay + 4) : (delay / 4))))))))))) * 1.2)))))), conf, card.getIvl());</span>
<span class="nc bnc" id="L1127" title="All 248 branches missed.">        int ivl3 = _constrainedIvl((int) ((ListenerUtil.mutListener.listen(15171) ? (((ListenerUtil.mutListener.listen(15167) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15166) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15165) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15164) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2))))))))))) % fct) : (ListenerUtil.mutListener.listen(15170) ? (((ListenerUtil.mutListener.listen(15167) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15166) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15165) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15164) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2))))))))))) / fct) : (ListenerUtil.mutListener.listen(15169) ? (((ListenerUtil.mutListener.listen(15167) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15166) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15165) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15164) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2))))))))))) - fct) : (ListenerUtil.mutListener.listen(15168) ? (((ListenerUtil.mutListener.listen(15167) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15166) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15165) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15164) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2))))))))))) + fct) : (((ListenerUtil.mutListener.listen(15167) ? (card.getIvl() % (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15166) ? (card.getIvl() / (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15165) ? (card.getIvl() * (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (ListenerUtil.mutListener.listen(15164) ? (card.getIvl() - (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2)))))) : (card.getIvl() + (ListenerUtil.mutListener.listen(15163) ? (delay % 2) : (ListenerUtil.mutListener.listen(15162) ? (delay * 2) : (ListenerUtil.mutListener.listen(15161) ? (delay - 2) : (ListenerUtil.mutListener.listen(15160) ? (delay + 2) : (delay / 2))))))))))) * fct)))))), conf, ivl2);</span>
<span class="nc bnc" id="L1128" title="All 248 branches missed.">        int ivl4 = _constrainedIvl((int) ((ListenerUtil.mutListener.listen(15183) ? ((ListenerUtil.mutListener.listen(15179) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) % fct) : (ListenerUtil.mutListener.listen(15178) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) / fct) : (ListenerUtil.mutListener.listen(15177) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) - fct) : (ListenerUtil.mutListener.listen(15176) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) + fct) : (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) * fct))))) % conf.getDouble(&quot;ease4&quot;)) : (ListenerUtil.mutListener.listen(15182) ? ((ListenerUtil.mutListener.listen(15179) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) % fct) : (ListenerUtil.mutListener.listen(15178) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) / fct) : (ListenerUtil.mutListener.listen(15177) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) - fct) : (ListenerUtil.mutListener.listen(15176) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) + fct) : (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) * fct))))) / conf.getDouble(&quot;ease4&quot;)) : (ListenerUtil.mutListener.listen(15181) ? ((ListenerUtil.mutListener.listen(15179) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) % fct) : (ListenerUtil.mutListener.listen(15178) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) / fct) : (ListenerUtil.mutListener.listen(15177) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) - fct) : (ListenerUtil.mutListener.listen(15176) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) + fct) : (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) * fct))))) - conf.getDouble(&quot;ease4&quot;)) : (ListenerUtil.mutListener.listen(15180) ? ((ListenerUtil.mutListener.listen(15179) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) % fct) : (ListenerUtil.mutListener.listen(15178) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) / fct) : (ListenerUtil.mutListener.listen(15177) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) - fct) : (ListenerUtil.mutListener.listen(15176) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) + fct) : (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) * fct))))) + conf.getDouble(&quot;ease4&quot;)) : ((ListenerUtil.mutListener.listen(15179) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) % fct) : (ListenerUtil.mutListener.listen(15178) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) / fct) : (ListenerUtil.mutListener.listen(15177) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) - fct) : (ListenerUtil.mutListener.listen(15176) ? (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) + fct) : (((ListenerUtil.mutListener.listen(15175) ? (card.getIvl() % delay) : (ListenerUtil.mutListener.listen(15174) ? (card.getIvl() / delay) : (ListenerUtil.mutListener.listen(15173) ? (card.getIvl() * delay) : (ListenerUtil.mutListener.listen(15172) ? (card.getIvl() - delay) : (card.getIvl() + delay)))))) * fct))))) * conf.getDouble(&quot;ease4&quot;))))))), conf, ivl3);</span>
<span class="nc bnc" id="L1129" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15202)) {</span>
<span class="nc bnc" id="L1130" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15188) ? (ease &gt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(15187) ? (ease &lt;= Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(15186) ? (ease &gt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(15185) ? (ease &lt; Consts.BUTTON_TWO) : (ListenerUtil.mutListener.listen(15184) ? (ease != Consts.BUTTON_TWO) : (ease == Consts.BUTTON_TWO))))))) {</span>
<span class="nc bnc" id="L1131" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15201)) {</span>
<span class="nc" id="L1132">                    interval = ivl2;</span>
                }
<span class="nc bnc" id="L1134" title="All 22 branches missed.">            } else if ((ListenerUtil.mutListener.listen(15193) ? (ease &gt;= Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15192) ? (ease &lt;= Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15191) ? (ease &gt; Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15190) ? (ease &lt; Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15189) ? (ease != Consts.BUTTON_THREE) : (ease == Consts.BUTTON_THREE))))))) {</span>
<span class="nc bnc" id="L1135" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15200)) {</span>
<span class="nc" id="L1136">                    interval = ivl3;</span>
                }
<span class="nc bnc" id="L1138" title="All 22 branches missed.">            } else if ((ListenerUtil.mutListener.listen(15198) ? (ease &gt;= Consts.BUTTON_FOUR) : (ListenerUtil.mutListener.listen(15197) ? (ease &lt;= Consts.BUTTON_FOUR) : (ListenerUtil.mutListener.listen(15196) ? (ease &gt; Consts.BUTTON_FOUR) : (ListenerUtil.mutListener.listen(15195) ? (ease &lt; Consts.BUTTON_FOUR) : (ListenerUtil.mutListener.listen(15194) ? (ease != Consts.BUTTON_FOUR) : (ease == Consts.BUTTON_FOUR))))))) {</span>
<span class="nc bnc" id="L1139" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15199)) {</span>
<span class="nc" id="L1140">                    interval = ivl4;</span>
                }
            }
        }
        // interval capped?
<span class="nc" id="L1145">        return Math.min(interval, conf.getInt(&quot;maxIvl&quot;));</span>
    }

    /**
     * Integer interval after interval factor and prev+1 constraints applied
     */
    private int _constrainedIvl(int ivl, @NonNull JSONObject conf, double prev) {
<span class="nc bnc" id="L1152" title="All 8 branches missed.">        double newIvl = (ListenerUtil.mutListener.listen(15206) ? (ivl % conf.optDouble(&quot;ivlFct&quot;, 1.0)) : (ListenerUtil.mutListener.listen(15205) ? (ivl / conf.optDouble(&quot;ivlFct&quot;, 1.0)) : (ListenerUtil.mutListener.listen(15204) ? (ivl - conf.optDouble(&quot;ivlFct&quot;, 1.0)) : (ListenerUtil.mutListener.listen(15203) ? (ivl + conf.optDouble(&quot;ivlFct&quot;, 1.0)) : (ivl * conf.optDouble(&quot;ivlFct&quot;, 1.0))))));</span>
<span class="nc bnc" id="L1153" title="All 8 branches missed.">        return (int) Math.max(newIvl, (ListenerUtil.mutListener.listen(15210) ? (prev % 1) : (ListenerUtil.mutListener.listen(15209) ? (prev / 1) : (ListenerUtil.mutListener.listen(15208) ? (prev * 1) : (ListenerUtil.mutListener.listen(15207) ? (prev - 1) : (prev + 1))))));</span>
    }

    @Override
    protected void _updateRevIvl(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
        try {
<span class="nc" id="L1159">            int idealIvl = _nextRevIvl(card, ease);</span>
<span class="nc" id="L1160">            JSONObject conf = _revConf(card);</span>
<span class="nc bnc" id="L1161" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(15215)) {</span>
<span class="nc bnc" id="L1162" title="All 8 branches missed.">                card.setIvl(Math.min(Math.max(_adjRevIvl(card, idealIvl), (ListenerUtil.mutListener.listen(15214) ? (card.getIvl() % 1) : (ListenerUtil.mutListener.listen(15213) ? (card.getIvl() / 1) : (ListenerUtil.mutListener.listen(15212) ? (card.getIvl() * 1) : (ListenerUtil.mutListener.listen(15211) ? (card.getIvl() - 1) : (card.getIvl() + 1)))))), conf.getInt(&quot;maxIvl&quot;)));</span>
            }
<span class="nc" id="L1164">        } catch (JSONException e) {</span>
<span class="nc" id="L1165">            throw new RuntimeException(e);</span>
<span class="nc" id="L1166">        }</span>
<span class="nc" id="L1167">    }</span>

    // it's unused upstream as well
    @SuppressWarnings(&quot;PMD.UnusedFormalParameter&quot;)
    private int _adjRevIvl(@NonNull Card card, int idealIvl) {
<span class="nc bnc" id="L1172" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15216)) {</span>
<span class="nc" id="L1173">            idealIvl = _fuzzedIvl(idealIvl);</span>
        }
<span class="nc" id="L1175">        return idealIvl;</span>
    }

    /* Rebuild a dynamic deck. */
    @Override
    public void rebuildDyn() {
<span class="nc bnc" id="L1181" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15217)) {</span>
<span class="nc" id="L1182">            rebuildDyn(0);</span>
        }
<span class="nc" id="L1184">    }</span>

    @Override
    public void rebuildDyn(long did) {
<span class="nc bnc" id="L1188" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15224)) {</span>
<span class="nc bnc" id="L1189" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15222) ? (did &gt;= 0) : (ListenerUtil.mutListener.listen(15221) ? (did &lt;= 0) : (ListenerUtil.mutListener.listen(15220) ? (did &gt; 0) : (ListenerUtil.mutListener.listen(15219) ? (did &lt; 0) : (ListenerUtil.mutListener.listen(15218) ? (did != 0) : (did == 0))))))) {</span>
<span class="nc bnc" id="L1190" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15223)) {</span>
<span class="nc" id="L1191">                    did = mCol.getDecks().selected();</span>
                }
            }
        }
<span class="nc" id="L1195">        Deck deck = mCol.getDecks().get(did);</span>
<span class="nc bnc" id="L1196" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15226)) {</span>
<span class="nc bnc" id="L1197" title="All 2 branches missed.">            if (deck.getInt(&quot;dyn&quot;) == DECK_STD) {</span>
<span class="nc bnc" id="L1198" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15225)) {</span>
<span class="nc" id="L1199">                    Timber.e(&quot;error: deck is not a filtered deck&quot;);</span>
                }
<span class="nc" id="L1201">                return;</span>
            }
        }
<span class="nc bnc" id="L1204" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15227)) {</span>
            // move any existing cards back first, then fill
<span class="nc" id="L1206">            emptyDyn(did);</span>
        }
<span class="nc" id="L1208">        List&lt;Long&gt; ids = _fillDyn(deck);</span>
<span class="nc bnc" id="L1209" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15228)) {</span>
<span class="nc bnc" id="L1210" title="All 2 branches missed.">            if (ids.isEmpty()) {</span>
<span class="nc" id="L1211">                return;</span>
            }
        }
<span class="nc bnc" id="L1214" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15229)) {</span>
            // and change to our new deck
<span class="nc" id="L1216">            mCol.getDecks().select(did);</span>
        }
<span class="nc" id="L1218">    }</span>

    private List&lt;Long&gt; _fillDyn(@NonNull Deck deck) {
<span class="nc" id="L1221">        JSONArray terms = deck.getJSONArray(&quot;terms&quot;).getJSONArray(0);</span>
<span class="nc" id="L1222">        String search = terms.getString(0);</span>
<span class="nc" id="L1223">        int limit = terms.getInt(1);</span>
<span class="nc" id="L1224">        int order = terms.getInt(2);</span>
<span class="nc" id="L1225">        String orderlimit = _dynOrder(order, limit);</span>
<span class="nc bnc" id="L1226" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15231)) {</span>
<span class="nc bnc" id="L1227" title="All 2 branches missed.">            if (!TextUtils.isEmpty(search.trim())) {</span>
<span class="nc bnc" id="L1228" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15230)) {</span>
<span class="nc" id="L1229">                    search = String.format(Locale.US, &quot;(%s)&quot;, search);</span>
                }
            }
        }
<span class="nc bnc" id="L1233" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15232)) {</span>
<span class="nc" id="L1234">            search = String.format(Locale.US, &quot;%s -is:suspended -is:buried -deck:filtered -is:learn&quot;, search);</span>
        }
<span class="nc" id="L1236">        List&lt;Long&gt; ids = mCol.findCards(search, orderlimit);</span>
<span class="nc bnc" id="L1237" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15233)) {</span>
<span class="nc bnc" id="L1238" title="All 2 branches missed.">            if (ids.isEmpty()) {</span>
<span class="nc" id="L1239">                return ids;</span>
            }
        }
<span class="nc bnc" id="L1242" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15234)) {</span>
            // move the cards over
<span class="nc" id="L1244">            mCol.log(deck.getLong(&quot;id&quot;), ids);</span>
        }
<span class="nc bnc" id="L1246" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15235)) {</span>
<span class="nc" id="L1247">            _moveToDyn(deck.getLong(&quot;id&quot;), ids);</span>
        }
<span class="nc" id="L1249">        return ids;</span>
    }

    @Override
    public void emptyDyn(long did, String lim) {
<span class="nc bnc" id="L1254" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15237)) {</span>
<span class="nc bnc" id="L1255" title="All 2 branches missed.">            if (lim == null) {</span>
<span class="nc bnc" id="L1256" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15236)) {</span>
<span class="nc" id="L1257">                    lim = &quot;did = &quot; + did;</span>
                }
            }
        }
<span class="nc bnc" id="L1261" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15238)) {</span>
<span class="nc" id="L1262">            mCol.log(mCol.getDb().queryLongList(&quot;select id from cards where &quot; + lim));</span>
        }
<span class="nc bnc" id="L1264" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15239)) {</span>
            // move out of cram queue
<span class="nc" id="L1266">            mCol.getDb().execute(&quot;update cards set did = odid, queue = (case when type = &quot; + Consts.CARD_TYPE_LRN + &quot; then &quot; + Consts.QUEUE_TYPE_NEW + &quot; &quot; + &quot;else type end), type = (case when type = &quot; + Consts.CARD_TYPE_LRN + &quot; then &quot; + Consts.CARD_TYPE_NEW + &quot; else type end), &quot; + &quot;due = odue, odue = 0, odid = 0, usn = ? where &quot; + lim, mCol.usn());</span>
        }
<span class="nc" id="L1268">    }</span>

    private void _moveToDyn(long did, @NonNull List&lt;Long&gt; ids) {
<span class="nc" id="L1271">        ArrayList&lt;Object[]&gt; data = new ArrayList&lt;&gt;(ids.size());</span>
        // long t = getTime().intTime(); // unused variable present (and unused) upstream
<span class="nc" id="L1273">        int u = mCol.usn();</span>
<span class="nc bnc" id="L1274" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15250)) {</span>
            {
<span class="nc" id="L1276">                long _loopCounter296 = 0;</span>
<span class="nc bnc" id="L1277" title="All 22 branches missed.">                for (long c = 0; (ListenerUtil.mutListener.listen(15249) ? (c &gt;= ids.size()) : (ListenerUtil.mutListener.listen(15248) ? (c &lt;= ids.size()) : (ListenerUtil.mutListener.listen(15247) ? (c &gt; ids.size()) : (ListenerUtil.mutListener.listen(15246) ? (c != ids.size()) : (ListenerUtil.mutListener.listen(15245) ? (c == ids.size()) : (c &lt; ids.size())))))); c++) {</span>
<span class="nc" id="L1278">                    ListenerUtil.loopListener.listen(&quot;_loopCounter296&quot;, ++_loopCounter296);</span>
<span class="nc bnc" id="L1279" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15244)) {</span>
                        // start at -100000 so that reviews are all due
<span class="nc bnc" id="L1281" title="All 8 branches missed.">                        data.add(new Object[] { did, (ListenerUtil.mutListener.listen(15243) ? (-100000 % c) : (ListenerUtil.mutListener.listen(15242) ? (-100000 / c) : (ListenerUtil.mutListener.listen(15241) ? (-100000 * c) : (ListenerUtil.mutListener.listen(15240) ? (-100000 - c) : (-100000 + c))))), u, ids.get((int) c) });</span>
                    }
                }
            }
        }
        // due reviews stay in the review queue. careful: can't use &quot;odid or did&quot;, as sqlite converts to boolean
<span class="nc" id="L1287">        String queue = &quot;(CASE WHEN type = &quot; + Consts.CARD_TYPE_REV + &quot; AND (CASE WHEN odue THEN odue &lt;= &quot; + mToday + &quot; ELSE due &lt;= &quot; + mToday + &quot; END) THEN &quot; + Consts.QUEUE_TYPE_REV + &quot; ELSE &quot; + Consts.QUEUE_TYPE_NEW + &quot; END)&quot;;</span>
<span class="nc bnc" id="L1288" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15251)) {</span>
<span class="nc" id="L1289">            mCol.getDb().executeMany(&quot;UPDATE cards SET odid = (CASE WHEN odid THEN odid ELSE did END), &quot; + &quot;odue = (CASE WHEN odue THEN odue ELSE due END), did = ?, queue = &quot; + queue + &quot;, due = ?, usn = ? WHERE id = ?&quot;, data);</span>
        }
<span class="nc" id="L1291">    }</span>

    private int _dynIvlBoost(@NonNull Card card) {
<span class="nc bnc" id="L1294" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15265)) {</span>
<span class="nc bnc" id="L1295" title="All 146 branches missed.">            if ((ListenerUtil.mutListener.listen(15263) ? ((ListenerUtil.mutListener.listen(15257) ? (!card.isInDynamicDeck() &amp;&amp; (ListenerUtil.mutListener.listen(15256) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15255) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15254) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15253) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15252) ? (card.getType() == Consts.CARD_TYPE_REV) : (card.getType() != Consts.CARD_TYPE_REV))))))) : (!card.isInDynamicDeck() || (ListenerUtil.mutListener.listen(15256) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15255) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15254) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15253) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15252) ? (card.getType() == Consts.CARD_TYPE_REV) : (card.getType() != Consts.CARD_TYPE_REV)))))))) &amp;&amp; (ListenerUtil.mutListener.listen(15262) ? (card.getFactor() &gt;= 0) : (ListenerUtil.mutListener.listen(15261) ? (card.getFactor() &lt;= 0) : (ListenerUtil.mutListener.listen(15260) ? (card.getFactor() &gt; 0) : (ListenerUtil.mutListener.listen(15259) ? (card.getFactor() &lt; 0) : (ListenerUtil.mutListener.listen(15258) ? (card.getFactor() != 0) : (card.getFactor() == 0))))))) : ((ListenerUtil.mutListener.listen(15257) ? (!card.isInDynamicDeck() &amp;&amp; (ListenerUtil.mutListener.listen(15256) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15255) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15254) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15253) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15252) ? (card.getType() == Consts.CARD_TYPE_REV) : (card.getType() != Consts.CARD_TYPE_REV))))))) : (!card.isInDynamicDeck() || (ListenerUtil.mutListener.listen(15256) ? (card.getType() &gt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15255) ? (card.getType() &lt;= Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15254) ? (card.getType() &gt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15253) ? (card.getType() &lt; Consts.CARD_TYPE_REV) : (ListenerUtil.mutListener.listen(15252) ? (card.getType() == Consts.CARD_TYPE_REV) : (card.getType() != Consts.CARD_TYPE_REV)))))))) || (ListenerUtil.mutListener.listen(15262) ? (card.getFactor() &gt;= 0) : (ListenerUtil.mutListener.listen(15261) ? (card.getFactor() &lt;= 0) : (ListenerUtil.mutListener.listen(15260) ? (card.getFactor() &gt; 0) : (ListenerUtil.mutListener.listen(15259) ? (card.getFactor() &lt; 0) : (ListenerUtil.mutListener.listen(15258) ? (card.getFactor() != 0) : (card.getFactor() == 0))))))))) {</span>
<span class="nc bnc" id="L1296" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15264)) {</span>
<span class="nc" id="L1297">                    Timber.e(&quot;error: deck is not a filtered deck&quot;);</span>
                }
<span class="nc" id="L1299">                return 0;</span>
            }
        }
<span class="nc bnc" id="L1302" title="All 48 branches missed.">        long elapsed = (ListenerUtil.mutListener.listen(15273) ? (card.getIvl() % ((ListenerUtil.mutListener.listen(15269) ? (card.getODue() % mToday) : (ListenerUtil.mutListener.listen(15268) ? (card.getODue() / mToday) : (ListenerUtil.mutListener.listen(15267) ? (card.getODue() * mToday) : (ListenerUtil.mutListener.listen(15266) ? (card.getODue() + mToday) : (card.getODue() - mToday))))))) : (ListenerUtil.mutListener.listen(15272) ? (card.getIvl() / ((ListenerUtil.mutListener.listen(15269) ? (card.getODue() % mToday) : (ListenerUtil.mutListener.listen(15268) ? (card.getODue() / mToday) : (ListenerUtil.mutListener.listen(15267) ? (card.getODue() * mToday) : (ListenerUtil.mutListener.listen(15266) ? (card.getODue() + mToday) : (card.getODue() - mToday))))))) : (ListenerUtil.mutListener.listen(15271) ? (card.getIvl() * ((ListenerUtil.mutListener.listen(15269) ? (card.getODue() % mToday) : (ListenerUtil.mutListener.listen(15268) ? (card.getODue() / mToday) : (ListenerUtil.mutListener.listen(15267) ? (card.getODue() * mToday) : (ListenerUtil.mutListener.listen(15266) ? (card.getODue() + mToday) : (card.getODue() - mToday))))))) : (ListenerUtil.mutListener.listen(15270) ? (card.getIvl() + ((ListenerUtil.mutListener.listen(15269) ? (card.getODue() % mToday) : (ListenerUtil.mutListener.listen(15268) ? (card.getODue() / mToday) : (ListenerUtil.mutListener.listen(15267) ? (card.getODue() * mToday) : (ListenerUtil.mutListener.listen(15266) ? (card.getODue() + mToday) : (card.getODue() - mToday))))))) : (card.getIvl() - ((ListenerUtil.mutListener.listen(15269) ? (card.getODue() % mToday) : (ListenerUtil.mutListener.listen(15268) ? (card.getODue() / mToday) : (ListenerUtil.mutListener.listen(15267) ? (card.getODue() * mToday) : (ListenerUtil.mutListener.listen(15266) ? (card.getODue() + mToday) : (card.getODue() - mToday)))))))))));</span>
<span class="nc bnc" id="L1303" title="All 248 branches missed.">        double factor = (ListenerUtil.mutListener.listen(15285) ? (((ListenerUtil.mutListener.listen(15281) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) % 1.2) : (ListenerUtil.mutListener.listen(15280) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) / 1.2) : (ListenerUtil.mutListener.listen(15279) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) * 1.2) : (ListenerUtil.mutListener.listen(15278) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) - 1.2) : (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) + 1.2)))))) % 2.0) : (ListenerUtil.mutListener.listen(15284) ? (((ListenerUtil.mutListener.listen(15281) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) % 1.2) : (ListenerUtil.mutListener.listen(15280) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) / 1.2) : (ListenerUtil.mutListener.listen(15279) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) * 1.2) : (ListenerUtil.mutListener.listen(15278) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) - 1.2) : (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) + 1.2)))))) * 2.0) : (ListenerUtil.mutListener.listen(15283) ? (((ListenerUtil.mutListener.listen(15281) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) % 1.2) : (ListenerUtil.mutListener.listen(15280) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) / 1.2) : (ListenerUtil.mutListener.listen(15279) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) * 1.2) : (ListenerUtil.mutListener.listen(15278) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) - 1.2) : (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) + 1.2)))))) - 2.0) : (ListenerUtil.mutListener.listen(15282) ? (((ListenerUtil.mutListener.listen(15281) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) % 1.2) : (ListenerUtil.mutListener.listen(15280) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) / 1.2) : (ListenerUtil.mutListener.listen(15279) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) * 1.2) : (ListenerUtil.mutListener.listen(15278) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) - 1.2) : (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) + 1.2)))))) + 2.0) : (((ListenerUtil.mutListener.listen(15281) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) % 1.2) : (ListenerUtil.mutListener.listen(15280) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) / 1.2) : (ListenerUtil.mutListener.listen(15279) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) * 1.2) : (ListenerUtil.mutListener.listen(15278) ? (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) - 1.2) : (((ListenerUtil.mutListener.listen(15277) ? (card.getFactor() % 1000.0) : (ListenerUtil.mutListener.listen(15276) ? (card.getFactor() * 1000.0) : (ListenerUtil.mutListener.listen(15275) ? (card.getFactor() - 1000.0) : (ListenerUtil.mutListener.listen(15274) ? (card.getFactor() + 1000.0) : (card.getFactor() / 1000.0)))))) + 1.2)))))) / 2.0)))));</span>
<span class="nc bnc" id="L1304" title="All 8 branches missed.">        int ivl = Math.max(1, Math.max(card.getIvl(), (int) ((ListenerUtil.mutListener.listen(15289) ? (elapsed % factor) : (ListenerUtil.mutListener.listen(15288) ? (elapsed / factor) : (ListenerUtil.mutListener.listen(15287) ? (elapsed - factor) : (ListenerUtil.mutListener.listen(15286) ? (elapsed + factor) : (elapsed * factor))))))));</span>
<span class="nc" id="L1305">        JSONObject conf = _revConf(card);</span>
<span class="nc" id="L1306">        return Math.min(conf.getInt(&quot;maxIvl&quot;), ivl);</span>
    }

    /**
     * Leech handler. True if card was a leech.
     */
    @Override
    protected boolean _checkLeech(@NonNull Card card, @NonNull JSONObject conf) {
<span class="nc" id="L1314">        int lf = conf.getInt(&quot;leechFails&quot;);</span>
<span class="nc bnc" id="L1315" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15295)) {</span>
<span class="nc bnc" id="L1316" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15294) ? (lf &gt;= 0) : (ListenerUtil.mutListener.listen(15293) ? (lf &lt;= 0) : (ListenerUtil.mutListener.listen(15292) ? (lf &gt; 0) : (ListenerUtil.mutListener.listen(15291) ? (lf &lt; 0) : (ListenerUtil.mutListener.listen(15290) ? (lf != 0) : (lf == 0))))))) {</span>
<span class="nc" id="L1317">                return false;</span>
            }
        }
<span class="nc bnc" id="L1320" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15341)) {</span>
            // if over threshold or every half threshold reps after that
<span class="nc bnc" id="L1322" title="All 1146 branches missed.">            if ((ListenerUtil.mutListener.listen(15318) ? ((ListenerUtil.mutListener.listen(15300) ? (card.getLapses() &lt;= lf) : (ListenerUtil.mutListener.listen(15299) ? (card.getLapses() &gt; lf) : (ListenerUtil.mutListener.listen(15298) ? (card.getLapses() &lt; lf) : (ListenerUtil.mutListener.listen(15297) ? (card.getLapses() != lf) : (ListenerUtil.mutListener.listen(15296) ? (card.getLapses() == lf) : (card.getLapses() &gt;= lf)))))) || (ListenerUtil.mutListener.listen(15317) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &gt;= 0) : (ListenerUtil.mutListener.listen(15316) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &lt;= 0) : (ListenerUtil.mutListener.listen(15315) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &gt; 0) : (ListenerUtil.mutListener.listen(15314) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &lt; 0) : (ListenerUtil.mutListener.listen(15313) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) != 0) : ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) == 0))))))) : ((ListenerUtil.mutListener.listen(15300) ? (card.getLapses() &lt;= lf) : (ListenerUtil.mutListener.listen(15299) ? (card.getLapses() &gt; lf) : (ListenerUtil.mutListener.listen(15298) ? (card.getLapses() &lt; lf) : (ListenerUtil.mutListener.listen(15297) ? (card.getLapses() != lf) : (ListenerUtil.mutListener.listen(15296) ? (card.getLapses() == lf) : (card.getLapses() &gt;= lf)))))) &amp;&amp; (ListenerUtil.mutListener.listen(15317) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &gt;= 0) : (ListenerUtil.mutListener.listen(15316) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &lt;= 0) : (ListenerUtil.mutListener.listen(15315) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &gt; 0) : (ListenerUtil.mutListener.listen(15314) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) &lt; 0) : (ListenerUtil.mutListener.listen(15313) ? ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) != 0) : ((ListenerUtil.mutListener.listen(15312) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) / Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15311) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) * Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15310) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) - Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (ListenerUtil.mutListener.listen(15309) ? (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) + Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)) : (((ListenerUtil.mutListener.listen(15304) ? (card.getLapses() % lf) : (ListenerUtil.mutListener.listen(15303) ? (card.getLapses() / lf) : (ListenerUtil.mutListener.listen(15302) ? (card.getLapses() * lf) : (ListenerUtil.mutListener.listen(15301) ? (card.getLapses() + lf) : (card.getLapses() - lf)))))) % Math.max((ListenerUtil.mutListener.listen(15308) ? (lf % 2) : (ListenerUtil.mutListener.listen(15307) ? (lf * 2) : (ListenerUtil.mutListener.listen(15306) ? (lf - 2) : (ListenerUtil.mutListener.listen(15305) ? (lf + 2) : (lf / 2))))), 1)))))) == 0))))))))) {</span>
                // add a leech tag
<span class="nc" id="L1324">                Note n = card.note();</span>
<span class="nc bnc" id="L1325" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15319)) {</span>
<span class="nc" id="L1326">                    n.addTag(&quot;leech&quot;);</span>
                }
<span class="nc bnc" id="L1328" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15320)) {</span>
<span class="nc" id="L1329">                    n.flush();</span>
                }
<span class="nc bnc" id="L1331" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15338)) {</span>
                    // handle
<span class="nc bnc" id="L1333" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(15325) ? (conf.getInt(&quot;leechAction&quot;) &gt;= Consts.LEECH_SUSPEND) : (ListenerUtil.mutListener.listen(15324) ? (conf.getInt(&quot;leechAction&quot;) &lt;= Consts.LEECH_SUSPEND) : (ListenerUtil.mutListener.listen(15323) ? (conf.getInt(&quot;leechAction&quot;) &gt; Consts.LEECH_SUSPEND) : (ListenerUtil.mutListener.listen(15322) ? (conf.getInt(&quot;leechAction&quot;) &lt; Consts.LEECH_SUSPEND) : (ListenerUtil.mutListener.listen(15321) ? (conf.getInt(&quot;leechAction&quot;) != Consts.LEECH_SUSPEND) : (conf.getInt(&quot;leechAction&quot;) == Consts.LEECH_SUSPEND))))))) {</span>
<span class="nc bnc" id="L1334" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15332)) {</span>
                            // if it has an old due, remove it from cram/relearning
<span class="nc bnc" id="L1336" title="All 22 branches missed.">                            if ((ListenerUtil.mutListener.listen(15330) ? (card.getODue() &gt;= 0) : (ListenerUtil.mutListener.listen(15329) ? (card.getODue() &lt;= 0) : (ListenerUtil.mutListener.listen(15328) ? (card.getODue() &gt; 0) : (ListenerUtil.mutListener.listen(15327) ? (card.getODue() &lt; 0) : (ListenerUtil.mutListener.listen(15326) ? (card.getODue() == 0) : (card.getODue() != 0))))))) {</span>
<span class="nc bnc" id="L1337" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(15331)) {</span>
<span class="nc" id="L1338">                                    card.setDue(card.getODue());</span>
                                }
                            }
                        }
<span class="nc bnc" id="L1342" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15334)) {</span>
<span class="nc bnc" id="L1343" title="All 2 branches missed.">                            if (card.isInDynamicDeck()) {</span>
<span class="nc bnc" id="L1344" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(15333)) {</span>
<span class="nc" id="L1345">                                    card.setDid(card.getODid());</span>
                                }
                            }
                        }
<span class="nc bnc" id="L1349" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15335)) {</span>
<span class="nc" id="L1350">                            card.setODue(0);</span>
                        }
<span class="nc bnc" id="L1352" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15336)) {</span>
<span class="nc" id="L1353">                            card.setODid(0);</span>
                        }
<span class="nc bnc" id="L1355" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15337)) {</span>
<span class="nc" id="L1356">                            card.setQueue(Consts.QUEUE_TYPE_SUSPENDED);</span>
                        }
                    }
                }
<span class="nc bnc" id="L1360" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15340)) {</span>
                    // notify UI
<span class="nc bnc" id="L1362" title="All 2 branches missed.">                    if (mContextReference != null) {</span>
<span class="nc" id="L1363">                        Activity context = mContextReference.get();</span>
<span class="nc bnc" id="L1364" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15339)) {</span>
<span class="nc" id="L1365">                            leech(card, context);</span>
                        }
                    }
                }
<span class="nc" id="L1369">                return true;</span>
            }
        }
<span class="nc" id="L1372">        return false;</span>
    }

    @Override
    @NonNull
    protected JSONObject _newConf(@NonNull Card card) {
<span class="nc" id="L1378">        DeckConfig conf = _cardConf(card);</span>
<span class="nc bnc" id="L1379" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15342)) {</span>
<span class="nc bnc" id="L1380" title="All 2 branches missed.">            if (!card.isInDynamicDeck()) {</span>
<span class="nc" id="L1381">                return conf.getJSONObject(&quot;new&quot;);</span>
            }
        }
        // dynamic deck; override some attributes, use original deck for others
<span class="nc" id="L1385">        DeckConfig oconf = mCol.getDecks().confForDid(card.getODid());</span>
<span class="nc" id="L1386">        JSONArray delays = conf.optJSONArray(&quot;delays&quot;);</span>
<span class="nc bnc" id="L1387" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15344)) {</span>
<span class="nc bnc" id="L1388" title="All 2 branches missed.">            if (delays == null) {</span>
<span class="nc bnc" id="L1389" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15343)) {</span>
<span class="nc" id="L1390">                    delays = oconf.getJSONObject(&quot;new&quot;).getJSONArray(&quot;delays&quot;);</span>
                }
            }
        }
<span class="nc" id="L1394">        JSONObject dict = new JSONObject();</span>
<span class="nc bnc" id="L1395" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15345)) {</span>
            // original deck
<span class="nc" id="L1397">            dict.put(&quot;ints&quot;, oconf.getJSONObject(&quot;new&quot;).getJSONArray(&quot;ints&quot;));</span>
        }
<span class="nc bnc" id="L1399" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15346)) {</span>
<span class="nc" id="L1400">            dict.put(&quot;initialFactor&quot;, oconf.getJSONObject(&quot;new&quot;).getInt(&quot;initialFactor&quot;));</span>
        }
<span class="nc bnc" id="L1402" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15347)) {</span>
<span class="nc" id="L1403">            dict.put(&quot;bury&quot;, oconf.getJSONObject(&quot;new&quot;).optBoolean(&quot;bury&quot;, true));</span>
        }
<span class="nc bnc" id="L1405" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15348)) {</span>
            // overrides
<span class="nc" id="L1407">            dict.put(&quot;delays&quot;, delays);</span>
        }
<span class="nc bnc" id="L1409" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15349)) {</span>
<span class="nc" id="L1410">            dict.put(&quot;separate&quot;, conf.getBoolean(&quot;separate&quot;));</span>
        }
<span class="nc bnc" id="L1412" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15350)) {</span>
<span class="nc" id="L1413">            dict.put(&quot;order&quot;, Consts.NEW_CARDS_DUE);</span>
        }
<span class="nc bnc" id="L1415" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15351)) {</span>
<span class="nc" id="L1416">            dict.put(&quot;perDay&quot;, mReportLimit);</span>
        }
<span class="nc" id="L1418">        return dict;</span>
    }

    @Override
    @NonNull
    protected JSONObject _lapseConf(@NonNull Card card) {
<span class="nc" id="L1424">        DeckConfig conf = _cardConf(card);</span>
<span class="nc bnc" id="L1425" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15352)) {</span>
<span class="nc bnc" id="L1426" title="All 2 branches missed.">            if (!card.isInDynamicDeck()) {</span>
<span class="nc" id="L1427">                return conf.getJSONObject(&quot;lapse&quot;);</span>
            }
        }
        // dynamic deck; override some attributes, use original deck for others
<span class="nc" id="L1431">        DeckConfig oconf = mCol.getDecks().confForDid(card.getODid());</span>
<span class="nc" id="L1432">        JSONArray delays = conf.optJSONArray(&quot;delays&quot;);</span>
<span class="nc bnc" id="L1433" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15354)) {</span>
<span class="nc bnc" id="L1434" title="All 2 branches missed.">            if (delays == null) {</span>
<span class="nc bnc" id="L1435" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15353)) {</span>
<span class="nc" id="L1436">                    delays = oconf.getJSONObject(&quot;lapse&quot;).getJSONArray(&quot;delays&quot;);</span>
                }
            }
        }
<span class="nc" id="L1440">        JSONObject dict = new JSONObject();</span>
<span class="nc bnc" id="L1441" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15355)) {</span>
            // original deck
<span class="nc" id="L1443">            dict.put(&quot;minInt&quot;, oconf.getJSONObject(&quot;lapse&quot;).getInt(&quot;minInt&quot;));</span>
        }
<span class="nc bnc" id="L1445" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15356)) {</span>
<span class="nc" id="L1446">            dict.put(&quot;leechFails&quot;, oconf.getJSONObject(&quot;lapse&quot;).getInt(&quot;leechFails&quot;));</span>
        }
<span class="nc bnc" id="L1448" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15357)) {</span>
<span class="nc" id="L1449">            dict.put(&quot;leechAction&quot;, oconf.getJSONObject(&quot;lapse&quot;).getInt(&quot;leechAction&quot;));</span>
        }
<span class="nc bnc" id="L1451" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15358)) {</span>
<span class="nc" id="L1452">            dict.put(&quot;mult&quot;, oconf.getJSONObject(&quot;lapse&quot;).getDouble(&quot;mult&quot;));</span>
        }
<span class="nc bnc" id="L1454" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15359)) {</span>
            // overrides
<span class="nc" id="L1456">            dict.put(&quot;delays&quot;, delays);</span>
        }
<span class="nc bnc" id="L1458" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15360)) {</span>
<span class="nc" id="L1459">            dict.put(&quot;resched&quot;, conf.getBoolean(&quot;resched&quot;));</span>
        }
<span class="nc" id="L1461">        return dict;</span>
    }

    private boolean _resched(@NonNull Card card) {
<span class="nc" id="L1465">        DeckConfig conf = _cardConf(card);</span>
<span class="nc bnc" id="L1466" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15361)) {</span>
<span class="nc bnc" id="L1467" title="All 2 branches missed.">            if (conf.getInt(&quot;dyn&quot;) == DECK_STD) {</span>
<span class="nc" id="L1468">                return true;</span>
            }
        }
<span class="nc" id="L1471">        return conf.getBoolean(&quot;resched&quot;);</span>
    }

    @Override
    public void _updateCutoff() {
<span class="nc" id="L1476">        Integer oldToday = mToday;</span>
<span class="nc bnc" id="L1477" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15370)) {</span>
            // days since col created
<span class="nc bnc" id="L1479" title="All 48 branches missed.">            mToday = (int) ((ListenerUtil.mutListener.listen(15369) ? (((ListenerUtil.mutListener.listen(15365) ? (getTime().intTime() % mCol.getCrt()) : (ListenerUtil.mutListener.listen(15364) ? (getTime().intTime() / mCol.getCrt()) : (ListenerUtil.mutListener.listen(15363) ? (getTime().intTime() * mCol.getCrt()) : (ListenerUtil.mutListener.listen(15362) ? (getTime().intTime() + mCol.getCrt()) : (getTime().intTime() - mCol.getCrt())))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15368) ? (((ListenerUtil.mutListener.listen(15365) ? (getTime().intTime() % mCol.getCrt()) : (ListenerUtil.mutListener.listen(15364) ? (getTime().intTime() / mCol.getCrt()) : (ListenerUtil.mutListener.listen(15363) ? (getTime().intTime() * mCol.getCrt()) : (ListenerUtil.mutListener.listen(15362) ? (getTime().intTime() + mCol.getCrt()) : (getTime().intTime() - mCol.getCrt())))))) * SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15367) ? (((ListenerUtil.mutListener.listen(15365) ? (getTime().intTime() % mCol.getCrt()) : (ListenerUtil.mutListener.listen(15364) ? (getTime().intTime() / mCol.getCrt()) : (ListenerUtil.mutListener.listen(15363) ? (getTime().intTime() * mCol.getCrt()) : (ListenerUtil.mutListener.listen(15362) ? (getTime().intTime() + mCol.getCrt()) : (getTime().intTime() - mCol.getCrt())))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15366) ? (((ListenerUtil.mutListener.listen(15365) ? (getTime().intTime() % mCol.getCrt()) : (ListenerUtil.mutListener.listen(15364) ? (getTime().intTime() / mCol.getCrt()) : (ListenerUtil.mutListener.listen(15363) ? (getTime().intTime() * mCol.getCrt()) : (ListenerUtil.mutListener.listen(15362) ? (getTime().intTime() + mCol.getCrt()) : (getTime().intTime() - mCol.getCrt())))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15365) ? (getTime().intTime() % mCol.getCrt()) : (ListenerUtil.mutListener.listen(15364) ? (getTime().intTime() / mCol.getCrt()) : (ListenerUtil.mutListener.listen(15363) ? (getTime().intTime() * mCol.getCrt()) : (ListenerUtil.mutListener.listen(15362) ? (getTime().intTime() + mCol.getCrt()) : (getTime().intTime() - mCol.getCrt())))))) / SECONDS_PER_DAY))))));</span>
        }
<span class="nc bnc" id="L1481" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15383)) {</span>
            // end of day cutoff
<span class="nc bnc" id="L1483" title="All 248 branches missed.">            mDayCutoff = (ListenerUtil.mutListener.listen(15382) ? (mCol.getCrt() % ((ListenerUtil.mutListener.listen(15378) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15377) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15376) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15375) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15381) ? (mCol.getCrt() / ((ListenerUtil.mutListener.listen(15378) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15377) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15376) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15375) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15380) ? (mCol.getCrt() * ((ListenerUtil.mutListener.listen(15378) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15377) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15376) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15375) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15379) ? (mCol.getCrt() - ((ListenerUtil.mutListener.listen(15378) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15377) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15376) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15375) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) * SECONDS_PER_DAY))))))) : (mCol.getCrt() + ((ListenerUtil.mutListener.listen(15378) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15377) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15376) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15375) ? (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) + SECONDS_PER_DAY) : (((ListenerUtil.mutListener.listen(15374) ? (mToday % 1) : (ListenerUtil.mutListener.listen(15373) ? (mToday / 1) : (ListenerUtil.mutListener.listen(15372) ? (mToday * 1) : (ListenerUtil.mutListener.listen(15371) ? (mToday - 1) : (mToday + 1)))))) * SECONDS_PER_DAY)))))))))));</span>
        }
<span class="nc bnc" id="L1485" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15385)) {</span>
<span class="nc bnc" id="L1486" title="All 2 branches missed.">            if (!mToday.equals(oldToday)) {</span>
<span class="nc bnc" id="L1487" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15384)) {</span>
<span class="nc" id="L1488">                    mCol.log(mToday, mDayCutoff);</span>
                }
            }
        }
<span class="nc bnc" id="L1492" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15387)) {</span>
            {
<span class="nc" id="L1494">                long _loopCounter297 = 0;</span>
                // instead
<span class="nc bnc" id="L1496" title="All 2 branches missed.">                for (Deck deck : mCol.getDecks().all()) {</span>
<span class="nc" id="L1497">                    ListenerUtil.loopListener.listen(&quot;_loopCounter297&quot;, ++_loopCounter297);</span>
<span class="nc bnc" id="L1498" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15386)) {</span>
<span class="nc" id="L1499">                        update(deck);</span>
                    }
<span class="nc" id="L1501">                }</span>
            }
        }
        // unbury if the day has rolled over
<span class="nc" id="L1505">        int unburied = mCol.getConf().optInt(&quot;lastUnburied&quot;, 0);</span>
<span class="nc bnc" id="L1506" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15394)) {</span>
<span class="nc bnc" id="L1507" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15392) ? (unburied &gt;= mToday) : (ListenerUtil.mutListener.listen(15391) ? (unburied &lt;= mToday) : (ListenerUtil.mutListener.listen(15390) ? (unburied &gt; mToday) : (ListenerUtil.mutListener.listen(15389) ? (unburied != mToday) : (ListenerUtil.mutListener.listen(15388) ? (unburied == mToday) : (unburied &lt; mToday))))))) {</span>
<span class="nc bnc" id="L1508" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15393)) {</span>
<span class="nc" id="L1509">                    SyncStatus.ignoreDatabaseModification(this::unburyCards);</span>
                }
            }
        }
<span class="nc" id="L1513">    }</span>

    @Override
    public boolean haveBuried() {
<span class="nc" id="L1517">        return haveBuried(mCol.getDecks().active());</span>
    }

    private boolean haveBuried(@NonNull List&lt;Long&gt; allDecks) {
        // Refactored to allow querying an arbitrary deck
<span class="nc" id="L1522">        String sdids = Utils.ids2str(allDecks);</span>
<span class="nc" id="L1523">        int cnt = mCol.getDb().queryScalar(&quot;select 1 from cards where &quot; + queueIsBuriedSnippet() + &quot; and did in &quot; + sdids + &quot; limit 1&quot;);</span>
<span class="nc bnc" id="L1524" title="All 22 branches missed.">        return (ListenerUtil.mutListener.listen(15399) ? (cnt &gt;= 0) : (ListenerUtil.mutListener.listen(15398) ? (cnt &lt;= 0) : (ListenerUtil.mutListener.listen(15397) ? (cnt &gt; 0) : (ListenerUtil.mutListener.listen(15396) ? (cnt &lt; 0) : (ListenerUtil.mutListener.listen(15395) ? (cnt == 0) : (cnt != 0))))));</span>
    }

    /**
     * Return the next interval for CARD, in seconds.
     */
    @Override
    protected long nextIvl(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
<span class="nc bnc" id="L1532" title="All 226 branches missed.">        if ((ListenerUtil.mutListener.listen(15416) ? ((ListenerUtil.mutListener.listen(15410) ? ((ListenerUtil.mutListener.listen(15404) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15403) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15402) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15401) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15400) ? (card.getQueue() != Consts.QUEUE_TYPE_NEW) : (card.getQueue() == Consts.QUEUE_TYPE_NEW)))))) &amp;&amp; (ListenerUtil.mutListener.listen(15409) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15408) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15407) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15406) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15405) ? (card.getQueue() != Consts.QUEUE_TYPE_LRN) : (card.getQueue() == Consts.QUEUE_TYPE_LRN))))))) : ((ListenerUtil.mutListener.listen(15404) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15403) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15402) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15401) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15400) ? (card.getQueue() != Consts.QUEUE_TYPE_NEW) : (card.getQueue() == Consts.QUEUE_TYPE_NEW)))))) || (ListenerUtil.mutListener.listen(15409) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15408) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15407) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15406) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15405) ? (card.getQueue() != Consts.QUEUE_TYPE_LRN) : (card.getQueue() == Consts.QUEUE_TYPE_LRN)))))))) &amp;&amp; (ListenerUtil.mutListener.listen(15415) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15414) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15413) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15412) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15411) ? (card.getQueue() != Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (card.getQueue() == Consts.QUEUE_TYPE_DAY_LEARN_RELEARN))))))) : ((ListenerUtil.mutListener.listen(15410) ? ((ListenerUtil.mutListener.listen(15404) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15403) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15402) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15401) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15400) ? (card.getQueue() != Consts.QUEUE_TYPE_NEW) : (card.getQueue() == Consts.QUEUE_TYPE_NEW)))))) &amp;&amp; (ListenerUtil.mutListener.listen(15409) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15408) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15407) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15406) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15405) ? (card.getQueue() != Consts.QUEUE_TYPE_LRN) : (card.getQueue() == Consts.QUEUE_TYPE_LRN))))))) : ((ListenerUtil.mutListener.listen(15404) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15403) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15402) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15401) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15400) ? (card.getQueue() != Consts.QUEUE_TYPE_NEW) : (card.getQueue() == Consts.QUEUE_TYPE_NEW)))))) || (ListenerUtil.mutListener.listen(15409) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15408) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15407) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15406) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_LRN) : (ListenerUtil.mutListener.listen(15405) ? (card.getQueue() != Consts.QUEUE_TYPE_LRN) : (card.getQueue() == Consts.QUEUE_TYPE_LRN)))))))) || (ListenerUtil.mutListener.listen(15415) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15414) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15413) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15412) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (ListenerUtil.mutListener.listen(15411) ? (card.getQueue() != Consts.QUEUE_TYPE_DAY_LEARN_RELEARN) : (card.getQueue() == Consts.QUEUE_TYPE_DAY_LEARN_RELEARN))))))))) {</span>
<span class="nc" id="L1533">            return _nextLrnIvl(card, ease);</span>
<span class="nc bnc" id="L1534" title="All 22 branches missed.">        } else if ((ListenerUtil.mutListener.listen(15421) ? (ease &gt;= Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15420) ? (ease &lt;= Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15419) ? (ease &gt; Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15418) ? (ease &lt; Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15417) ? (ease != Consts.BUTTON_ONE) : (ease == Consts.BUTTON_ONE))))))) {</span>
            // lapsed
<span class="nc" id="L1536">            JSONObject conf = _lapseConf(card);</span>
<span class="nc bnc" id="L1537" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15430) ? (conf.getJSONArray(&quot;delays&quot;).length() &gt;= 0) : (ListenerUtil.mutListener.listen(15429) ? (conf.getJSONArray(&quot;delays&quot;).length() &lt;= 0) : (ListenerUtil.mutListener.listen(15428) ? (conf.getJSONArray(&quot;delays&quot;).length() &lt; 0) : (ListenerUtil.mutListener.listen(15427) ? (conf.getJSONArray(&quot;delays&quot;).length() != 0) : (ListenerUtil.mutListener.listen(15426) ? (conf.getJSONArray(&quot;delays&quot;).length() == 0) : (conf.getJSONArray(&quot;delays&quot;).length() &gt; 0))))))) {</span>
<span class="nc bnc" id="L1538" title="All 8 branches missed.">                return (long) ((ListenerUtil.mutListener.listen(15434) ? (conf.getJSONArray(&quot;delays&quot;).getDouble(0) % 60.0) : (ListenerUtil.mutListener.listen(15433) ? (conf.getJSONArray(&quot;delays&quot;).getDouble(0) / 60.0) : (ListenerUtil.mutListener.listen(15432) ? (conf.getJSONArray(&quot;delays&quot;).getDouble(0) - 60.0) : (ListenerUtil.mutListener.listen(15431) ? (conf.getJSONArray(&quot;delays&quot;).getDouble(0) + 60.0) : (conf.getJSONArray(&quot;delays&quot;).getDouble(0) * 60.0))))));</span>
            }
<span class="nc bnc" id="L1540" title="All 8 branches missed.">            return (ListenerUtil.mutListener.listen(15438) ? (_nextLapseIvl(card, conf) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15437) ? (_nextLapseIvl(card, conf) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15436) ? (_nextLapseIvl(card, conf) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15435) ? (_nextLapseIvl(card, conf) + SECONDS_PER_DAY) : (_nextLapseIvl(card, conf) * SECONDS_PER_DAY)))));</span>
        } else {
            // review
<span class="nc bnc" id="L1543" title="All 8 branches missed.">            return (ListenerUtil.mutListener.listen(15425) ? (_nextRevIvl(card, ease) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15424) ? (_nextRevIvl(card, ease) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15423) ? (_nextRevIvl(card, ease) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15422) ? (_nextRevIvl(card, ease) + SECONDS_PER_DAY) : (_nextRevIvl(card, ease) * SECONDS_PER_DAY)))));</span>
        }
    }

    @Override
    protected long _nextLrnIvl(@NonNull Card card, @Consts.BUTTON_TYPE int ease) {
<span class="nc bnc" id="L1549" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15445)) {</span>
            // this isn't easily extracted from the learn code
<span class="nc bnc" id="L1551" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15443) ? (card.getQueue() &gt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15442) ? (card.getQueue() &lt;= Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15441) ? (card.getQueue() &gt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15440) ? (card.getQueue() &lt; Consts.QUEUE_TYPE_NEW) : (ListenerUtil.mutListener.listen(15439) ? (card.getQueue() != Consts.QUEUE_TYPE_NEW) : (card.getQueue() == Consts.QUEUE_TYPE_NEW))))))) {</span>
<span class="nc bnc" id="L1552" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15444)) {</span>
<span class="nc" id="L1553">                    card.setLeft(_startingLeft(card));</span>
                }
            }
        }
<span class="nc" id="L1557">        JSONObject conf = _lrnConf(card);</span>
<span class="nc bnc" id="L1558" title="All 22 branches missed.">        if ((ListenerUtil.mutListener.listen(15450) ? (ease &gt;= Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15449) ? (ease &lt;= Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15448) ? (ease &gt; Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15447) ? (ease &lt; Consts.BUTTON_ONE) : (ListenerUtil.mutListener.listen(15446) ? (ease != Consts.BUTTON_ONE) : (ease == Consts.BUTTON_ONE))))))) {</span>
            // fail
<span class="nc" id="L1560">            return _delayForGrade(conf, conf.getJSONArray(&quot;delays&quot;).length());</span>
<span class="nc bnc" id="L1561" title="All 22 branches missed.">        } else if ((ListenerUtil.mutListener.listen(15455) ? (ease &gt;= Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15454) ? (ease &lt;= Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15453) ? (ease &gt; Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15452) ? (ease &lt; Consts.BUTTON_THREE) : (ListenerUtil.mutListener.listen(15451) ? (ease != Consts.BUTTON_THREE) : (ease == Consts.BUTTON_THREE))))))) {</span>
            // early removal
<span class="nc bnc" id="L1563" title="All 2 branches missed.">            if (!_resched(card)) {</span>
<span class="nc" id="L1564">                return 0;</span>
            }
<span class="nc bnc" id="L1566" title="All 8 branches missed.">            return (ListenerUtil.mutListener.listen(15476) ? (_graduatingIvl(card, conf, true, false) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15475) ? (_graduatingIvl(card, conf, true, false) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15474) ? (_graduatingIvl(card, conf, true, false) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15473) ? (_graduatingIvl(card, conf, true, false) + SECONDS_PER_DAY) : (_graduatingIvl(card, conf, true, false) * SECONDS_PER_DAY)))));</span>
        } else {
<span class="nc bnc" id="L1568" title="All 48 branches missed.">            int left = (ListenerUtil.mutListener.listen(15463) ? ((ListenerUtil.mutListener.listen(15459) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(15458) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(15457) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(15456) ? (card.getLeft() + 1000) : (card.getLeft() % 1000))))) % 1) : (ListenerUtil.mutListener.listen(15462) ? ((ListenerUtil.mutListener.listen(15459) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(15458) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(15457) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(15456) ? (card.getLeft() + 1000) : (card.getLeft() % 1000))))) / 1) : (ListenerUtil.mutListener.listen(15461) ? ((ListenerUtil.mutListener.listen(15459) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(15458) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(15457) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(15456) ? (card.getLeft() + 1000) : (card.getLeft() % 1000))))) * 1) : (ListenerUtil.mutListener.listen(15460) ? ((ListenerUtil.mutListener.listen(15459) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(15458) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(15457) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(15456) ? (card.getLeft() + 1000) : (card.getLeft() % 1000))))) + 1) : ((ListenerUtil.mutListener.listen(15459) ? (card.getLeft() / 1000) : (ListenerUtil.mutListener.listen(15458) ? (card.getLeft() * 1000) : (ListenerUtil.mutListener.listen(15457) ? (card.getLeft() - 1000) : (ListenerUtil.mutListener.listen(15456) ? (card.getLeft() + 1000) : (card.getLeft() % 1000))))) - 1)))));</span>
<span class="nc bnc" id="L1569" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(15468) ? (left &gt;= 0) : (ListenerUtil.mutListener.listen(15467) ? (left &gt; 0) : (ListenerUtil.mutListener.listen(15466) ? (left &lt; 0) : (ListenerUtil.mutListener.listen(15465) ? (left != 0) : (ListenerUtil.mutListener.listen(15464) ? (left == 0) : (left &lt;= 0))))))) {</span>
                // graduate
<span class="nc bnc" id="L1571" title="All 2 branches missed.">                if (!_resched(card)) {</span>
<span class="nc" id="L1572">                    return 0;</span>
                }
<span class="nc bnc" id="L1574" title="All 8 branches missed.">                return (ListenerUtil.mutListener.listen(15472) ? (_graduatingIvl(card, conf, false, false) % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15471) ? (_graduatingIvl(card, conf, false, false) / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15470) ? (_graduatingIvl(card, conf, false, false) - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15469) ? (_graduatingIvl(card, conf, false, false) + SECONDS_PER_DAY) : (_graduatingIvl(card, conf, false, false) * SECONDS_PER_DAY)))));</span>
            } else {
<span class="nc" id="L1576">                return _delayForGrade(conf, left);</span>
            }
        }
    }

    /**
     * Suspend cards.
     */
    @Override
    public void suspendCards(@NonNull long[] ids) {
<span class="nc bnc" id="L1586" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15477)) {</span>
<span class="nc" id="L1587">            mCol.log(ids);</span>
        }
<span class="nc bnc" id="L1589" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15478)) {</span>
<span class="nc" id="L1590">            remFromDyn(ids);</span>
        }
<span class="nc bnc" id="L1592" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15479)) {</span>
<span class="nc" id="L1593">            removeLrn(ids);</span>
        }
<span class="nc bnc" id="L1595" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15480)) {</span>
<span class="nc" id="L1596">            mCol.getDb().execute(&quot;UPDATE cards SET queue = &quot; + Consts.QUEUE_TYPE_SUSPENDED + &quot;, mod = ?, usn = ? WHERE id IN &quot; + Utils.ids2str(ids), getTime().intTime(), mCol.usn());</span>
        }
<span class="nc" id="L1598">    }</span>

    @NonNull
    protected String queueIsBuriedSnippet() {
<span class="nc" id="L1602">        return &quot;queue = &quot; + Consts.QUEUE_TYPE_SIBLING_BURIED;</span>
    }

    @NonNull
    protected String _restoreQueueSnippet() {
<span class="nc" id="L1607">        return &quot;queue = type&quot;;</span>
    }

    /**
     * Unsuspend cards
     */
    @Override
    public void buryCards(@NonNull long[] cids) {
<span class="nc bnc" id="L1615" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15481)) {</span>
<span class="nc" id="L1616">            buryCards(cids, false);</span>
        }
<span class="nc" id="L1618">    }</span>

    @Override
    public void buryCards(@NonNull long[] cids, boolean manual) {
<span class="nc bnc" id="L1622" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15482)) {</span>
            // The boolean is useless here. However, it ensures that we are override the method with same parameter in SchedV2.
<span class="nc" id="L1624">            mCol.log(cids);</span>
        }
<span class="nc bnc" id="L1626" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15483)) {</span>
<span class="nc" id="L1627">            remFromDyn(cids);</span>
        }
<span class="nc bnc" id="L1629" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15484)) {</span>
<span class="nc" id="L1630">            removeLrn(cids);</span>
        }
<span class="nc bnc" id="L1632" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15485)) {</span>
<span class="nc" id="L1633">            mCol.getDb().execute(&quot;update cards set &quot; + queueIsBuriedSnippet() + &quot;,mod=?,usn=? where id in &quot; + Utils.ids2str(cids), getTime().intTime(), mCol.usn());</span>
        }
<span class="nc" id="L1635">    }</span>

    /*
     * ***********************************************************
     * The methods below are not in LibAnki.
     * ***********************************************************
     */
    @Override
    public boolean haveBuried(long did) {
<span class="nc" id="L1644">        List&lt;Long&gt; all = new ArrayList&lt;&gt;(mCol.getDecks().children(did).values());</span>
<span class="nc bnc" id="L1645" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15486)) {</span>
<span class="nc" id="L1646">            all.add(did);</span>
        }
<span class="nc" id="L1648">        return haveBuried(all);</span>
    }

    @Override
    public void unburyCardsForDeck(long did) {
<span class="nc" id="L1653">        List&lt;Long&gt; all = new ArrayList&lt;&gt;(mCol.getDecks().children(did).values());</span>
<span class="nc bnc" id="L1654" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15487)) {</span>
<span class="nc" id="L1655">            all.add(did);</span>
        }
<span class="nc bnc" id="L1657" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15488)) {</span>
<span class="nc" id="L1658">            unburyCardsForDeck(all);</span>
        }
<span class="nc" id="L1660">    }</span>

    /* Need to override. Otherwise it get SchedV2.mName variable*/
    @NonNull
    @Override
    public String getName() {
<span class="nc" id="L1666">        return &quot;std&quot;;</span>
    }

    /**
     * Return an estimate, in minutes, for how long it will take to complete all the reps in {@code counts}.
     *
     * The estimator builds rates for each queue type by looking at 10 days of history from the revlog table. For
     * efficiency, and to maintain the same rates for a review session, the rates are cached and reused until a
     * reload is forced.
     *
     * Notes:
     * - Because the revlog table does not record deck IDs, the rates cannot be reduced to a single deck and thus cover
     * the whole collection which may be inaccurate for some decks.
     * - There is no efficient way to determine how many lrn cards are generated by each new card. This estimator
     * assumes 1 card is generated as a compromise.
     * - If there is no revlog data to work with, reasonable defaults are chosen as a compromise to predicting 0 minutes.
     *
     * @param counts An array of [new, lrn, rev] counts from the scheduler's counts() method.
     * @param reload Force rebuild of estimator rates using the revlog.
     */
    @Override
    public int eta(@NonNull Counts counts, boolean reload) {
        double newRate;
        double newTime;
        double revRate;
        double revTime;
        double relrnRate;
        double relrnTime;
<span class="nc bnc" id="L1694" title="All 50 branches missed.">        if ((ListenerUtil.mutListener.listen(15494) ? (reload &amp;&amp; (ListenerUtil.mutListener.listen(15493) ? (mEtaCache[0] &gt;= -1) : (ListenerUtil.mutListener.listen(15492) ? (mEtaCache[0] &lt;= -1) : (ListenerUtil.mutListener.listen(15491) ? (mEtaCache[0] &gt; -1) : (ListenerUtil.mutListener.listen(15490) ? (mEtaCache[0] &lt; -1) : (ListenerUtil.mutListener.listen(15489) ? (mEtaCache[0] != -1) : (mEtaCache[0] == -1))))))) : (reload || (ListenerUtil.mutListener.listen(15493) ? (mEtaCache[0] &gt;= -1) : (ListenerUtil.mutListener.listen(15492) ? (mEtaCache[0] &lt;= -1) : (ListenerUtil.mutListener.listen(15491) ? (mEtaCache[0] &gt; -1) : (ListenerUtil.mutListener.listen(15490) ? (mEtaCache[0] &lt; -1) : (ListenerUtil.mutListener.listen(15489) ? (mEtaCache[0] != -1) : (mEtaCache[0] == -1))))))))) {</span>
<span class="nc bnc" id="L1695" title="All 248 branches missed.">            try (Cursor cur = mCol.getDb().query(&quot;select &quot; + &quot;avg(case when type = &quot; + Consts.CARD_TYPE_NEW + &quot; then case when ease &gt; 1 then 1.0 else 0.0 end else null end) as newRate, avg(case when type = &quot; + Consts.CARD_TYPE_NEW + &quot; then time else null end) as newTime, &quot; + &quot;avg(case when type in (&quot; + Consts.CARD_TYPE_LRN + &quot;, &quot; + Consts.CARD_TYPE_RELEARNING + &quot;) then case when ease &gt; 1 then 1.0 else 0.0 end else null end) as revRate, avg(case when type in (&quot; + Consts.CARD_TYPE_LRN + &quot;, &quot; + Consts.CARD_TYPE_RELEARNING + &quot;) then time else null end) as revTime, &quot; + &quot;avg(case when type = &quot; + Consts.CARD_TYPE_REV + &quot; then case when ease &gt; 1 then 1.0 else 0.0 end else null end) as relrnRate, avg(case when type = &quot; + Consts.CARD_TYPE_REV + &quot; then time else null end) as relrnTime &quot; + &quot;from revlog where id &gt; &quot; + ((ListenerUtil.mutListener.listen(15506) ? (((ListenerUtil.mutListener.listen(15502) ? (mCol.getSched().getDayCutoff() % ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15501) ? (mCol.getSched().getDayCutoff() / ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15500) ? (mCol.getSched().getDayCutoff() * ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15499) ? (mCol.getSched().getDayCutoff() + ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (mCol.getSched().getDayCutoff() - ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY)))))))))))) % 1000) : (ListenerUtil.mutListener.listen(15505) ? (((ListenerUtil.mutListener.listen(15502) ? (mCol.getSched().getDayCutoff() % ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15501) ? (mCol.getSched().getDayCutoff() / ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15500) ? (mCol.getSched().getDayCutoff() * ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15499) ? (mCol.getSched().getDayCutoff() + ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (mCol.getSched().getDayCutoff() - ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY)))))))))))) / 1000) : (ListenerUtil.mutListener.listen(15504) ? (((ListenerUtil.mutListener.listen(15502) ? (mCol.getSched().getDayCutoff() % ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15501) ? (mCol.getSched().getDayCutoff() / ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15500) ? (mCol.getSched().getDayCutoff() * ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15499) ? (mCol.getSched().getDayCutoff() + ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (mCol.getSched().getDayCutoff() - ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY)))))))))))) - 1000) : (ListenerUtil.mutListener.listen(15503) ? (((ListenerUtil.mutListener.listen(15502) ? (mCol.getSched().getDayCutoff() % ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15501) ? (mCol.getSched().getDayCutoff() / ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15500) ? (mCol.getSched().getDayCutoff() * ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15499) ? (mCol.getSched().getDayCutoff() + ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (mCol.getSched().getDayCutoff() - ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY)))))))))))) + 1000) : (((ListenerUtil.mutListener.listen(15502) ? (mCol.getSched().getDayCutoff() % ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15501) ? (mCol.getSched().getDayCutoff() / ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15500) ? (mCol.getSched().getDayCutoff() * ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (ListenerUtil.mutListener.listen(15499) ? (mCol.getSched().getDayCutoff() + ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY))))))) : (mCol.getSched().getDayCutoff() - ((ListenerUtil.mutListener.listen(15498) ? (10 % SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15497) ? (10 / SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15496) ? (10 - SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(15495) ? (10 + SECONDS_PER_DAY) : (10 * SECONDS_PER_DAY)))))))))))) * 1000)))))))) {</span>
<span class="nc bnc" id="L1696" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15507)) {</span>
<span class="nc bnc" id="L1697" title="All 2 branches missed.">                    if (!cur.moveToFirst()) {</span>
<span class="nc" id="L1698">                        return -1;</span>
                    }
                }
<span class="nc" id="L1701">                newRate = cur.getDouble(0);</span>
<span class="nc" id="L1702">                newTime = cur.getDouble(1);</span>
<span class="nc" id="L1703">                revRate = cur.getDouble(2);</span>
<span class="nc" id="L1704">                revTime = cur.getDouble(3);</span>
<span class="nc" id="L1705">                relrnRate = cur.getDouble(4);</span>
<span class="nc" id="L1706">                relrnTime = cur.getDouble(5);</span>
<span class="nc bnc" id="L1707" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(15509)) {</span>
<span class="nc bnc" id="L1708" title="All 2 branches missed.">                    if (!cur.isClosed()) {</span>
<span class="nc bnc" id="L1709" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(15508)) {</span>
<span class="nc" id="L1710">                            cur.close();</span>
                        }
                    }
                }
<span class="nc bnc" id="L1714" title="All 2 branches missed.">            }</span>
            // If the collection has no revlog data to work with, assume a 20 second average rep for that type
<span class="nc bnc" id="L1716" title="All 22 branches missed.">            newTime = (ListenerUtil.mutListener.listen(15514) ? (newTime &gt;= 0) : (ListenerUtil.mutListener.listen(15513) ? (newTime &lt;= 0) : (ListenerUtil.mutListener.listen(15512) ? (newTime &gt; 0) : (ListenerUtil.mutListener.listen(15511) ? (newTime &lt; 0) : (ListenerUtil.mutListener.listen(15510) ? (newTime != 0) : (newTime == 0)))))) ? 20000 : newTime;</span>
<span class="nc bnc" id="L1717" title="All 22 branches missed.">            revTime = (ListenerUtil.mutListener.listen(15519) ? (revTime &gt;= 0) : (ListenerUtil.mutListener.listen(15518) ? (revTime &lt;= 0) : (ListenerUtil.mutListener.listen(15517) ? (revTime &gt; 0) : (ListenerUtil.mutListener.listen(15516) ? (revTime &lt; 0) : (ListenerUtil.mutListener.listen(15515) ? (revTime != 0) : (revTime == 0)))))) ? 20000 : revTime;</span>
<span class="nc bnc" id="L1718" title="All 22 branches missed.">            relrnTime = (ListenerUtil.mutListener.listen(15524) ? (relrnTime &gt;= 0) : (ListenerUtil.mutListener.listen(15523) ? (relrnTime &lt;= 0) : (ListenerUtil.mutListener.listen(15522) ? (relrnTime &gt; 0) : (ListenerUtil.mutListener.listen(15521) ? (relrnTime &lt; 0) : (ListenerUtil.mutListener.listen(15520) ? (relrnTime != 0) : (relrnTime == 0)))))) ? 20000 : relrnTime;</span>
            // And a 100% success rate
<span class="nc bnc" id="L1720" title="All 22 branches missed.">            newRate = (ListenerUtil.mutListener.listen(15529) ? (newRate &gt;= 0) : (ListenerUtil.mutListener.listen(15528) ? (newRate &lt;= 0) : (ListenerUtil.mutListener.listen(15527) ? (newRate &gt; 0) : (ListenerUtil.mutListener.listen(15526) ? (newRate &lt; 0) : (ListenerUtil.mutListener.listen(15525) ? (newRate != 0) : (newRate == 0)))))) ? 1 : newRate;</span>
<span class="nc bnc" id="L1721" title="All 22 branches missed.">            revRate = (ListenerUtil.mutListener.listen(15534) ? (revRate &gt;= 0) : (ListenerUtil.mutListener.listen(15533) ? (revRate &lt;= 0) : (ListenerUtil.mutListener.listen(15532) ? (revRate &gt; 0) : (ListenerUtil.mutListener.listen(15531) ? (revRate &lt; 0) : (ListenerUtil.mutListener.listen(15530) ? (revRate != 0) : (revRate == 0)))))) ? 1 : revRate;</span>
<span class="nc bnc" id="L1722" title="All 22 branches missed.">            relrnRate = (ListenerUtil.mutListener.listen(15539) ? (relrnRate &gt;= 0) : (ListenerUtil.mutListener.listen(15538) ? (relrnRate &lt;= 0) : (ListenerUtil.mutListener.listen(15537) ? (relrnRate &gt; 0) : (ListenerUtil.mutListener.listen(15536) ? (relrnRate &lt; 0) : (ListenerUtil.mutListener.listen(15535) ? (relrnRate != 0) : (relrnRate == 0)))))) ? 1 : relrnRate;</span>
<span class="nc bnc" id="L1723" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(15540)) {</span>
<span class="nc" id="L1724">                mEtaCache[0] = newRate;</span>
            }
<span class="nc bnc" id="L1726" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(15541)) {</span>
<span class="nc" id="L1727">                mEtaCache[1] = newTime;</span>
            }
<span class="nc bnc" id="L1729" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(15542)) {</span>
<span class="nc" id="L1730">                mEtaCache[2] = revRate;</span>
            }
<span class="nc bnc" id="L1732" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(15543)) {</span>
<span class="nc" id="L1733">                mEtaCache[3] = revTime;</span>
            }
<span class="nc bnc" id="L1735" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(15544)) {</span>
<span class="nc" id="L1736">                mEtaCache[4] = relrnRate;</span>
            }
<span class="nc bnc" id="L1738" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(15545)) {</span>
<span class="nc" id="L1739">                mEtaCache[5] = relrnTime;</span>
            }
        } else {
<span class="nc" id="L1742">            newRate = mEtaCache[0];</span>
<span class="nc" id="L1743">            newTime = mEtaCache[1];</span>
<span class="nc" id="L1744">            revRate = mEtaCache[2];</span>
<span class="nc" id="L1745">            revTime = mEtaCache[3];</span>
<span class="nc" id="L1746">            relrnRate = mEtaCache[4];</span>
<span class="nc" id="L1747">            relrnTime = mEtaCache[5];</span>
        }
        // Calculate the total time for each queue based on the historical average duration per rep
<span class="nc bnc" id="L1750" title="All 8 branches missed.">        double newTotal = (ListenerUtil.mutListener.listen(15549) ? (newTime % counts.getNew()) : (ListenerUtil.mutListener.listen(15548) ? (newTime / counts.getNew()) : (ListenerUtil.mutListener.listen(15547) ? (newTime - counts.getNew()) : (ListenerUtil.mutListener.listen(15546) ? (newTime + counts.getNew()) : (newTime * counts.getNew())))));</span>
<span class="nc bnc" id="L1751" title="All 8 branches missed.">        double relrnTotal = (ListenerUtil.mutListener.listen(15553) ? (relrnTime % counts.getLrn()) : (ListenerUtil.mutListener.listen(15552) ? (relrnTime / counts.getLrn()) : (ListenerUtil.mutListener.listen(15551) ? (relrnTime - counts.getLrn()) : (ListenerUtil.mutListener.listen(15550) ? (relrnTime + counts.getLrn()) : (relrnTime * counts.getLrn())))));</span>
<span class="nc bnc" id="L1752" title="All 8 branches missed.">        double revTotal = (ListenerUtil.mutListener.listen(15557) ? (revTime % counts.getRev()) : (ListenerUtil.mutListener.listen(15556) ? (revTime / counts.getRev()) : (ListenerUtil.mutListener.listen(15555) ? (revTime - counts.getRev()) : (ListenerUtil.mutListener.listen(15554) ? (revTime + counts.getRev()) : (revTime * counts.getRev())))));</span>
        // Assume every new card becomes 1 relrn
<span class="nc" id="L1754">        int toRelrn = counts.getNew();</span>
<span class="nc bnc" id="L1755" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15566)) {</span>
<span class="nc bnc" id="L1756" title="All 48 branches missed.">            toRelrn += Math.ceil((ListenerUtil.mutListener.listen(15565) ? (((ListenerUtil.mutListener.listen(15561) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15560) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15559) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15558) ? (1 + relrnRate) : (1 - relrnRate)))))) % counts.getLrn()) : (ListenerUtil.mutListener.listen(15564) ? (((ListenerUtil.mutListener.listen(15561) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15560) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15559) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15558) ? (1 + relrnRate) : (1 - relrnRate)))))) / counts.getLrn()) : (ListenerUtil.mutListener.listen(15563) ? (((ListenerUtil.mutListener.listen(15561) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15560) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15559) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15558) ? (1 + relrnRate) : (1 - relrnRate)))))) - counts.getLrn()) : (ListenerUtil.mutListener.listen(15562) ? (((ListenerUtil.mutListener.listen(15561) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15560) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15559) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15558) ? (1 + relrnRate) : (1 - relrnRate)))))) + counts.getLrn()) : (((ListenerUtil.mutListener.listen(15561) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15560) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15559) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15558) ? (1 + relrnRate) : (1 - relrnRate)))))) * counts.getLrn()))))));</span>
        }
<span class="nc bnc" id="L1758" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15575)) {</span>
<span class="nc bnc" id="L1759" title="All 48 branches missed.">            toRelrn += Math.ceil((ListenerUtil.mutListener.listen(15574) ? (((ListenerUtil.mutListener.listen(15570) ? (1 % revRate) : (ListenerUtil.mutListener.listen(15569) ? (1 / revRate) : (ListenerUtil.mutListener.listen(15568) ? (1 * revRate) : (ListenerUtil.mutListener.listen(15567) ? (1 + revRate) : (1 - revRate)))))) % counts.getRev()) : (ListenerUtil.mutListener.listen(15573) ? (((ListenerUtil.mutListener.listen(15570) ? (1 % revRate) : (ListenerUtil.mutListener.listen(15569) ? (1 / revRate) : (ListenerUtil.mutListener.listen(15568) ? (1 * revRate) : (ListenerUtil.mutListener.listen(15567) ? (1 + revRate) : (1 - revRate)))))) / counts.getRev()) : (ListenerUtil.mutListener.listen(15572) ? (((ListenerUtil.mutListener.listen(15570) ? (1 % revRate) : (ListenerUtil.mutListener.listen(15569) ? (1 / revRate) : (ListenerUtil.mutListener.listen(15568) ? (1 * revRate) : (ListenerUtil.mutListener.listen(15567) ? (1 + revRate) : (1 - revRate)))))) - counts.getRev()) : (ListenerUtil.mutListener.listen(15571) ? (((ListenerUtil.mutListener.listen(15570) ? (1 % revRate) : (ListenerUtil.mutListener.listen(15569) ? (1 / revRate) : (ListenerUtil.mutListener.listen(15568) ? (1 * revRate) : (ListenerUtil.mutListener.listen(15567) ? (1 + revRate) : (1 - revRate)))))) + counts.getRev()) : (((ListenerUtil.mutListener.listen(15570) ? (1 % revRate) : (ListenerUtil.mutListener.listen(15569) ? (1 / revRate) : (ListenerUtil.mutListener.listen(15568) ? (1 * revRate) : (ListenerUtil.mutListener.listen(15567) ? (1 + revRate) : (1 - revRate)))))) * counts.getRev()))))));</span>
        }
        // negative for other reasons). 5% seems reasonable to ensure the loop doesn't iterate too much.
<span class="nc" id="L1762">        relrnRate = Math.max(relrnRate, 0.05);</span>
<span class="nc" id="L1763">        int futureReps = 0;</span>
<span class="nc bnc" id="L1764" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15591)) {</span>
            {
<span class="nc" id="L1766">                long _loopCounter298 = 0;</span>
                do {
<span class="nc" id="L1768">                    ListenerUtil.loopListener.listen(&quot;_loopCounter298&quot;, ++_loopCounter298);</span>
                    // Truncation ensures the failure rate always decreases
<span class="nc bnc" id="L1770" title="All 48 branches missed.">                    int failures = (int) ((ListenerUtil.mutListener.listen(15583) ? (((ListenerUtil.mutListener.listen(15579) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15578) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15577) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15576) ? (1 + relrnRate) : (1 - relrnRate)))))) % toRelrn) : (ListenerUtil.mutListener.listen(15582) ? (((ListenerUtil.mutListener.listen(15579) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15578) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15577) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15576) ? (1 + relrnRate) : (1 - relrnRate)))))) / toRelrn) : (ListenerUtil.mutListener.listen(15581) ? (((ListenerUtil.mutListener.listen(15579) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15578) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15577) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15576) ? (1 + relrnRate) : (1 - relrnRate)))))) - toRelrn) : (ListenerUtil.mutListener.listen(15580) ? (((ListenerUtil.mutListener.listen(15579) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15578) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15577) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15576) ? (1 + relrnRate) : (1 - relrnRate)))))) + toRelrn) : (((ListenerUtil.mutListener.listen(15579) ? (1 % relrnRate) : (ListenerUtil.mutListener.listen(15578) ? (1 / relrnRate) : (ListenerUtil.mutListener.listen(15577) ? (1 * relrnRate) : (ListenerUtil.mutListener.listen(15576) ? (1 + relrnRate) : (1 - relrnRate)))))) * toRelrn))))));</span>
<span class="nc bnc" id="L1771" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15584)) {</span>
<span class="nc" id="L1772">                        futureReps += failures;</span>
                    }
<span class="nc bnc" id="L1774" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15585)) {</span>
<span class="nc" id="L1775">                        toRelrn = failures;</span>
                    }
<span class="nc bnc" id="L1777" title="All 22 branches missed.">                } while ((ListenerUtil.mutListener.listen(15590) ? (toRelrn &gt;= 1) : (ListenerUtil.mutListener.listen(15589) ? (toRelrn &lt;= 1) : (ListenerUtil.mutListener.listen(15588) ? (toRelrn &lt; 1) : (ListenerUtil.mutListener.listen(15587) ? (toRelrn != 1) : (ListenerUtil.mutListener.listen(15586) ? (toRelrn == 1) : (toRelrn &gt; 1)))))));</span>
            }
        }
<span class="nc bnc" id="L1780" title="All 8 branches missed.">        double futureRelrnTotal = (ListenerUtil.mutListener.listen(15595) ? (relrnTime % futureReps) : (ListenerUtil.mutListener.listen(15594) ? (relrnTime / futureReps) : (ListenerUtil.mutListener.listen(15593) ? (relrnTime - futureReps) : (ListenerUtil.mutListener.listen(15592) ? (relrnTime + futureReps) : (relrnTime * futureReps)))));</span>
<span class="nc bnc" id="L1781" title="All 1248 branches missed.">        return (int) Math.round((ListenerUtil.mutListener.listen(15611) ? (((ListenerUtil.mutListener.listen(15607) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) % futureRelrnTotal) : (ListenerUtil.mutListener.listen(15606) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) / futureRelrnTotal) : (ListenerUtil.mutListener.listen(15605) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) * futureRelrnTotal) : (ListenerUtil.mutListener.listen(15604) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) - futureRelrnTotal) : ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) + futureRelrnTotal)))))) % 60000) : (ListenerUtil.mutListener.listen(15610) ? (((ListenerUtil.mutListener.listen(15607) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) % futureRelrnTotal) : (ListenerUtil.mutListener.listen(15606) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) / futureRelrnTotal) : (ListenerUtil.mutListener.listen(15605) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) * futureRelrnTotal) : (ListenerUtil.mutListener.listen(15604) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) - futureRelrnTotal) : ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) + futureRelrnTotal)))))) * 60000) : (ListenerUtil.mutListener.listen(15609) ? (((ListenerUtil.mutListener.listen(15607) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) % futureRelrnTotal) : (ListenerUtil.mutListener.listen(15606) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) / futureRelrnTotal) : (ListenerUtil.mutListener.listen(15605) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) * futureRelrnTotal) : (ListenerUtil.mutListener.listen(15604) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) - futureRelrnTotal) : ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) + futureRelrnTotal)))))) - 60000) : (ListenerUtil.mutListener.listen(15608) ? (((ListenerUtil.mutListener.listen(15607) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) % futureRelrnTotal) : (ListenerUtil.mutListener.listen(15606) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) / futureRelrnTotal) : (ListenerUtil.mutListener.listen(15605) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) * futureRelrnTotal) : (ListenerUtil.mutListener.listen(15604) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) - futureRelrnTotal) : ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) + futureRelrnTotal)))))) + 60000) : (((ListenerUtil.mutListener.listen(15607) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) % futureRelrnTotal) : (ListenerUtil.mutListener.listen(15606) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) / futureRelrnTotal) : (ListenerUtil.mutListener.listen(15605) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) * futureRelrnTotal) : (ListenerUtil.mutListener.listen(15604) ? ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) - futureRelrnTotal) : ((ListenerUtil.mutListener.listen(15603) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) % revTotal) : (ListenerUtil.mutListener.listen(15602) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) / revTotal) : (ListenerUtil.mutListener.listen(15601) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) * revTotal) : (ListenerUtil.mutListener.listen(15600) ? ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) - revTotal) : ((ListenerUtil.mutListener.listen(15599) ? (newTotal % relrnTotal) : (ListenerUtil.mutListener.listen(15598) ? (newTotal / relrnTotal) : (ListenerUtil.mutListener.listen(15597) ? (newTotal * relrnTotal) : (ListenerUtil.mutListener.listen(15596) ? (newTotal - relrnTotal) : (newTotal + relrnTotal))))) + revTotal))))) + futureRelrnTotal)))))) / 60000))))));</span>
    }

    /**
     * This is used when card is currently in the reviewer, to adapt the counts by removing this card from it.
     *
     * @param discardCard A card sent to reviewer that should not be
     * counted.
     */
    @Override
    public void decrementCounts(@Nullable Card discardCard) {
<span class="nc bnc" id="L1792" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15612)) {</span>
<span class="nc bnc" id="L1793" title="All 2 branches missed.">            if (discardCard == null) {</span>
<span class="nc" id="L1794">                return;</span>
            }
        }
        @Consts.CARD_QUEUE
<span class="nc" id="L1798">        int type = discardCard.getQueue();</span>
<span class="nc bnc" id="L1799" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(15621)) {</span>
<span class="nc bnc" id="L1800" title="All 5 branches missed.">            switch(type) {</span>
                case Consts.QUEUE_TYPE_NEW:
<span class="nc bnc" id="L1802" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15613)) {</span>
<span class="nc" id="L1803">                        mNewCount--;</span>
                    }
                    break;
                case Consts.QUEUE_TYPE_LRN:
<span class="nc bnc" id="L1807" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15618)) {</span>
<span class="nc bnc" id="L1808" title="All 8 branches missed.">                        mLrnCount -= (ListenerUtil.mutListener.listen(15617) ? (discardCard.getLeft() % 1000) : (ListenerUtil.mutListener.listen(15616) ? (discardCard.getLeft() * 1000) : (ListenerUtil.mutListener.listen(15615) ? (discardCard.getLeft() - 1000) : (ListenerUtil.mutListener.listen(15614) ? (discardCard.getLeft() + 1000) : (discardCard.getLeft() / 1000)))));</span>
                    }
                    break;
                case Consts.QUEUE_TYPE_REV:
<span class="nc bnc" id="L1812" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15619)) {</span>
<span class="nc" id="L1813">                        mRevCount--;</span>
                    }
                    break;
                case Consts.QUEUE_TYPE_DAY_LEARN_RELEARN:
<span class="nc bnc" id="L1817" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(15620)) {</span>
<span class="nc" id="L1818">                        mLrnCount--;</span>
                    }
                    break;
            }
        }
<span class="nc" id="L1823">    }</span>

    /**
     * The button to press on a new card to answer &quot;good&quot;.
     */
    @Override
    @VisibleForTesting
    @Consts.BUTTON_TYPE
    public int getGoodNewButton() {
<span class="nc" id="L1832">        return Consts.BUTTON_TWO;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>