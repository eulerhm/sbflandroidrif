<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>OverviewStatsBuilder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">AnkiDroid</a> &gt; <a href="index.source.html" class="el_package">com.ichi2.anki.stats</a> &gt; <span class="el_source">OverviewStatsBuilder.java</span></div><h1>OverviewStatsBuilder.java</h1><pre class="source lang-java linenums">/**
 * *************************************************************************************
 *  Copyright (c) 2014 Michael Goldbach &lt;michael@m-goldbach.net&gt;                         *
 *                                                                                       *
 *  This program is free software; you can redistribute it and/or modify it under        *
 *  the terms of the GNU General Public License as published by the Free Software        *
 *  Foundation; either version 3 of the License, or (at your option) any later           *
 *  version.                                                                             *
 *                                                                                       *
 *  This program is distributed in the hope that it will be useful, but WITHOUT ANY      *
 *  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A      *
 *  PARTICULAR PURPOSE. See the GNU General Public License for more details.             *
 *                                                                                       *
 *  You should have received a copy of the GNU General Public License along with         *
 *  this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.                           *
 * **************************************************************************************
 */
package com.ichi2.anki.stats;

import android.content.res.Resources;
import android.database.Cursor;
import android.webkit.WebView;
import com.ichi2.anki.R;
import com.ichi2.libanki.Collection;
import com.ichi2.libanki.Consts;
import com.ichi2.libanki.stats.Stats;
import com.ichi2.libanki.Utils;
import com.ichi2.themes.Themes;
import java.util.ArrayList;
import java.util.List;
import java.util.Locale;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

public class OverviewStatsBuilder {

    private static final int CARDS_INDEX = 0;

    private static final int THETIME_INDEX = 1;

    private static final int FAILED_INDEX = 2;

    private static final int LRN_INDEX = 3;

    private static final int REV_INDEX = 4;

    private static final int RELRN_INDEX = 5;

    private static final int FILT_INDEX = 6;

    private static final int MCNT_INDEX = 7;

    private static final int MSUM_INDEX = 8;

    // for resources access
    private final WebView mWebView;

    private final Collection mCol;

    private final long mDeckId;

    private final Stats.AxisType mType;

<span class="nc" id="L63">    public static class OverviewStats {</span>

        public int forecastTotalReviews;

        public double forecastAverageReviews;

        public int forecastDueTomorrow;

        public double reviewsPerDayOnAll;

        public double reviewsPerDayOnStudyDays;

        public int allDays;

        public int daysStudied;

        public double timePerDayOnAll;

        public double timePerDayOnStudyDays;

        public double totalTime;

        public int totalReviews;

        public double newCardsPerDay;

        public int totalNewCards;

        public double averageInterval;

        public double longestInterval;

        public AnswerButtonsOverview newCardsOverview;

        public AnswerButtonsOverview youngCardsOverview;

        public AnswerButtonsOverview matureCardsOverview;

        public long totalCards;

        public long totalNotes;

        public double lowestEase;

        public double averageEase;

        public double highestEase;

<span class="nc" id="L111">        public static class AnswerButtonsOverview {</span>

            public int total;

            public int correct;

            public double getPercentage() {
<span class="nc bnc" id="L118" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3678)) {</span>
<span class="nc bnc" id="L119" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(3677) ? (correct &gt;= 0) : (ListenerUtil.mutListener.listen(3676) ? (correct &lt;= 0) : (ListenerUtil.mutListener.listen(3675) ? (correct &gt; 0) : (ListenerUtil.mutListener.listen(3674) ? (correct &lt; 0) : (ListenerUtil.mutListener.listen(3673) ? (correct != 0) : (correct == 0))))))) {</span>
<span class="nc" id="L120">                        return 0;</span>
                    }
                }
<span class="nc bnc" id="L123" title="All 48 branches missed.">                return (ListenerUtil.mutListener.listen(3686) ? ((ListenerUtil.mutListener.listen(3682) ? ((double) correct % (double) total) : (ListenerUtil.mutListener.listen(3681) ? ((double) correct * (double) total) : (ListenerUtil.mutListener.listen(3680) ? ((double) correct - (double) total) : (ListenerUtil.mutListener.listen(3679) ? ((double) correct + (double) total) : ((double) correct / (double) total))))) % 100.0) : (ListenerUtil.mutListener.listen(3685) ? ((ListenerUtil.mutListener.listen(3682) ? ((double) correct % (double) total) : (ListenerUtil.mutListener.listen(3681) ? ((double) correct * (double) total) : (ListenerUtil.mutListener.listen(3680) ? ((double) correct - (double) total) : (ListenerUtil.mutListener.listen(3679) ? ((double) correct + (double) total) : ((double) correct / (double) total))))) / 100.0) : (ListenerUtil.mutListener.listen(3684) ? ((ListenerUtil.mutListener.listen(3682) ? ((double) correct % (double) total) : (ListenerUtil.mutListener.listen(3681) ? ((double) correct * (double) total) : (ListenerUtil.mutListener.listen(3680) ? ((double) correct - (double) total) : (ListenerUtil.mutListener.listen(3679) ? ((double) correct + (double) total) : ((double) correct / (double) total))))) - 100.0) : (ListenerUtil.mutListener.listen(3683) ? ((ListenerUtil.mutListener.listen(3682) ? ((double) correct % (double) total) : (ListenerUtil.mutListener.listen(3681) ? ((double) correct * (double) total) : (ListenerUtil.mutListener.listen(3680) ? ((double) correct - (double) total) : (ListenerUtil.mutListener.listen(3679) ? ((double) correct + (double) total) : ((double) correct / (double) total))))) + 100.0) : ((ListenerUtil.mutListener.listen(3682) ? ((double) correct % (double) total) : (ListenerUtil.mutListener.listen(3681) ? ((double) correct * (double) total) : (ListenerUtil.mutListener.listen(3680) ? ((double) correct - (double) total) : (ListenerUtil.mutListener.listen(3679) ? ((double) correct + (double) total) : ((double) correct / (double) total))))) * 100.0)))));</span>
            }
        }
    }

<span class="nc" id="L128">    public OverviewStatsBuilder(WebView chartView, Collection collectionData, long deckId, Stats.AxisType mStatType) {</span>
<span class="nc" id="L129">        mWebView = chartView;</span>
<span class="nc" id="L130">        mCol = collectionData;</span>
<span class="nc" id="L131">        mDeckId = deckId;</span>
<span class="nc" id="L132">        mType = mStatType;</span>
<span class="nc" id="L133">    }</span>

    public String createInfoHtmlString() {
<span class="nc" id="L136">        int textColorInt = Themes.getColorFromAttr(mWebView.getContext(), android.R.attr.textColor);</span>
        // Color to hex string
<span class="nc" id="L138">        String textColor = String.format(&quot;#%06X&quot;, (0xFFFFFF &amp; textColorInt));</span>
<span class="nc" id="L139">        String css = &quot;&lt;style&gt;\n&quot; + &quot;h1, h3 { margin-bottom: 0; margin-top: 1em; text-transform: capitalize; }\n&quot; + &quot;.pielabel { text-align:center; padding:0px; color:white; }\n&quot; + &quot;body {color:&quot; + textColor + &quot;;}\n&quot; + &quot;&lt;/style&gt;&quot;;</span>
<span class="nc" id="L140">        StringBuilder stringBuilder = new StringBuilder();</span>
<span class="nc bnc" id="L141" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3687)) {</span>
<span class="nc" id="L142">            stringBuilder.append(&quot;&lt;center&gt;&quot;);</span>
        }
<span class="nc bnc" id="L144" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3688)) {</span>
<span class="nc" id="L145">            stringBuilder.append(css);</span>
        }
<span class="nc bnc" id="L147" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3689)) {</span>
<span class="nc" id="L148">            appendTodaysStats(stringBuilder);</span>
        }
<span class="nc bnc" id="L150" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3690)) {</span>
<span class="nc" id="L151">            appendOverViewStats(stringBuilder);</span>
        }
<span class="nc bnc" id="L153" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3691)) {</span>
<span class="nc" id="L154">            stringBuilder.append(&quot;&lt;/center&gt;&quot;);</span>
        }
<span class="nc" id="L156">        return stringBuilder.toString();</span>
    }

    private void appendOverViewStats(StringBuilder stringBuilder) {
<span class="nc" id="L160">        Stats stats = new Stats(mCol, mDeckId);</span>
<span class="nc" id="L161">        OverviewStats oStats = new OverviewStats();</span>
<span class="nc bnc" id="L162" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3692)) {</span>
<span class="nc" id="L163">            stats.calculateOverviewStatistics(mType, oStats);</span>
        }
<span class="nc" id="L165">        Resources res = mWebView.getResources();</span>
<span class="nc bnc" id="L166" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3693)) {</span>
<span class="nc" id="L167">            stringBuilder.append(_title(res.getString(mType.descriptionId)));</span>
        }
<span class="nc bnc" id="L169" title="All 22 branches missed.">        boolean allDaysStudied = (ListenerUtil.mutListener.listen(3698) ? (oStats.daysStudied &gt;= oStats.allDays) : (ListenerUtil.mutListener.listen(3697) ? (oStats.daysStudied &lt;= oStats.allDays) : (ListenerUtil.mutListener.listen(3696) ? (oStats.daysStudied &gt; oStats.allDays) : (ListenerUtil.mutListener.listen(3695) ? (oStats.daysStudied &lt; oStats.allDays) : (ListenerUtil.mutListener.listen(3694) ? (oStats.daysStudied != oStats.allDays) : (oStats.daysStudied == oStats.allDays))))));</span>
<span class="nc bnc" id="L170" title="All 48 branches missed.">        String daysStudied = res.getString(R.string.stats_overview_days_studied, (int) ((ListenerUtil.mutListener.listen(3706) ? ((ListenerUtil.mutListener.listen(3702) ? ((float) oStats.daysStudied % (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3701) ? ((float) oStats.daysStudied * (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3700) ? ((float) oStats.daysStudied - (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3699) ? ((float) oStats.daysStudied + (float) oStats.allDays) : ((float) oStats.daysStudied / (float) oStats.allDays))))) % 100) : (ListenerUtil.mutListener.listen(3705) ? ((ListenerUtil.mutListener.listen(3702) ? ((float) oStats.daysStudied % (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3701) ? ((float) oStats.daysStudied * (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3700) ? ((float) oStats.daysStudied - (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3699) ? ((float) oStats.daysStudied + (float) oStats.allDays) : ((float) oStats.daysStudied / (float) oStats.allDays))))) / 100) : (ListenerUtil.mutListener.listen(3704) ? ((ListenerUtil.mutListener.listen(3702) ? ((float) oStats.daysStudied % (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3701) ? ((float) oStats.daysStudied * (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3700) ? ((float) oStats.daysStudied - (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3699) ? ((float) oStats.daysStudied + (float) oStats.allDays) : ((float) oStats.daysStudied / (float) oStats.allDays))))) - 100) : (ListenerUtil.mutListener.listen(3703) ? ((ListenerUtil.mutListener.listen(3702) ? ((float) oStats.daysStudied % (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3701) ? ((float) oStats.daysStudied * (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3700) ? ((float) oStats.daysStudied - (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3699) ? ((float) oStats.daysStudied + (float) oStats.allDays) : ((float) oStats.daysStudied / (float) oStats.allDays))))) + 100) : ((ListenerUtil.mutListener.listen(3702) ? ((float) oStats.daysStudied % (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3701) ? ((float) oStats.daysStudied * (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3700) ? ((float) oStats.daysStudied - (float) oStats.allDays) : (ListenerUtil.mutListener.listen(3699) ? ((float) oStats.daysStudied + (float) oStats.allDays) : ((float) oStats.daysStudied / (float) oStats.allDays))))) * 100)))))), oStats.daysStudied, oStats.allDays);</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3707)) {</span>
            // Fill in the forecast summaries first
<span class="nc" id="L173">            calculateForecastOverview(mType, oStats);</span>
        }
<span class="nc" id="L175">        Locale l = Locale.getDefault();</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3708)) {</span>
<span class="nc" id="L177">            stringBuilder.append(_subtitle(res.getString(R.string.stats_forecast).toUpperCase(l)));</span>
        }
<span class="nc bnc" id="L179" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3709)) {</span>
<span class="nc" id="L180">            stringBuilder.append(res.getString(R.string.stats_overview_forecast_total, oStats.forecastTotalReviews));</span>
        }
<span class="nc bnc" id="L182" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3710)) {</span>
<span class="nc" id="L183">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L185" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3711)) {</span>
<span class="nc" id="L186">            stringBuilder.append(res.getString(R.string.stats_overview_forecast_average, oStats.forecastAverageReviews));</span>
        }
<span class="nc bnc" id="L188" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3712)) {</span>
<span class="nc" id="L189">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L191" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3713)) {</span>
<span class="nc" id="L192">            stringBuilder.append(res.getString(R.string.stats_overview_forecast_due_tomorrow, oStats.forecastDueTomorrow));</span>
        }
<span class="nc bnc" id="L194" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3714)) {</span>
<span class="nc" id="L195">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L197" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3715)) {</span>
            // REVIEW COUNT
<span class="nc" id="L199">            stringBuilder.append(_subtitle(res.getString(R.string.stats_review_count).toUpperCase(l)));</span>
        }
<span class="nc bnc" id="L201" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3716)) {</span>
<span class="nc" id="L202">            stringBuilder.append(daysStudied);</span>
        }
<span class="nc bnc" id="L204" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3717)) {</span>
<span class="nc" id="L205">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L207" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3718)) {</span>
<span class="nc" id="L208">            stringBuilder.append(res.getString(R.string.stats_overview_forecast_total, oStats.totalReviews));</span>
        }
<span class="nc bnc" id="L210" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3719)) {</span>
<span class="nc" id="L211">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L213" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3720)) {</span>
<span class="nc" id="L214">            stringBuilder.append(res.getString(R.string.stats_overview_reviews_per_day_studydays, oStats.reviewsPerDayOnStudyDays));</span>
        }
<span class="nc bnc" id="L216" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3723)) {</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">            if (!allDaysStudied) {</span>
<span class="nc bnc" id="L218" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3721)) {</span>
<span class="nc" id="L219">                    stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
                }
<span class="nc bnc" id="L221" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3722)) {</span>
<span class="nc" id="L222">                    stringBuilder.append(res.getString(R.string.stats_overview_reviews_per_day_all, oStats.reviewsPerDayOnAll));</span>
                }
            }
        }
<span class="nc bnc" id="L226" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3724)) {</span>
<span class="nc" id="L227">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L229" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3725)) {</span>
            // REVIEW TIME
<span class="nc" id="L231">            stringBuilder.append(_subtitle(res.getString(R.string.stats_review_time).toUpperCase(l)));</span>
        }
<span class="nc bnc" id="L233" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3726)) {</span>
<span class="nc" id="L234">            stringBuilder.append(daysStudied);</span>
        }
<span class="nc bnc" id="L236" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3727)) {</span>
<span class="nc" id="L237">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L239" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3728)) {</span>
            // TODO: Anki Desktop allows changing to hours / days here.
<span class="nc" id="L241">            stringBuilder.append(res.getString(R.string.stats_overview_total_time_in_period, Math.round(oStats.totalTime)));</span>
        }
<span class="nc bnc" id="L243" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3729)) {</span>
<span class="nc" id="L244">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L246" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3730)) {</span>
<span class="nc" id="L247">            stringBuilder.append(res.getString(R.string.stats_overview_time_per_day_studydays, oStats.timePerDayOnStudyDays));</span>
        }
<span class="nc bnc" id="L249" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3733)) {</span>
<span class="nc bnc" id="L250" title="All 2 branches missed.">            if (!allDaysStudied) {</span>
<span class="nc bnc" id="L251" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3731)) {</span>
<span class="nc" id="L252">                    stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
                }
<span class="nc bnc" id="L254" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3732)) {</span>
<span class="nc" id="L255">                    stringBuilder.append(res.getString(R.string.stats_overview_time_per_day_all, oStats.timePerDayOnAll));</span>
                }
            }
        }
<span class="nc bnc" id="L259" title="All 30 branches missed.">        double cardsPerMinute = (ListenerUtil.mutListener.listen(3738) ? (oStats.totalTime &gt;= 0) : (ListenerUtil.mutListener.listen(3737) ? (oStats.totalTime &lt;= 0) : (ListenerUtil.mutListener.listen(3736) ? (oStats.totalTime &gt; 0) : (ListenerUtil.mutListener.listen(3735) ? (oStats.totalTime &lt; 0) : (ListenerUtil.mutListener.listen(3734) ? (oStats.totalTime != 0) : (oStats.totalTime == 0)))))) ? 0 : (ListenerUtil.mutListener.listen(3742) ? (((double) oStats.totalReviews) % oStats.totalTime) : (ListenerUtil.mutListener.listen(3741) ? (((double) oStats.totalReviews) * oStats.totalTime) : (ListenerUtil.mutListener.listen(3740) ? (((double) oStats.totalReviews) - oStats.totalTime) : (ListenerUtil.mutListener.listen(3739) ? (((double) oStats.totalReviews) + oStats.totalTime) : (((double) oStats.totalReviews) / oStats.totalTime)))));</span>
<span class="nc bnc" id="L260" title="All 70 branches missed.">        double averageAnswerTime = (ListenerUtil.mutListener.listen(3747) ? (oStats.totalReviews &gt;= 0) : (ListenerUtil.mutListener.listen(3746) ? (oStats.totalReviews &lt;= 0) : (ListenerUtil.mutListener.listen(3745) ? (oStats.totalReviews &gt; 0) : (ListenerUtil.mutListener.listen(3744) ? (oStats.totalReviews &lt; 0) : (ListenerUtil.mutListener.listen(3743) ? (oStats.totalReviews != 0) : (oStats.totalReviews == 0)))))) ? 0 : (ListenerUtil.mutListener.listen(3755) ? (((ListenerUtil.mutListener.listen(3751) ? (oStats.totalTime % 60) : (ListenerUtil.mutListener.listen(3750) ? (oStats.totalTime / 60) : (ListenerUtil.mutListener.listen(3749) ? (oStats.totalTime - 60) : (ListenerUtil.mutListener.listen(3748) ? (oStats.totalTime + 60) : (oStats.totalTime * 60)))))) % ((double) oStats.totalReviews)) : (ListenerUtil.mutListener.listen(3754) ? (((ListenerUtil.mutListener.listen(3751) ? (oStats.totalTime % 60) : (ListenerUtil.mutListener.listen(3750) ? (oStats.totalTime / 60) : (ListenerUtil.mutListener.listen(3749) ? (oStats.totalTime - 60) : (ListenerUtil.mutListener.listen(3748) ? (oStats.totalTime + 60) : (oStats.totalTime * 60)))))) * ((double) oStats.totalReviews)) : (ListenerUtil.mutListener.listen(3753) ? (((ListenerUtil.mutListener.listen(3751) ? (oStats.totalTime % 60) : (ListenerUtil.mutListener.listen(3750) ? (oStats.totalTime / 60) : (ListenerUtil.mutListener.listen(3749) ? (oStats.totalTime - 60) : (ListenerUtil.mutListener.listen(3748) ? (oStats.totalTime + 60) : (oStats.totalTime * 60)))))) - ((double) oStats.totalReviews)) : (ListenerUtil.mutListener.listen(3752) ? (((ListenerUtil.mutListener.listen(3751) ? (oStats.totalTime % 60) : (ListenerUtil.mutListener.listen(3750) ? (oStats.totalTime / 60) : (ListenerUtil.mutListener.listen(3749) ? (oStats.totalTime - 60) : (ListenerUtil.mutListener.listen(3748) ? (oStats.totalTime + 60) : (oStats.totalTime * 60)))))) + ((double) oStats.totalReviews)) : (((ListenerUtil.mutListener.listen(3751) ? (oStats.totalTime % 60) : (ListenerUtil.mutListener.listen(3750) ? (oStats.totalTime / 60) : (ListenerUtil.mutListener.listen(3749) ? (oStats.totalTime - 60) : (ListenerUtil.mutListener.listen(3748) ? (oStats.totalTime + 60) : (oStats.totalTime * 60)))))) / ((double) oStats.totalReviews))))));</span>
<span class="nc bnc" id="L261" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3756)) {</span>
<span class="nc" id="L262">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L264" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3757)) {</span>
<span class="nc" id="L265">            stringBuilder.append(res.getString(R.string.stats_overview_average_answer_time, averageAnswerTime, cardsPerMinute));</span>
        }
<span class="nc bnc" id="L267" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3758)) {</span>
<span class="nc" id="L268">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L270" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3759)) {</span>
            // ADDED
<span class="nc" id="L272">            stringBuilder.append(_subtitle(res.getString(R.string.stats_added).toUpperCase(l)));</span>
        }
<span class="nc bnc" id="L274" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3760)) {</span>
<span class="nc" id="L275">            stringBuilder.append(res.getString(R.string.stats_overview_total_new_cards, oStats.totalNewCards));</span>
        }
<span class="nc bnc" id="L277" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3761)) {</span>
<span class="nc" id="L278">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L280" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3762)) {</span>
<span class="nc" id="L281">            stringBuilder.append(res.getString(R.string.stats_overview_new_cards_per_day, oStats.newCardsPerDay));</span>
        }
<span class="nc bnc" id="L283" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3763)) {</span>
<span class="nc" id="L284">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L286" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3764)) {</span>
            // INTERVALS
<span class="nc" id="L288">            stringBuilder.append(_subtitle(res.getString(R.string.stats_review_intervals).toUpperCase(l)));</span>
        }
<span class="nc bnc" id="L290" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3765)) {</span>
<span class="nc" id="L291">            stringBuilder.append(res.getString(R.string.stats_overview_average_interval));</span>
        }
<span class="nc bnc" id="L293" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3770)) {</span>
<span class="nc bnc" id="L294" title="All 8 branches missed.">            stringBuilder.append(Utils.roundedTimeSpan(mWebView.getContext(), (int) Math.round((ListenerUtil.mutListener.listen(3769) ? (oStats.averageInterval % Stats.SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(3768) ? (oStats.averageInterval / Stats.SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(3767) ? (oStats.averageInterval - Stats.SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(3766) ? (oStats.averageInterval + Stats.SECONDS_PER_DAY) : (oStats.averageInterval * Stats.SECONDS_PER_DAY))))))));</span>
        }
<span class="nc bnc" id="L296" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3771)) {</span>
<span class="nc" id="L297">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L299" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3772)) {</span>
<span class="nc" id="L300">            stringBuilder.append(res.getString(R.string.stats_overview_longest_interval));</span>
        }
<span class="nc bnc" id="L302" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3777)) {</span>
<span class="nc bnc" id="L303" title="All 8 branches missed.">            stringBuilder.append(Utils.roundedTimeSpan(mWebView.getContext(), (int) Math.round((ListenerUtil.mutListener.listen(3776) ? (oStats.longestInterval % Stats.SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(3775) ? (oStats.longestInterval / Stats.SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(3774) ? (oStats.longestInterval - Stats.SECONDS_PER_DAY) : (ListenerUtil.mutListener.listen(3773) ? (oStats.longestInterval + Stats.SECONDS_PER_DAY) : (oStats.longestInterval * Stats.SECONDS_PER_DAY))))))));</span>
        }
<span class="nc bnc" id="L305" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3778)) {</span>
            // ANSWER BUTTONS
<span class="nc" id="L307">            stringBuilder.append(_subtitle(res.getString(R.string.stats_answer_buttons).toUpperCase(l)));</span>
        }
<span class="nc bnc" id="L309" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3779)) {</span>
<span class="nc" id="L310">            stringBuilder.append(res.getString(R.string.stats_overview_answer_buttons_learn, oStats.newCardsOverview.getPercentage(), oStats.newCardsOverview.correct, oStats.newCardsOverview.total));</span>
        }
<span class="nc bnc" id="L312" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3780)) {</span>
<span class="nc" id="L313">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L315" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3781)) {</span>
<span class="nc" id="L316">            stringBuilder.append(res.getString(R.string.stats_overview_answer_buttons_young, oStats.youngCardsOverview.getPercentage(), oStats.youngCardsOverview.correct, oStats.youngCardsOverview.total));</span>
        }
<span class="nc bnc" id="L318" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3782)) {</span>
<span class="nc" id="L319">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L321" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3783)) {</span>
<span class="nc" id="L322">            stringBuilder.append(res.getString(R.string.stats_overview_answer_buttons_mature, oStats.matureCardsOverview.getPercentage(), oStats.matureCardsOverview.correct, oStats.matureCardsOverview.total));</span>
        }
<span class="nc bnc" id="L324" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3784)) {</span>
            // CARD TYPES
<span class="nc" id="L326">            stringBuilder.append(_subtitle(res.getString(R.string.title_activity_template_editor).toUpperCase(l)));</span>
        }
<span class="nc bnc" id="L328" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3785)) {</span>
<span class="nc" id="L329">            stringBuilder.append(res.getString(R.string.stats_overview_card_types_total_cards, oStats.totalCards));</span>
        }
<span class="nc bnc" id="L331" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3786)) {</span>
<span class="nc" id="L332">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L334" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3787)) {</span>
<span class="nc" id="L335">            stringBuilder.append(res.getString(R.string.stats_overview_card_types_total_notes, oStats.totalNotes));</span>
        }
<span class="nc bnc" id="L337" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3788)) {</span>
<span class="nc" id="L338">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L340" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3789)) {</span>
<span class="nc" id="L341">            stringBuilder.append(res.getString(R.string.stats_overview_card_types_lowest_ease, oStats.lowestEase));</span>
        }
<span class="nc bnc" id="L343" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3790)) {</span>
<span class="nc" id="L344">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L346" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3791)) {</span>
<span class="nc" id="L347">            stringBuilder.append(res.getString(R.string.stats_overview_card_types_average_ease, oStats.averageEase));</span>
        }
<span class="nc bnc" id="L349" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3792)) {</span>
<span class="nc" id="L350">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L352" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3793)) {</span>
<span class="nc" id="L353">            stringBuilder.append(res.getString(R.string.stats_overview_card_types_highest_ease, oStats.highestEase));</span>
        }
<span class="nc" id="L355">    }</span>

    private void appendTodaysStats(StringBuilder stringBuilder) {
<span class="nc" id="L358">        Stats stats = new Stats(mCol, mDeckId);</span>
<span class="nc" id="L359">        int[] todayStats = stats.calculateTodayStats();</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3794)) {</span>
<span class="nc" id="L361">            stringBuilder.append(_title(mWebView.getResources().getString(R.string.stats_today)));</span>
        }
<span class="nc" id="L363">        Resources res = mWebView.getResources();</span>
<span class="nc bnc" id="L364" title="All 8 branches missed.">        final int minutes = (int) Math.round((ListenerUtil.mutListener.listen(3798) ? (todayStats[THETIME_INDEX] % 60.0) : (ListenerUtil.mutListener.listen(3797) ? (todayStats[THETIME_INDEX] * 60.0) : (ListenerUtil.mutListener.listen(3796) ? (todayStats[THETIME_INDEX] - 60.0) : (ListenerUtil.mutListener.listen(3795) ? (todayStats[THETIME_INDEX] + 60.0) : (todayStats[THETIME_INDEX] / 60.0))))));</span>
<span class="nc" id="L365">        final String span = res.getQuantityString(R.plurals.time_span_minutes, minutes, minutes);</span>
<span class="nc bnc" id="L366" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3799)) {</span>
<span class="nc" id="L367">            stringBuilder.append(res.getQuantityString(R.plurals.stats_today_cards, todayStats[CARDS_INDEX], todayStats[CARDS_INDEX], span));</span>
        }
<span class="nc bnc" id="L369" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3800)) {</span>
<span class="nc" id="L370">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L372" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3801)) {</span>
<span class="nc" id="L373">            stringBuilder.append(res.getString(R.string.stats_today_again_count, todayStats[FAILED_INDEX]));</span>
        }
<span class="nc bnc" id="L375" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3821)) {</span>
<span class="nc bnc" id="L376" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(3806) ? (todayStats[CARDS_INDEX] &gt;= 0) : (ListenerUtil.mutListener.listen(3805) ? (todayStats[CARDS_INDEX] &lt;= 0) : (ListenerUtil.mutListener.listen(3804) ? (todayStats[CARDS_INDEX] &lt; 0) : (ListenerUtil.mutListener.listen(3803) ? (todayStats[CARDS_INDEX] != 0) : (ListenerUtil.mutListener.listen(3802) ? (todayStats[CARDS_INDEX] == 0) : (todayStats[CARDS_INDEX] &gt; 0))))))) {</span>
<span class="nc bnc" id="L377" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3807)) {</span>
<span class="nc" id="L378">                    stringBuilder.append(&quot; &quot;);</span>
                }
<span class="nc bnc" id="L380" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3820)) {</span>
<span class="nc bnc" id="L381" title="All 248 branches missed.">                    stringBuilder.append(res.getString(R.string.stats_today_correct_count, (((ListenerUtil.mutListener.listen(3819) ? (((ListenerUtil.mutListener.listen(3815) ? (1 % (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3814) ? (1 / (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3813) ? (1 * (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3812) ? (1 + (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (1 - (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX])))))))))))) % 100.0) : (ListenerUtil.mutListener.listen(3818) ? (((ListenerUtil.mutListener.listen(3815) ? (1 % (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3814) ? (1 / (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3813) ? (1 * (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3812) ? (1 + (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (1 - (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX])))))))))))) / 100.0) : (ListenerUtil.mutListener.listen(3817) ? (((ListenerUtil.mutListener.listen(3815) ? (1 % (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3814) ? (1 / (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3813) ? (1 * (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3812) ? (1 + (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (1 - (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX])))))))))))) - 100.0) : (ListenerUtil.mutListener.listen(3816) ? (((ListenerUtil.mutListener.listen(3815) ? (1 % (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3814) ? (1 / (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3813) ? (1 * (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3812) ? (1 + (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (1 - (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX])))))))))))) + 100.0) : (((ListenerUtil.mutListener.listen(3815) ? (1 % (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3814) ? (1 / (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3813) ? (1 * (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (ListenerUtil.mutListener.listen(3812) ? (1 + (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX]))))))) : (1 - (ListenerUtil.mutListener.listen(3811) ? (todayStats[FAILED_INDEX] % (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3810) ? (todayStats[FAILED_INDEX] * (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3809) ? (todayStats[FAILED_INDEX] - (float) (todayStats[CARDS_INDEX])) : (ListenerUtil.mutListener.listen(3808) ? (todayStats[FAILED_INDEX] + (float) (todayStats[CARDS_INDEX])) : (todayStats[FAILED_INDEX] / (float) (todayStats[CARDS_INDEX])))))))))))) * 100.0)))))))));</span>
                }
            }
        }
<span class="nc bnc" id="L385" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3822)) {</span>
<span class="nc" id="L386">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L388" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3823)) {</span>
<span class="nc" id="L389">            stringBuilder.append(res.getString(R.string.stats_today_type_breakdown, todayStats[LRN_INDEX], todayStats[REV_INDEX], todayStats[RELRN_INDEX], todayStats[FILT_INDEX]));</span>
        }
<span class="nc bnc" id="L391" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3824)) {</span>
<span class="nc" id="L392">            stringBuilder.append(&quot;&lt;br&gt;&quot;);</span>
        }
<span class="nc bnc" id="L394" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3840)) {</span>
<span class="nc bnc" id="L395" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(3829) ? (todayStats[MCNT_INDEX] &gt;= 0) : (ListenerUtil.mutListener.listen(3828) ? (todayStats[MCNT_INDEX] &lt;= 0) : (ListenerUtil.mutListener.listen(3827) ? (todayStats[MCNT_INDEX] &gt; 0) : (ListenerUtil.mutListener.listen(3826) ? (todayStats[MCNT_INDEX] &lt; 0) : (ListenerUtil.mutListener.listen(3825) ? (todayStats[MCNT_INDEX] == 0) : (todayStats[MCNT_INDEX] != 0))))))) {</span>
<span class="nc bnc" id="L396" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3839)) {</span>
<span class="nc bnc" id="L397" title="All 48 branches missed.">                    stringBuilder.append(res.getString(R.string.stats_today_mature_cards, todayStats[MSUM_INDEX], todayStats[MCNT_INDEX], ((ListenerUtil.mutListener.listen(3838) ? ((ListenerUtil.mutListener.listen(3834) ? (todayStats[MSUM_INDEX] % (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3833) ? (todayStats[MSUM_INDEX] * (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3832) ? (todayStats[MSUM_INDEX] - (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3831) ? (todayStats[MSUM_INDEX] + (float) (todayStats[MCNT_INDEX])) : (todayStats[MSUM_INDEX] / (float) (todayStats[MCNT_INDEX])))))) % 100.0) : (ListenerUtil.mutListener.listen(3837) ? ((ListenerUtil.mutListener.listen(3834) ? (todayStats[MSUM_INDEX] % (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3833) ? (todayStats[MSUM_INDEX] * (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3832) ? (todayStats[MSUM_INDEX] - (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3831) ? (todayStats[MSUM_INDEX] + (float) (todayStats[MCNT_INDEX])) : (todayStats[MSUM_INDEX] / (float) (todayStats[MCNT_INDEX])))))) / 100.0) : (ListenerUtil.mutListener.listen(3836) ? ((ListenerUtil.mutListener.listen(3834) ? (todayStats[MSUM_INDEX] % (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3833) ? (todayStats[MSUM_INDEX] * (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3832) ? (todayStats[MSUM_INDEX] - (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3831) ? (todayStats[MSUM_INDEX] + (float) (todayStats[MCNT_INDEX])) : (todayStats[MSUM_INDEX] / (float) (todayStats[MCNT_INDEX])))))) - 100.0) : (ListenerUtil.mutListener.listen(3835) ? ((ListenerUtil.mutListener.listen(3834) ? (todayStats[MSUM_INDEX] % (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3833) ? (todayStats[MSUM_INDEX] * (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3832) ? (todayStats[MSUM_INDEX] - (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3831) ? (todayStats[MSUM_INDEX] + (float) (todayStats[MCNT_INDEX])) : (todayStats[MSUM_INDEX] / (float) (todayStats[MCNT_INDEX])))))) + 100.0) : ((ListenerUtil.mutListener.listen(3834) ? (todayStats[MSUM_INDEX] % (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3833) ? (todayStats[MSUM_INDEX] * (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3832) ? (todayStats[MSUM_INDEX] - (float) (todayStats[MCNT_INDEX])) : (ListenerUtil.mutListener.listen(3831) ? (todayStats[MSUM_INDEX] + (float) (todayStats[MCNT_INDEX])) : (todayStats[MSUM_INDEX] / (float) (todayStats[MCNT_INDEX])))))) * 100.0))))))));</span>
                }
            } else {
<span class="nc bnc" id="L400" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3830)) {</span>
<span class="nc" id="L401">                    stringBuilder.append(res.getString(R.string.stats_today_no_mature_cards));</span>
                }
            }
        }
<span class="nc" id="L405">    }</span>

    private String _title(String title) {
<span class="nc" id="L408">        return &quot;&lt;h1&gt;&quot; + title + &quot;&lt;/h1&gt;&quot;;</span>
    }

    private String _subtitle(String title) {
<span class="nc" id="L412">        return &quot;&lt;h3&gt;&quot; + title + &quot;&lt;/h3&gt;&quot;;</span>
    }

    // should replace the one in Stats.java.
    private void calculateForecastOverview(Stats.AxisType type, OverviewStats oStats) {
<span class="nc" id="L417">        Integer start = null;</span>
<span class="nc" id="L418">        Integer end = null;</span>
<span class="nc" id="L419">        int chunk = 0;</span>
<span class="nc bnc" id="L420" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3850)) {</span>
<span class="nc bnc" id="L421" title="All 4 branches missed.">            switch(type) {</span>
                case TYPE_MONTH:
<span class="nc bnc" id="L423" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3841)) {</span>
<span class="nc" id="L424">                        start = 0;</span>
                    }
<span class="nc bnc" id="L426" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3842)) {</span>
<span class="nc" id="L427">                        end = 31;</span>
                    }
<span class="nc bnc" id="L429" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3843)) {</span>
<span class="nc" id="L430">                        chunk = 1;</span>
                    }
                    break;
                case TYPE_YEAR:
<span class="nc bnc" id="L434" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3844)) {</span>
<span class="nc" id="L435">                        start = 0;</span>
                    }
<span class="nc bnc" id="L437" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3845)) {</span>
<span class="nc" id="L438">                        end = 52;</span>
                    }
<span class="nc bnc" id="L440" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3846)) {</span>
<span class="nc" id="L441">                        chunk = 7;</span>
                    }
                    break;
                case TYPE_LIFE:
<span class="nc bnc" id="L445" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3847)) {</span>
<span class="nc" id="L446">                        start = 0;</span>
                    }
<span class="nc bnc" id="L448" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3848)) {</span>
<span class="nc" id="L449">                        end = null;</span>
                    }
<span class="nc bnc" id="L451" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3849)) {</span>
<span class="nc" id="L452">                        chunk = 30;</span>
                    }
                    break;
            }
        }
<span class="nc" id="L457">        List&lt;int[]&gt; d = _due(start, end, chunk);</span>
<span class="nc" id="L458">        int tot = 0;</span>
<span class="nc" id="L459">        List&lt;int[]&gt; totd = new ArrayList&lt;&gt;(d.size());</span>
<span class="nc bnc" id="L460" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3857)) {</span>
            {
<span class="nc" id="L462">                long _loopCounter89 = 0;</span>
<span class="nc bnc" id="L463" title="All 2 branches missed.">                for (int[] day : d) {</span>
<span class="nc" id="L464">                    ListenerUtil.loopListener.listen(&quot;_loopCounter89&quot;, ++_loopCounter89);</span>
<span class="nc bnc" id="L465" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3855)) {</span>
<span class="nc bnc" id="L466" title="All 8 branches missed.">                        tot += (ListenerUtil.mutListener.listen(3854) ? (day[1] % day[2]) : (ListenerUtil.mutListener.listen(3853) ? (day[1] / day[2]) : (ListenerUtil.mutListener.listen(3852) ? (day[1] * day[2]) : (ListenerUtil.mutListener.listen(3851) ? (day[1] - day[2]) : (day[1] + day[2])))));</span>
                    }
<span class="nc bnc" id="L468" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(3856)) {</span>
<span class="nc" id="L469">                        totd.add(new int[] { day[0], tot });</span>
                    }
<span class="nc" id="L471">                }</span>
            }
        }
<span class="nc bnc" id="L474" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3858)) {</span>
            // Fill in the overview stats
<span class="nc" id="L476">            oStats.forecastTotalReviews = tot;</span>
        }
<span class="nc bnc" id="L478" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3872)) {</span>
<span class="nc bnc" id="L479" title="All 70 branches missed.">            oStats.forecastAverageReviews = (ListenerUtil.mutListener.listen(3863) ? (totd.size() &gt;= 0) : (ListenerUtil.mutListener.listen(3862) ? (totd.size() &lt;= 0) : (ListenerUtil.mutListener.listen(3861) ? (totd.size() &gt; 0) : (ListenerUtil.mutListener.listen(3860) ? (totd.size() &lt; 0) : (ListenerUtil.mutListener.listen(3859) ? (totd.size() != 0) : (totd.size() == 0)))))) ? 0 : (ListenerUtil.mutListener.listen(3871) ? ((double) tot % ((ListenerUtil.mutListener.listen(3867) ? (totd.size() % chunk) : (ListenerUtil.mutListener.listen(3866) ? (totd.size() / chunk) : (ListenerUtil.mutListener.listen(3865) ? (totd.size() - chunk) : (ListenerUtil.mutListener.listen(3864) ? (totd.size() + chunk) : (totd.size() * chunk))))))) : (ListenerUtil.mutListener.listen(3870) ? ((double) tot * ((ListenerUtil.mutListener.listen(3867) ? (totd.size() % chunk) : (ListenerUtil.mutListener.listen(3866) ? (totd.size() / chunk) : (ListenerUtil.mutListener.listen(3865) ? (totd.size() - chunk) : (ListenerUtil.mutListener.listen(3864) ? (totd.size() + chunk) : (totd.size() * chunk))))))) : (ListenerUtil.mutListener.listen(3869) ? ((double) tot - ((ListenerUtil.mutListener.listen(3867) ? (totd.size() % chunk) : (ListenerUtil.mutListener.listen(3866) ? (totd.size() / chunk) : (ListenerUtil.mutListener.listen(3865) ? (totd.size() - chunk) : (ListenerUtil.mutListener.listen(3864) ? (totd.size() + chunk) : (totd.size() * chunk))))))) : (ListenerUtil.mutListener.listen(3868) ? ((double) tot + ((ListenerUtil.mutListener.listen(3867) ? (totd.size() % chunk) : (ListenerUtil.mutListener.listen(3866) ? (totd.size() / chunk) : (ListenerUtil.mutListener.listen(3865) ? (totd.size() - chunk) : (ListenerUtil.mutListener.listen(3864) ? (totd.size() + chunk) : (totd.size() * chunk))))))) : ((double) tot / ((ListenerUtil.mutListener.listen(3867) ? (totd.size() % chunk) : (ListenerUtil.mutListener.listen(3866) ? (totd.size() / chunk) : (ListenerUtil.mutListener.listen(3865) ? (totd.size() - chunk) : (ListenerUtil.mutListener.listen(3864) ? (totd.size() + chunk) : (totd.size() * chunk)))))))))));</span>
        }
<span class="nc bnc" id="L481" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3877)) {</span>
<span class="nc bnc" id="L482" title="All 8 branches missed.">            oStats.forecastDueTomorrow = mCol.getDb().queryScalar(&quot;select count() from cards where did in &quot; + _limit() + &quot; and queue in (&quot; + Consts.QUEUE_TYPE_REV + &quot;,&quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot;) &quot; + &quot;and due = ?&quot;, (ListenerUtil.mutListener.listen(3876) ? (mCol.getSched().getToday() % 1) : (ListenerUtil.mutListener.listen(3875) ? (mCol.getSched().getToday() / 1) : (ListenerUtil.mutListener.listen(3874) ? (mCol.getSched().getToday() * 1) : (ListenerUtil.mutListener.listen(3873) ? (mCol.getSched().getToday() - 1) : (mCol.getSched().getToday() + 1))))));</span>
        }
<span class="nc" id="L484">    }</span>

    private List&lt;int[]&gt; _due(Integer start, Integer end, int chunk) {
<span class="nc" id="L487">        String lim = &quot;&quot;;</span>
<span class="nc bnc" id="L488" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3879)) {</span>
<span class="nc bnc" id="L489" title="All 2 branches missed.">            if (start != null) {</span>
<span class="nc bnc" id="L490" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3878)) {</span>
<span class="nc" id="L491">                    lim += String.format(Locale.US, &quot; and due-%d &gt;= %d&quot;, mCol.getSched().getToday(), start);</span>
                }
            }
        }
<span class="nc bnc" id="L495" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(3881)) {</span>
<span class="nc bnc" id="L496" title="All 2 branches missed.">            if (end != null) {</span>
<span class="nc bnc" id="L497" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(3880)) {</span>
<span class="nc" id="L498">                    lim += String.format(Locale.US, &quot; and day &lt; %d&quot;, end);</span>
                }
            }
        }
<span class="nc" id="L502">        List&lt;int[]&gt; d = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L503">        String query = &quot;select (due-&quot; + mCol.getSched().getToday() + &quot;)/&quot; + chunk + &quot; as day,\n&quot; + &quot;sum(case when ivl &lt; 21 then 1 else 0 end), -- yng\n&quot; + &quot;sum(case when ivl &gt;= 21 then 1 else 0 end) -- mtr\n&quot; + &quot;from cards\n&quot; + &quot;where did in &quot; + _limit() + &quot; and queue in (&quot; + Consts.QUEUE_TYPE_REV + &quot;,&quot; + Consts.QUEUE_TYPE_DAY_LEARN_RELEARN + &quot;)\n&quot; + lim + &quot;\n&quot; + &quot;group by day order by day&quot;;</span>
<span class="nc" id="L504">        try (Cursor cur = mCol.getDb().query(query)) {</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(3883)) {</span>
                {
<span class="nc" id="L507">                    long _loopCounter90 = 0;</span>
<span class="nc bnc" id="L508" title="All 2 branches missed.">                    while (cur.moveToNext()) {</span>
<span class="nc" id="L509">                        ListenerUtil.loopListener.listen(&quot;_loopCounter90&quot;, ++_loopCounter90);</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(3882)) {</span>
<span class="nc" id="L511">                            d.add(new int[] { cur.getInt(0), cur.getInt(1), cur.getInt(2) });</span>
                        }
                    }
                }
            }
        }
<span class="nc" id="L517">        return d;</span>
    }

    private String _limit() {
<span class="nc" id="L521">        return Stats.deckLimit(mDeckId, mCol);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>