<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ArrivalsListAdapterStyleB.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">agencyXGoogleDebug</a> &gt; <a href="index.source.html" class="el_package">org.onebusaway.android.ui</a> &gt; <span class="el_source">ArrivalsListAdapterStyleB.java</span></div><h1>ArrivalsListAdapterStyleB.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2012-2017 Paul Watts (paulcwatts@gmail.com),
 * Sean J. Barbeau (sjbarbeau@gmail.com),
 * York Region Transit / VIVA,
 * Microsoft Corporation
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.onebusaway.android.ui;

import android.content.ContentValues;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Paint;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.GradientDrawable;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import androidx.constraintlayout.widget.ConstraintLayout;
import androidx.core.graphics.drawable.DrawableCompat;
import org.onebusaway.android.R;
import org.onebusaway.android.io.elements.ObaArrivalInfo;
import org.onebusaway.android.io.elements.OccupancyState;
import org.onebusaway.android.io.elements.Status;
import org.onebusaway.android.provider.ObaContract;
import org.onebusaway.android.util.ArrivalInfoUtils;
import org.onebusaway.android.util.UIUtils;
import org.onebusaway.util.comparators.AlphanumComparator;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

/**
 * Styles of arrival times used by York Region Transit
 */
public class ArrivalsListAdapterStyleB extends ArrivalsListAdapterBase&lt;CombinedArrivalInfoStyleB&gt; {

    private static final String TAG = &quot;ArrivalsListAdapStyleB&quot;;

<span class="nc" id="L57">    AlphanumComparator mAlphanumComparator = new AlphanumComparator();</span>

    ArrivalsListFragment mFragment;

    public ArrivalsListAdapterStyleB(Context context) {
<span class="nc" id="L62">        super(context, R.layout.arrivals_list_item_style_b);</span>
<span class="nc" id="L63">    }</span>

    public void setFragment(ArrivalsListFragment fragment) {
<span class="nc bnc" id="L66" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1756)) {</span>
<span class="nc" id="L67">            mFragment = fragment;</span>
        }
<span class="nc" id="L69">    }</span>

    /**
     * Sets the data to be used with the adapter
     *
     * @param routesFilter routeIds to filter for
     * @param currentTime  current time in milliseconds
     */
    public void setData(ObaArrivalInfo[] arrivals, ArrayList&lt;String&gt; routesFilter, long currentTime) {
<span class="nc bnc" id="L78" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1788)) {</span>
<span class="nc bnc" id="L79" title="All 2 branches missed.">            if (arrivals != null) {</span>
<span class="nc" id="L80">                ArrayList&lt;ArrivalInfo&gt; list = ArrivalInfoUtils.convertObaArrivalInfo(getContext(), arrivals, routesFilter, currentTime, true);</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1762)) {</span>
                    // Sort list by route and headsign, in that order
<span class="nc" id="L83">                    Collections.sort(list, new Comparator&lt;ArrivalInfo&gt;() {</span>

                        @Override
                        public int compare(ArrivalInfo s1, ArrivalInfo s2) {
<span class="nc" id="L87">                            int routeCompare = mAlphanumComparator.compare(s1.getInfo().getRouteId(), s2.getInfo().getRouteId());</span>
<span class="nc bnc" id="L88" title="All 22 branches missed.">                            if ((ListenerUtil.mutListener.listen(1761) ? (routeCompare &gt;= 0) : (ListenerUtil.mutListener.listen(1760) ? (routeCompare &lt;= 0) : (ListenerUtil.mutListener.listen(1759) ? (routeCompare &gt; 0) : (ListenerUtil.mutListener.listen(1758) ? (routeCompare &lt; 0) : (ListenerUtil.mutListener.listen(1757) ? (routeCompare == 0) : (routeCompare != 0))))))) {</span>
<span class="nc" id="L89">                                return routeCompare;</span>
                            } else {
                                // Compare headsigns when the route is the same
<span class="nc" id="L92">                                return mAlphanumComparator.compare(s1.getInfo().getHeadsign(), s2.getInfo().getHeadsign());</span>
                            }
                        }
                    });
                }
<span class="nc bnc" id="L97" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1787)) {</span>
<span class="nc bnc" id="L98" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(1767) ? (list.size() &gt;= 0) : (ListenerUtil.mutListener.listen(1766) ? (list.size() &lt;= 0) : (ListenerUtil.mutListener.listen(1765) ? (list.size() &lt; 0) : (ListenerUtil.mutListener.listen(1764) ? (list.size() != 0) : (ListenerUtil.mutListener.listen(1763) ? (list.size() == 0) : (list.size() &gt; 0))))))) {</span>
<span class="nc" id="L99">                        ArrayList&lt;CombinedArrivalInfoStyleB&gt; newList = new ArrayList&lt;CombinedArrivalInfoStyleB&gt;();</span>
<span class="nc" id="L100">                        String currentRouteName = null;</span>
<span class="nc" id="L101">                        String currentHeadsign = null;</span>
<span class="nc" id="L102">                        CombinedArrivalInfoStyleB cArrivalInfo = new CombinedArrivalInfoStyleB();</span>
<span class="nc bnc" id="L103" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(1783)) {</span>
                            {
<span class="nc" id="L105">                                long _loopCounter20 = 0;</span>
<span class="nc bnc" id="L106" title="All 22 branches missed.">                                for (int i = 0; (ListenerUtil.mutListener.listen(1782) ? (i &gt;= list.size()) : (ListenerUtil.mutListener.listen(1781) ? (i &lt;= list.size()) : (ListenerUtil.mutListener.listen(1780) ? (i &gt; list.size()) : (ListenerUtil.mutListener.listen(1779) ? (i != list.size()) : (ListenerUtil.mutListener.listen(1778) ? (i == list.size()) : (i &lt; list.size())))))); i++) {</span>
<span class="nc" id="L107">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter20&quot;, ++_loopCounter20);</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(1776)) {</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">                                        if (currentRouteName == null) {</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(1774)) {</span>
                                                // Initialize fields
<span class="nc" id="L112">                                                currentRouteName = list.get(i).getInfo().getRouteId();</span>
                                            }
<span class="nc bnc" id="L114" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(1775)) {</span>
<span class="nc" id="L115">                                                currentHeadsign = list.get(i).getInfo().getHeadsign();</span>
                                            }
                                        } else {
<span class="nc bnc" id="L118" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(1773)) {</span>
<span class="nc bnc" id="L119" title="All 10 branches missed.">                                                if ((ListenerUtil.mutListener.listen(1768) ? (!currentRouteName.equals(list.get(i).getInfo().getRouteId()) &amp;&amp; !currentHeadsign.equals(list.get(i).getInfo().getHeadsign())) : (!currentRouteName.equals(list.get(i).getInfo().getRouteId()) || !currentHeadsign.equals(list.get(i).getInfo().getHeadsign())))) {</span>
<span class="nc bnc" id="L120" title="All 2 branches missed.">                                                    if (!ListenerUtil.mutListener.listen(1769)) {</span>
                                                        // Create a new card
<span class="nc" id="L122">                                                        newList.add(cArrivalInfo);</span>
                                                    }
<span class="nc bnc" id="L124" title="All 2 branches missed.">                                                    if (!ListenerUtil.mutListener.listen(1770)) {</span>
<span class="nc" id="L125">                                                        cArrivalInfo = new CombinedArrivalInfoStyleB();</span>
                                                    }
<span class="nc bnc" id="L127" title="All 2 branches missed.">                                                    if (!ListenerUtil.mutListener.listen(1771)) {</span>
<span class="nc" id="L128">                                                        currentRouteName = list.get(i).getInfo().getRouteId();</span>
                                                    }
<span class="nc bnc" id="L130" title="All 2 branches missed.">                                                    if (!ListenerUtil.mutListener.listen(1772)) {</span>
<span class="nc" id="L131">                                                        currentHeadsign = list.get(i).getInfo().getHeadsign();</span>
                                                    }
                                                }
                                            }
                                        }
                                    }
<span class="nc bnc" id="L137" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(1777)) {</span>
<span class="nc" id="L138">                                        cArrivalInfo.getArrivalInfoList().add(list.get(i));</span>
                                    }
                                }
                            }
                        }
<span class="nc bnc" id="L143" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(1786)) {</span>
<span class="nc bnc" id="L144" title="All 2 branches missed.">                            if (!cArrivalInfo.getArrivalInfoList().isEmpty()) {</span>
<span class="nc bnc" id="L145" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(1784)) {</span>
<span class="nc" id="L146">                                    newList.add(cArrivalInfo);</span>
                                }
<span class="nc bnc" id="L148" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(1785)) {</span>
<span class="nc" id="L149">                                    setData(newList);</span>
                                }
<span class="nc" id="L151">                                return;</span>
                            }
                        }
                    }
                }
            }
        }
<span class="nc bnc" id="L158" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1789)) {</span>
            // If we get this far, we don't have any data to use
<span class="nc" id="L160">            setData(null);</span>
        }
<span class="nc" id="L162">    }</span>

    @Override
    protected void initView(final View view, CombinedArrivalInfoStyleB combinedArrivalInfoStyleB) {
<span class="nc" id="L166">        final ArrivalInfo stopInfo = combinedArrivalInfoStyleB.getArrivalInfoList().get(0);</span>
<span class="nc" id="L167">        final ObaArrivalInfo arrivalInfo = stopInfo.getInfo();</span>
<span class="nc" id="L168">        final Context context = getContext();</span>
<span class="nc" id="L169">        LayoutInflater inflater = LayoutInflater.from(context);</span>
<span class="nc" id="L170">        TextView routeName = view.findViewById(R.id.routeName);</span>
<span class="nc" id="L171">        TextView destination = view.findViewById(R.id.routeDestination);</span>
        // TableLayout that we will fill with TableRows of arrival times
<span class="nc" id="L173">        TableLayout arrivalTimesLayout = view.findViewById(R.id.arrivalTimeLayout);</span>
<span class="nc bnc" id="L174" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1790)) {</span>
<span class="nc" id="L175">            arrivalTimesLayout.removeAllViews();</span>
        }
<span class="nc" id="L177">        Resources r = view.getResources();</span>
<span class="nc" id="L178">        ImageButton starBtn = view.findViewById(R.id.route_star);</span>
<span class="nc bnc" id="L179" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1791)) {</span>
<span class="nc" id="L180">            starBtn.setColorFilter(r.getColor(R.color.theme_primary));</span>
        }
<span class="nc" id="L182">        ImageButton mapImageBtn = view.findViewById(R.id.mapImageBtn);</span>
<span class="nc bnc" id="L183" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1792)) {</span>
<span class="nc" id="L184">            mapImageBtn.setColorFilter(r.getColor(R.color.theme_primary));</span>
        }
<span class="nc" id="L186">        ImageButton routeMoreInfo = view.findViewById(R.id.route_more_info);</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1793)) {</span>
<span class="nc" id="L188">            routeMoreInfo.setColorFilter(r.getColor(R.color.switch_thumb_normal_material_dark));</span>
        }
<span class="nc bnc" id="L190" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1794)) {</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">            starBtn.setImageResource(stopInfo.isRouteAndHeadsignFavorite() ? R.drawable.focus_star_on : R.drawable.focus_star_off);</span>
        }
<span class="nc bnc" id="L193" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1795)) {</span>
<span class="nc" id="L194">            starBtn.setOnClickListener(v -&gt; {</span>
                // Show dialog for setting route favorite
<span class="nc bnc" id="L196" title="All 2 branches missed.">                RouteFavoriteDialogFragment dialog = new RouteFavoriteDialogFragment.Builder(stopInfo.getInfo().getRouteId(), stopInfo.getInfo().getHeadsign()).setRouteShortName(stopInfo.getInfo().getShortName()).setRouteLongName(stopInfo.getInfo().getRouteLongName()).setStopId(stopInfo.getInfo().getStopId()).setFavorite(!stopInfo.isRouteAndHeadsignFavorite()).build();</span>
<span class="nc" id="L197">                dialog.setCallback(savedFavorite -&gt; {</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">                    if (savedFavorite) {</span>
<span class="nc" id="L199">                        mFragment.refreshLocal();</span>
                    }
<span class="nc" id="L201">                });</span>
<span class="nc" id="L202">                dialog.show(mFragment.getFragmentManager(), RouteFavoriteDialogFragment.TAG);</span>
<span class="nc" id="L203">            });</span>
        }
<span class="nc bnc" id="L205" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1796)) {</span>
            // Setup map
<span class="nc" id="L207">            mapImageBtn.setOnClickListener(v -&gt; mFragment.showRouteOnMap(stopInfo));</span>
        }
<span class="nc bnc" id="L209" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1798)) {</span>
            // Setup more
<span class="nc" id="L211">            routeMoreInfo.setOnClickListener(new View.OnClickListener() {</span>

                @Override
                public void onClick(View v) {
<span class="nc bnc" id="L215" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1797)) {</span>
<span class="nc" id="L216">                        mFragment.showListItemMenu(view, stopInfo);</span>
                    }
<span class="nc" id="L218">                }</span>
            });
        }
<span class="nc bnc" id="L221" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1799)) {</span>
<span class="nc" id="L222">            routeName.setText(arrivalInfo.getShortName());</span>
        }
<span class="nc bnc" id="L224" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1800)) {</span>
<span class="nc" id="L225">            destination.setText(UIUtils.formatDisplayText(arrivalInfo.getHeadsign()));</span>
        }
<span class="nc bnc" id="L227" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1887)) {</span>
            {
<span class="nc" id="L229">                long _loopCounter22 = 0;</span>
                // Loop through the arrival times and create the TableRows that contains the data
<span class="nc bnc" id="L231" title="All 22 branches missed.">                for (int i = 0; (ListenerUtil.mutListener.listen(1886) ? (i &gt;= combinedArrivalInfoStyleB.getArrivalInfoList().size()) : (ListenerUtil.mutListener.listen(1885) ? (i &lt;= combinedArrivalInfoStyleB.getArrivalInfoList().size()) : (ListenerUtil.mutListener.listen(1884) ? (i &gt; combinedArrivalInfoStyleB.getArrivalInfoList().size()) : (ListenerUtil.mutListener.listen(1883) ? (i != combinedArrivalInfoStyleB.getArrivalInfoList().size()) : (ListenerUtil.mutListener.listen(1882) ? (i == combinedArrivalInfoStyleB.getArrivalInfoList().size()) : (i &lt; combinedArrivalInfoStyleB.getArrivalInfoList().size())))))); i++) {</span>
<span class="nc" id="L232">                    ListenerUtil.loopListener.listen(&quot;_loopCounter22&quot;, ++_loopCounter22);</span>
<span class="nc" id="L233">                    final ArrivalInfo arrivalRow = combinedArrivalInfoStyleB.getArrivalInfoList().get(i);</span>
<span class="nc" id="L234">                    final ObaArrivalInfo tempArrivalInfo = arrivalRow.getInfo();</span>
<span class="nc" id="L235">                    long scheduledTime = tempArrivalInfo.getScheduledArrivalTime();</span>
                    // Create a new row to be added
<span class="nc" id="L237">                    final TableRow tr = (TableRow) inflater.inflate(R.layout.arrivals_list_tr_template_style_b, null);</span>
                    // Layout and views to inflate from XML templates
                    RelativeLayout layout;
                    ConstraintLayout occupancyView;
                    TextView scheduleView, estimatedView, statusView;
                    View divider;
<span class="nc bnc" id="L243" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(1805) ? (i &gt;= 0) : (ListenerUtil.mutListener.listen(1804) ? (i &lt;= 0) : (ListenerUtil.mutListener.listen(1803) ? (i &gt; 0) : (ListenerUtil.mutListener.listen(1802) ? (i &lt; 0) : (ListenerUtil.mutListener.listen(1801) ? (i != 0) : (i == 0))))))) {</span>
                        // Use larger styled layout/view for next arrival time
<span class="nc" id="L245">                        layout = (RelativeLayout) inflater.inflate(R.layout.arrivals_list_rl_template_style_b_large, null);</span>
<span class="nc" id="L246">                        scheduleView = (TextView) inflater.inflate(R.layout.arrivals_list_tv_template_style_b_schedule_large, null);</span>
<span class="nc" id="L247">                        estimatedView = (TextView) inflater.inflate(R.layout.arrivals_list_tv_template_style_b_estimated_large, null);</span>
<span class="nc" id="L248">                        statusView = (TextView) inflater.inflate(R.layout.arrivals_list_tv_template_style_b_status_large, null);</span>
                    } else {
                        // Use smaller styled layout/view for further out times
<span class="nc" id="L251">                        layout = (RelativeLayout) inflater.inflate(R.layout.arrivals_list_rl_template_style_b_small, null);</span>
<span class="nc" id="L252">                        scheduleView = (TextView) inflater.inflate(R.layout.arrivals_list_tv_template_style_b_schedule_small, null);</span>
<span class="nc" id="L253">                        estimatedView = (TextView) inflater.inflate(R.layout.arrivals_list_tv_template_style_b_estimated_small, null);</span>
<span class="nc" id="L254">                        statusView = (TextView) inflater.inflate(R.layout.arrivals_list_tv_template_style_b_status_small, null);</span>
                    }
<span class="nc" id="L256">                    occupancyView = (ConstraintLayout) inflater.inflate(R.layout.occupancy, null);</span>
<span class="nc bnc" id="L257" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1807)) {</span>
                        // CANCELED trips
<span class="nc bnc" id="L259" title="All 2 branches missed.">                        if (Status.CANCELED.equals(stopInfo.getStatus())) {</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(1806)) {</span>
                                // Strike through the text fields
<span class="nc" id="L262">                                scheduleView.setPaintFlags(Paint.STRIKE_THRU_TEXT_FLAG);</span>
                            }
                        }
                    }
<span class="nc bnc" id="L266" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1812)) {</span>
                        // Occupancy
<span class="nc bnc" id="L268" title="All 2 branches missed.">                        if (stopInfo.getPredictedOccupancy() != null) {</span>
<span class="nc bnc" id="L269" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(1810)) {</span>
                                // Predicted occupancy data
<span class="nc" id="L271">                                UIUtils.setOccupancyVisibilityAndColor(occupancyView, stopInfo.getPredictedOccupancy(), OccupancyState.PREDICTED);</span>
                            }
<span class="nc bnc" id="L273" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(1811)) {</span>
<span class="nc" id="L274">                                UIUtils.setOccupancyContentDescription(occupancyView, stopInfo.getPredictedOccupancy(), OccupancyState.PREDICTED);</span>
                            }
                        } else {
<span class="nc bnc" id="L277" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(1808)) {</span>
                                // Historical occupancy data
<span class="nc" id="L279">                                UIUtils.setOccupancyVisibilityAndColor(occupancyView, stopInfo.getHistoricalOccupancy(), OccupancyState.HISTORICAL);</span>
                            }
<span class="nc bnc" id="L281" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(1809)) {</span>
<span class="nc" id="L282">                                UIUtils.setOccupancyContentDescription(occupancyView, stopInfo.getHistoricalOccupancy(), OccupancyState.HISTORICAL);</span>
                            }
                        }
                    }
<span class="nc bnc" id="L286" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1813)) {</span>
                        // Set arrival times and status in views
<span class="nc" id="L288">                        scheduleView.setText(UIUtils.formatTime(context, scheduledTime));</span>
                    }
<span class="nc bnc" id="L290" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1823)) {</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">                        if (arrivalRow.getPredicted()) {</span>
<span class="nc" id="L292">                            long eta = arrivalRow.getEta();</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(1822)) {</span>
<span class="nc bnc" id="L294" title="All 22 branches missed.">                                if ((ListenerUtil.mutListener.listen(1819) ? (eta &gt;= 0) : (ListenerUtil.mutListener.listen(1818) ? (eta &lt;= 0) : (ListenerUtil.mutListener.listen(1817) ? (eta &gt; 0) : (ListenerUtil.mutListener.listen(1816) ? (eta &lt; 0) : (ListenerUtil.mutListener.listen(1815) ? (eta != 0) : (eta == 0))))))) {</span>
<span class="nc bnc" id="L295" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(1821)) {</span>
<span class="nc" id="L296">                                        estimatedView.setText(R.string.stop_info_eta_now);</span>
                                    }
                                } else {
<span class="nc bnc" id="L299" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(1820)) {</span>
<span class="nc" id="L300">                                        estimatedView.setText(eta + &quot; min&quot;);</span>
                                    }
                                }
                            }
<span class="nc" id="L304">                        } else {</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">                            if (!ListenerUtil.mutListener.listen(1814)) {</span>
<span class="nc" id="L306">                                estimatedView.setText(R.string.stop_info_eta_unknown);</span>
                            }
                        }
                    }
<span class="nc bnc" id="L310" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1824)) {</span>
<span class="nc" id="L311">                        statusView.setText(arrivalRow.getStatusText());</span>
                    }
<span class="nc" id="L313">                    int colorCode = arrivalRow.getColor();</span>
<span class="nc bnc" id="L314" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1825)) {</span>
<span class="nc" id="L315">                        statusView.setBackgroundResource(R.drawable.round_corners_style_b_status);</span>
                    }
<span class="nc" id="L317">                    GradientDrawable d = (GradientDrawable) statusView.getBackground();</span>
<span class="nc bnc" id="L318" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1826)) {</span>
<span class="nc" id="L319">                        d.setColor(context.getResources().getColor(colorCode));</span>
                    }
                    int alpha;
<span class="nc bnc" id="L322" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(1831) ? (i &gt;= 0) : (ListenerUtil.mutListener.listen(1830) ? (i &lt;= 0) : (ListenerUtil.mutListener.listen(1829) ? (i &gt; 0) : (ListenerUtil.mutListener.listen(1828) ? (i &lt; 0) : (ListenerUtil.mutListener.listen(1827) ? (i != 0) : (i == 0))))))) {</span>
                        // X percent transparency
<span class="nc bnc" id="L324" title="All 8 branches missed.">                        alpha = (int) ((ListenerUtil.mutListener.listen(1839) ? (1.0f % 255) : (ListenerUtil.mutListener.listen(1838) ? (1.0f / 255) : (ListenerUtil.mutListener.listen(1837) ? (1.0f - 255) : (ListenerUtil.mutListener.listen(1836) ? (1.0f + 255) : (1.0f * 255))))));</span>
                    } else {
                        // X percent transparency
<span class="nc bnc" id="L327" title="All 8 branches missed.">                        alpha = (int) ((ListenerUtil.mutListener.listen(1835) ? (.35f % 255) : (ListenerUtil.mutListener.listen(1834) ? (.35f / 255) : (ListenerUtil.mutListener.listen(1833) ? (.35f - 255) : (ListenerUtil.mutListener.listen(1832) ? (.35f + 255) : (.35f * 255))))));</span>
                    }
<span class="nc bnc" id="L329" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1840)) {</span>
<span class="nc" id="L330">                        d.setAlpha(alpha);</span>
                    }
<span class="nc bnc" id="L332" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1845)) {</span>
                        // Set text color w/ alpha, but increase it a bit to give text better contrast
<span class="nc bnc" id="L334" title="All 8 branches missed.">                        estimatedView.setTextColor(UIUtils.getTransparentColor(context.getResources().getColor(colorCode), (ListenerUtil.mutListener.listen(1844) ? (alpha % 2) : (ListenerUtil.mutListener.listen(1843) ? (alpha / 2) : (ListenerUtil.mutListener.listen(1842) ? (alpha - 2) : (ListenerUtil.mutListener.listen(1841) ? (alpha + 2) : (alpha * 2)))))));</span>
                    }
                    // Set padding on status view
<span class="nc" id="L337">                    int pSides = UIUtils.dpToPixels(context, 5);</span>
<span class="nc" id="L338">                    int pTopBottom = UIUtils.dpToPixels(context, 2);</span>
<span class="nc bnc" id="L339" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1846)) {</span>
<span class="nc" id="L340">                        statusView.setPadding(pSides, pTopBottom, pSides, pTopBottom);</span>
                    }
<span class="nc bnc" id="L342" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1853)) {</span>
                        {
<span class="nc" id="L344">                            long _loopCounter21 = 0;</span>
                            // Set alpha for occupancy person icons
<span class="nc bnc" id="L346" title="All 22 branches missed.">                            for (int index = 0; (ListenerUtil.mutListener.listen(1852) ? (index &gt;= occupancyView.getChildCount()) : (ListenerUtil.mutListener.listen(1851) ? (index &lt;= occupancyView.getChildCount()) : (ListenerUtil.mutListener.listen(1850) ? (index &gt; occupancyView.getChildCount()) : (ListenerUtil.mutListener.listen(1849) ? (index != occupancyView.getChildCount()) : (ListenerUtil.mutListener.listen(1848) ? (index == occupancyView.getChildCount()) : (index &lt; occupancyView.getChildCount())))))); ++index) {</span>
<span class="nc" id="L347">                                ListenerUtil.loopListener.listen(&quot;_loopCounter21&quot;, ++_loopCounter21);</span>
<span class="nc bnc" id="L348" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(1847)) {</span>
<span class="nc" id="L349">                                    ((ImageView) occupancyView.getChildAt(index)).setAlpha(alpha);</span>
                                }
                            }
                        }
                    }
<span class="nc bnc" id="L354" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1854)) {</span>
                        // Add TextViews to layout
<span class="nc" id="L356">                        layout.addView(scheduleView);</span>
                    }
<span class="nc bnc" id="L358" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1855)) {</span>
<span class="nc" id="L359">                        layout.addView(statusView);</span>
                    }
<span class="nc bnc" id="L361" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1856)) {</span>
<span class="nc" id="L362">                        layout.addView(occupancyView);</span>
                    }
<span class="nc bnc" id="L364" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1857)) {</span>
<span class="nc" id="L365">                        layout.addView(estimatedView);</span>
                    }
                    // Make sure the TextViews align left/center/right of parent relative layout
<span class="nc" id="L368">                    RelativeLayout.LayoutParams params1 = (RelativeLayout.LayoutParams) scheduleView.getLayoutParams();</span>
<span class="nc bnc" id="L369" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1858)) {</span>
<span class="nc" id="L370">                        params1.addRule(RelativeLayout.ALIGN_PARENT_LEFT);</span>
                    }
<span class="nc bnc" id="L372" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1859)) {</span>
<span class="nc" id="L373">                        params1.addRule(RelativeLayout.CENTER_VERTICAL);</span>
                    }
<span class="nc bnc" id="L375" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1860)) {</span>
<span class="nc" id="L376">                        scheduleView.setLayoutParams(params1);</span>
                    }
<span class="nc" id="L378">                    RelativeLayout.LayoutParams params2 = (RelativeLayout.LayoutParams) statusView.getLayoutParams();</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1861)) {</span>
<span class="nc" id="L380">                        params2.addRule(RelativeLayout.CENTER_HORIZONTAL);</span>
                    }
                    // Give status view a little extra margin
<span class="nc" id="L383">                    int p = UIUtils.dpToPixels(context, 3);</span>
<span class="nc bnc" id="L384" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1862)) {</span>
<span class="nc" id="L385">                        params2.setMargins(p, p, p, p);</span>
                    }
<span class="nc bnc" id="L387" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1863)) {</span>
<span class="nc" id="L388">                        statusView.setLayoutParams(params2);</span>
                    }
<span class="nc" id="L390">                    RelativeLayout.LayoutParams params3 = (RelativeLayout.LayoutParams) estimatedView.getLayoutParams();</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1864)) {</span>
<span class="nc" id="L392">                        params3.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);</span>
                    }
<span class="nc bnc" id="L394" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1865)) {</span>
<span class="nc" id="L395">                        params3.addRule(RelativeLayout.CENTER_VERTICAL);</span>
                    }
<span class="nc bnc" id="L397" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1866)) {</span>
<span class="nc" id="L398">                        estimatedView.setLayoutParams(params3);</span>
                    }
<span class="nc" id="L400">                    RelativeLayout.LayoutParams params4 = (RelativeLayout.LayoutParams) occupancyView.getLayoutParams();</span>
<span class="nc bnc" id="L401" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1867)) {</span>
<span class="nc" id="L402">                        params4.addRule(RelativeLayout.CENTER_HORIZONTAL);</span>
                    }
<span class="nc bnc" id="L404" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1868)) {</span>
<span class="nc" id="L405">                        params4.addRule(RelativeLayout.BELOW, statusView.getId());</span>
                    }
<span class="nc bnc" id="L407" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1869)) {</span>
<span class="nc" id="L408">                        params4.setMargins(p, p, p, p);</span>
                    }
<span class="nc bnc" id="L410" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1870)) {</span>
<span class="nc" id="L411">                        occupancyView.setLayoutParams(params4);</span>
                    }
<span class="nc bnc" id="L413" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1871)) {</span>
                        // Add layout to TableRow
<span class="nc" id="L415">                        tr.addView(layout);</span>
                    }
                    // Add the divider, if its not the first row
<span class="nc bnc" id="L418" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(1876) ? (i &gt;= 0) : (ListenerUtil.mutListener.listen(1875) ? (i &lt;= 0) : (ListenerUtil.mutListener.listen(1874) ? (i &gt; 0) : (ListenerUtil.mutListener.listen(1873) ? (i &lt; 0) : (ListenerUtil.mutListener.listen(1872) ? (i == 0) : (i != 0))))))) {</span>
<span class="nc" id="L419">                        int dividerHeight = UIUtils.dpToPixels(context, 1);</span>
<span class="nc" id="L420">                        divider = inflater.inflate(R.layout.arrivals_list_divider_template_style_b, null);</span>
<span class="nc bnc" id="L421" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(1877)) {</span>
<span class="nc" id="L422">                            divider.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, dividerHeight));</span>
                        }
<span class="nc bnc" id="L424" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(1878)) {</span>
<span class="nc" id="L425">                            arrivalTimesLayout.addView(divider);</span>
                        }
                    }
<span class="nc bnc" id="L428" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1880)) {</span>
                        // Add click listener
<span class="nc" id="L430">                        tr.setOnClickListener(new View.OnClickListener() {</span>

                            @Override
                            public void onClick(View v) {
<span class="nc bnc" id="L434" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(1879)) {</span>
<span class="nc" id="L435">                                    mFragment.showListItemMenu(tr, arrivalRow);</span>
                                }
<span class="nc" id="L437">                            }</span>
                        });
                    }
<span class="nc bnc" id="L440" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(1881)) {</span>
                        // Add TableRow to container layout
<span class="nc" id="L442">                        arrivalTimesLayout.addView(tr, new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));</span>
                    }
                }
            }
        }
        // Show or hide reminder for this trip
<span class="nc" id="L448">        ContentValues values = null;</span>
<span class="nc bnc" id="L449" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1889)) {</span>
<span class="nc bnc" id="L450" title="All 2 branches missed.">            if (mTripsForStop != null) {</span>
<span class="nc bnc" id="L451" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1888)) {</span>
<span class="nc" id="L452">                    values = mTripsForStop.getValues(arrivalInfo.getTripId());</span>
                }
            }
        }
<span class="nc bnc" id="L456" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1903)) {</span>
<span class="nc bnc" id="L457" title="All 2 branches missed.">            if (values != null) {</span>
<span class="nc" id="L458">                String reminderName = values.getAsString(ObaContract.Trips.NAME);</span>
<span class="nc" id="L459">                TextView reminder = (TextView) view.findViewById(R.id.reminder);</span>
<span class="nc bnc" id="L460" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1897)) {</span>
<span class="nc bnc" id="L461" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(1895) ? (reminderName.length() &gt;= 0) : (ListenerUtil.mutListener.listen(1894) ? (reminderName.length() &lt;= 0) : (ListenerUtil.mutListener.listen(1893) ? (reminderName.length() &gt; 0) : (ListenerUtil.mutListener.listen(1892) ? (reminderName.length() &lt; 0) : (ListenerUtil.mutListener.listen(1891) ? (reminderName.length() != 0) : (reminderName.length() == 0))))))) {</span>
<span class="nc bnc" id="L462" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(1896)) {</span>
<span class="nc" id="L463">                            reminderName = context.getString(R.string.trip_info_noname);</span>
                        }
                    }
                }
<span class="nc bnc" id="L467" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1898)) {</span>
<span class="nc" id="L468">                    reminder.setText(reminderName);</span>
                }
<span class="nc" id="L470">                Drawable d = reminder.getCompoundDrawables()[0];</span>
<span class="nc bnc" id="L471" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1899)) {</span>
<span class="nc" id="L472">                    d = DrawableCompat.wrap(d);</span>
                }
<span class="nc bnc" id="L474" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1900)) {</span>
<span class="nc" id="L475">                    DrawableCompat.setTint(d.mutate(), view.getResources().getColor(R.color.theme_primary));</span>
                }
<span class="nc bnc" id="L477" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1901)) {</span>
<span class="nc" id="L478">                    reminder.setCompoundDrawables(d, null, null, null);</span>
                }
<span class="nc bnc" id="L480" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1902)) {</span>
<span class="nc" id="L481">                    reminder.setVisibility(View.VISIBLE);</span>
                }
<span class="nc" id="L483">            } else {</span>
                // this view.
<span class="nc" id="L485">                View reminder = view.findViewById(R.id.reminder);</span>
<span class="nc bnc" id="L486" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1890)) {</span>
<span class="nc" id="L487">                    reminder.setVisibility(View.GONE);</span>
                }
            }
        }
<span class="nc" id="L491">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.2.0</div></body></html>