<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TabListener.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">agencyXGoogleDebug</a> &gt; <a href="index.source.html" class="el_package">org.onebusaway.android.ui</a> &gt; <span class="el_source">TabListener.java</span></div><h1>TabListener.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2012 Paul Watts (paulcwatts@gmail.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.onebusaway.android.ui;

import android.os.Bundle;
import androidx.appcompat.app.ActionBar;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentActivity;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

/**
 * Copied from APIDemos and ported to the Sherlock
 *
 * @author paulw
 */
public class TabListener&lt;T extends Fragment&gt; implements ActionBar.TabListener {

    private final FragmentActivity mActivity;

    private final String mTag;

    private final Class&lt;T&gt; mClass;

    private final Bundle mArgs;

    private Fragment mFragment;

    public TabListener(FragmentActivity activity, String tag, Class&lt;T&gt; clz) {
<span class="nc" id="L44">        this(activity, tag, clz, null);</span>
<span class="nc" id="L45">    }</span>

<span class="nc" id="L47">    public TabListener(FragmentActivity activity, String tag, Class&lt;T&gt; clz, Bundle args) {</span>
<span class="nc" id="L48">        mActivity = activity;</span>
<span class="nc" id="L49">        mTag = tag;</span>
<span class="nc" id="L50">        mClass = clz;</span>
<span class="nc" id="L51">        mArgs = args;</span>
        // initial state is that a tab isn't shown.
<span class="nc" id="L53">        FragmentManager fm = mActivity.getSupportFragmentManager();</span>
<span class="nc bnc" id="L54" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(989)) {</span>
<span class="nc" id="L55">            mFragment = fm.findFragmentByTag(mTag);</span>
        }
<span class="nc bnc" id="L57" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(993)) {</span>
<span class="nc bnc" id="L58" title="All 10 branches missed.">            if ((ListenerUtil.mutListener.listen(990) ? (mFragment != null || !mFragment.isDetached()) : (mFragment != null &amp;&amp; !mFragment.isDetached()))) {</span>
<span class="nc" id="L59">                FragmentTransaction ft = fm.beginTransaction();</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(991)) {</span>
<span class="nc" id="L61">                    ft.detach(mFragment);</span>
                }
<span class="nc bnc" id="L63" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(992)) {</span>
<span class="nc" id="L64">                    ft.commit();</span>
                }
            }
        }
<span class="nc" id="L68">    }</span>

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction unused) {
        // See: http://groups.google.com/group/actionbarsherlock/browse_thread/thread/89eac58c13fe1ae0/8d6db0ba248e53d9?show_docid=8d6db0ba248e53d9
<span class="nc" id="L72">        FragmentManager fm = mActivity.getSupportFragmentManager();</span>
<span class="nc" id="L73">        FragmentTransaction ft = fm.beginTransaction();</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(997)) {</span>
<span class="nc bnc" id="L75" title="All 2 branches missed.">            if (mFragment == null) {</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(995)) {</span>
<span class="nc" id="L77">                    mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);</span>
                }
<span class="nc bnc" id="L79" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(996)) {</span>
<span class="nc" id="L80">                    ft.add(android.R.id.content, mFragment, mTag);</span>
                }
            } else {
<span class="nc bnc" id="L83" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(994)) {</span>
<span class="nc" id="L84">                    ft.attach(mFragment);</span>
                }
            }
        }
<span class="nc bnc" id="L88" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(998)) {</span>
<span class="nc" id="L89">            ft.commit();</span>
        }
<span class="nc" id="L91">    }</span>

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction unused) {
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(1001)) {</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">            if (mFragment != null) {</span>
<span class="nc" id="L96">                FragmentManager fm = mActivity.getSupportFragmentManager();</span>
<span class="nc" id="L97">                FragmentTransaction ft = fm.beginTransaction();</span>
<span class="nc bnc" id="L98" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(999)) {</span>
<span class="nc" id="L99">                    ft.detach(mFragment);</span>
                }
<span class="nc bnc" id="L101" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(1000)) {</span>
<span class="nc" id="L102">                    ft.commit();</span>
                }
            }
        }
<span class="nc" id="L106">    }</span>

    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
<span class="nc" id="L109">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.2.0</div></body></html>