<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TabListener.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">obaGoogleDebug</a> &gt; <a href="index.source.html" class="el_package">org.onebusaway.android.ui</a> &gt; <span class="el_source">TabListener.java</span></div><h1>TabListener.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2012 Paul Watts (paulcwatts@gmail.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.onebusaway.android.ui;

import android.os.Bundle;

import androidx.appcompat.app.ActionBar;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentActivity;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentTransaction;


/**
 * Copied from APIDemos and ported to the Sherlock
 *
 * @author paulw
 */
public class TabListener&lt;T extends Fragment&gt; implements ActionBar.TabListener {

    private final FragmentActivity mActivity;

    private final String mTag;

    private final Class&lt;T&gt; mClass;

    private final Bundle mArgs;

    private Fragment mFragment;

    public TabListener(FragmentActivity activity, String tag, Class&lt;T&gt; clz) {
<span class="nc" id="L45">        this(activity, tag, clz, null);</span>
<span class="nc" id="L46">    }</span>

<span class="nc" id="L48">    public TabListener(FragmentActivity activity, String tag, Class&lt;T&gt; clz, Bundle args) {</span>
<span class="nc" id="L49">        mActivity = activity;</span>
<span class="nc" id="L50">        mTag = tag;</span>
<span class="nc" id="L51">        mClass = clz;</span>
<span class="nc" id="L52">        mArgs = args;</span>

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
<span class="nc" id="L57">        FragmentManager fm = mActivity.getSupportFragmentManager();</span>
<span class="nc" id="L58">        mFragment = fm.findFragmentByTag(mTag);</span>
<span class="nc bnc" id="L59" title="All 4 branches missed.">        if (mFragment != null &amp;&amp; !mFragment.isDetached()) {</span>
<span class="nc" id="L60">            FragmentTransaction ft = fm.beginTransaction();</span>
<span class="nc" id="L61">            ft.detach(mFragment);</span>
<span class="nc" id="L62">            ft.commit();</span>
        }
<span class="nc" id="L64">    }</span>

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction unused) {
        // The parameter is always null
        // See: http://groups.google.com/group/actionbarsherlock/browse_thread/thread/89eac58c13fe1ae0/8d6db0ba248e53d9?show_docid=8d6db0ba248e53d9
<span class="nc" id="L69">        FragmentManager fm = mActivity.getSupportFragmentManager();</span>
<span class="nc" id="L70">        FragmentTransaction ft = fm.beginTransaction();</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">        if (mFragment == null) {</span>
<span class="nc" id="L72">            mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);</span>
<span class="nc" id="L73">            ft.add(android.R.id.content, mFragment, mTag);</span>
        } else {
<span class="nc" id="L75">            ft.attach(mFragment);</span>
        }
<span class="nc" id="L77">        ft.commit();</span>
<span class="nc" id="L78">    }</span>

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction unused) {
<span class="nc bnc" id="L81" title="All 2 branches missed.">        if (mFragment != null) {</span>
<span class="nc" id="L82">            FragmentManager fm = mActivity.getSupportFragmentManager();</span>
<span class="nc" id="L83">            FragmentTransaction ft = fm.beginTransaction();</span>

<span class="nc" id="L85">            ft.detach(mFragment);</span>

<span class="nc" id="L87">            ft.commit();</span>
        }
<span class="nc" id="L89">    }</span>

    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
<span class="nc" id="L92">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.2.0</div></body></html>