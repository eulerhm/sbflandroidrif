<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ConversionUtils.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">agencyXGoogleDebug</a> &gt; <a href="index.source.html" class="el_package">org.onebusaway.android.directions.util</a> &gt; <span class="el_source">ConversionUtils.java</span></div><h1>ConversionUtils.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2012 University of South Florida
 * 
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *        http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and 
 * limitations under the License.
 */
package org.onebusaway.android.directions.util;

import android.content.Context;
import android.preference.PreferenceManager;
import android.text.SpannableString;
import android.text.TextUtils;
import android.text.style.ForegroundColorSpan;
import android.text.style.StrikethroughSpan;
import android.util.Log;
import org.onebusaway.android.R;
import org.onebusaway.android.util.ArrivalInfoUtils;
import org.onebusaway.android.util.PreferenceUtils;
import org.opentripplanner.api.model.Itinerary;
import org.opentripplanner.api.model.Leg;
import org.opentripplanner.routing.core.TraverseMode;
import java.text.DateFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Calendar;
import java.util.Collections;
import java.util.Date;
import java.util.List;
import java.util.TimeZone;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

<span class="nc" id="L41">public class ConversionUtils {</span>

    private static final String TAG = &quot;ConversionUtils&quot;;

    private static final double FEET_PER_METER = 3.281;

    /**
     * Given a date string from an OTP server, parse it into a java Date.
     *
     * @param text string from OTP
     * @return parsed date object, or null if there is an error with parsing.
     */
    public static Date parseOtpDate(String text) {
        try {
<span class="nc" id="L55">            long ms = Long.parseLong(text);</span>
<span class="nc" id="L56">            return new Date(ms);</span>
<span class="nc" id="L57">        } catch (NumberFormatException ex) {</span>
<span class="nc bnc" id="L58" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(5758)) {</span>
<span class="nc" id="L59">                Log.e(TAG, &quot;Error processing OTP response time text: &quot; + text);</span>
            }
<span class="nc" id="L61">            return null;</span>
        }
    }

    /**
     * Given start time and end time strings, compute the delta between them.
     * Strings should be in the OTP server return format, specified in OTPConstants
     *
     * @param startTimeText start time
     * @param endTimeText end time
     * @param applicationContext context to look up resources
     * @return duration
     */
    public static double getDuration(String startTimeText, String endTimeText, Context applicationContext) {
<span class="nc" id="L75">        double duration = 0;</span>
<span class="nc" id="L76">        Date startTime = parseOtpDate(startTimeText);</span>
<span class="nc" id="L77">        Date endTime = parseOtpDate(endTimeText);</span>
<span class="nc bnc" id="L78" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5775)) {</span>
<span class="nc bnc" id="L79" title="All 10 branches missed.">            if ((ListenerUtil.mutListener.listen(5759) ? (startTime != null || endTime != null) : (startTime != null &amp;&amp; endTime != null))) {</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5774)) {</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">                    if (PreferenceManager.getDefaultSharedPreferences(applicationContext).getInt(OTPConstants.PREFERENCE_KEY_API_VERSION, OTPConstants.API_VERSION_V1) == OTPConstants.API_VERSION_V1) {</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5773)) {</span>
<span class="nc bnc" id="L83" title="All 8 branches missed.">                            duration = ((ListenerUtil.mutListener.listen(5772) ? (endTime.getTime() % startTime.getTime()) : (ListenerUtil.mutListener.listen(5771) ? (endTime.getTime() / startTime.getTime()) : (ListenerUtil.mutListener.listen(5770) ? (endTime.getTime() * startTime.getTime()) : (ListenerUtil.mutListener.listen(5769) ? (endTime.getTime() + startTime.getTime()) : (endTime.getTime() - startTime.getTime()))))));</span>
                        }
                    } else {
<span class="nc bnc" id="L86" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5768)) {</span>
<span class="nc bnc" id="L87" title="All 48 branches missed.">                            duration = (ListenerUtil.mutListener.listen(5767) ? (((ListenerUtil.mutListener.listen(5763) ? (endTime.getTime() % startTime.getTime()) : (ListenerUtil.mutListener.listen(5762) ? (endTime.getTime() / startTime.getTime()) : (ListenerUtil.mutListener.listen(5761) ? (endTime.getTime() * startTime.getTime()) : (ListenerUtil.mutListener.listen(5760) ? (endTime.getTime() + startTime.getTime()) : (endTime.getTime() - startTime.getTime())))))) % 1000) : (ListenerUtil.mutListener.listen(5766) ? (((ListenerUtil.mutListener.listen(5763) ? (endTime.getTime() % startTime.getTime()) : (ListenerUtil.mutListener.listen(5762) ? (endTime.getTime() / startTime.getTime()) : (ListenerUtil.mutListener.listen(5761) ? (endTime.getTime() * startTime.getTime()) : (ListenerUtil.mutListener.listen(5760) ? (endTime.getTime() + startTime.getTime()) : (endTime.getTime() - startTime.getTime())))))) * 1000) : (ListenerUtil.mutListener.listen(5765) ? (((ListenerUtil.mutListener.listen(5763) ? (endTime.getTime() % startTime.getTime()) : (ListenerUtil.mutListener.listen(5762) ? (endTime.getTime() / startTime.getTime()) : (ListenerUtil.mutListener.listen(5761) ? (endTime.getTime() * startTime.getTime()) : (ListenerUtil.mutListener.listen(5760) ? (endTime.getTime() + startTime.getTime()) : (endTime.getTime() - startTime.getTime())))))) - 1000) : (ListenerUtil.mutListener.listen(5764) ? (((ListenerUtil.mutListener.listen(5763) ? (endTime.getTime() % startTime.getTime()) : (ListenerUtil.mutListener.listen(5762) ? (endTime.getTime() / startTime.getTime()) : (ListenerUtil.mutListener.listen(5761) ? (endTime.getTime() * startTime.getTime()) : (ListenerUtil.mutListener.listen(5760) ? (endTime.getTime() + startTime.getTime()) : (endTime.getTime() - startTime.getTime())))))) + 1000) : (((ListenerUtil.mutListener.listen(5763) ? (endTime.getTime() % startTime.getTime()) : (ListenerUtil.mutListener.listen(5762) ? (endTime.getTime() / startTime.getTime()) : (ListenerUtil.mutListener.listen(5761) ? (endTime.getTime() * startTime.getTime()) : (ListenerUtil.mutListener.listen(5760) ? (endTime.getTime() + startTime.getTime()) : (endTime.getTime() - startTime.getTime())))))) / 1000)))));</span>
                        }
                    }
                }
            }
        }
<span class="nc" id="L93">        return duration;</span>
    }

    /**
     * Return a formatted String for a distance. Should be in proper units according to
     * preferences (either metric or imperial).
     *
     * @param meters distance in meters
     * @param applicationContext context to look up resources
     * @return formatted string of distance
     */
    public static String getFormattedDistance(Double meters, Context applicationContext) {
<span class="nc" id="L105">        String text = &quot;&quot;;</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5806)) {</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">            if (PreferenceUtils.getUnitsAreMetricFromPreferences(applicationContext)) {</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5805)) {</span>
<span class="nc bnc" id="L109" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(5797) ? (meters &gt;= 1000) : (ListenerUtil.mutListener.listen(5796) ? (meters &lt;= 1000) : (ListenerUtil.mutListener.listen(5795) ? (meters &gt; 1000) : (ListenerUtil.mutListener.listen(5794) ? (meters != 1000) : (ListenerUtil.mutListener.listen(5793) ? (meters == 1000) : (meters &lt; 1000))))))) {</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5804)) {</span>
<span class="nc" id="L111">                            text += String.format(OTPConstants.FORMAT_DISTANCE_METERS, meters) + &quot; &quot; + applicationContext.getResources().getString(R.string.meters_abbreviation);</span>
                        }
                    } else {
<span class="nc bnc" id="L114" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5802)) {</span>
<span class="nc bnc" id="L115" title="All 8 branches missed.">                            meters = (ListenerUtil.mutListener.listen(5801) ? (meters % 1000) : (ListenerUtil.mutListener.listen(5800) ? (meters * 1000) : (ListenerUtil.mutListener.listen(5799) ? (meters - 1000) : (ListenerUtil.mutListener.listen(5798) ? (meters + 1000) : (meters / 1000)))));</span>
                        }
<span class="nc bnc" id="L117" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5803)) {</span>
<span class="nc" id="L118">                            text += String.format(OTPConstants.FORMAT_DISTANCE_KILOMETERS, meters) + &quot; &quot; + applicationContext.getResources().getString(R.string.kilometers_abbreviation);</span>
                        }
                    }
                }
            } else {
<span class="nc bnc" id="L123" title="All 8 branches missed.">                double feet = (ListenerUtil.mutListener.listen(5779) ? (meters % 3.281) : (ListenerUtil.mutListener.listen(5778) ? (meters / 3.281) : (ListenerUtil.mutListener.listen(5777) ? (meters - 3.281) : (ListenerUtil.mutListener.listen(5776) ? (meters + 3.281) : (meters * 3.281)))));</span>
<span class="nc bnc" id="L124" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5792)) {</span>
<span class="nc bnc" id="L125" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(5784) ? (feet &gt;= 1000) : (ListenerUtil.mutListener.listen(5783) ? (feet &lt;= 1000) : (ListenerUtil.mutListener.listen(5782) ? (feet &gt; 1000) : (ListenerUtil.mutListener.listen(5781) ? (feet != 1000) : (ListenerUtil.mutListener.listen(5780) ? (feet == 1000) : (feet &lt; 1000))))))) {</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5791)) {</span>
<span class="nc" id="L127">                            text += String.format(OTPConstants.FORMAT_DISTANCE_METERS, feet) + &quot; &quot; + applicationContext.getResources().getString(R.string.feet_abbreviation);</span>
                        }
                    } else {
<span class="nc bnc" id="L130" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5789)) {</span>
<span class="nc bnc" id="L131" title="All 8 branches missed.">                            feet = (ListenerUtil.mutListener.listen(5788) ? (feet % 5280) : (ListenerUtil.mutListener.listen(5787) ? (feet * 5280) : (ListenerUtil.mutListener.listen(5786) ? (feet - 5280) : (ListenerUtil.mutListener.listen(5785) ? (feet + 5280) : (feet / 5280)))));</span>
                        }
<span class="nc bnc" id="L133" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5790)) {</span>
<span class="nc" id="L134">                            text += String.format(OTPConstants.FORMAT_DISTANCE_KILOMETERS, feet) + &quot; &quot; + applicationContext.getResources().getString(R.string.miles_abbreviation);</span>
                        }
                    }
                }
            }
        }
<span class="nc" id="L140">        return text;</span>
    }

    /**
     * Get a formatted string for a duration.
     *
     * @param sec duration in seconds
     * @param applicationContext context to look up resources
     * @return formatted duration string
     */
    public static String getFormattedDurationText(long sec, Context applicationContext) {
<span class="nc" id="L151">        String text = &quot;&quot;;</span>
<span class="nc bnc" id="L152" title="All 8 branches missed.">        long h = (ListenerUtil.mutListener.listen(5810) ? (sec % 3600) : (ListenerUtil.mutListener.listen(5809) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5808) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5807) ? (sec + 3600) : (sec / 3600)))));</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5816)) {</span>
<span class="nc bnc" id="L154" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5815) ? (h &lt;= 24) : (ListenerUtil.mutListener.listen(5814) ? (h &gt; 24) : (ListenerUtil.mutListener.listen(5813) ? (h &lt; 24) : (ListenerUtil.mutListener.listen(5812) ? (h != 24) : (ListenerUtil.mutListener.listen(5811) ? (h == 24) : (h &gt;= 24))))))) {</span>
<span class="nc" id="L155">                return null;</span>
            }
        }
<span class="nc bnc" id="L158" title="All 48 branches missed.">        long m = (ListenerUtil.mutListener.listen(5824) ? (((ListenerUtil.mutListener.listen(5820) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5819) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5818) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5817) ? (sec + 3600) : (sec % 3600)))))) % 60) : (ListenerUtil.mutListener.listen(5823) ? (((ListenerUtil.mutListener.listen(5820) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5819) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5818) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5817) ? (sec + 3600) : (sec % 3600)))))) * 60) : (ListenerUtil.mutListener.listen(5822) ? (((ListenerUtil.mutListener.listen(5820) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5819) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5818) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5817) ? (sec + 3600) : (sec % 3600)))))) - 60) : (ListenerUtil.mutListener.listen(5821) ? (((ListenerUtil.mutListener.listen(5820) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5819) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5818) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5817) ? (sec + 3600) : (sec % 3600)))))) + 60) : (((ListenerUtil.mutListener.listen(5820) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5819) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5818) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5817) ? (sec + 3600) : (sec % 3600)))))) / 60)))));</span>
<span class="nc bnc" id="L159" title="All 48 branches missed.">        long s = (ListenerUtil.mutListener.listen(5832) ? (((ListenerUtil.mutListener.listen(5828) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5827) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5826) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5825) ? (sec + 3600) : (sec % 3600)))))) / 60) : (ListenerUtil.mutListener.listen(5831) ? (((ListenerUtil.mutListener.listen(5828) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5827) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5826) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5825) ? (sec + 3600) : (sec % 3600)))))) * 60) : (ListenerUtil.mutListener.listen(5830) ? (((ListenerUtil.mutListener.listen(5828) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5827) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5826) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5825) ? (sec + 3600) : (sec % 3600)))))) - 60) : (ListenerUtil.mutListener.listen(5829) ? (((ListenerUtil.mutListener.listen(5828) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5827) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5826) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5825) ? (sec + 3600) : (sec % 3600)))))) + 60) : (((ListenerUtil.mutListener.listen(5828) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5827) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5826) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5825) ? (sec + 3600) : (sec % 3600)))))) % 60)))));</span>
<span class="nc bnc" id="L160" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5839)) {</span>
<span class="nc bnc" id="L161" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5837) ? (h &gt;= 0) : (ListenerUtil.mutListener.listen(5836) ? (h &lt;= 0) : (ListenerUtil.mutListener.listen(5835) ? (h &lt; 0) : (ListenerUtil.mutListener.listen(5834) ? (h != 0) : (ListenerUtil.mutListener.listen(5833) ? (h == 0) : (h &gt; 0))))))) {</span>
<span class="nc bnc" id="L162" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5838)) {</span>
<span class="nc" id="L163">                    text += Long.toString(h) + applicationContext.getResources().getString(R.string.hours_abbreviation);</span>
                }
            }
        }
<span class="nc bnc" id="L167" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5840)) {</span>
<span class="nc" id="L168">            text += Long.toString(m) + applicationContext.getResources().getString(R.string.minutes_abbreviation);</span>
        }
<span class="nc bnc" id="L170" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5841)) {</span>
<span class="nc" id="L171">            text += Long.toString(s) + applicationContext.getResources().getString(R.string.seconds_abbrevation);</span>
        }
<span class="nc" id="L173">        return text;</span>
    }

    /**
     * Get duration text but disallow &quot;seconds&quot; units.
     *
     * @param sec duration in seconds
     * @param longFormat true for long units (&quot;minutes&quot;), false for short units (&quot;min&quot;)
     * @param applicationContext context to look up resources
     * @return formatted duration text
     */
    public static String getFormattedDurationTextNoSeconds(long sec, boolean longFormat, Context applicationContext) {
<span class="nc" id="L185">        String text = &quot;&quot;;</span>
<span class="nc bnc" id="L186" title="All 8 branches missed.">        long h = (ListenerUtil.mutListener.listen(5845) ? (sec % 3600) : (ListenerUtil.mutListener.listen(5844) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5843) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5842) ? (sec + 3600) : (sec / 3600)))));</span>
<span class="nc bnc" id="L187" title="All 48 branches missed.">        long m = (ListenerUtil.mutListener.listen(5853) ? (((ListenerUtil.mutListener.listen(5849) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5848) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5847) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5846) ? (sec + 3600) : (sec % 3600)))))) % 60) : (ListenerUtil.mutListener.listen(5852) ? (((ListenerUtil.mutListener.listen(5849) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5848) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5847) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5846) ? (sec + 3600) : (sec % 3600)))))) * 60) : (ListenerUtil.mutListener.listen(5851) ? (((ListenerUtil.mutListener.listen(5849) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5848) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5847) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5846) ? (sec + 3600) : (sec % 3600)))))) - 60) : (ListenerUtil.mutListener.listen(5850) ? (((ListenerUtil.mutListener.listen(5849) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5848) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5847) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5846) ? (sec + 3600) : (sec % 3600)))))) + 60) : (((ListenerUtil.mutListener.listen(5849) ? (sec / 3600) : (ListenerUtil.mutListener.listen(5848) ? (sec * 3600) : (ListenerUtil.mutListener.listen(5847) ? (sec - 3600) : (ListenerUtil.mutListener.listen(5846) ? (sec + 3600) : (sec % 3600)))))) / 60)))));</span>
<span class="nc" id="L188">        String longMinutes = applicationContext.getResources().getString(R.string.minutes_full);</span>
<span class="nc" id="L189">        String longMinutesSingular = applicationContext.getResources().getString(R.string.minutes_abbreviation);</span>
<span class="nc" id="L190">        String shortMinutes = applicationContext.getResources().getString(R.string.minutes_abbreviation);</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5856)) {</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">            if (longFormat) {</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5854)) {</span>
<span class="nc" id="L194">                    longMinutes = applicationContext.getResources().getString(R.string.minutes_full);</span>
                }
<span class="nc bnc" id="L196" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5855)) {</span>
<span class="nc" id="L197">                    longMinutesSingular = applicationContext.getResources().getString(R.string.minute_singular);</span>
                }
            }
        }
<span class="nc" id="L201">        String shortHours = applicationContext.getResources().getString(R.string.hours_abbreviation);</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5884)) {</span>
<span class="nc bnc" id="L203" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5861) ? (h &gt;= 0) : (ListenerUtil.mutListener.listen(5860) ? (h &lt;= 0) : (ListenerUtil.mutListener.listen(5859) ? (h &lt; 0) : (ListenerUtil.mutListener.listen(5858) ? (h != 0) : (ListenerUtil.mutListener.listen(5857) ? (h == 0) : (h &gt; 0))))))) {</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5882)) {</span>
<span class="nc" id="L205">                    text += Long.toString(h) + shortHours;</span>
                }
<span class="nc bnc" id="L207" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5883)) {</span>
<span class="nc" id="L208">                    text += &quot; &quot; + Long.toString(m) + shortMinutes;</span>
                }
            } else {
<span class="nc bnc" id="L211" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5881)) {</span>
<span class="nc bnc" id="L212" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(5866) ? (m &gt;= 0) : (ListenerUtil.mutListener.listen(5865) ? (m &lt;= 0) : (ListenerUtil.mutListener.listen(5864) ? (m &gt; 0) : (ListenerUtil.mutListener.listen(5863) ? (m &lt; 0) : (ListenerUtil.mutListener.listen(5862) ? (m != 0) : (m == 0))))))) {</span>
<span class="nc bnc" id="L213" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5880)) {</span>
<span class="nc" id="L214">                            text += &quot;&lt; 1 &quot; + longMinutes;</span>
                        }
<span class="nc bnc" id="L216" title="All 90 branches missed.">                    } else if ((ListenerUtil.mutListener.listen(5877) ? ((ListenerUtil.mutListener.listen(5871) ? (m &gt;= 1) : (ListenerUtil.mutListener.listen(5870) ? (m &lt;= 1) : (ListenerUtil.mutListener.listen(5869) ? (m &gt; 1) : (ListenerUtil.mutListener.listen(5868) ? (m &lt; 1) : (ListenerUtil.mutListener.listen(5867) ? (m != 1) : (m == 1)))))) &amp;&amp; (ListenerUtil.mutListener.listen(5876) ? (m &gt;= -1) : (ListenerUtil.mutListener.listen(5875) ? (m &lt;= -1) : (ListenerUtil.mutListener.listen(5874) ? (m &gt; -1) : (ListenerUtil.mutListener.listen(5873) ? (m &lt; -1) : (ListenerUtil.mutListener.listen(5872) ? (m != -1) : (m == -1))))))) : ((ListenerUtil.mutListener.listen(5871) ? (m &gt;= 1) : (ListenerUtil.mutListener.listen(5870) ? (m &lt;= 1) : (ListenerUtil.mutListener.listen(5869) ? (m &gt; 1) : (ListenerUtil.mutListener.listen(5868) ? (m &lt; 1) : (ListenerUtil.mutListener.listen(5867) ? (m != 1) : (m == 1)))))) || (ListenerUtil.mutListener.listen(5876) ? (m &gt;= -1) : (ListenerUtil.mutListener.listen(5875) ? (m &lt;= -1) : (ListenerUtil.mutListener.listen(5874) ? (m &gt; -1) : (ListenerUtil.mutListener.listen(5873) ? (m &lt; -1) : (ListenerUtil.mutListener.listen(5872) ? (m != -1) : (m == -1))))))))) {</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5879)) {</span>
<span class="nc" id="L218">                            text += Long.toString(m) + &quot; &quot; + longMinutesSingular;</span>
                        }
                    } else {
<span class="nc bnc" id="L221" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5878)) {</span>
<span class="nc" id="L222">                            text += Long.toString(m) + &quot; &quot; + longMinutes;</span>
                        }
                    }
                }
            }
        }
<span class="nc" id="L228">        return text;</span>
    }

    public static List&lt;Itinerary&gt; fixTimezoneOffsets(List&lt;Itinerary&gt; itineraries, boolean useDeviceTimezone) {
<span class="nc" id="L232">        int agencyTimeZoneOffset = 0;</span>
<span class="nc" id="L233">        boolean containsTransitLegs = false;</span>
<span class="nc bnc" id="L234" title="All 10 branches missed.">        if ((ListenerUtil.mutListener.listen(5885) ? ((itineraries != null) || !itineraries.isEmpty()) : ((itineraries != null) &amp;&amp; !itineraries.isEmpty()))) {</span>
<span class="nc" id="L235">            ArrayList&lt;Itinerary&gt; itinerariesFixed = new ArrayList&lt;Itinerary&gt;(itineraries);</span>
<span class="nc bnc" id="L236" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(5893)) {</span>
                {
<span class="nc" id="L238">                    long _loopCounter56 = 0;</span>
<span class="nc bnc" id="L239" title="All 2 branches missed.">                    for (Itinerary it : itinerariesFixed) {</span>
<span class="nc" id="L240">                        ListenerUtil.loopListener.listen(&quot;_loopCounter56&quot;, ++_loopCounter56);</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5892)) {</span>
                            {
<span class="nc" id="L243">                                long _loopCounter55 = 0;</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">                                for (Leg leg : it.legs) {</span>
<span class="nc" id="L245">                                    ListenerUtil.loopListener.listen(&quot;_loopCounter55&quot;, ++_loopCounter55);</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(5888)) {</span>
<span class="nc bnc" id="L247" title="All 10 branches missed.">                                        if ((ListenerUtil.mutListener.listen(5886) ? ((TraverseMode.valueOf((String) leg.mode)).isTransit() || !containsTransitLegs) : ((TraverseMode.valueOf((String) leg.mode)).isTransit() &amp;&amp; !containsTransitLegs))) {</span>
<span class="nc bnc" id="L248" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(5887)) {</span>
<span class="nc" id="L249">                                                containsTransitLegs = true;</span>
                                            }
                                        }
                                    }
<span class="nc bnc" id="L253" title="All 2 branches missed.">                                    if (!ListenerUtil.mutListener.listen(5891)) {</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">                                        if (leg.agencyTimeZoneOffset != 0) {</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(5889)) {</span>
<span class="nc" id="L256">                                                agencyTimeZoneOffset = leg.agencyTimeZoneOffset;</span>
                                            }
<span class="nc bnc" id="L258" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(5890)) {</span>
                                                // If agencyTimeZoneOffset is different from 0, route contains transit legs
<span class="nc" id="L260">                                                containsTransitLegs = true;</span>
                                            }
                                            break;
                                        }
                                    }
<span class="nc" id="L265">                                }</span>
                            }
                        }
<span class="nc" id="L268">                    }</span>
                }
            }
<span class="nc bnc" id="L271" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(5896)) {</span>
<span class="nc bnc" id="L272" title="All 10 branches missed.">                if ((ListenerUtil.mutListener.listen(5894) ? (useDeviceTimezone &amp;&amp; !containsTransitLegs) : (useDeviceTimezone || !containsTransitLegs))) {</span>
<span class="nc bnc" id="L273" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(5895)) {</span>
<span class="nc" id="L274">                        agencyTimeZoneOffset = TimeZone.getDefault().getOffset(Long.parseLong(itinerariesFixed.get(0).startTime));</span>
                    }
                }
            }
<span class="nc bnc" id="L278" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(5905)) {</span>
<span class="nc bnc" id="L279" title="All 22 branches missed.">                if ((ListenerUtil.mutListener.listen(5901) ? (agencyTimeZoneOffset &gt;= 0) : (ListenerUtil.mutListener.listen(5900) ? (agencyTimeZoneOffset &lt;= 0) : (ListenerUtil.mutListener.listen(5899) ? (agencyTimeZoneOffset &gt; 0) : (ListenerUtil.mutListener.listen(5898) ? (agencyTimeZoneOffset &lt; 0) : (ListenerUtil.mutListener.listen(5897) ? (agencyTimeZoneOffset == 0) : (agencyTimeZoneOffset != 0))))))) {</span>
<span class="nc bnc" id="L280" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(5904)) {</span>
                        {
<span class="nc" id="L282">                            long _loopCounter58 = 0;</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">                            for (Itinerary it : itinerariesFixed) {</span>
<span class="nc" id="L284">                                ListenerUtil.loopListener.listen(&quot;_loopCounter58&quot;, ++_loopCounter58);</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(5903)) {</span>
                                    {
<span class="nc" id="L287">                                        long _loopCounter57 = 0;</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">                                        for (Leg leg : it.legs) {</span>
<span class="nc" id="L289">                                            ListenerUtil.loopListener.listen(&quot;_loopCounter57&quot;, ++_loopCounter57);</span>
<span class="nc bnc" id="L290" title="All 2 branches missed.">                                            if (!ListenerUtil.mutListener.listen(5902)) {</span>
<span class="nc" id="L291">                                                leg.agencyTimeZoneOffset = agencyTimeZoneOffset;</span>
                                            }
<span class="nc" id="L293">                                        }</span>
                                    }
                                }
<span class="nc" id="L296">                            }</span>
                        }
                    }
                }
            }
<span class="nc" id="L301">            return itinerariesFixed;</span>
        } else {
<span class="nc" id="L303">            return itineraries;</span>
        }
    }

    public static CharSequence getTimeWithContext(Context applicationContext, int offsetGMT, long time, boolean inLine) {
<span class="nc" id="L308">        return getTimeWithContext(applicationContext, offsetGMT, time, inLine, -1);</span>
    }

    public static CharSequence getTimeWithContext(Context applicationContext, int offsetGMT, long time, boolean inLine, int color) {
<span class="nc" id="L312">        Calendar cal = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT&quot;));</span>
<span class="nc" id="L313">        DateFormat timeFormat = android.text.format.DateFormat.getTimeFormat(applicationContext);</span>
<span class="nc" id="L314">        DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(applicationContext);</span>
<span class="nc bnc" id="L315" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5906)) {</span>
<span class="nc" id="L316">            timeFormat.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));</span>
        }
<span class="nc bnc" id="L318" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5907)) {</span>
<span class="nc" id="L319">            dateFormat.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));</span>
        }
<span class="nc bnc" id="L321" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5908)) {</span>
<span class="nc" id="L322">            cal.setTimeInMillis(time);</span>
        }
<span class="nc" id="L324">        String noDeviceTimezoneNote = &quot;&quot;;</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5926)) {</span>
<span class="nc bnc" id="L326" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5913) ? (offsetGMT &gt;= TimeZone.getDefault().getOffset(time)) : (ListenerUtil.mutListener.listen(5912) ? (offsetGMT &lt;= TimeZone.getDefault().getOffset(time)) : (ListenerUtil.mutListener.listen(5911) ? (offsetGMT &gt; TimeZone.getDefault().getOffset(time)) : (ListenerUtil.mutListener.listen(5910) ? (offsetGMT &lt; TimeZone.getDefault().getOffset(time)) : (ListenerUtil.mutListener.listen(5909) ? (offsetGMT == TimeZone.getDefault().getOffset(time)) : (offsetGMT != TimeZone.getDefault().getOffset(time)))))))) {</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5914)) {</span>
<span class="nc" id="L328">                    noDeviceTimezoneNote = &quot;GMT&quot;;</span>
                }
<span class="nc bnc" id="L330" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5925)) {</span>
<span class="nc bnc" id="L331" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(5919) ? (offsetGMT &gt;= 0) : (ListenerUtil.mutListener.listen(5918) ? (offsetGMT &lt;= 0) : (ListenerUtil.mutListener.listen(5917) ? (offsetGMT &gt; 0) : (ListenerUtil.mutListener.listen(5916) ? (offsetGMT &lt; 0) : (ListenerUtil.mutListener.listen(5915) ? (offsetGMT == 0) : (offsetGMT != 0))))))) {</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5924)) {</span>
<span class="nc bnc" id="L333" title="All 8 branches missed.">                            noDeviceTimezoneNote += (ListenerUtil.mutListener.listen(5923) ? (offsetGMT % 3600000) : (ListenerUtil.mutListener.listen(5922) ? (offsetGMT * 3600000) : (ListenerUtil.mutListener.listen(5921) ? (offsetGMT - 3600000) : (ListenerUtil.mutListener.listen(5920) ? (offsetGMT + 3600000) : (offsetGMT / 3600000)))));</span>
                        }
                    }
                }
            }
        }
<span class="nc bnc" id="L339" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5927)) {</span>
<span class="nc" id="L340">            cal.add(Calendar.MILLISECOND, offsetGMT);</span>
        }
<span class="nc bnc" id="L342" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5934)) {</span>
<span class="nc bnc" id="L343" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5932) ? (cal.get(Calendar.SECOND) &lt;= 30) : (ListenerUtil.mutListener.listen(5931) ? (cal.get(Calendar.SECOND) &gt; 30) : (ListenerUtil.mutListener.listen(5930) ? (cal.get(Calendar.SECOND) &lt; 30) : (ListenerUtil.mutListener.listen(5929) ? (cal.get(Calendar.SECOND) != 30) : (ListenerUtil.mutListener.listen(5928) ? (cal.get(Calendar.SECOND) == 30) : (cal.get(Calendar.SECOND) &gt;= 30))))))) {</span>
<span class="nc bnc" id="L344" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5933)) {</span>
<span class="nc" id="L345">                    cal.add(Calendar.MINUTE, 1);</span>
                }
            }
        }
<span class="nc" id="L349">        SpannableString spannableTime = new SpannableString(timeFormat.format(cal.getTime()));</span>
<span class="nc bnc" id="L350" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5941)) {</span>
<span class="nc bnc" id="L351" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5939) ? (color &gt;= -1) : (ListenerUtil.mutListener.listen(5938) ? (color &lt;= -1) : (ListenerUtil.mutListener.listen(5937) ? (color &gt; -1) : (ListenerUtil.mutListener.listen(5936) ? (color &lt; -1) : (ListenerUtil.mutListener.listen(5935) ? (color == -1) : (color != -1))))))) {</span>
<span class="nc bnc" id="L352" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5940)) {</span>
<span class="nc" id="L353">                    spannableTime.setSpan(new ForegroundColorSpan(color), 0, spannableTime.length(), 0);</span>
                }
            }
        }
<span class="nc bnc" id="L357" title="All 2 branches missed.">        if (inLine) {</span>
<span class="nc bnc" id="L358" title="All 2 branches missed.">            if (ConversionUtils.isToday(cal)) {</span>
<span class="nc" id="L359">                return TextUtils.concat(&quot; &quot;, applicationContext.getResources().getString(R.string.time_connector_before_time), &quot; &quot;, spannableTime, &quot; &quot;, noDeviceTimezoneNote);</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">            } else if (ConversionUtils.isTomorrow(cal)) {</span>
<span class="nc" id="L361">                return TextUtils.concat(&quot; &quot;, applicationContext.getResources().getString(R.string.time_connector_next_day), &quot; &quot;, applicationContext.getResources().getString(R.string.time_connector_before_time), &quot; &quot;, spannableTime, &quot; &quot;, noDeviceTimezoneNote);</span>
            } else {
<span class="nc" id="L363">                return TextUtils.concat(&quot; &quot;, applicationContext.getResources().getString(R.string.time_connector_before_date), &quot; &quot;, dateFormat.format(cal.getTime()), &quot; &quot;, applicationContext.getResources().getString(R.string.time_connector_before_time), &quot; &quot;, spannableTime, &quot; &quot;, noDeviceTimezoneNote);</span>
            }
        } else {
<span class="nc bnc" id="L366" title="All 2 branches missed.">            if (ConversionUtils.isToday(cal)) {</span>
<span class="nc" id="L367">                return TextUtils.concat(spannableTime, &quot; &quot;, noDeviceTimezoneNote);</span>
<span class="nc bnc" id="L368" title="All 2 branches missed.">            } else if (ConversionUtils.isTomorrow(cal)) {</span>
<span class="nc" id="L369">                return TextUtils.concat(&quot; &quot;, spannableTime, &quot;, &quot;, applicationContext.getResources().getString(R.string.time_connector_next_day), &quot; &quot;, noDeviceTimezoneNote);</span>
            } else {
<span class="nc" id="L371">                return TextUtils.concat(spannableTime, &quot;, &quot;, dateFormat.format(cal.getTime()), &quot; &quot;, noDeviceTimezoneNote);</span>
            }
        }
    }

    public static CharSequence getTimeUpdated(Context applicationContext, int offsetGMT, long oldTime, long newTime) {
<span class="nc" id="L377">        Calendar calOldTime = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT&quot;));</span>
<span class="nc" id="L378">        Calendar calNewTime = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT&quot;));</span>
<span class="nc" id="L379">        DateFormat timeFormat = android.text.format.DateFormat.getTimeFormat(applicationContext);</span>
<span class="nc" id="L380">        DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(applicationContext);</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5942)) {</span>
<span class="nc" id="L382">            timeFormat.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));</span>
        }
<span class="nc bnc" id="L384" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5943)) {</span>
<span class="nc" id="L385">            dateFormat.setTimeZone(TimeZone.getTimeZone(&quot;GMT&quot;));</span>
        }
        CharSequence timeUpdatedString;
<span class="nc" id="L388">        CharSequence beforeDateString = &quot;&quot;, beforeTimeString = &quot;&quot;, newDateString = &quot;&quot;, timezone = &quot;&quot;;</span>
        SpannableString oldTimeString, oldDateString, newTimeString;
<span class="nc bnc" id="L390" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5944)) {</span>
<span class="nc" id="L391">            calOldTime.setTimeInMillis(oldTime);</span>
        }
<span class="nc bnc" id="L393" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5945)) {</span>
<span class="nc" id="L394">            calNewTime.setTimeInMillis(newTime);</span>
        }
<span class="nc" id="L396">        String noDeviceTimezoneNote = &quot;&quot;;</span>
<span class="nc bnc" id="L397" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5963)) {</span>
<span class="nc bnc" id="L398" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5950) ? (offsetGMT &gt;= TimeZone.getDefault().getOffset(oldTime)) : (ListenerUtil.mutListener.listen(5949) ? (offsetGMT &lt;= TimeZone.getDefault().getOffset(oldTime)) : (ListenerUtil.mutListener.listen(5948) ? (offsetGMT &gt; TimeZone.getDefault().getOffset(oldTime)) : (ListenerUtil.mutListener.listen(5947) ? (offsetGMT &lt; TimeZone.getDefault().getOffset(oldTime)) : (ListenerUtil.mutListener.listen(5946) ? (offsetGMT == TimeZone.getDefault().getOffset(oldTime)) : (offsetGMT != TimeZone.getDefault().getOffset(oldTime)))))))) {</span>
<span class="nc bnc" id="L399" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5951)) {</span>
<span class="nc" id="L400">                    noDeviceTimezoneNote = &quot;GMT&quot;;</span>
                }
<span class="nc bnc" id="L402" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5962)) {</span>
<span class="nc bnc" id="L403" title="All 22 branches missed.">                    if ((ListenerUtil.mutListener.listen(5956) ? (offsetGMT &gt;= 0) : (ListenerUtil.mutListener.listen(5955) ? (offsetGMT &lt;= 0) : (ListenerUtil.mutListener.listen(5954) ? (offsetGMT &gt; 0) : (ListenerUtil.mutListener.listen(5953) ? (offsetGMT &lt; 0) : (ListenerUtil.mutListener.listen(5952) ? (offsetGMT == 0) : (offsetGMT != 0))))))) {</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(5961)) {</span>
<span class="nc bnc" id="L405" title="All 8 branches missed.">                            noDeviceTimezoneNote += (ListenerUtil.mutListener.listen(5960) ? (offsetGMT % 3600000) : (ListenerUtil.mutListener.listen(5959) ? (offsetGMT * 3600000) : (ListenerUtil.mutListener.listen(5958) ? (offsetGMT - 3600000) : (ListenerUtil.mutListener.listen(5957) ? (offsetGMT + 3600000) : (offsetGMT / 3600000)))));</span>
                        }
                    }
                }
            }
        }
<span class="nc bnc" id="L411" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5964)) {</span>
<span class="nc" id="L412">            calOldTime.add(Calendar.MILLISECOND, offsetGMT);</span>
        }
<span class="nc bnc" id="L414" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5965)) {</span>
<span class="nc" id="L415">            calNewTime.add(Calendar.MILLISECOND, offsetGMT);</span>
        }
<span class="nc bnc" id="L417" title="All 2 branches missed.">        if (ConversionUtils.isTomorrow(calNewTime)) {</span>
<span class="nc" id="L418">            oldDateString = new SpannableString(applicationContext.getResources().getString(R.string.time_connector_next_day) + &quot; &quot;);</span>
        } else {
<span class="nc bnc" id="L420" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(5966)) {</span>
<span class="nc" id="L421">                beforeDateString = applicationContext.getResources().getString(R.string.time_connector_before_date) + &quot; &quot;;</span>
            }
<span class="nc" id="L423">            oldDateString = new SpannableString(dateFormat.format(calNewTime.getTime()) + &quot; &quot;);</span>
        }
<span class="nc bnc" id="L425" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5979)) {</span>
<span class="nc bnc" id="L426" title="All 22 branches missed.">            if ((ListenerUtil.mutListener.listen(5971) ? (calNewTime.get(Calendar.DAY_OF_MONTH) &gt;= calOldTime.get(Calendar.DAY_OF_MONTH)) : (ListenerUtil.mutListener.listen(5970) ? (calNewTime.get(Calendar.DAY_OF_MONTH) &lt;= calOldTime.get(Calendar.DAY_OF_MONTH)) : (ListenerUtil.mutListener.listen(5969) ? (calNewTime.get(Calendar.DAY_OF_MONTH) &gt; calOldTime.get(Calendar.DAY_OF_MONTH)) : (ListenerUtil.mutListener.listen(5968) ? (calNewTime.get(Calendar.DAY_OF_MONTH) &lt; calOldTime.get(Calendar.DAY_OF_MONTH)) : (ListenerUtil.mutListener.listen(5967) ? (calNewTime.get(Calendar.DAY_OF_MONTH) == calOldTime.get(Calendar.DAY_OF_MONTH)) : (calNewTime.get(Calendar.DAY_OF_MONTH) != calOldTime.get(Calendar.DAY_OF_MONTH)))))))) {</span>
<span class="nc bnc" id="L427" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5972)) {</span>
<span class="nc" id="L428">                    beforeDateString = applicationContext.getResources().getString(R.string.time_connector_before_date) + &quot; &quot;;</span>
                }
<span class="nc bnc" id="L430" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5973)) {</span>
<span class="nc" id="L431">                    newDateString = dateFormat.format(calNewTime.getTime()) + &quot; &quot;;</span>
                }
<span class="nc bnc" id="L433" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(5978)) {</span>
<span class="nc bnc" id="L434" title="All 8 branches missed.">                    oldDateString.setSpan(new StrikethroughSpan(), 0, (ListenerUtil.mutListener.listen(5977) ? (oldDateString.length() % 1) : (ListenerUtil.mutListener.listen(5976) ? (oldDateString.length() / 1) : (ListenerUtil.mutListener.listen(5975) ? (oldDateString.length() * 1) : (ListenerUtil.mutListener.listen(5974) ? (oldDateString.length() + 1) : (oldDateString.length() - 1))))), 0);</span>
                }
            }
        }
<span class="nc bnc" id="L438" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5980)) {</span>
<span class="nc" id="L439">            beforeTimeString = applicationContext.getResources().getString(R.string.time_connector_before_time) + &quot; &quot;;</span>
        }
<span class="nc bnc" id="L441" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5981)) {</span>
<span class="nc" id="L442">            timezone = noDeviceTimezoneNote;</span>
        }
<span class="nc bnc" id="L444" title="All 8 branches missed.">        int color = applicationContext.getResources().getColor(ArrivalInfoUtils.computeColorFromDeviation((ListenerUtil.mutListener.listen(5985) ? (calNewTime.getTimeInMillis() % calOldTime.getTimeInMillis()) : (ListenerUtil.mutListener.listen(5984) ? (calNewTime.getTimeInMillis() / calOldTime.getTimeInMillis()) : (ListenerUtil.mutListener.listen(5983) ? (calNewTime.getTimeInMillis() * calOldTime.getTimeInMillis()) : (ListenerUtil.mutListener.listen(5982) ? (calNewTime.getTimeInMillis() + calOldTime.getTimeInMillis()) : (calNewTime.getTimeInMillis() - calOldTime.getTimeInMillis())))))));</span>
<span class="nc" id="L445">        newTimeString = new SpannableString(timeFormat.format(calNewTime.getTime()) + &quot; &quot;);</span>
<span class="nc bnc" id="L446" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(5986)) {</span>
<span class="nc" id="L447">            newTimeString.setSpan(new ForegroundColorSpan(color), 0, newTimeString.length(), 0);</span>
        }
<span class="nc bnc" id="L449" title="All 90 branches missed.">        if ((ListenerUtil.mutListener.listen(5997) ? ((ListenerUtil.mutListener.listen(5991) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &gt;= calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5990) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &lt;= calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5989) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &gt; calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5988) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &lt; calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5987) ? (calOldTime.get(Calendar.HOUR_OF_DAY) == calNewTime.get(Calendar.HOUR_OF_DAY)) : (calOldTime.get(Calendar.HOUR_OF_DAY) != calNewTime.get(Calendar.HOUR_OF_DAY))))))) &amp;&amp; (ListenerUtil.mutListener.listen(5996) ? (calOldTime.get(Calendar.MINUTE) &gt;= calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5995) ? (calOldTime.get(Calendar.MINUTE) &lt;= calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5994) ? (calOldTime.get(Calendar.MINUTE) &gt; calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5993) ? (calOldTime.get(Calendar.MINUTE) &lt; calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5992) ? (calOldTime.get(Calendar.MINUTE) == calNewTime.get(Calendar.MINUTE)) : (calOldTime.get(Calendar.MINUTE) != calNewTime.get(Calendar.MINUTE)))))))) : ((ListenerUtil.mutListener.listen(5991) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &gt;= calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5990) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &lt;= calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5989) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &gt; calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5988) ? (calOldTime.get(Calendar.HOUR_OF_DAY) &lt; calNewTime.get(Calendar.HOUR_OF_DAY)) : (ListenerUtil.mutListener.listen(5987) ? (calOldTime.get(Calendar.HOUR_OF_DAY) == calNewTime.get(Calendar.HOUR_OF_DAY)) : (calOldTime.get(Calendar.HOUR_OF_DAY) != calNewTime.get(Calendar.HOUR_OF_DAY))))))) || (ListenerUtil.mutListener.listen(5996) ? (calOldTime.get(Calendar.MINUTE) &gt;= calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5995) ? (calOldTime.get(Calendar.MINUTE) &lt;= calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5994) ? (calOldTime.get(Calendar.MINUTE) &gt; calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5993) ? (calOldTime.get(Calendar.MINUTE) &lt; calNewTime.get(Calendar.MINUTE)) : (ListenerUtil.mutListener.listen(5992) ? (calOldTime.get(Calendar.MINUTE) == calNewTime.get(Calendar.MINUTE)) : (calOldTime.get(Calendar.MINUTE) != calNewTime.get(Calendar.MINUTE)))))))))) {</span>
<span class="nc" id="L450">            oldTimeString = new SpannableString(timeFormat.format(calOldTime.getTime()) + &quot; &quot;);</span>
<span class="nc bnc" id="L451" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(6002)) {</span>
<span class="nc bnc" id="L452" title="All 8 branches missed.">                oldTimeString.setSpan(new StrikethroughSpan(), 0, (ListenerUtil.mutListener.listen(6001) ? (oldTimeString.length() % 1) : (ListenerUtil.mutListener.listen(6000) ? (oldTimeString.length() / 1) : (ListenerUtil.mutListener.listen(5999) ? (oldTimeString.length() * 1) : (ListenerUtil.mutListener.listen(5998) ? (oldTimeString.length() + 1) : (oldTimeString.length() - 1))))), 0);</span>
            }
        } else {
<span class="nc" id="L455">            oldTimeString = new SpannableString(&quot; &quot;);</span>
        }
<span class="nc" id="L457">        timeUpdatedString = TextUtils.concat(beforeDateString, newDateString, oldDateString, beforeTimeString, oldTimeString, newTimeString, timezone);</span>
<span class="nc" id="L458">        return timeUpdatedString;</span>
    }

    public static boolean isToday(Calendar cal) {
<span class="nc" id="L462">        Calendar actualTime = Calendar.getInstance();</span>
<span class="nc bnc" id="L463" title="All 226 branches missed.">        return ((ListenerUtil.mutListener.listen(6019) ? ((ListenerUtil.mutListener.listen(6013) ? ((ListenerUtil.mutListener.listen(6007) ? (actualTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6006) ? (actualTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6005) ? (actualTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6004) ? (actualTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6003) ? (actualTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (actualTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) || (ListenerUtil.mutListener.listen(6012) ? (actualTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6011) ? (actualTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6010) ? (actualTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6009) ? (actualTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6008) ? (actualTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (actualTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR)))))))) : ((ListenerUtil.mutListener.listen(6007) ? (actualTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6006) ? (actualTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6005) ? (actualTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6004) ? (actualTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6003) ? (actualTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (actualTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) &amp;&amp; (ListenerUtil.mutListener.listen(6012) ? (actualTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6011) ? (actualTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6010) ? (actualTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6009) ? (actualTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6008) ? (actualTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (actualTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR))))))))) || (ListenerUtil.mutListener.listen(6018) ? (actualTime.get(Calendar.DAY_OF_YEAR) &gt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6017) ? (actualTime.get(Calendar.DAY_OF_YEAR) &lt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6016) ? (actualTime.get(Calendar.DAY_OF_YEAR) &gt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6015) ? (actualTime.get(Calendar.DAY_OF_YEAR) &lt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6014) ? (actualTime.get(Calendar.DAY_OF_YEAR) != cal.get(Calendar.DAY_OF_YEAR)) : (actualTime.get(Calendar.DAY_OF_YEAR) == cal.get(Calendar.DAY_OF_YEAR)))))))) : ((ListenerUtil.mutListener.listen(6013) ? ((ListenerUtil.mutListener.listen(6007) ? (actualTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6006) ? (actualTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6005) ? (actualTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6004) ? (actualTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6003) ? (actualTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (actualTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) || (ListenerUtil.mutListener.listen(6012) ? (actualTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6011) ? (actualTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6010) ? (actualTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6009) ? (actualTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6008) ? (actualTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (actualTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR)))))))) : ((ListenerUtil.mutListener.listen(6007) ? (actualTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6006) ? (actualTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6005) ? (actualTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6004) ? (actualTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6003) ? (actualTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (actualTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) &amp;&amp; (ListenerUtil.mutListener.listen(6012) ? (actualTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6011) ? (actualTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6010) ? (actualTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6009) ? (actualTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6008) ? (actualTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (actualTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR))))))))) &amp;&amp; (ListenerUtil.mutListener.listen(6018) ? (actualTime.get(Calendar.DAY_OF_YEAR) &gt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6017) ? (actualTime.get(Calendar.DAY_OF_YEAR) &lt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6016) ? (actualTime.get(Calendar.DAY_OF_YEAR) &gt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6015) ? (actualTime.get(Calendar.DAY_OF_YEAR) &lt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6014) ? (actualTime.get(Calendar.DAY_OF_YEAR) != cal.get(Calendar.DAY_OF_YEAR)) : (actualTime.get(Calendar.DAY_OF_YEAR) == cal.get(Calendar.DAY_OF_YEAR))))))))));</span>
    }

    public static boolean isTomorrow(Calendar cal) {
<span class="nc" id="L467">        Calendar tomorrowTime = Calendar.getInstance();</span>
<span class="nc bnc" id="L468" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(6020)) {</span>
<span class="nc" id="L469">            tomorrowTime.add(Calendar.DAY_OF_YEAR, 1);</span>
        }
<span class="nc bnc" id="L471" title="All 226 branches missed.">        return ((ListenerUtil.mutListener.listen(6037) ? ((ListenerUtil.mutListener.listen(6031) ? ((ListenerUtil.mutListener.listen(6025) ? (tomorrowTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6024) ? (tomorrowTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6023) ? (tomorrowTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6022) ? (tomorrowTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6021) ? (tomorrowTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (tomorrowTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) || (ListenerUtil.mutListener.listen(6030) ? (tomorrowTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6029) ? (tomorrowTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6028) ? (tomorrowTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6027) ? (tomorrowTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6026) ? (tomorrowTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (tomorrowTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR)))))))) : ((ListenerUtil.mutListener.listen(6025) ? (tomorrowTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6024) ? (tomorrowTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6023) ? (tomorrowTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6022) ? (tomorrowTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6021) ? (tomorrowTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (tomorrowTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) &amp;&amp; (ListenerUtil.mutListener.listen(6030) ? (tomorrowTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6029) ? (tomorrowTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6028) ? (tomorrowTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6027) ? (tomorrowTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6026) ? (tomorrowTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (tomorrowTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR))))))))) || (ListenerUtil.mutListener.listen(6036) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &gt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6035) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &lt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6034) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &gt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6033) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &lt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6032) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) != cal.get(Calendar.DAY_OF_YEAR)) : (tomorrowTime.get(Calendar.DAY_OF_YEAR) == cal.get(Calendar.DAY_OF_YEAR)))))))) : ((ListenerUtil.mutListener.listen(6031) ? ((ListenerUtil.mutListener.listen(6025) ? (tomorrowTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6024) ? (tomorrowTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6023) ? (tomorrowTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6022) ? (tomorrowTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6021) ? (tomorrowTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (tomorrowTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) || (ListenerUtil.mutListener.listen(6030) ? (tomorrowTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6029) ? (tomorrowTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6028) ? (tomorrowTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6027) ? (tomorrowTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6026) ? (tomorrowTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (tomorrowTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR)))))))) : ((ListenerUtil.mutListener.listen(6025) ? (tomorrowTime.get(Calendar.ERA) &gt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6024) ? (tomorrowTime.get(Calendar.ERA) &lt;= cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6023) ? (tomorrowTime.get(Calendar.ERA) &gt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6022) ? (tomorrowTime.get(Calendar.ERA) &lt; cal.get(Calendar.ERA)) : (ListenerUtil.mutListener.listen(6021) ? (tomorrowTime.get(Calendar.ERA) != cal.get(Calendar.ERA)) : (tomorrowTime.get(Calendar.ERA) == cal.get(Calendar.ERA))))))) &amp;&amp; (ListenerUtil.mutListener.listen(6030) ? (tomorrowTime.get(Calendar.YEAR) &gt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6029) ? (tomorrowTime.get(Calendar.YEAR) &lt;= cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6028) ? (tomorrowTime.get(Calendar.YEAR) &gt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6027) ? (tomorrowTime.get(Calendar.YEAR) &lt; cal.get(Calendar.YEAR)) : (ListenerUtil.mutListener.listen(6026) ? (tomorrowTime.get(Calendar.YEAR) != cal.get(Calendar.YEAR)) : (tomorrowTime.get(Calendar.YEAR) == cal.get(Calendar.YEAR))))))))) &amp;&amp; (ListenerUtil.mutListener.listen(6036) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &gt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6035) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &lt;= cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6034) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &gt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6033) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) &lt; cal.get(Calendar.DAY_OF_YEAR)) : (ListenerUtil.mutListener.listen(6032) ? (tomorrowTime.get(Calendar.DAY_OF_YEAR) != cal.get(Calendar.DAY_OF_YEAR)) : (tomorrowTime.get(Calendar.DAY_OF_YEAR) == cal.get(Calendar.DAY_OF_YEAR))))))))));</span>
    }

    /**
     * Shows only the last n words of a sentence, being n the number of words to make the longer
     * sentence that still is smaller than maxLength.
     *
     * @param sentence  phrase to shrink
     * @param maxLength max length of the new sentence
     * @return the reduced sentence
     */
    public static String tailAndTruncateSentence(String sentence, int maxLength) {
<span class="nc" id="L483">        String[] words = sentence.split(&quot; &quot;);</span>
<span class="nc" id="L484">        List&lt;String&gt; list = Arrays.asList(words);</span>
<span class="nc bnc" id="L485" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(6038)) {</span>
<span class="nc" id="L486">            Collections.reverse(list);</span>
        }
<span class="nc" id="L488">        String[] reversedWords = (String[]) list.toArray();</span>
<span class="nc" id="L489">        String modifiedSentence = &quot;&quot;;</span>
<span class="nc bnc" id="L490" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(6046)) {</span>
            {
<span class="nc" id="L492">                long _loopCounter59 = 0;</span>
<span class="nc bnc" id="L493" title="All 2 branches missed.">                for (String word : reversedWords) {</span>
<span class="nc" id="L494">                    ListenerUtil.loopListener.listen(&quot;_loopCounter59&quot;, ++_loopCounter59);</span>
<span class="nc bnc" id="L495" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(6044)) {</span>
<span class="nc bnc" id="L496" title="All 22 branches missed.">                        if ((ListenerUtil.mutListener.listen(6043) ? (modifiedSentence.length() &lt;= maxLength) : (ListenerUtil.mutListener.listen(6042) ? (modifiedSentence.length() &gt; maxLength) : (ListenerUtil.mutListener.listen(6041) ? (modifiedSentence.length() &lt; maxLength) : (ListenerUtil.mutListener.listen(6040) ? (modifiedSentence.length() != maxLength) : (ListenerUtil.mutListener.listen(6039) ? (modifiedSentence.length() == maxLength) : (modifiedSentence.length() &gt;= maxLength))))))) {</span>
<span class="nc" id="L497">                            return modifiedSentence;</span>
                        }
                    }
<span class="nc bnc" id="L500" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(6045)) {</span>
<span class="nc" id="L501">                        modifiedSentence = word + &quot; &quot; + modifiedSentence;</span>
                    }
                }
            }
        }
<span class="nc" id="L506">        return modifiedSentence;</span>
    }

    /**
     * Always creates a correct value for the short name of the route. Using the routeShortName,
     * processing the long name if the short is null or returning an empty string if both names are
     * null.
     *
     * Route short name will be preceded by adequate connector.
     *
     * @param routeLongName  to convert it to a route short name if necessary
     * @param routeShortName to be returned if is not null
     * @return a valid route short name
     */
    public static String getRouteShortNameSafe(String routeShortName, String routeLongName, Context context) {
<span class="nc" id="L521">        String routeName = &quot;&quot;;</span>
<span class="nc bnc" id="L522" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(6052)) {</span>
<span class="nc bnc" id="L523" title="All 10 branches missed.">            if ((ListenerUtil.mutListener.listen(6047) ? (routeShortName != null &amp;&amp; routeLongName != null) : (routeShortName != null || routeLongName != null))) {</span>
<span class="nc bnc" id="L524" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(6048)) {</span>
<span class="nc" id="L525">                    routeName += context.getResources().getString(R.string.connector_before_route);</span>
                }
<span class="nc bnc" id="L527" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(6051)) {</span>
<span class="nc bnc" id="L528" title="All 2 branches missed.">                    if (routeShortName != null) {</span>
<span class="nc bnc" id="L529" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(6050)) {</span>
<span class="nc" id="L530">                            routeName += &quot; &quot; + routeShortName;</span>
                        }
<span class="nc bnc" id="L532" title="All 2 branches missed.">                    } else if (routeLongName != null) {</span>
<span class="nc bnc" id="L533" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(6049)) {</span>
<span class="nc" id="L534">                            routeName += &quot; &quot; + tailAndTruncateSentence(routeLongName, OTPConstants.ROUTE_SHORT_NAME_MAX_SIZE);</span>
                        }
                    }
                }
            }
        }
<span class="nc" id="L540">        return routeName;</span>
    }

    /**
     * Always creates a correct value for the long name of the route. Using the routeLongName,
     * returning the short name if the long is null or returning an empty string if both names are
     * null.
     *
     * @param routeLongName  to be returned if is not null
     * @param routeShortName to use if necessary
     * @return a valid route long name
     */
    public static String getRouteLongNameSafe(String routeLongName, String routeShortName, boolean includeShortName) {
<span class="nc" id="L553">        String routeName = &quot;&quot;;</span>
<span class="nc bnc" id="L554" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(6060)) {</span>
<span class="nc bnc" id="L555" title="All 10 branches missed.">            if ((ListenerUtil.mutListener.listen(6053) ? (routeShortName != null &amp;&amp; routeLongName != null) : (routeShortName != null || routeLongName != null))) {</span>
<span class="nc bnc" id="L556" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(6059)) {</span>
<span class="nc bnc" id="L557" title="All 2 branches missed.">                    if (routeLongName != null) {</span>
<span class="nc bnc" id="L558" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(6058)) {</span>
<span class="nc bnc" id="L559" title="All 10 branches missed.">                            if ((ListenerUtil.mutListener.listen(6055) ? (includeShortName || routeShortName != null) : (includeShortName &amp;&amp; routeShortName != null))) {</span>
<span class="nc bnc" id="L560" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(6057)) {</span>
<span class="nc" id="L561">                                    routeName = routeShortName + &quot; &quot; + &quot;(&quot; + routeLongName + &quot;)&quot;;</span>
                                }
                            } else {
<span class="nc bnc" id="L564" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(6056)) {</span>
<span class="nc" id="L565">                                    routeName += routeLongName;</span>
                                }
                            }
                        }
<span class="nc bnc" id="L569" title="All 2 branches missed.">                    } else if (routeShortName != null) {</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">                        if (!ListenerUtil.mutListener.listen(6054)) {</span>
<span class="nc" id="L571">                            routeName += routeShortName;</span>
                        }
                    }
                }
            }
        }
<span class="nc" id="L577">        return routeName;</span>
    }

    /**
     * Convert meters to feet.
     *
     * @param meters
     * @return feet
     */
    public static double metersToFeet(double meters) {
<span class="nc bnc" id="L587" title="All 8 branches missed.">        return (ListenerUtil.mutListener.listen(6064) ? (meters % FEET_PER_METER) : (ListenerUtil.mutListener.listen(6063) ? (meters / FEET_PER_METER) : (ListenerUtil.mutListener.listen(6062) ? (meters - FEET_PER_METER) : (ListenerUtil.mutListener.listen(6061) ? (meters + FEET_PER_METER) : (meters * FEET_PER_METER)))));</span>
    }

    /**
     * Convert feet to meters.
     *
     * @param feet
     * @return meters
     */
    public static double feetToMeters(double feet) {
<span class="nc bnc" id="L597" title="All 8 branches missed.">        return (ListenerUtil.mutListener.listen(6068) ? (feet % FEET_PER_METER) : (ListenerUtil.mutListener.listen(6067) ? (feet * FEET_PER_METER) : (ListenerUtil.mutListener.listen(6066) ? (feet - FEET_PER_METER) : (ListenerUtil.mutListener.listen(6065) ? (feet + FEET_PER_METER) : (feet / FEET_PER_METER)))));</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.2.0</div></body></html>