<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SearchResultsFragment.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">agencyXGoogleDebug</a> &gt; <a href="index.source.html" class="el_package">org.onebusaway.android.ui</a> &gt; <span class="el_source">SearchResultsFragment.java</span></div><h1>SearchResultsFragment.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2012 Paul Watts (paulcwatts@gmail.com)
 * and individual contributors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.onebusaway.android.ui;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.location.Location;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GoogleApiAvailability;
import com.google.android.gms.common.api.GoogleApiClient;
import org.onebusaway.android.R;
import org.onebusaway.android.app.Application;
import org.onebusaway.android.io.ObaApi;
import org.onebusaway.android.io.elements.ObaElement;
import org.onebusaway.android.io.elements.ObaRoute;
import org.onebusaway.android.io.elements.ObaStop;
import org.onebusaway.android.io.request.ObaRoutesForLocationRequest;
import org.onebusaway.android.io.request.ObaRoutesForLocationResponse;
import org.onebusaway.android.io.request.ObaStopsForLocationRequest;
import org.onebusaway.android.io.request.ObaStopsForLocationResponse;
import org.onebusaway.android.util.ArrayAdapter;
import org.onebusaway.android.util.LocationUtils;
import org.onebusaway.android.util.UIUtils;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import androidx.loader.app.LoaderManager;
import androidx.loader.content.AsyncTaskLoader;
import androidx.loader.content.Loader;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

/**
 * This implements the response that returns both stops and routes in one list.
 *
 * @author paulw
 */
final class SearchResponse {

    private final int mCode;

    private final List&lt;ObaElement&gt; mResults;

<span class="nc" id="L66">    SearchResponse(int code, List&lt;ObaElement&gt; r) {</span>
<span class="nc" id="L67">        mCode = code;</span>
<span class="nc" id="L68">        mResults = r;</span>
<span class="nc" id="L69">    }</span>

    int getCode() {
<span class="nc" id="L72">        return mCode;</span>
    }

    List&lt;ObaElement&gt; getResults() {
<span class="nc" id="L76">        return mResults;</span>
    }
}

<span class="nc" id="L80">public class SearchResultsFragment extends ListFragment implements LoaderManager.LoaderCallbacks&lt;SearchResponse&gt; {</span>

    // private static final String TAG = &quot;SearchResultsFragment&quot;;
    public static final String QUERY_TEXT = &quot;query_text&quot;;

    private MyAdapter mAdapter;

    /**
     * GoogleApiClient being used for Location Services
     */
    GoogleApiClient mGoogleApiClient;

    @Override
    public void onAttach(Activity activity) {
<span class="nc bnc" id="L94" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(30)) {</span>
<span class="nc" id="L95">            super.onAttach(activity);</span>
        }
        // Init Google Play Services as early as possible in the Fragment lifecycle to give it time
<span class="nc" id="L98">        GoogleApiAvailability api = GoogleApiAvailability.getInstance();</span>
<span class="nc bnc" id="L99" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(33)) {</span>
<span class="nc bnc" id="L100" title="All 2 branches missed.">            if (api.isGooglePlayServicesAvailable(getActivity()) == ConnectionResult.SUCCESS) {</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(31)) {</span>
<span class="nc" id="L102">                    mGoogleApiClient = LocationUtils.getGoogleApiClientWithCallbacks(getActivity());</span>
                }
<span class="nc bnc" id="L104" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(32)) {</span>
<span class="nc" id="L105">                    mGoogleApiClient.connect();</span>
                }
            }
        }
<span class="nc" id="L109">    }</span>

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
<span class="nc bnc" id="L113" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(34)) {</span>
<span class="nc" id="L114">            super.onActivityCreated(savedInstanceState);</span>
        }
<span class="nc bnc" id="L116" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(35)) {</span>
<span class="nc" id="L117">            mAdapter = new MyAdapter(getActivity());</span>
        }
<span class="nc bnc" id="L119" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(36)) {</span>
<span class="nc" id="L120">            setListAdapter(mAdapter);</span>
        }
<span class="nc bnc" id="L122" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(37)) {</span>
<span class="nc" id="L123">            search();</span>
        }
<span class="nc" id="L125">    }</span>

    @Override
    public void onStart() {
<span class="nc bnc" id="L129" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(38)) {</span>
<span class="nc" id="L130">            super.onStart();</span>
        }
<span class="nc bnc" id="L132" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(41)) {</span>
            // Make sure GoogleApiClient is connected, if available
<span class="nc bnc" id="L134" title="All 10 branches missed.">            if ((ListenerUtil.mutListener.listen(39) ? (mGoogleApiClient != null || !mGoogleApiClient.isConnected()) : (mGoogleApiClient != null &amp;&amp; !mGoogleApiClient.isConnected()))) {</span>
<span class="nc bnc" id="L135" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(40)) {</span>
<span class="nc" id="L136">                    mGoogleApiClient.connect();</span>
                }
            }
        }
<span class="nc" id="L140">    }</span>

    @Override
    public void onStop() {
<span class="nc bnc" id="L144" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(44)) {</span>
            // Tear down GoogleApiClient
<span class="nc bnc" id="L146" title="All 10 branches missed.">            if ((ListenerUtil.mutListener.listen(42) ? (mGoogleApiClient != null || mGoogleApiClient.isConnected()) : (mGoogleApiClient != null &amp;&amp; mGoogleApiClient.isConnected()))) {</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(43)) {</span>
<span class="nc" id="L148">                    mGoogleApiClient.disconnect();</span>
                }
            }
        }
<span class="nc bnc" id="L152" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(45)) {</span>
<span class="nc" id="L153">            super.onStop();</span>
        }
<span class="nc" id="L155">    }</span>

    private void search() {
<span class="nc bnc" id="L158" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(46)) {</span>
<span class="nc" id="L159">            UIUtils.showProgress(this, true);</span>
        }
<span class="nc" id="L161">        Loader&lt;?&gt; loader = getLoaderManager().restartLoader(0, getArguments(), this);</span>
<span class="nc bnc" id="L162" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(47)) {</span>
            // loader.onContentChanged();
<span class="nc" id="L164">            loader.forceLoad();</span>
        }
<span class="nc" id="L166">    }</span>

    @Override
    public Loader&lt;SearchResponse&gt; onCreateLoader(int id, Bundle args) {
<span class="nc" id="L170">        String query = args.getString(QUERY_TEXT);</span>
<span class="nc" id="L171">        Location location = Application.getLastKnownLocation(getActivity(), mGoogleApiClient);</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(49)) {</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">            if (location == null) {</span>
<span class="nc bnc" id="L174" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(48)) {</span>
<span class="nc" id="L175">                    location = LocationUtils.getDefaultSearchCenter();</span>
                }
            }
        }
<span class="nc" id="L179">        return new MyLoader(getActivity(), query, location);</span>
    }

    @Override
    public void onLoadFinished(Loader&lt;SearchResponse&gt; loader, SearchResponse response) {
<span class="nc bnc" id="L184" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(50)) {</span>
<span class="nc" id="L185">            UIUtils.showProgress(this, false);</span>
        }
        // Log.d(TAG, &quot;Loader finished&quot;);
<span class="nc" id="L188">        final int code = response.getCode();</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(60)) {</span>
<span class="nc bnc" id="L190" title="All 2 branches missed.">            if (code == ObaApi.OBA_OK) {</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(58)) {</span>
<span class="nc" id="L192">                    setEmptyText(getString(R.string.find_hint_noresults));</span>
                }
<span class="nc bnc" id="L194" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(59)) {</span>
<span class="nc" id="L195">                    mAdapter.setData(response.getResults());</span>
                }
<span class="nc bnc" id="L197" title="All 22 branches missed.">            } else if ((ListenerUtil.mutListener.listen(55) ? (code &gt;= 0) : (ListenerUtil.mutListener.listen(54) ? (code &lt;= 0) : (ListenerUtil.mutListener.listen(53) ? (code &gt; 0) : (ListenerUtil.mutListener.listen(52) ? (code &lt; 0) : (ListenerUtil.mutListener.listen(51) ? (code == 0) : (code != 0))))))) {</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(57)) {</span>
                    // a 'communication' error. Just fake no results.
<span class="nc" id="L200">                    setEmptyText(getString(R.string.find_hint_noresults));</span>
                }
            } else {
<span class="nc bnc" id="L203" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(56)) {</span>
<span class="nc" id="L204">                    setEmptyText(getString(R.string.generic_comm_error));</span>
                }
            }
        }
<span class="nc" id="L208">    }</span>

    @Override
    public void onLoaderReset(Loader&lt;SearchResponse&gt; loader) {
<span class="nc bnc" id="L212" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(61)) {</span>
<span class="nc" id="L213">            mAdapter.clear();</span>
        }
<span class="nc" id="L215">    }</span>

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
<span class="nc" id="L219">        ListAdapter adapter = l.getAdapter();</span>
<span class="nc bnc" id="L220" title="All 8 branches missed.">        ObaElement e = (ObaElement) adapter.getItem((ListenerUtil.mutListener.listen(65) ? (position % l.getHeaderViewsCount()) : (ListenerUtil.mutListener.listen(64) ? (position / l.getHeaderViewsCount()) : (ListenerUtil.mutListener.listen(63) ? (position * l.getHeaderViewsCount()) : (ListenerUtil.mutListener.listen(62) ? (position + l.getHeaderViewsCount()) : (position - l.getHeaderViewsCount()))))));</span>
<span class="nc bnc" id="L221" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(68)) {</span>
<span class="nc bnc" id="L222" title="All 2 branches missed.">            if (e instanceof ObaRoute) {</span>
<span class="nc bnc" id="L223" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(67)) {</span>
<span class="nc" id="L224">                    clickRoute((ObaRoute) e);</span>
                }
<span class="nc bnc" id="L226" title="All 2 branches missed.">            } else if (e instanceof ObaStop) {</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(66)) {</span>
<span class="nc" id="L228">                    clickStop((ObaStop) e);</span>
                }
            }
        }
<span class="nc" id="L232">    }</span>

    private void clickRoute(ObaRoute route) {
<span class="nc" id="L235">        final String routeId = route.getId();</span>
<span class="nc" id="L236">        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());</span>
<span class="nc bnc" id="L237" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(69)) {</span>
<span class="nc" id="L238">            builder.setTitle(UIUtils.getRouteDescription(route));</span>
        }
<span class="nc bnc" id="L240" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(73)) {</span>
<span class="nc" id="L241">            builder.setItems(R.array.search_route_options, new DialogInterface.OnClickListener() {</span>

                public void onClick(DialogInterface dialog, int which) {
<span class="nc bnc" id="L244" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(72)) {</span>
<span class="nc bnc" id="L245" title="All 3 branches missed.">                        switch(which) {</span>
                            case 0:
<span class="nc bnc" id="L247" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(70)) {</span>
                                    // Show on list
<span class="nc" id="L249">                                    RouteInfoActivity.start(getActivity(), routeId);</span>
                                }
                                break;
                            case 1:
<span class="nc bnc" id="L253" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(71)) {</span>
                                    // Show on map
<span class="nc" id="L255">                                    HomeActivity.start(getActivity(), routeId);</span>
                                }
                                break;
                        }
                    }
<span class="nc" id="L260">                }</span>
            });
        }
<span class="nc" id="L263">        AlertDialog dialog = builder.create();</span>
<span class="nc bnc" id="L264" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(74)) {</span>
<span class="nc" id="L265">            dialog.setOwnerActivity(getActivity());</span>
        }
<span class="nc bnc" id="L267" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(75)) {</span>
<span class="nc" id="L268">            dialog.show();</span>
        }
<span class="nc" id="L270">    }</span>

    private void clickStop(final ObaStop stop) {
<span class="nc" id="L273">        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());</span>
<span class="nc bnc" id="L274" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(76)) {</span>
<span class="nc" id="L275">            builder.setTitle(UIUtils.formatDisplayText(stop.getName()));</span>
        }
<span class="nc bnc" id="L277" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(80)) {</span>
<span class="nc" id="L278">            builder.setItems(R.array.search_stop_options, new DialogInterface.OnClickListener() {</span>

                public void onClick(DialogInterface dialog, int which) {
<span class="nc bnc" id="L281" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(79)) {</span>
<span class="nc bnc" id="L282" title="All 3 branches missed.">                        switch(which) {</span>
                            case 0:
<span class="nc bnc" id="L284" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(77)) {</span>
<span class="nc" id="L285">                                    ArrivalsListActivity.start(getActivity(), stop.getId());</span>
                                }
                                break;
                            case 1:
<span class="nc bnc" id="L289" title="All 2 branches missed.">                                if (!ListenerUtil.mutListener.listen(78)) {</span>
<span class="nc" id="L290">                                    HomeActivity.start(getActivity(), stop.getId(), stop.getLatitude(), stop.getLongitude());</span>
                                }
                                break;
                        }
                    }
<span class="nc" id="L295">                }</span>
            });
        }
<span class="nc" id="L298">        AlertDialog dialog = builder.create();</span>
<span class="nc bnc" id="L299" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(81)) {</span>
<span class="nc" id="L300">            dialog.setOwnerActivity(getActivity());</span>
        }
<span class="nc bnc" id="L302" title="All 2 branches missed.">        if (!ListenerUtil.mutListener.listen(82)) {</span>
<span class="nc" id="L303">            dialog.show();</span>
        }
<span class="nc" id="L305">    }</span>

    // 
    private static final class MyAdapter extends ArrayAdapter&lt;ObaElement&gt; {

        public MyAdapter(Context context) {
<span class="nc" id="L311">            super(context, R.layout.route_list_item);</span>
<span class="nc" id="L312">        }</span>

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View view;
<span class="nc" id="L317">            LayoutInflater inflater = getLayoutInflater();</span>
<span class="nc" id="L318">            ObaElement elem = getItem(position);</span>
            // so unfortunately we can't actually re-use views...
<span class="nc bnc" id="L320" title="All 2 branches missed.">            if (elem instanceof ObaRoute) {</span>
<span class="nc" id="L321">                view = inflater.inflate(R.layout.route_list_item, parent, false);</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(84)) {</span>
<span class="nc" id="L323">                    UIUtils.setRouteView(view, (ObaRoute) elem);</span>
                }
<span class="nc bnc" id="L325" title="All 2 branches missed.">            } else if (elem instanceof ObaStop) {</span>
<span class="nc" id="L326">                view = inflater.inflate(R.layout.stop_list_item, parent, false);</span>
<span class="nc bnc" id="L327" title="All 2 branches missed.">                if (!ListenerUtil.mutListener.listen(83)) {</span>
<span class="nc" id="L328">                    initStop(view, (ObaStop) elem);</span>
                }
            } else {
<span class="nc" id="L331">                view = null;</span>
            }
<span class="nc" id="L333">            return view;</span>
        }

        private void initStop(View view, ObaStop stop) {
<span class="nc" id="L337">            TextView nameView = (TextView) view.findViewById(R.id.stop_name);</span>
<span class="nc bnc" id="L338" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(85)) {</span>
<span class="nc" id="L339">                nameView.setText(UIUtils.formatDisplayText(stop.getName()));</span>
            }
<span class="nc bnc" id="L341" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(86)) {</span>
<span class="nc" id="L342">                UIUtils.setStopDirection(view.findViewById(R.id.direction), stop.getDirection(), true);</span>
            }
<span class="nc" id="L344">        }</span>

        @Override
        protected void initView(View view, ObaElement t) {
<span class="nc" id="L348">            throw new AssertionError(&quot;Should never be called&quot;);</span>
        }
    }

    // 
    private static final class MyLoader extends AsyncTaskLoader&lt;SearchResponse&gt; {

        private final String mQueryText;

        private final Location mCenter;

        public MyLoader(Context context, String query, Location center) {
<span class="nc" id="L360">            super(context);</span>
<span class="nc" id="L361">            mQueryText = query;</span>
<span class="nc" id="L362">            mCenter = center;</span>
<span class="nc" id="L363">        }</span>

        private ObaRoutesForLocationResponse getRoutes() {
<span class="nc" id="L366">            ObaRoutesForLocationResponse response = new ObaRoutesForLocationRequest.Builder(getContext(), mCenter).setRadius(LocationUtils.DEFAULT_SEARCH_RADIUS).setQuery(mQueryText).build().call();</span>
<span class="nc bnc" id="L367" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(88)) {</span>
                // Log.d(TAG, &quot;Server returns: &quot; + response.getCode());
<span class="nc bnc" id="L369" title="All 2 branches missed.">                if (response.getCode() == ObaApi.OBA_OK) {</span>
<span class="nc" id="L370">                    ObaRoute[] routes = response.getRoutesForLocation();</span>
<span class="nc bnc" id="L371" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(87)) {</span>
<span class="nc bnc" id="L372" title="All 2 branches missed.">                        if (routes.length != 0) {</span>
<span class="nc" id="L373">                            return response;</span>
                        }
                    }
                }
            }
<span class="nc" id="L378">            Location center = LocationUtils.getDefaultSearchCenter();</span>
<span class="nc bnc" id="L379" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(89)) {</span>
<span class="nc bnc" id="L380" title="All 2 branches missed.">                if (center != null) {</span>
<span class="nc" id="L381">                    return new ObaRoutesForLocationRequest.Builder(getContext(), center).setRadius(LocationUtils.DEFAULT_SEARCH_RADIUS).setQuery(mQueryText).build().call();</span>
                }
            }
            // I suppose we just return what was there...
<span class="nc" id="L385">            return response;</span>
        }

        private ObaStopsForLocationResponse getStops() {
<span class="nc" id="L389">            return new ObaStopsForLocationRequest.Builder(getContext(), mCenter).setRadius(LocationUtils.DEFAULT_SEARCH_RADIUS).setQuery(mQueryText).build().call();</span>
        }

        @Override
        public SearchResponse loadInBackground() {
<span class="nc" id="L394">            ArrayList&lt;ObaElement&gt; results = new ArrayList&lt;ObaElement&gt;();</span>
<span class="nc" id="L395">            ObaRoutesForLocationResponse routes = getRoutes();</span>
<span class="nc" id="L396">            ObaStopsForLocationResponse stops = getStops();</span>
<span class="nc" id="L397">            int routeCode = routes.getCode();</span>
<span class="nc" id="L398">            int stopCode = stops.getCode();</span>
<span class="nc" id="L399">            int code = ObaApi.OBA_OK;</span>
<span class="nc bnc" id="L400" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(92)) {</span>
                // if neither of them are OK, return one of them.
<span class="nc bnc" id="L402" title="All 10 branches missed.">                if ((ListenerUtil.mutListener.listen(90) ? (routeCode != ObaApi.OBA_OK || stopCode != ObaApi.OBA_OK) : (routeCode != ObaApi.OBA_OK &amp;&amp; stopCode != ObaApi.OBA_OK))) {</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(91)) {</span>
<span class="nc" id="L404">                        code = routeCode;</span>
                    }
                }
            }
<span class="nc bnc" id="L408" title="All 2 branches missed.">            if (!ListenerUtil.mutListener.listen(95)) {</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">                if (code == ObaApi.OBA_OK) {</span>
<span class="nc bnc" id="L410" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(93)) {</span>
<span class="nc" id="L411">                        results.addAll(Arrays.asList(routes.getRoutesForLocation()));</span>
                    }
<span class="nc bnc" id="L413" title="All 2 branches missed.">                    if (!ListenerUtil.mutListener.listen(94)) {</span>
<span class="nc" id="L414">                        results.addAll(Arrays.asList(stops.getStops()));</span>
                    }
                }
            }
<span class="nc" id="L418">            return new SearchResponse(code, results);</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.2.0</div></body></html>