<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ObaArrivalInfo.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">agencyXGoogleDebug</a> &gt; <a href="index.source.html" class="el_package">org.onebusaway.android.io.elements</a> &gt; <span class="el_source">ObaArrivalInfo.java</span></div><h1>ObaArrivalInfo.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2010 Paul Watts (paulcwatts@gmail.com)
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package org.onebusaway.android.io.elements;

import java.io.Serializable;
import br.ufmg.labsoft.mutvariants.listeners.ListenerUtil;

public final class ObaArrivalInfo implements Serializable {

<span class="fc" id="L23">    public static final ObaArrivalInfo EMPTY_OBJECT = new ObaArrivalInfo();</span>

<span class="fc" id="L25">    public static final ObaArrivalInfo[] EMPTY_ARRAY = new ObaArrivalInfo[] {};</span>

    public static final class Frequency implements Serializable {

        private final long startTime;

        private final long endTime;

        private final long headway;

<span class="nc" id="L35">        Frequency() {</span>
<span class="nc" id="L36">            startTime = 0;</span>
<span class="nc" id="L37">            endTime = 0;</span>
<span class="nc" id="L38">            headway = 0;</span>
<span class="nc" id="L39">        }</span>

        public long getStartTime() {
<span class="nc" id="L42">            return startTime;</span>
        }

        public long getEndTime() {
<span class="nc" id="L46">            return endTime;</span>
        }

        public long getHeadway() {
<span class="nc" id="L50">            return headway;</span>
        }
    }

    private final String routeId;

    private final String routeShortName;

    private final String routeLongName;

    private final String tripId;

    private final String tripHeadsign;

    private final String stopId;

    private final long predictedArrivalTime;

    private final long scheduledArrivalTime;

    private final long predictedDepartureTime;

    private final long scheduledDepartureTime;

    private final String status;

    private final Frequency frequency;

    private final String vehicleId;

    private final Double distanceFromStop;

    private final Integer numberOfStopsAway;

    private final long serviceDate;

    private final long lastUpdateTime;

    private final Boolean predicted;

    private final ObaTripStatusElement tripStatus;

    private final String[] situationIds;

    private final boolean arrivalEnabled;

    private final boolean departureEnabled;

    private final int stopSequence;

    private final int totalStopsInTrip;

    private final int blockTripSequence;

    private final String historicalOccupancy;

    private final String occupancyStatus;

<span class="fc" id="L108">    ObaArrivalInfo() {</span>
<span class="fc" id="L109">        routeId = &quot;&quot;;</span>
<span class="fc" id="L110">        routeShortName = &quot;&quot;;</span>
<span class="fc" id="L111">        routeLongName = &quot;&quot;;</span>
<span class="fc" id="L112">        tripId = &quot;&quot;;</span>
<span class="fc" id="L113">        tripHeadsign = &quot;&quot;;</span>
<span class="fc" id="L114">        stopId = &quot;&quot;;</span>
<span class="fc" id="L115">        predictedArrivalTime = 0;</span>
<span class="fc" id="L116">        scheduledArrivalTime = 0;</span>
<span class="fc" id="L117">        predictedDepartureTime = 0;</span>
<span class="fc" id="L118">        scheduledDepartureTime = 0;</span>
<span class="fc" id="L119">        status = &quot;&quot;;</span>
<span class="fc" id="L120">        frequency = null;</span>
<span class="fc" id="L121">        vehicleId = null;</span>
<span class="fc" id="L122">        distanceFromStop = null;</span>
<span class="fc" id="L123">        numberOfStopsAway = null;</span>
<span class="fc" id="L124">        serviceDate = 0;</span>
<span class="fc" id="L125">        lastUpdateTime = 0;</span>
<span class="fc" id="L126">        predicted = null;</span>
<span class="fc" id="L127">        tripStatus = null;</span>
<span class="fc" id="L128">        situationIds = null;</span>
<span class="fc" id="L129">        arrivalEnabled = true;</span>
<span class="fc" id="L130">        departureEnabled = true;</span>
<span class="fc" id="L131">        stopSequence = 0;</span>
<span class="fc" id="L132">        totalStopsInTrip = 0;</span>
<span class="fc" id="L133">        blockTripSequence = 0;</span>
<span class="fc" id="L134">        historicalOccupancy = &quot;&quot;;</span>
<span class="fc" id="L135">        occupancyStatus = &quot;&quot;;</span>
<span class="fc" id="L136">    }</span>

    /**
     * @return The ID of the route.
     */
    public String getRouteId() {
<span class="nc" id="L142">        return routeId;</span>
    }

    /**
     * @return The short name of the route.
     */
    public String getShortName() {
<span class="nc" id="L149">        return routeShortName;</span>
    }

    /**
     * @return The long name of the route.
     */
    public String getRouteLongName() {
<span class="nc" id="L156">        return routeLongName;</span>
    }

    /**
     * @return The trip ID of the route.
     */
    public String getTripId() {
<span class="nc" id="L163">        return tripId;</span>
    }

    /**
     * @return The trip headsign.
     */
    public String getHeadsign() {
<span class="nc" id="L170">        return tripHeadsign;</span>
    }

    /**
     * @return The stop ID.
     */
    public String getStopId() {
<span class="nc" id="L177">        return stopId;</span>
    }

    /**
     * @return The scheduled arrival time.
     */
    public long getScheduledArrivalTime() {
<span class="nc" id="L184">        return scheduledArrivalTime;</span>
    }

    /**
     * @return The predicted arrival time, or 0.
     */
    public long getPredictedArrivalTime() {
<span class="nc" id="L191">        return predictedArrivalTime;</span>
    }

    /**
     * @return The scheduled departure time.
     */
    public long getScheduledDepartureTime() {
<span class="nc" id="L198">        return scheduledDepartureTime;</span>
    }

    /**
     * @return The predicted arrival time, or 0.
     */
    public long getPredictedDepartureTime() {
<span class="nc" id="L205">        return predictedDepartureTime;</span>
    }

    /**
     * @return The status of the route.
     */
    public String getStatus() {
<span class="nc" id="L212">        return status;</span>
    }

    /**
     * @return The frequency of the trip, for frequency-based scheduling. For
     * time-based schedules, this is null.
     */
    public Frequency getFrequency() {
<span class="nc" id="L220">        return frequency;</span>
    }

    /**
     * @return The vehicle ID of the trip, or null if it is not provided.
     */
    public String getVehicleId() {
<span class="nc" id="L227">        return vehicleId;</span>
    }

    /**
     * @return The distance, in meters, of the transit vehicle from the stop,
     * or null if it is not provided.
     */
    public Double getDistanceFromStop() {
<span class="nc" id="L235">        return distanceFromStop;</span>
    }

    /**
     * @return The number of stops between the transit vehicle and the current stop.
     */
    public Integer getNumberOfStopsAway() {
<span class="nc" id="L242">        return numberOfStopsAway;</span>
    }

    /**
     * @return The midnight-based start time of the day of service of which a trip is
     * operating, in Unix time, or 0 if this is not provided.
     */
    public long getServiceDate() {
<span class="nc" id="L250">        return serviceDate;</span>
    }

    /**
     * @return
     */
    public long getLastUpdateTime() {
<span class="nc" id="L257">        return lastUpdateTime;</span>
    }

    /**
     * @return Whether this arrival has prediction information. If the 'predicted'
     * value is set and the predicted arrival OR departure time is valid, then return true;
     * otherwise it is inferred from the existence of a positive predicted start OR end time.
     */
    public boolean getPredicted() {
<span class="nc bnc" id="L266" title="All 2 branches missed.">        if (predicted != null) {</span>
<span class="nc bnc" id="L267" title="All 10 branches missed.">            return (ListenerUtil.mutListener.listen(8136) ? (predicted || isPredictedTimeValid()) : (predicted &amp;&amp; isPredictedTimeValid()));</span>
        } else {
<span class="nc" id="L269">            return isPredictedTimeValid();</span>
        }
    }

    /**
     * Returns true if the predicted arrival time or predicted departure time is greater than 0
     * @return true if the predicted arrival time or predicted departure time is greater than 0
     */
    private boolean isPredictedTimeValid() {
<span class="nc bnc" id="L278" title="All 90 branches missed.">        return (ListenerUtil.mutListener.listen(8147) ? ((ListenerUtil.mutListener.listen(8141) ? (predictedArrivalTime &gt;= 0) : (ListenerUtil.mutListener.listen(8140) ? (predictedArrivalTime &lt;= 0) : (ListenerUtil.mutListener.listen(8139) ? (predictedArrivalTime &lt; 0) : (ListenerUtil.mutListener.listen(8138) ? (predictedArrivalTime != 0) : (ListenerUtil.mutListener.listen(8137) ? (predictedArrivalTime == 0) : (predictedArrivalTime &gt; 0)))))) &amp;&amp; (ListenerUtil.mutListener.listen(8146) ? (predictedDepartureTime &gt;= 0) : (ListenerUtil.mutListener.listen(8145) ? (predictedDepartureTime &lt;= 0) : (ListenerUtil.mutListener.listen(8144) ? (predictedDepartureTime &lt; 0) : (ListenerUtil.mutListener.listen(8143) ? (predictedDepartureTime != 0) : (ListenerUtil.mutListener.listen(8142) ? (predictedDepartureTime == 0) : (predictedDepartureTime &gt; 0))))))) : ((ListenerUtil.mutListener.listen(8141) ? (predictedArrivalTime &gt;= 0) : (ListenerUtil.mutListener.listen(8140) ? (predictedArrivalTime &lt;= 0) : (ListenerUtil.mutListener.listen(8139) ? (predictedArrivalTime &lt; 0) : (ListenerUtil.mutListener.listen(8138) ? (predictedArrivalTime != 0) : (ListenerUtil.mutListener.listen(8137) ? (predictedArrivalTime == 0) : (predictedArrivalTime &gt; 0)))))) || (ListenerUtil.mutListener.listen(8146) ? (predictedDepartureTime &gt;= 0) : (ListenerUtil.mutListener.listen(8145) ? (predictedDepartureTime &lt;= 0) : (ListenerUtil.mutListener.listen(8144) ? (predictedDepartureTime &lt; 0) : (ListenerUtil.mutListener.listen(8143) ? (predictedDepartureTime != 0) : (ListenerUtil.mutListener.listen(8142) ? (predictedDepartureTime == 0) : (predictedDepartureTime &gt; 0))))))));</span>
    }

    /**
     * @return The trip status, if it exists.
     */
    public ObaTripStatus getTripStatus() {
<span class="nc" id="L285">        return tripStatus;</span>
    }

    /**
     * @return The array of situation IDs, or null.
     */
    public String[] getSituationIds() {
<span class="nc" id="L292">        return situationIds;</span>
    }

    /**
     * @return True if arrivals are enabled for this trip, false otherwise.
     */
    public boolean getArrivalEnabled() {
<span class="nc" id="L299">        return arrivalEnabled;</span>
    }

    /**
     * @return True if departures are enabled for this trip, false otherwise.
     */
    public boolean getDepartureEnabled() {
<span class="nc" id="L306">        return departureEnabled;</span>
    }

    /**
     * @return the index of the stop into the sequence of stops that make up the trip for this
     * arrival. This value is 0-indexed, and is generated internally by OneBusAway (it is not the
     * GTFS stop_sequence). The first stop in the trip will always have stopSequence = 0, while the
     * last stop in the trip will always have stopSequence = totalStopsInTrip - 1.
     */
    public int getStopSequence() {
<span class="nc" id="L316">        return stopSequence;</span>
    }

    /**
     * @return the total number of stops visited on the trip for this arrival, or 0 if the server
     * doesn't support this field. If the same stop is visited more than once in this trip, each
     * visitation is counted towards the total.
     */
    public int getTotalStopsInTrip() {
<span class="nc" id="L325">        return totalStopsInTrip;</span>
    }

    /**
     * @return The index of this arrival's trip into the sequence of trips for the active block.
     * Compare to blockTripSequence in the TripStatus element to determine where the
     * arrival-and-departure
     * is on the block in comparison to the active block location.
     */
    public int getBlockTripSequence() {
<span class="nc" id="L335">        return blockTripSequence;</span>
    }

    /**
     * @return the average historical occupancy of the vehicle when it arrives at this stop, or null if the occupancy is unknown
     */
    public Occupancy getHistoricalOccupancy() {
<span class="nc" id="L342">        return Occupancy.fromString(historicalOccupancy);</span>
    }

    /**
     * @return the predicted occupancy of the vehicle when it arrives at this stop, or null if the occupancy is unknown
     */
    public Occupancy getOccupancyStatus() {
<span class="nc" id="L349">        return Occupancy.fromString(occupancyStatus);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.2.0</div></body></html>