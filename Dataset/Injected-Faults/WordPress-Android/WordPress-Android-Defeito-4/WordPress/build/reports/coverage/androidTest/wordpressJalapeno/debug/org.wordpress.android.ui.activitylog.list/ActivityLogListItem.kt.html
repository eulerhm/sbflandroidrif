<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ActivityLogListItem.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.activitylog.list</a> &gt; <span class="el_source">ActivityLogListItem.kt</span></div><h1>ActivityLogListItem.kt</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.activitylog.list

import androidx.annotation.DrawableRes
import org.wordpress.android.R
import org.wordpress.android.fluxc.model.activity.ActivityLogModel
import org.wordpress.android.ui.activitylog.list.ActivityLogListItem.Icon.MORE
import org.wordpress.android.ui.activitylog.list.ActivityLogListItem.ViewType.EVENT
import org.wordpress.android.ui.activitylog.list.ActivityLogListItem.ViewType.FOOTER
import org.wordpress.android.ui.activitylog.list.ActivityLogListItem.ViewType.HEADER
import org.wordpress.android.ui.activitylog.list.ActivityLogListItem.ViewType.LOADING
import org.wordpress.android.ui.activitylog.list.ActivityLogListItem.ViewType.NOTICE
import org.wordpress.android.ui.activitylog.list.ActivityLogListItem.ViewType.PROGRESS
import org.wordpress.android.util.extensions.toFormattedDateString
import java.util.Date

<span class="nc" id="L16">sealed class ActivityLogListItem(val type: ViewType) {</span>
    interface IActionableItem {
        val isButtonVisible: Boolean
    }

<span class="nc" id="L21">    open fun longId(): Long = hashCode().toLong()</span>

<span class="nc" id="L23">    data class Event(</span>
<span class="nc" id="L24">        val activityId: String,</span>
<span class="nc" id="L25">        val title: String,</span>
<span class="nc" id="L26">        val description: String,</span>
<span class="nc" id="L27">        private val gridIcon: String?,</span>
<span class="nc" id="L28">        private val eventStatus: String?,</span>
<span class="nc" id="L29">        val isRewindable: Boolean,</span>
<span class="nc" id="L30">        val rewindId: String?,</span>
<span class="nc" id="L31">        val date: Date,</span>
<span class="nc" id="L32">        override val isButtonVisible: Boolean,</span>
<span class="nc" id="L33">        val buttonIcon: Icon,</span>
<span class="nc" id="L34">        val isRestoreHidden: Boolean</span>
<span class="nc" id="L35">    ) : ActivityLogListItem(EVENT), IActionableItem {</span>
<span class="nc" id="L36">        val formattedDate: String = date.toFormattedDateString()</span>
<span class="nc" id="L37">        val icon = Icon.fromValue(gridIcon)</span>
<span class="nc" id="L38">        val status = Status.fromValue(eventStatus)</span>

        constructor(
            model: ActivityLogModel,
            rewindDisabled: Boolean,
            isRestoreHidden: Boolean
<span class="nc" id="L44">        ) : this(</span>
<span class="nc" id="L45">                activityId = model.activityID,</span>
<span class="nc" id="L46">                title = model.summary,</span>
<span class="nc bnc" id="L47" title="All 4 branches missed.">                description = model.content?.text ?: &quot;&quot;,</span>
<span class="nc" id="L48">                gridIcon = model.gridicon,</span>
<span class="nc" id="L49">                eventStatus = model.status,</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">                isRewindable = model.rewindable ?: false,</span>
<span class="nc" id="L51">                rewindId = model.rewindID,</span>
<span class="nc" id="L52">                date = model.published,</span>
<span class="nc bnc" id="L53" title="All 6 branches missed.">                isButtonVisible = !rewindDisabled &amp;&amp; model.rewindable ?: false,</span>
<span class="nc" id="L54">                buttonIcon = MORE,</span>
<span class="nc" id="L55">                isRestoreHidden = isRestoreHidden</span>
<span class="nc" id="L56">        )</span>

<span class="nc" id="L58">        override fun longId(): Long = activityId.hashCode().toLong()</span>
    }

<span class="nc" id="L61">    data class Progress(</span>
<span class="nc" id="L62">        val title: String,</span>
<span class="nc" id="L63">        val description: String,</span>
<span class="nc" id="L64">        val progressType: Type</span>
<span class="nc" id="L65">    ) : ActivityLogListItem(PROGRESS) {</span>
        enum class Type {
<span class="nc" id="L67">            RESTORE,</span>
<span class="nc" id="L68">            BACKUP_DOWNLOAD</span>
        }
    }

<span class="nc" id="L72">    data class Header(val text: String) : ActivityLogListItem(HEADER)</span>

<span class="nc" id="L74">    object Footer : ActivityLogListItem(FOOTER)</span>

<span class="nc" id="L76">    object Loading : ActivityLogListItem(LOADING)</span>

<span class="nc" id="L78">    data class Notice(</span>
<span class="nc" id="L79">        val label: String,</span>
<span class="nc" id="L80">        val primaryAction: () -&gt; Unit,</span>
<span class="nc" id="L81">        val secondaryAction: () -&gt; Unit</span>
<span class="nc" id="L82">    ) : ActivityLogListItem(NOTICE)</span>

<span class="nc" id="L84">    enum class ViewType(val id: Int) {</span>
<span class="nc" id="L85">        EVENT(0),</span>
<span class="nc" id="L86">        PROGRESS(1),</span>
<span class="nc" id="L87">        HEADER(2),</span>
<span class="nc" id="L88">        FOOTER(3),</span>
<span class="nc" id="L89">        LOADING(4),</span>
<span class="nc" id="L90">        NOTICE(5)</span>
    }

<span class="nc" id="L93">    enum class Status(val value: String, @DrawableRes val color: Int) {</span>
<span class="nc" id="L94">        NEGATIVE(&quot;error&quot;, R.drawable.bg_oval_error_50),</span>
<span class="nc" id="L95">        INFO(&quot;warning&quot;, R.drawable.bg_oval_primary_50),</span>
<span class="nc" id="L96">        POSITIVE(&quot;success&quot;, R.drawable.bg_oval_success_50),</span>
<span class="nc" id="L97">        NEUTRAL(&quot;&quot;, R.drawable.bg_oval_neutral_30);</span>

        companion object {
<span class="nc" id="L100">            private val map = values().associateBy(Status::value)</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">            fun fromValue(value: String?) = map[value] ?: NEUTRAL</span>
        }
    }

<span class="nc" id="L105">    enum class Icon(val value: String, @DrawableRes val drawable: Int) {</span>
<span class="nc" id="L106">        CHECKMARK(&quot;checkmark&quot;, R.drawable.ic_checkmark_white_24dp),</span>
<span class="nc" id="L107">        CLOUD(&quot;cloud&quot;, R.drawable.ic_cloud_white_24dp),</span>
<span class="nc" id="L108">        COG(&quot;cog&quot;, R.drawable.ic_cog_white_24dp),</span>
<span class="nc" id="L109">        COMMENT(&quot;comment&quot;, R.drawable.ic_comment_white_24dp),</span>
<span class="nc" id="L110">        CROSS(&quot;cross&quot;, R.drawable.ic_cross_white_24dp),</span>
<span class="nc" id="L111">        DOMAINS(&quot;domains&quot;, R.drawable.ic_domains_white_24dp),</span>
<span class="nc" id="L112">        HISTORY(&quot;history&quot;, R.drawable.ic_history_white_24dp),</span>
<span class="nc" id="L113">        IMAGE(&quot;image&quot;, R.drawable.ic_image_white_24dp),</span>
<span class="nc" id="L114">        LAYOUT(&quot;layout&quot;, R.drawable.ic_layout_white_24dp),</span>
<span class="nc" id="L115">        LOCK(&quot;lock&quot;, R.drawable.ic_lock_white_24dp),</span>
<span class="nc" id="L116">        LOGOUT(&quot;logout&quot;, R.drawable.ic_sign_out_white_24dp),</span>
<span class="nc" id="L117">        MAIL(&quot;mail&quot;, R.drawable.ic_mail_white_24dp),</span>
<span class="nc" id="L118">        MENU(&quot;menu&quot;, R.drawable.ic_menu_white_24dp),</span>
<span class="nc" id="L119">        MY_SITES(&quot;my-sites&quot;, R.drawable.ic_my_sites_white_24dp),</span>
<span class="nc" id="L120">        NOTICE(&quot;notice&quot;, R.drawable.ic_notice_white_24dp),</span>
<span class="nc" id="L121">        NOTICE_OUTLINE(&quot;notice-outline&quot;, R.drawable.ic_notice_outline_white_24dp),</span>
<span class="nc" id="L122">        PAGES(&quot;pages&quot;, R.drawable.ic_pages_white_24dp),</span>
<span class="nc" id="L123">        PLANS(&quot;plans&quot;, R.drawable.ic_plans_white_24dp),</span>
<span class="nc" id="L124">        PLUGINS(&quot;plugins&quot;, R.drawable.ic_plugins_white_24dp),</span>
<span class="nc" id="L125">        POSTS(&quot;posts&quot;, R.drawable.ic_posts_white_24dp),</span>
<span class="nc" id="L126">        SHARE(&quot;share&quot;, R.drawable.ic_share_white_24dp),</span>
<span class="nc" id="L127">        SHIPPING(&quot;shipping&quot;, R.drawable.ic_shipping_white_24dp),</span>
<span class="nc" id="L128">        SPAM(&quot;spam&quot;, R.drawable.ic_spam_white_24dp),</span>
<span class="nc" id="L129">        THEMES(&quot;themes&quot;, R.drawable.ic_themes_white_24dp),</span>
<span class="nc" id="L130">        TRASH(&quot;trash&quot;, R.drawable.ic_trash_white_24dp),</span>
<span class="nc" id="L131">        USER(&quot;user&quot;, R.drawable.ic_user_white_24dp),</span>
<span class="nc" id="L132">        MORE(&quot;more&quot;, R.drawable.ic_ellipsis_vertical_white_24dp),</span>
<span class="nc" id="L133">        DEFAULT(&quot;&quot;, R.drawable.ic_notice_white_24dp);</span>

        companion object {
<span class="nc" id="L136">            private val map = values().associateBy(Icon::value)</span>
<span class="nc bnc" id="L137" title="All 2 branches missed.">            fun fromValue(value: String?) = map[value] ?: DEFAULT</span>
        }
    }

<span class="nc" id="L141">    enum class SecondaryAction(val itemId: Long) {</span>
<span class="nc" id="L142">        RESTORE(0),</span>
<span class="nc" id="L143">        DOWNLOAD_BACKUP(1);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>