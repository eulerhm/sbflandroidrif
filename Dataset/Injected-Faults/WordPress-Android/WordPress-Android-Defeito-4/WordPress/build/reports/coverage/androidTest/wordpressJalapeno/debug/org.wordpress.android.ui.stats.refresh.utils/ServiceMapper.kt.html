<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ServiceMapper.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.stats.refresh.utils</a> &gt; <span class="el_source">ServiceMapper.kt</span></div><h1>ServiceMapper.kt</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.stats.refresh.utils

import androidx.annotation.StringRes
import org.wordpress.android.R
import org.wordpress.android.fluxc.model.stats.PublicizeModel
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Header
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ListItemWithIcon
import org.wordpress.android.ui.stats.refresh.utils.ServiceMapper.Service.FACEBOOK
import org.wordpress.android.ui.stats.refresh.utils.ServiceMapper.Service.GOOGLE_PLUS
import org.wordpress.android.ui.stats.refresh.utils.ServiceMapper.Service.LINKED_IN
import org.wordpress.android.ui.stats.refresh.utils.ServiceMapper.Service.PATH
import org.wordpress.android.ui.stats.refresh.utils.ServiceMapper.Service.TUMBLR
import org.wordpress.android.ui.stats.refresh.utils.ServiceMapper.Service.TWITTER
import org.wordpress.android.viewmodel.ResourceProvider
import javax.inject.Inject

private const val FACEBOOK_ICON = &quot;https://secure.gravatar.com/blavatar/2343ec78a04c6ea9d80806345d31fd78?s=&quot;
private const val TWITTER_ICON = &quot;https://secure.gravatar.com/blavatar/7905d1c4e12c54933a44d19fcd5f9356?s=&quot;
private const val TUMBLR_ICON = &quot;https://secure.gravatar.com/blavatar/84314f01e87cb656ba5f382d22d85134?s=&quot;
private const val GOOGLE_PLUS_ICON = &quot;https://secure.gravatar.com/blavatar/4a4788c1dfc396b1f86355b274cc26b3?s=&quot;
private const val LINKED_IN_ICON = &quot;https://secure.gravatar.com/blavatar/f54db463750940e0e7f7630fe327845e?s=&quot;
private const val PATH_ICON = &quot;https://secure.gravatar.com/blavatar/3a03c8ce5bf1271fb3760bb6e79b02c1?s=&quot;

<span class="nc" id="L24">class ServiceMapper</span>
<span class="nc" id="L25">@Inject constructor(</span>
<span class="nc" id="L26">    private val resourceProvider: ResourceProvider,</span>
<span class="nc" id="L27">    private val statsUtils: StatsUtils,</span>
<span class="nc" id="L28">    private val contentDescriptionHelper: ContentDescriptionHelper</span>
) {
    fun map(
        services: List&lt;PublicizeModel.Service&gt;,
        header: Header
    ): List&lt;ListItemWithIcon&gt; {
<span class="nc" id="L34">        val dimension = resourceProvider.getDimensionPixelSize(R.dimen.avatar_sz_small)</span>
<span class="nc" id="L35">        return services.mapIndexed { index, service -&gt;</span>
<span class="nc" id="L36">            val mappedService = getService(service.name)</span>
<span class="nc bnc" id="L37" title="All 4 branches missed.">            val text = if (mappedService?.nameResource == null) service.name else null</span>
<span class="nc" id="L38">            val contentDescription = contentDescriptionHelper.buildContentDescription(</span>
<span class="nc" id="L39">                    header,</span>
<span class="nc bnc" id="L40" title="All 2 branches missed.">                    text ?: &quot;&quot;,</span>
<span class="nc" id="L41">                    service.followers</span>
            )
<span class="nc" id="L43">            ListItemWithIcon(</span>
<span class="nc bnc" id="L44" title="All 4 branches missed.">                    iconUrl = mappedService?.iconUrl?.let { it + dimension },</span>
<span class="nc" id="L45">                    text = text,</span>
<span class="nc bnc" id="L46" title="All 2 branches missed.">                    textResource = mappedService?.nameResource,</span>
<span class="nc" id="L47">                    value = statsUtils.toFormattedString(service.followers),</span>
<span class="nc bnc" id="L48" title="All 2 branches missed.">                    showDivider = index &lt; services.size - 1,</span>
<span class="nc" id="L49">                    contentDescription = contentDescription</span>
            )
        }
    }

<span class="nc" id="L54">    enum class Service(</span>
<span class="nc" id="L55">        val iconUrl: String,</span>
<span class="nc" id="L56">        @StringRes val nameResource: Int</span>
    ) {
<span class="nc" id="L58">        FACEBOOK(FACEBOOK_ICON, nameResource = R.string.stats_insights_facebook),</span>
<span class="nc" id="L59">        TWITTER(TWITTER_ICON, nameResource = R.string.stats_insights_twitter),</span>
<span class="nc" id="L60">        TUMBLR(TUMBLR_ICON, nameResource = R.string.stats_insights_tumblr),</span>
<span class="nc" id="L61">        GOOGLE_PLUS(GOOGLE_PLUS_ICON, nameResource = R.string.stats_insights_google_plus),</span>
<span class="nc" id="L62">        LINKED_IN(LINKED_IN_ICON, nameResource = R.string.stats_insights_linkedin),</span>
<span class="nc" id="L63">        PATH(PATH_ICON, nameResource = R.string.stats_insights_path)</span>
    }

    private fun getService(service: String): Service? {
<span class="nc bnc" id="L67" title="All 7 branches missed.">        return when (service) {</span>
<span class="nc" id="L68">            &quot;facebook&quot; -&gt; FACEBOOK</span>
<span class="nc" id="L69">            &quot;twitter&quot; -&gt; TWITTER</span>
<span class="nc" id="L70">            &quot;google_plus&quot; -&gt; GOOGLE_PLUS</span>
<span class="nc" id="L71">            &quot;tumblr&quot; -&gt; TUMBLR</span>
<span class="nc" id="L72">            &quot;linkedin&quot; -&gt; LINKED_IN</span>
<span class="nc" id="L73">            &quot;path&quot; -&gt; PATH</span>
<span class="nc" id="L74">            else -&gt; null</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>