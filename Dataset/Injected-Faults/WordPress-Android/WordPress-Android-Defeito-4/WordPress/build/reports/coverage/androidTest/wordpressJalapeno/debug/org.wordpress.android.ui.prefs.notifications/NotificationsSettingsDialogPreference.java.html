<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NotificationsSettingsDialogPreference.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.prefs.notifications</a> &gt; <span class="el_source">NotificationsSettingsDialogPreference.java</span></div><h1>NotificationsSettingsDialogPreference.java</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.prefs.notifications;

import android.app.ActionBar;
import android.app.ActionBar.LayoutParams;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.preference.DialogPreference;
import android.text.TextUtils;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewGroup.MarginLayoutParams;
import android.widget.CompoundButton;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.appcompat.widget.SwitchCompat;
import androidx.core.content.ContextCompat;

import org.json.JSONException;
import org.json.JSONObject;
import org.wordpress.android.R;
import org.wordpress.android.databinding.NotificationsSettingsSwitchBinding;
import org.wordpress.android.models.NotificationsSettings;
import org.wordpress.android.models.NotificationsSettings.Channel;
import org.wordpress.android.models.NotificationsSettings.Type;
import org.wordpress.android.ui.prefs.AppPrefs;
import org.wordpress.android.ui.prefs.notifications.PrefMainSwitchToolbarView.MainSwitchToolbarListener;
import org.wordpress.android.util.AppLog;
import org.wordpress.android.util.AppLog.T;
import org.wordpress.android.util.JSONUtils;
import org.wordpress.android.util.extensions.ContextExtensionsKt;

import java.util.Iterator;

// A dialog preference that displays settings for a NotificationSettings Channel and Type
public class NotificationsSettingsDialogPreference extends DialogPreference
        implements MainSwitchToolbarListener {
    private static final String SETTING_VALUE_ACHIEVEMENT = &quot;achievement&quot;;

    private NotificationsSettings.Channel mChannel;
    private NotificationsSettings.Type mType;
    private NotificationsSettings mSettings;
<span class="nc" id="L48">    private JSONObject mUpdatedJson = new JSONObject();</span>
    private long mBlogId;

    private ViewGroup mTitleViewWithMainSwitch;

    // view to display when main switch is on
    private View mDisabledView;
    // view to display when main switch is off
    private LinearLayout mOptionsView;

    private PrefMainSwitchToolbarView mMainSwitchToolbarView;
    private boolean mShouldDisplayMainSwitch;

<span class="nc" id="L61">    private String[] mSettingsArray = new String[0], mSettingsValues = new String[0];</span>

    private OnNotificationsSettingsChangedListener mOnNotificationsSettingsChangedListener;

    private final BloggingRemindersProvider mBloggingRemindersProvider;

    public interface OnNotificationsSettingsChangedListener {
        void onSettingsChanged(Channel channel, Type type, long siteId, JSONObject newValues);
    }

    public interface BloggingRemindersProvider {
        boolean isEnabled();

        String getSummary(long blogId);

        void onClick(long blogId);
    }

    public NotificationsSettingsDialogPreference(Context context, AttributeSet attrs, Channel channel,
                                                 Type type, long blogId, NotificationsSettings settings,
                                                 OnNotificationsSettingsChangedListener listener) {
<span class="nc" id="L82">        this(context, attrs, channel, type, blogId, settings, listener, null);</span>
<span class="nc" id="L83">    }</span>

    public NotificationsSettingsDialogPreference(Context context, AttributeSet attrs, Channel channel,
                                                 Type type, long blogId, NotificationsSettings settings,
                                                 OnNotificationsSettingsChangedListener listener,
                                                 BloggingRemindersProvider bloggingRemindersProvider) {
<span class="nc" id="L89">        super(context, attrs);</span>

<span class="nc" id="L91">        mChannel = channel;</span>
<span class="nc" id="L92">        mType = type;</span>
<span class="nc" id="L93">        mBlogId = blogId;</span>
<span class="nc" id="L94">        mSettings = settings;</span>
<span class="nc" id="L95">        mOnNotificationsSettingsChangedListener = listener;</span>
<span class="nc" id="L96">        mBloggingRemindersProvider = bloggingRemindersProvider;</span>
<span class="nc" id="L97">        mShouldDisplayMainSwitch = mSettings.shouldDisplayMainSwitch(mChannel, mType);</span>
<span class="nc" id="L98">    }</span>

    @Override
    protected void onBindDialogView(@NonNull View view) {
<span class="nc" id="L102">        super.onBindDialogView(view);</span>
<span class="nc bnc" id="L103" title="All 2 branches missed.">        if (mShouldDisplayMainSwitch) {</span>
<span class="nc" id="L104">            setupTitleViewWithMainSwitch(view);</span>
        }
<span class="nc" id="L106">    }</span>

    @Override
    protected void onPrepareDialogBuilder(Builder builder) {
<span class="nc" id="L110">        super.onPrepareDialogBuilder(builder);</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">        if (mShouldDisplayMainSwitch) {</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">            if (mTitleViewWithMainSwitch == null) {</span>
<span class="nc" id="L113">                AppLog.e(T.NOTIFS, &quot;Main switch enabled but layout not set&quot;);</span>
<span class="nc" id="L114">                return;</span>
            }
<span class="nc" id="L116">            builder.setCustomTitle(mTitleViewWithMainSwitch);</span>
        }
<span class="nc" id="L118">    }</span>

    @Override
    protected View onCreateDialogView() {
<span class="nc" id="L122">        ScrollView outerView = new ScrollView(getContext());</span>
<span class="nc" id="L123">        outerView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,</span>
                LinearLayout.LayoutParams.WRAP_CONTENT));

<span class="nc" id="L126">        LinearLayout innerView = new LinearLayout(getContext());</span>
<span class="nc" id="L127">        innerView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,</span>
                LinearLayout.LayoutParams.MATCH_PARENT));
<span class="nc" id="L129">        innerView.setOrientation(LinearLayout.VERTICAL);</span>

<span class="nc bnc" id="L131" title="All 2 branches missed.">        if (mShouldDisplayMainSwitch) {</span>
<span class="nc" id="L132">            View dividerView = new View(getContext());</span>
<span class="nc" id="L133">            int dividerHeight = getContext().getResources().getDimensionPixelSize(</span>
                    R.dimen.notifications_settings_dialog_divider_height
            );
<span class="nc" id="L136">            dividerView.setBackground(</span>
<span class="nc" id="L137">                    ContextExtensionsKt.getDrawableFromAttribute(getContext(), android.R.attr.listDivider)</span>
            );
<span class="nc" id="L139">            dividerView.setLayoutParams(new ViewGroup.LayoutParams(ActionBar.LayoutParams.MATCH_PARENT, dividerHeight));</span>
<span class="nc" id="L140">            innerView.addView(dividerView);</span>
<span class="nc" id="L141">        } else {</span>
<span class="nc" id="L142">            View spacerView = new View(getContext());</span>
<span class="nc" id="L143">            int spacerHeight = getContext().getResources().getDimensionPixelSize(R.dimen.margin_medium);</span>
<span class="nc" id="L144">            spacerView.setLayoutParams(new ViewGroup.LayoutParams(ActionBar.LayoutParams.MATCH_PARENT, spacerHeight));</span>
<span class="nc" id="L145">            innerView.addView(spacerView);</span>
        }

<span class="nc" id="L148">        mDisabledView = View.inflate(getContext(), R.layout.notifications_tab_disabled_text_layout, null);</span>
<span class="nc" id="L149">        mDisabledView.setLayoutParams(</span>
                new ViewGroup.LayoutParams(
                        LayoutParams.MATCH_PARENT,
                        LayoutParams.WRAP_CONTENT
                )
        );

<span class="nc" id="L156">        mOptionsView = new LinearLayout(getContext());</span>
<span class="nc" id="L157">        mOptionsView.setLayoutParams(</span>
                new LinearLayout.LayoutParams(
                        LinearLayout.LayoutParams.MATCH_PARENT,
                        LinearLayout.LayoutParams.MATCH_PARENT
                )
        );
<span class="nc" id="L163">        mOptionsView.setOrientation(LinearLayout.VERTICAL);</span>

<span class="nc" id="L165">        innerView.addView(mDisabledView);</span>
<span class="nc" id="L166">        innerView.addView(mOptionsView);</span>

<span class="nc" id="L168">        outerView.addView(innerView);</span>
<span class="nc" id="L169">        configureLayoutForView(mOptionsView);</span>

<span class="nc" id="L171">        return outerView;</span>
    }

    private View configureLayoutForView(LinearLayout view) {
<span class="nc" id="L175">        JSONObject settingsJson = mSettings.getSettingsJsonForChannelAndType(mChannel, mType, mBlogId);</span>
<span class="nc" id="L176">        String[] summaryArray = new String[0];</span>

<span class="nc bnc" id="L178" title="All 4 branches missed.">        switch (mChannel) {</span>
            case BLOGS:
<span class="nc" id="L180">                mSettingsArray = getContext().getResources().getStringArray(R.array.notifications_blog_settings);</span>
<span class="nc" id="L181">                mSettingsValues = getContext().getResources()</span>
<span class="nc" id="L182">                                              .getStringArray(R.array.notifications_blog_settings_values);</span>
<span class="nc" id="L183">                break;</span>
            case OTHER:
<span class="nc" id="L185">                mSettingsArray = getContext().getResources().getStringArray(R.array.notifications_other_settings);</span>
<span class="nc" id="L186">                mSettingsValues =</span>
<span class="nc" id="L187">                        getContext().getResources().getStringArray(R.array.notifications_other_settings_values);</span>
<span class="nc" id="L188">                break;</span>
            case WPCOM:
<span class="nc" id="L190">                mSettingsArray = getContext().getResources().getStringArray(R.array.notifications_wpcom_settings);</span>
<span class="nc" id="L191">                mSettingsValues =</span>
<span class="nc" id="L192">                        getContext().getResources().getStringArray(R.array.notifications_wpcom_settings_values);</span>
<span class="nc" id="L193">                summaryArray =</span>
<span class="nc" id="L194">                        getContext().getResources().getStringArray(R.array.notifications_wpcom_settings_summaries);</span>
                break;
        }

<span class="nc bnc" id="L198" title="All 4 branches missed.">        boolean shouldShowLocalNotifications = mChannel == Channel.BLOGS &amp;&amp; mType == Type.DEVICE;</span>

<span class="nc bnc" id="L200" title="All 4 branches missed.">        if (settingsJson != null &amp;&amp; mSettingsArray.length == mSettingsValues.length) {</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">            for (int i = 0; i &lt; mSettingsArray.length; i++) {</span>
<span class="nc" id="L202">                String settingName = mSettingsArray[i];</span>
<span class="nc" id="L203">                String settingValue = mSettingsValues[i];</span>

                // Skip a few settings for 'Email' section
<span class="nc bnc" id="L206" title="All 4 branches missed.">                if (mType == Type.EMAIL &amp;&amp; settingValue.equals(SETTING_VALUE_ACHIEVEMENT)) {</span>
<span class="nc" id="L207">                    continue;</span>
                }

                // Add special summary text for the WPCOM section
<span class="nc" id="L211">                String settingSummary = null;</span>
<span class="nc bnc" id="L212" title="All 4 branches missed.">                if (mChannel == Channel.WPCOM &amp;&amp; i &lt; summaryArray.length) {</span>
<span class="nc" id="L213">                    settingSummary = summaryArray[i];</span>
                }

<span class="nc" id="L216">                boolean isSettingChecked = JSONUtils.queryJSON(settingsJson, settingValue, true);</span>

<span class="nc bnc" id="L218" title="All 4 branches missed.">                boolean isSettingLast = !shouldShowLocalNotifications &amp;&amp; i == mSettingsArray.length - 1;</span>

<span class="nc" id="L220">                view.addView(setupSwitchSettingView(settingName, settingValue, settingSummary, isSettingChecked,</span>
                        isSettingLast, mOnCheckedChangedListener));
            }
        }

<span class="nc bnc" id="L225" title="All 2 branches missed.">        if (shouldShowLocalNotifications) {</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">            boolean isBloggingRemindersEnabled =</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">                    mBloggingRemindersProvider != null &amp;&amp; mBloggingRemindersProvider.isEnabled();</span>
<span class="nc bnc" id="L228" title="All 2 branches missed.">            addWeeklyRoundupSetting(view, !isBloggingRemindersEnabled);</span>
<span class="nc bnc" id="L229" title="All 2 branches missed.">            if (isBloggingRemindersEnabled) {</span>
<span class="nc" id="L230">                addBloggingReminderSetting(view);</span>
            }
        }

<span class="nc" id="L234">        return view;</span>
    }

    private void addWeeklyRoundupSetting(LinearLayout view, boolean isLast) {
<span class="nc" id="L238">        view.addView(setupSwitchSettingView(</span>
<span class="nc" id="L239">                getContext().getString(R.string.weekly_roundup),</span>
                null,
                null,
<span class="nc" id="L242">                AppPrefs.shouldShowWeeklyRoundupNotification(mBlogId),</span>
                isLast,
<span class="nc" id="L244">                (compoundButton, isChecked) -&gt; AppPrefs.setShouldShowWeeklyRoundupNotification(mBlogId, isChecked)</span>
        ));
<span class="nc" id="L246">    }</span>


    private void addBloggingReminderSetting(LinearLayout view) {
<span class="nc" id="L250">        view.addView(setupClickSettingView(</span>
<span class="nc" id="L251">                getContext().getString(R.string.site_settings_blogging_reminders_title),</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">                mBloggingRemindersProvider != null ? mBloggingRemindersProvider.getSummary(mBlogId) : null,</span>
                true,
                (v -&gt; {
<span class="nc bnc" id="L255" title="All 2 branches missed.">                    if (mBloggingRemindersProvider != null) {</span>
<span class="nc" id="L256">                        mBloggingRemindersProvider.onClick(mBlogId);</span>
                    }
<span class="nc" id="L258">                    getDialog().dismiss();</span>
<span class="nc" id="L259">                })</span>
        ));
<span class="nc" id="L261">    }</span>

    private View setupSwitchSettingView(String settingName, @Nullable String settingValue,
                                        @Nullable String settingSummary, boolean isSettingChecked,
                                        boolean isSettingLast,
                                        CompoundButton.OnCheckedChangeListener onCheckedChangeListener) {
<span class="nc" id="L267">        return setupSettingView(settingName, settingValue, settingSummary, isSettingChecked, isSettingLast,</span>
                onCheckedChangeListener, null);
    }

    private View setupClickSettingView(String settingName, String settingSummary, boolean isSettingLast,
                                       View.OnClickListener onClickListener) {
<span class="nc" id="L273">        return setupSettingView(settingName, null, settingSummary, false, isSettingLast, null, onClickListener);</span>
    }

    private View setupSettingView(String settingName, @Nullable String settingValue, @Nullable String settingSummary,
                                  boolean isSettingChecked, boolean isSettingLast,
                                  @Nullable CompoundButton.OnCheckedChangeListener onCheckedChangeListener,
                                  @Nullable View.OnClickListener onClickListener) {
<span class="nc" id="L280">        NotificationsSettingsSwitchBinding binding =</span>
<span class="nc" id="L281">                NotificationsSettingsSwitchBinding.inflate(LayoutInflater.from(getContext()));</span>

<span class="nc" id="L283">        binding.notificationsSwitchTitle.setText(settingName);</span>

<span class="nc bnc" id="L285" title="All 2 branches missed.">        if (!TextUtils.isEmpty(settingSummary)) {</span>
<span class="nc" id="L286">            binding.notificationsSwitchSummary.setVisibility(View.VISIBLE);</span>
<span class="nc" id="L287">            binding.notificationsSwitchSummary.setText(settingSummary);</span>
        }

<span class="nc bnc" id="L290" title="All 2 branches missed.">        if (onCheckedChangeListener != null) {</span>
<span class="nc" id="L291">            binding.notificationsSwitch.setChecked(isSettingChecked);</span>
<span class="nc" id="L292">            binding.notificationsSwitch.setTag(settingValue);</span>
<span class="nc" id="L293">            binding.notificationsSwitch.setOnCheckedChangeListener(onCheckedChangeListener);</span>
<span class="nc" id="L294">            binding.rowContainer.setOnClickListener(v -&gt; binding.notificationsSwitch.toggle());</span>
        } else {
<span class="nc" id="L296">            binding.notificationsSwitch.setVisibility(View.GONE);</span>
        }

<span class="nc bnc" id="L299" title="All 2 branches missed.">        if (onClickListener != null) {</span>
<span class="nc" id="L300">            binding.rowContainer.setOnClickListener(onClickListener);</span>
        }

<span class="nc bnc" id="L303" title="All 4 branches missed.">        if (mShouldDisplayMainSwitch &amp;&amp; isSettingLast) {</span>
<span class="nc" id="L304">            View divider = binding.notificationsListDivider;</span>
<span class="nc" id="L305">            MarginLayoutParams mlp = (MarginLayoutParams) divider.getLayoutParams();</span>
<span class="nc" id="L306">            mlp.leftMargin = 0;</span>
<span class="nc" id="L307">            mlp.rightMargin = 0;</span>
<span class="nc" id="L308">            divider.setLayoutParams(mlp);</span>
        }

<span class="nc" id="L311">        return binding.getRoot();</span>
    }

<span class="nc" id="L314">    private final CompoundButton.OnCheckedChangeListener mOnCheckedChangedListener =</span>
<span class="nc" id="L315">            new CompoundButton.OnCheckedChangeListener() {</span>
                @Override
                public void onCheckedChanged(CompoundButton compoundButton, boolean isChecked) {
                    try {
<span class="nc" id="L319">                        mUpdatedJson.put(compoundButton.getTag().toString(), isChecked);</span>

                        // Switch off main switch if all current settings switches are off
<span class="nc bnc" id="L322" title="All 4 branches missed.">                        if (mMainSwitchToolbarView != null</span>
                            &amp;&amp; !isChecked
<span class="nc bnc" id="L324" title="All 2 branches missed.">                            &amp;&amp; areAllSettingsSwitchesUnchecked()</span>
                        ) {
<span class="nc" id="L326">                            mMainSwitchToolbarView.setChecked(false);</span>
                        }
<span class="nc" id="L328">                    } catch (JSONException e) {</span>
<span class="nc" id="L329">                        AppLog.e(AppLog.T.NOTIFS, &quot;Could not add notification setting change to JSONObject&quot;);</span>
<span class="nc" id="L330">                    }</span>
<span class="nc" id="L331">                }</span>
            };

    @Override
    protected void onDialogClosed(boolean positiveResult) {
<span class="nc bnc" id="L336" title="All 6 branches missed.">        if (positiveResult &amp;&amp; mUpdatedJson.length() &gt; 0 &amp;&amp; mOnNotificationsSettingsChangedListener != null) {</span>
<span class="nc" id="L337">            mOnNotificationsSettingsChangedListener.onSettingsChanged(mChannel, mType, mBlogId, mUpdatedJson);</span>

            // Update the settings json
<span class="nc" id="L340">            Iterator&lt;?&gt; keys = mUpdatedJson.keys();</span>
<span class="nc bnc" id="L341" title="All 2 branches missed.">            while (keys.hasNext()) {</span>
<span class="nc" id="L342">                String settingName = (String) keys.next();</span>
<span class="nc" id="L343">                mSettings.updateSettingForChannelAndType(</span>
                        mChannel, mType, settingName,
<span class="nc" id="L345">                        mUpdatedJson.optBoolean(settingName), mBlogId</span>
                );
<span class="nc" id="L347">            }</span>
        }
<span class="nc" id="L349">    }</span>

    private void setupTitleViewWithMainSwitch(View view) {
<span class="nc bnc" id="L352" title="All 2 branches missed.">        switch (mChannel) {</span>
            case BLOGS:
<span class="nc bnc" id="L354" title="All 2 branches missed.">                if (mType == Type.TIMELINE) {</span>
<span class="nc" id="L355">                    mTitleViewWithMainSwitch = (ViewGroup) LayoutInflater</span>
<span class="nc" id="L356">                            .from(getContext())</span>
<span class="nc" id="L357">                            .inflate(R.layout.notifications_tab_for_blog_title_layout, (ViewGroup) view, false);</span>
                }
                break;
            case OTHER:
            case WPCOM:
            default:
                break;
        }

<span class="nc bnc" id="L366" title="All 2 branches missed.">        if (mTitleViewWithMainSwitch != null) {</span>
<span class="nc" id="L367">            TextView titleView = mTitleViewWithMainSwitch.findViewById(R.id.title);</span>
<span class="nc" id="L368">            CharSequence dialogTitle = getDialogTitle();</span>
<span class="nc bnc" id="L369" title="All 2 branches missed.">            if (dialogTitle != null) {</span>
<span class="nc" id="L370">                titleView.setText(dialogTitle);</span>
            }

<span class="nc" id="L373">            mMainSwitchToolbarView = mTitleViewWithMainSwitch.findViewById(R.id.main_switch);</span>

<span class="nc" id="L375">            mMainSwitchToolbarView.setMainSwitchToolbarListener(this);</span>
<span class="nc" id="L376">            mMainSwitchToolbarView</span>
<span class="nc" id="L377">                    .setBackgroundColor(ContextCompat.getColor(getContext(), android.R.color.transparent));</span>

            // Main Switch initial state:
            // On: If at least one of the settings options is on
            // Off: If all settings options are off
<span class="nc" id="L382">            JSONObject settingsJson = mSettings.getSettingsJsonForChannelAndType(mChannel, mType, mBlogId);</span>
<span class="nc" id="L383">            boolean checkMainSwitch = mSettings.isAtLeastOneSettingsEnabled(</span>
                    settingsJson,
                    mSettingsArray,
                    mSettingsValues
            );
<span class="nc" id="L388">            mMainSwitchToolbarView.loadInitialState(checkMainSwitch);</span>

<span class="nc" id="L390">            hideDisabledView(mMainSwitchToolbarView.isMainChecked());</span>
        }
<span class="nc" id="L392">    }</span>

    @Override
    public void onMainSwitchCheckedChanged(
            CompoundButton buttonView,
            boolean isChecked) {
<span class="nc" id="L398">        setSettingsSwitchesChecked(isChecked);</span>
<span class="nc" id="L399">        hideDisabledView(isChecked);</span>
<span class="nc" id="L400">    }</span>

    /**
     * Hide view when Notifications Tab Settings are disabled by toggling the main switch off.
     *
     * @param isMainChecked TRUE to hide disabled view, FALSE to show disabled view
     */
    private void hideDisabledView(boolean isMainChecked) {
<span class="nc bnc" id="L408" title="All 2 branches missed.">        mDisabledView.setVisibility(isMainChecked ? View.GONE : View.VISIBLE);</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">        mOptionsView.setVisibility(isMainChecked ? View.VISIBLE : View.GONE);</span>
<span class="nc" id="L410">    }</span>

    /**
     * Updates Notifications current settings switches state based on the main switch state
     *
     * @param isMainChecked TRUE to switch on the settings switches.
     *                      FALSE to switch off the settings switches.
     */
    private void setSettingsSwitchesChecked(boolean isMainChecked) {
<span class="nc bnc" id="L419" title="All 2 branches missed.">        for (String settingValue : mSettingsValues) {</span>
<span class="nc" id="L420">            final SwitchCompat toggleSwitch = mOptionsView.findViewWithTag(settingValue);</span>
<span class="nc bnc" id="L421" title="All 2 branches missed.">            if (toggleSwitch != null) {</span>
<span class="nc" id="L422">                toggleSwitch.setChecked(isMainChecked);</span>
            }
        }
<span class="nc" id="L425">    }</span>

    // returns true if all current settings switches on the dialog are unchecked
    private boolean areAllSettingsSwitchesUnchecked() {
<span class="nc" id="L429">        boolean settingsSwitchesUnchecked = true;</span>

<span class="nc bnc" id="L431" title="All 2 branches missed.">        for (String settingValue : mSettingsValues) {</span>
<span class="nc" id="L432">            final SwitchCompat toggleSwitch = mOptionsView.findViewWithTag(settingValue);</span>
<span class="nc bnc" id="L433" title="All 2 branches missed.">            if (toggleSwitch != null) {</span>
<span class="nc" id="L434">                boolean isChecked = toggleSwitch.isChecked();</span>
<span class="nc bnc" id="L435" title="All 2 branches missed.">                if (isChecked) {</span>
<span class="nc" id="L436">                    settingsSwitchesUnchecked = false;</span>
<span class="nc" id="L437">                    break;</span>
                }
            }
        }

<span class="nc" id="L442">        return settingsSwitchesUnchecked;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>