<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoginAnalyticsTracker.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.accounts.login</a> &gt; <span class="el_source">LoginAnalyticsTracker.java</span></div><h1>LoginAnalyticsTracker.java</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.accounts.login;

import org.jetbrains.annotations.NotNull;
import org.wordpress.android.analytics.AnalyticsTracker;
import org.wordpress.android.fluxc.store.AccountStore;
import org.wordpress.android.fluxc.store.SiteStore;
import org.wordpress.android.login.LoginAnalyticsListener;
import org.wordpress.android.ui.accounts.UnifiedLoginTracker;
import org.wordpress.android.ui.accounts.UnifiedLoginTracker.Click;
import org.wordpress.android.ui.accounts.UnifiedLoginTracker.Flow;
import org.wordpress.android.ui.accounts.UnifiedLoginTracker.Step;
import org.wordpress.android.util.analytics.AnalyticsUtils;

import java.util.HashMap;
import java.util.Map;

import javax.inject.Singleton;

@Singleton
public class LoginAnalyticsTracker implements LoginAnalyticsListener {
    private AccountStore mAccountStore;
    private SiteStore mSiteStore;
    private UnifiedLoginTracker mUnifiedLoginTracker;

    public LoginAnalyticsTracker(AccountStore accountStore, SiteStore siteStore,
<span class="nc" id="L26">                                 UnifiedLoginTracker unifiedLoginTracker) {</span>
<span class="nc" id="L27">        this.mAccountStore = accountStore;</span>
<span class="nc" id="L28">        this.mSiteStore = siteStore;</span>
<span class="nc" id="L29">        mUnifiedLoginTracker = unifiedLoginTracker;</span>
<span class="nc" id="L30">    }</span>

    @Override
    public void trackAnalyticsSignIn(boolean isWpcom) {
<span class="nc" id="L34">        AnalyticsUtils.trackAnalyticsSignIn(mAccountStore, mSiteStore, isWpcom);</span>
<span class="nc" id="L35">    }</span>

    @Override
    public void trackCreatedAccount(String username, String email, CreatedAccountSource source) {
<span class="nc" id="L39">        AnalyticsUtils.trackAnalyticsAccountCreated(username, email, source.asPropertyMap());</span>
<span class="nc" id="L40">    }</span>

    @Override
    public void trackEmailFormViewed() {
<span class="nc" id="L44">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_EMAIL_FORM_VIEWED);</span>
<span class="nc" id="L45">        mUnifiedLoginTracker.track(Flow.WORDPRESS_COM, Step.START);</span>
<span class="nc" id="L46">    }</span>

    @Override
    public void trackInsertedInvalidUrl() {
<span class="nc" id="L50">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_INSERTED_INVALID_URL);</span>
<span class="nc" id="L51">    }</span>

    @Override
    public void trackLoginAccessed() {
<span class="nc" id="L55">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_ACCESSED);</span>
<span class="nc" id="L56">    }</span>

    @Override
    public void trackLoginAutofillCredentialsFilled() {
<span class="nc" id="L60">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_AUTOFILL_CREDENTIALS_FILLED);</span>
<span class="nc" id="L61">        mUnifiedLoginTracker.track(Flow.SMART_LOCK_LOGIN, Step.START);</span>
<span class="nc" id="L62">    }</span>

    @Override
    public void trackLoginAutofillCredentialsUpdated() {
<span class="nc" id="L66">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_AUTOFILL_CREDENTIALS_UPDATED);</span>
<span class="nc" id="L67">    }</span>

    @Override
    public void trackLoginFailed(String errorContext, String errorType, String errorDescription) {
<span class="nc" id="L71">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_FAILED, errorContext, errorType, errorDescription);</span>
<span class="nc" id="L72">    }</span>

    @Override
    public void trackLoginForgotPasswordClicked() {
<span class="nc" id="L76">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_FORGOT_PASSWORD_CLICKED);</span>
<span class="nc" id="L77">        mUnifiedLoginTracker.trackClick(Click.FORGOTTEN_PASSWORD);</span>
<span class="nc" id="L78">    }</span>

    @Override
    public void trackLoginMagicLinkExited() {
<span class="nc" id="L82">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_EXITED);</span>
<span class="nc" id="L83">    }</span>

    @Override
    public void trackLoginMagicLinkOpened() {
<span class="nc" id="L87">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_OPENED);</span>
<span class="nc" id="L88">    }</span>

    @Override
    public void trackLoginMagicLinkOpenEmailClientClicked() {
<span class="nc" id="L92">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_OPEN_EMAIL_CLIENT_CLICKED);</span>
<span class="nc" id="L93">        mUnifiedLoginTracker.track(Flow.LOGIN_MAGIC_LINK, Step.EMAIL_OPENED);</span>
<span class="nc" id="L94">    }</span>

    @Override
    public void trackLoginMagicLinkSucceeded() {
<span class="nc" id="L98">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_SUCCEEDED);</span>
<span class="nc" id="L99">    }</span>

    @Override
    public void trackLoginSocial2faNeeded() {
<span class="nc" id="L103">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_2FA_NEEDED);</span>
<span class="nc" id="L104">    }</span>

    @Override
    public void trackLoginSocialSuccess() {
<span class="nc" id="L108">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_SUCCESS);</span>
<span class="nc" id="L109">    }</span>

    @Override
    public void trackMagicLinkFailed(Map&lt;String, ?&gt; properties) {
<span class="nc" id="L113">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_FAILED, properties);</span>
<span class="nc" id="L114">    }</span>

    @Override
    public void trackSignupMagicLinkOpenEmailClientViewed() {
<span class="nc" id="L118">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_OPEN_EMAIL_CLIENT_VIEWED);</span>
<span class="nc" id="L119">        mUnifiedLoginTracker.track(Flow.SIGNUP, Step.MAGIC_LINK_REQUESTED);</span>
<span class="nc" id="L120">    }</span>

    @Override
    public void trackLoginMagicLinkOpenEmailClientViewed() {
<span class="nc" id="L124">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_OPEN_EMAIL_CLIENT_VIEWED);</span>
<span class="nc" id="L125">        mUnifiedLoginTracker.track(Flow.LOGIN_MAGIC_LINK, Step.MAGIC_LINK_REQUESTED);</span>
<span class="nc" id="L126">    }</span>

    @Override
    public void trackMagicLinkRequested() {
<span class="nc" id="L130">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_REQUESTED);</span>
<span class="nc" id="L131">    }</span>

    @Override
    public void trackMagicLinkRequestFormViewed() {
<span class="nc" id="L135">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_MAGIC_LINK_REQUEST_FORM_VIEWED);</span>
<span class="nc" id="L136">        mUnifiedLoginTracker.track(Flow.LOGIN_MAGIC_LINK, Step.START);</span>
<span class="nc" id="L137">    }</span>

    @Override
    public void trackPasswordFormViewed(boolean isSocialChallenge) {
<span class="nc" id="L141">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_PASSWORD_FORM_VIEWED);</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">        if (isSocialChallenge) {</span>
<span class="nc" id="L143">            mUnifiedLoginTracker.track(Flow.GOOGLE_LOGIN, Step.PASSWORD_CHALLENGE);</span>
        } else {
<span class="nc" id="L145">            mUnifiedLoginTracker.track(Flow.LOGIN_PASSWORD, Step.START);</span>
        }
<span class="nc" id="L147">    }</span>

    @Override
    public void trackSignupCanceled() {
<span class="nc" id="L151">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_CANCELED);</span>
<span class="nc" id="L152">    }</span>

    @Override
    public void trackSignupEmailButtonTapped() {
<span class="nc" id="L156">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_EMAIL_BUTTON_TAPPED);</span>
<span class="nc" id="L157">    }</span>

    @Override
    public void trackSignupEmailToLogin() {
<span class="nc" id="L161">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_EMAIL_TO_LOGIN);</span>
<span class="nc" id="L162">    }</span>

    @Override
    public void trackSignupGoogleButtonTapped() {
<span class="nc" id="L166">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_SOCIAL_BUTTON_TAPPED);</span>
<span class="nc" id="L167">    }</span>

    @Override
    public void trackSignupMagicLinkFailed() {
<span class="nc" id="L171">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_MAGIC_LINK_FAILED);</span>
<span class="nc" id="L172">    }</span>

    @Override
    public void trackSignupMagicLinkOpened() {
<span class="nc" id="L176">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_MAGIC_LINK_OPENED);</span>
<span class="nc" id="L177">    }</span>

    @Override
    public void trackSignupMagicLinkOpenEmailClientClicked() {
<span class="nc" id="L181">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_MAGIC_LINK_OPEN_EMAIL_CLIENT_CLICKED);</span>
<span class="nc" id="L182">        mUnifiedLoginTracker.track(Flow.SIGNUP, Step.EMAIL_OPENED);</span>
<span class="nc" id="L183">    }</span>

    @Override
    public void trackSignupMagicLinkSent() {
<span class="nc" id="L187">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_MAGIC_LINK_SENT);</span>
<span class="nc" id="L188">    }</span>

    @Override
    public void trackSignupMagicLinkSucceeded() {
<span class="nc" id="L192">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_MAGIC_LINK_SUCCEEDED);</span>
<span class="nc" id="L193">    }</span>

    @Override
    public void trackSignupSocialAccountsNeedConnecting() {
<span class="nc" id="L197">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_SOCIAL_ACCOUNTS_NEED_CONNECTING);</span>
<span class="nc" id="L198">    }</span>

    @Override
    public void trackSignupSocialButtonFailure() {
<span class="nc" id="L202">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_SOCIAL_BUTTON_FAILURE);</span>
<span class="nc" id="L203">    }</span>

    @Override
    public void trackSignupSocialToLogin() {
<span class="nc" id="L207">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_SOCIAL_TO_LOGIN);</span>
<span class="nc" id="L208">    }</span>

    @Override
    public void trackSignupTermsOfServiceTapped() {
<span class="nc" id="L212">        AnalyticsTracker.track(AnalyticsTracker.Stat.SIGNUP_TERMS_OF_SERVICE_TAPPED);</span>
<span class="nc" id="L213">    }</span>

    @Override
    public void trackSocialButtonStart() {
<span class="nc" id="L217">        mUnifiedLoginTracker.track(Flow.GOOGLE_LOGIN, Step.START);</span>
<span class="nc" id="L218">    }</span>

    @Override
    public void trackSocialAccountsNeedConnecting() {
<span class="nc" id="L222">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_ACCOUNTS_NEED_CONNECTING);</span>
<span class="nc" id="L223">    }</span>

    @Override
    public void trackSocialButtonClick() {
<span class="nc" id="L227">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_BUTTON_CLICK);</span>
<span class="nc" id="L228">        mUnifiedLoginTracker.trackClick(Click.LOGIN_WITH_GOOGLE);</span>
<span class="nc" id="L229">    }</span>

    @Override
    public void trackSocialButtonFailure() {
<span class="nc" id="L233">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_BUTTON_FAILURE);</span>
<span class="nc" id="L234">    }</span>

    @Override
    public void trackSocialConnectFailure() {
<span class="nc" id="L238">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_CONNECT_FAILURE);</span>
<span class="nc" id="L239">    }</span>

    @Override
    public void trackSocialConnectSuccess() {
<span class="nc" id="L243">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_CONNECT_SUCCESS);</span>
<span class="nc" id="L244">    }</span>

    @Override
    public void trackSocialErrorUnknownUser() {
<span class="nc" id="L248">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_ERROR_UNKNOWN_USER);</span>
<span class="nc" id="L249">    }</span>

    @Override
    public void trackSocialFailure(String errorContext, String errorType, String errorDescription) {
<span class="nc" id="L253">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_SOCIAL_FAILURE, errorContext, errorType, errorDescription);</span>
<span class="nc" id="L254">    }</span>

    @Override
    public void trackTwoFactorFormViewed() {
<span class="nc" id="L258">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_TWO_FACTOR_FORM_VIEWED);</span>
<span class="nc" id="L259">        mUnifiedLoginTracker.track(Step.TWO_FACTOR_AUTHENTICATION);</span>
<span class="nc" id="L260">    }</span>

    @Override
    public void trackUrlFormViewed() {
<span class="nc" id="L264">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_URL_FORM_VIEWED);</span>
<span class="nc" id="L265">        mUnifiedLoginTracker.track(Flow.LOGIN_SITE_ADDRESS, Step.START);</span>
<span class="nc" id="L266">    }</span>

    @Override
    public void trackUrlHelpScreenViewed() {
<span class="nc" id="L270">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_URL_HELP_SCREEN_VIEWED);</span>
<span class="nc" id="L271">    }</span>

    @Override
    public void trackUsernamePasswordFormViewed() {
<span class="nc" id="L275">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_USERNAME_PASSWORD_FORM_VIEWED);</span>
<span class="nc" id="L276">        mUnifiedLoginTracker.track(Step.USERNAME_PASSWORD);</span>
<span class="nc" id="L277">    }</span>

    @Override
    public void trackWpComBackgroundServiceUpdate(Map&lt;String, ?&gt; properties) {
<span class="nc" id="L281">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_WPCOM_BACKGROUND_SERVICE_UPDATE, properties);</span>
<span class="nc" id="L282">    }</span>

    @Override
    public void trackConnectedSiteInfoRequested(String url) {
<span class="nc" id="L286">        Map&lt;String, String&gt; properties = new HashMap&lt;&gt;();</span>
<span class="nc" id="L287">        properties.put(&quot;url&quot;, url);</span>
<span class="nc" id="L288">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_CONNECTED_SITE_INFO_REQUESTED, properties);</span>
<span class="nc" id="L289">    }</span>

    @Override
    public void trackConnectedSiteInfoFailed(String url, String errorContext, String errorType,
                                             String errorDescription) {
<span class="nc" id="L294">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_CONNECTED_SITE_INFO_FAILED, errorContext, errorType,</span>
                errorDescription);
<span class="nc" id="L296">    }</span>

    @Override
    public void trackConnectedSiteInfoSucceeded(@NotNull Map&lt;String, ?&gt; properties) {
<span class="nc" id="L300">        AnalyticsTracker.track(AnalyticsTracker.Stat.LOGIN_CONNECTED_SITE_INFO_SUCCEEDED, properties);</span>
<span class="nc" id="L301">    }</span>

    @Override
    public void trackFailure(String message) {
<span class="nc" id="L305">        mUnifiedLoginTracker.trackFailure(message);</span>
<span class="nc" id="L306">    }</span>

    @Override
    public void trackSendCodeWithTextClicked() {
<span class="nc" id="L310">        mUnifiedLoginTracker.trackClick(Click.SEND_CODE_WITH_TEXT);</span>
<span class="nc" id="L311">    }</span>

    @Override
    public void trackSubmit2faCodeClicked() {
<span class="nc" id="L315">        mUnifiedLoginTracker.trackClick(Click.SUBMIT_2FA_CODE);</span>
<span class="nc" id="L316">    }</span>

    @Override
    public void trackSubmitClicked() {
<span class="nc" id="L320">        mUnifiedLoginTracker.trackClick(Click.SUBMIT);</span>
<span class="nc" id="L321">    }</span>

    @Override
    public void trackRequestMagicLinkClick() {
<span class="nc" id="L325">        mUnifiedLoginTracker.trackClick(Click.REQUEST_MAGIC_LINK);</span>
<span class="nc" id="L326">    }</span>

    @Override
    public void trackLoginWithPasswordClick() {
<span class="nc" id="L330">        mUnifiedLoginTracker.trackClick(Click.LOGIN_WITH_PASSWORD);</span>
<span class="nc" id="L331">    }</span>

    @Override
    public void trackShowHelpClick() {
<span class="nc" id="L335">        mUnifiedLoginTracker.trackClick(Click.SHOW_HELP);</span>
<span class="nc" id="L336">        mUnifiedLoginTracker.track(Step.HELP);</span>
<span class="nc" id="L337">    }</span>

    @Override
    public void trackDismissDialog() {
<span class="nc" id="L341">        mUnifiedLoginTracker.trackClick(Click.DISMISS);</span>
<span class="nc" id="L342">    }</span>

    @Override
    public void trackSelectEmailField() {
<span class="nc" id="L346">        mUnifiedLoginTracker.trackClick(Click.SELECT_EMAIL_FIELD);</span>
<span class="nc" id="L347">    }</span>

    @Override
    public void trackPickEmailFromHint() {
<span class="nc" id="L351">        mUnifiedLoginTracker.trackClick(Click.PICK_EMAIL_FROM_HINT);</span>
<span class="nc" id="L352">    }</span>

    @Override
    public void trackShowEmailHints() {
<span class="nc" id="L356">        mUnifiedLoginTracker.track(Step.SHOW_EMAIL_HINTS);</span>
<span class="nc" id="L357">    }</span>

    @Override
    public void emailFormScreenResumed() {
<span class="nc" id="L361">        mUnifiedLoginTracker.setFlowAndStep(Flow.WORDPRESS_COM, Step.START);</span>
<span class="nc" id="L362">    }</span>

    @Override
    public void trackSocialSignupConfirmationViewed() {
<span class="nc" id="L366">        mUnifiedLoginTracker.track(Flow.GOOGLE_SIGNUP, Step.START);</span>
<span class="nc" id="L367">    }</span>

    @Override
    public void trackCreateAccountClick() {
<span class="nc" id="L371">        mUnifiedLoginTracker.trackClick(Click.CREATE_ACCOUNT);</span>
<span class="nc" id="L372">    }</span>

    @Override public void emailPasswordFormScreenResumed() {
<span class="nc" id="L375">        mUnifiedLoginTracker.setStep(Step.START);</span>
<span class="nc" id="L376">    }</span>

    @Override public void siteAddressFormScreenResumed() {
<span class="nc" id="L379">        mUnifiedLoginTracker.setStep(Step.START);</span>
<span class="nc" id="L380">    }</span>

    @Override public void magicLinkRequestScreenResumed() {
<span class="nc" id="L383">        mUnifiedLoginTracker.setStep(Step.START);</span>
<span class="nc" id="L384">    }</span>

    @Override public void magicLinkSentScreenResumed() {
<span class="nc" id="L387">        mUnifiedLoginTracker.setStep(Step.MAGIC_LINK_REQUESTED);</span>
<span class="nc" id="L388">    }</span>

    @Override public void usernamePasswordScreenResumed() {
<span class="nc" id="L391">        mUnifiedLoginTracker.setStep(Step.USERNAME_PASSWORD);</span>
<span class="nc" id="L392">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>