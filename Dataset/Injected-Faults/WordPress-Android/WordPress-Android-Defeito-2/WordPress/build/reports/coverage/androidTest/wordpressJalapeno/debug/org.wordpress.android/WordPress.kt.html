<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>WordPress.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android</a> &gt; <span class="el_source">WordPress.kt</span></div><h1>WordPress.kt</h1><pre class="source lang-java linenums">package org.wordpress.android

import android.app.Activity
import android.app.Application
import android.text.TextUtils
import androidx.multidex.MultiDexApplication
import com.android.volley.RequestQueue
import dagger.hilt.EntryPoints
import org.wordpress.android.AppInitializer.StoryNotificationTrackerProvider
import org.wordpress.android.fluxc.tools.FluxCImageLoader
import org.wordpress.android.modules.AppComponent
import org.wordpress.android.util.AppLog
import org.wordpress.android.util.AppLog.T.NUX

/**
 * An abstract class to be extended by {@link WordPressApp} for real application and WordPressTest for UI test
 * application. Containing public static variables and methods to be accessed by other classes.
 */
<span class="fc" id="L19">abstract class WordPress : MultiDexApplication() {</span>
    val storyNotificationTrackerProvider: StoryNotificationTrackerProvider
<span class="nc" id="L21">        get() = initializer().storyNotificationTrackerProvider</span>

    abstract fun initializer(): AppInitializer

<span class="nc" id="L25">    fun component(): AppComponent = EntryPoints.get(this, AppComponent::class.java)</span>

    fun wordPressComSignOut() {
<span class="nc" id="L28">        initializer().wordPressComSignOut()</span>
<span class="nc" id="L29">    }</span>

    @Suppress(&quot;TooManyFunctions&quot;)
    companion object {
        const val SITE = &quot;SITE&quot;
        const val LOCAL_SITE_ID = &quot;LOCAL_SITE_ID&quot;
        const val REMOTE_SITE_ID = &quot;REMOTE_SITE_ID&quot;
        const val USER_AGENT_APPNAME = &quot;wp-android&quot;

<span class="pc bnc" id="L38" title="All 2 branches missed.">        lateinit var versionName: String</span>
<span class="pc bnc" id="L39" title="All 2 branches missed.">        lateinit var wpDB: WordPressDB</span>
<span class="pc" id="L40">        var appIsInTheBackground = true</span>

        @JvmField
        var requestQueue: RequestQueue? = null

        @JvmField
        var imageLoader: FluxCImageLoader? = null

        @JvmStatic
<span class="fc" id="L49">        fun getBitmapCache() = AppInitializer.getBitmapCache()</span>

        @JvmStatic
<span class="fc" id="L52">        fun getContext() = AppInitializer.context!!</span>

        @JvmStatic
        fun updateContextLocale() {
<span class="nc" id="L56">            AppInitializer.updateContextLocale()</span>
<span class="nc" id="L57">        }</span>

        @JvmStatic
<span class="nc" id="L60">        fun getRestClientUtils() = AppInitializer.restClientUtils</span>

        @SuppressWarnings(&quot;FunctionNaming&quot;)
        @JvmStatic
<span class="nc" id="L64">        fun getRestClientUtilsV1_1() = AppInitializer.restClientUtilsV1_1</span>

        @SuppressWarnings(&quot;FunctionNaming&quot;)
        @JvmStatic
<span class="nc" id="L68">        fun getRestClientUtilsV1_2() = AppInitializer.restClientUtilsV1_2</span>

        @SuppressWarnings(&quot;FunctionNaming&quot;)
        @JvmStatic
<span class="nc" id="L72">        fun getRestClientUtilsV1_3() = AppInitializer.restClientUtilsV1_3</span>

<span class="nc" id="L74">        fun getRestClientUtilsV2() = AppInitializer.restClientUtilsV2</span>

<span class="nc" id="L76">        fun getRestClientUtilsV0() = AppInitializer.restClientUtilsV0</span>

        @JvmStatic
<span class="nc" id="L79">        fun getDefaultUserAgent() = AppInitializer.defaultUserAgent</span>

        @JvmStatic
<span class="nc" id="L82">        fun getUserAgent() = AppInitializer.userAgent</span>

        /**
         * Gets a field from the project's BuildConfig using reflection. This is useful when flavors are used at the
         * project level to set custom fields.
         * based on: https://code.google.com/p/android/issues/detail?id=52962#c38
         *
         * @param application Used to find the correct file
         * @param fieldName The name of the field-to-access
         * @return The value of the field, or `null` if the field is not found.
         */
        @Suppress(&quot;TooGenericExceptionCaught&quot;)
        fun getBuildConfigValue(application: Application, fieldName: String?): Any? {
<span class="nc" id="L95">            return try {</span>
<span class="nc" id="L96">                val packageName = application.javaClass.getPackage().name</span>
<span class="nc" id="L97">                val clazz = Class.forName(&quot;$packageName.BuildConfig&quot;)</span>
<span class="nc" id="L98">                val field = clazz.getField(fieldName)</span>
<span class="nc" id="L99">                field[null]</span>
<span class="nc" id="L100">            } catch (e: LinkageError) {</span>
<span class="nc" id="L101">                null</span>
<span class="nc" id="L102">            } catch (e: ExceptionInInitializerError) {</span>
<span class="nc" id="L103">                null</span>
<span class="nc" id="L104">            } catch (e: ClassNotFoundException) {</span>
<span class="nc" id="L105">                null</span>
<span class="nc" id="L106">            } catch (e: NoSuchFieldException) {</span>
<span class="nc" id="L107">                null</span>
<span class="nc" id="L108">            } catch (e: NullPointerException) {</span>
<span class="nc" id="L109">                null</span>
            }
        }

        /**
         * Gets a field from the project's BuildConfig using reflection. This is useful when flavors are used at the
         * project level to set custom fields.
         * based on: https://code.google.com/p/android/issues/detail?id=52962#c38
         *
         * @param activity Used to get the Application instance
         * @param configValueName The name of the field-to-access
         * @return The string value of the field, or empty string if the field is not found.
         */
        fun getBuildConfigString(activity: Activity, configValueName: String): String? {
<span class="nc bnc" id="L123" title="All 2 branches missed.">            return if (!BuildConfig.DEBUG) {</span>
<span class="nc" id="L124">                &quot;&quot;</span>
            } else {
<span class="nc" id="L126">                val value = getBuildConfigValue(activity.application, configValueName) as String?</span>
<span class="nc bnc" id="L127" title="All 2 branches missed.">                if (!TextUtils.isEmpty(value)) {</span>
<span class="nc" id="L128">                    AppLog.d(NUX, &quot;Auto-filled from build config: $configValueName&quot;)</span>
<span class="nc" id="L129">                    value</span>
                } else {
<span class="nc" id="L131">                    &quot;&quot;</span>
                }
            }
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>