<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LoginProloguePageFragment.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.accounts.login</a> &gt; <span class="el_source">LoginProloguePageFragment.kt</span></div><h1>LoginProloguePageFragment.kt</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.accounts.login

import android.os.Bundle
import android.text.Html
import android.view.LayoutInflater
import android.view.View
import android.widget.EditText
import android.widget.TextView
import androidx.annotation.LayoutRes
import androidx.annotation.StringRes
import androidx.fragment.app.Fragment
import org.wordpress.android.R
import org.wordpress.android.databinding.LoginIntroTemplateViewBinding
import org.wordpress.android.util.ActivityUtils
import kotlin.math.min

<span class="nc" id="L17">class LoginProloguePageFragment : Fragment(R.layout.login_intro_template_view) {</span>
    @StringRes private var promoTitle: Int? = null
    @LayoutRes private var promoLayoutId: Int? = null
    @LayoutRes private var promoBackgroundId: Int? = null

    companion object {
        private const val KEY_PROMO_TITLE = &quot;KEY_PROMO_TITLE&quot;
        private const val KEY_PROMO_LAYOUT = &quot;KEY_PROMO_LAYOUT&quot;
        private const val KEY_PROMO_BACKGROUND = &quot;KEY_PROMO_BACKGROUND&quot;

        @JvmStatic
        fun newInstance(
            @StringRes promoTitle: Int,
            @LayoutRes promoLayoutId: Int,
            @LayoutRes promoBackgroundId: Int
<span class="nc" id="L32">        ) = LoginProloguePageFragment().apply {</span>
<span class="nc" id="L33">            arguments = Bundle().apply {</span>
<span class="nc" id="L34">                putInt(KEY_PROMO_TITLE, promoTitle)</span>
<span class="nc" id="L35">                putInt(KEY_PROMO_LAYOUT, promoLayoutId)</span>
<span class="nc" id="L36">                putInt(KEY_PROMO_BACKGROUND, promoBackgroundId)</span>
<span class="nc" id="L37">            }</span>
<span class="nc" id="L38">        }</span>
    }

    override fun onCreate(savedInstanceState: Bundle?) {
<span class="nc" id="L42">        super.onCreate(savedInstanceState)</span>
<span class="nc bnc" id="L43" title="All 2 branches missed.">        arguments?.let {</span>
<span class="nc" id="L44">            promoTitle = it.getInt(KEY_PROMO_TITLE)</span>
<span class="nc" id="L45">            promoLayoutId = it.getInt(KEY_PROMO_LAYOUT)</span>
<span class="nc" id="L46">            promoBackgroundId = it.getInt(KEY_PROMO_BACKGROUND)</span>
<span class="nc" id="L47">        }</span>
<span class="nc" id="L48">    }</span>

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
<span class="nc" id="L51">        super.onViewCreated(view, savedInstanceState)</span>
<span class="nc" id="L52">        val inflater = LayoutInflater.from(view.context)</span>
<span class="nc" id="L53">        val binding = LoginIntroTemplateViewBinding.bind(view)</span>

<span class="nc bnc" id="L55" title="All 2 branches missed.">        promoTitle?.let { binding.promoTitle.setText(it) }</span>

<span class="nc" id="L57">        val container = binding.promoLayoutContainer</span>
<span class="nc" id="L58">        container.post {</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">            promoLayoutId?.let {</span>
<span class="nc" id="L60">                val content = inflater.inflate(promoLayoutId!!, container, false)</span>

<span class="nc" id="L62">                val widthOfContainer = container.width</span>
<span class="nc" id="L63">                val heightOfContainer = container.height</span>

<span class="nc" id="L65">                val smallestDimension = min(widthOfContainer, heightOfContainer).toFloat()</span>
<span class="nc" id="L66">                val sizeOfContent = resources.getDimensionPixelOffset(R.dimen.login_prologue_content_area).toFloat()</span>

<span class="nc" id="L68">                val scaleFactor = smallestDimension / sizeOfContent</span>

<span class="nc" id="L70">                content.scaleX = scaleFactor</span>
<span class="nc" id="L71">                content.scaleY = scaleFactor</span>

<span class="nc" id="L73">                container.addView(content)</span>

                // add a cursor to the end of the EditText at second prologue screen
<span class="nc bnc" id="L76" title="All 4 branches missed.">                if (promoLayoutId == R.layout.login_prologue_second) {</span>
<span class="nc" id="L77">                    val editText = view.findViewById&lt;EditText&gt;(R.id.edit_text)</span>
<span class="nc" id="L78">                    editText.post {</span>
<span class="nc" id="L79">                        editText.isPressed = true</span>
<span class="nc" id="L80">                        editText.setSelection(editText.length())</span>
<span class="nc" id="L81">                    }</span>
                }

                // format text from HTML to show bold on third prologue screen
<span class="nc bnc" id="L85" title="All 4 branches missed.">                if (promoLayoutId == R.layout.login_prologue_third) {</span>
<span class="nc" id="L86">                    view.findViewById&lt;TextView&gt;(R.id.text_one).text = Html.fromHtml(getString(</span>
<span class="nc" id="L87">                            R.string.login_prologue_third_subtitle_one))</span>
<span class="nc" id="L88">                    view.findViewById&lt;TextView&gt;(R.id.text_two).text = Html.fromHtml(getString(</span>
<span class="nc" id="L89">                            R.string.login_prologue_third_subtitle_two))</span>
<span class="nc" id="L90">                    view.findViewById&lt;TextView&gt;(R.id.text_three).text = Html.fromHtml(getString(</span>
<span class="nc" id="L91">                            R.string.login_prologue_third_subtitle_three))</span>
                }
<span class="nc" id="L93">            }</span>
<span class="nc" id="L94">        }</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">        promoBackgroundId?.let {</span>
<span class="nc" id="L96">            inflater.inflate(it, binding.promoBackgroundContainer, true)</span>
        }
<span class="nc" id="L98">    }</span>

    override fun onResume() {
<span class="nc" id="L101">        super.onResume()</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">        activity?.let { ActivityUtils.hideKeyboard(it) }</span>
<span class="nc" id="L103">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>