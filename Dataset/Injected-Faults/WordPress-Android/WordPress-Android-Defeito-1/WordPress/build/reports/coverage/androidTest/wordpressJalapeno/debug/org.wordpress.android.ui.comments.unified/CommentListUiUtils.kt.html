<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CommentListUiUtils.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.comments.unified</a> &gt; <span class="el_source">CommentListUiUtils.kt</span></div><h1>CommentListUiUtils.kt</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.comments.unified

import android.content.Context
import android.graphics.Typeface
import android.text.Spannable
import android.text.SpannableStringBuilder
import android.text.TextUtils
import android.text.style.StyleSpan
import android.view.View
import android.widget.TextView
import androidx.core.graphics.ColorUtils
import org.wordpress.android.R
import org.wordpress.android.R.attr
import org.wordpress.android.R.integer
import org.wordpress.android.R.string
import org.wordpress.android.ui.comments.CommentUtils
import org.wordpress.android.util.extensions.getColorFromAttribute
import javax.inject.Inject

<span class="nc" id="L20">class CommentListUiUtils @Inject constructor() {</span>
    fun displayHtmlComment(commentContent: String, textView: TextView, maxImageWidth: Int, maxEmojiWidth: Int) {
<span class="nc" id="L22">        CommentUtils.displayHtmlComment(</span>
<span class="nc" id="L23">                textView,</span>
<span class="nc" id="L24">                commentContent,</span>
<span class="nc" id="L25">                maxImageWidth,</span>
<span class="nc" id="L26">                maxEmojiWidth,</span>
<span class="nc" id="L27">                textView.resources.getString(R.string.comment_unable_to_show_error)</span>
        )
<span class="nc" id="L29">    }</span>

    fun formatCommentTitle(authorName: String, postTitle: String, context: Context): Spannable {
        val formattedTitle: String
<span class="nc" id="L33">        var author = context.getString(string.anonymous)</span>
<span class="nc bnc" id="L34" title="All 2 branches missed.">        if (!TextUtils.isEmpty(authorName)) {</span>
<span class="nc bnc" id="L35" title="All 2 branches missed.">            author = authorName.trim { it &lt;= ' ' }</span>
        }
<span class="nc bnc" id="L37" title="All 2 branches missed.">        val trimmedPostTitle = postTitle.trim { it &lt;= ' ' }</span>
<span class="nc bnc" id="L38" title="All 2 branches missed.">        formattedTitle = if (!TextUtils.isEmpty(postTitle)) {</span>
<span class="nc" id="L39">            context.getString(string.comment_title, author, postTitle)</span>
        } else {
<span class="nc" id="L41">            author</span>
        }
<span class="nc" id="L43">        val string = SpannableStringBuilder(formattedTitle)</span>
<span class="nc" id="L44">        val authorStartIndex = formattedTitle.indexOf(author)</span>
<span class="nc" id="L45">        val authorEndIndex = authorStartIndex + author.length</span>
<span class="nc" id="L46">        val titleStartIndex = formattedTitle.indexOf(trimmedPostTitle)</span>
<span class="nc" id="L47">        val titleEndIndex = titleStartIndex + trimmedPostTitle.length</span>
<span class="nc" id="L48">        string.setSpan(</span>
<span class="nc" id="L49">                StyleSpan(Typeface.BOLD), authorStartIndex, authorEndIndex,</span>
<span class="nc" id="L50">                Spannable.SPAN_INCLUSIVE_INCLUSIVE</span>
        )
<span class="nc" id="L52">        string.setSpan(</span>
<span class="nc" id="L53">                StyleSpan(Typeface.BOLD), titleStartIndex, titleEndIndex,</span>
<span class="nc" id="L54">                Spannable.SPAN_INCLUSIVE_INCLUSIVE</span>
        )
<span class="nc" id="L56">        return string</span>
    }

    fun toggleSelectedStateOfCommentListItem(containerView: View, isSelected: Boolean) {
<span class="nc bnc" id="L60" title="All 2 branches missed.">        if (isSelected) {</span>
<span class="nc" id="L61">            containerView.setBackgroundColor(</span>
<span class="nc" id="L62">                    ColorUtils.setAlphaComponent(</span>
<span class="nc" id="L63">                            containerView.context.getColorFromAttribute(attr.colorOnSurface),</span>
<span class="nc" id="L64">                            containerView.context.resources.getInteger(integer.selected_list_item_opacity)</span>
                    )
            )
        } else {
<span class="nc" id="L68">            containerView.background = null</span>
        }
<span class="nc" id="L70">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>