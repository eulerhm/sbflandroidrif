<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BlockListAdapter.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.stats.refresh.lists.sections</a> &gt; <span class="el_source">BlockListAdapter.kt</span></div><h1>BlockListAdapter.kt</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.stats.refresh.lists.sections

import android.view.ViewGroup
import androidx.recyclerview.widget.DiffUtil
import androidx.recyclerview.widget.RecyclerView.Adapter
import org.wordpress.android.ui.stats.refresh.BlockDiffCallback
import org.wordpress.android.ui.stats.refresh.BlockDiffCallback.BlockListPayload.EXPAND_CHANGED
import org.wordpress.android.ui.stats.refresh.BlockDiffCallback.BlockListPayload.TAB_CHANGED
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ActivityItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.BarChartItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.BigTitle
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ChartLegend
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ChartLegendsBlue
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ChartLegendsPurple
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Chips
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Columns
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.DialogButtons
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Empty
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ExpandableItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Header
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ImageItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Information
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.LineChartItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Link
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ListItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ListItemActionCard
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ListItemGuideCard
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ListItemWithIcon
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ListItemWithImage
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.LoadingItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.MapItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.MapLegend
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.PieChartItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.QuickScanItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ReferredItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.TabsItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Tag
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Text
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Title
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.TitleWithMore
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.ACTION_CARD
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.ACTIVITY_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.BAR_CHART
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.BIG_TITLE
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.CHART_LEGEND
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.CHART_LEGENDS_BLUE
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.CHART_LEGENDS_PURPLE
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.CHIPS
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.COLUMNS
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.DIALOG_BUTTONS
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.DIVIDER
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.EMPTY
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.EXPANDABLE_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.GUIDE_CARD
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.HEADER
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.IMAGE_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.INFO
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.LINE_CHART
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.LINK
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.LIST_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.LIST_ITEM_WITH_ICON
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.LIST_ITEM_WITH_IMAGE
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.LOADING_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.MAP
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.MAP_LEGEND
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.PIE_CHART
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.QUICK_SCAN_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.REFERRED_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.TABS
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.TAG_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.TEXT
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.TITLE
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.TITLE_WITH_MORE
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.VALUES_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.VALUE_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.VALUE_WITH_CHART_ITEM
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.Type.values
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ValueItem
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ValueWithChartItem
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ActionCardViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.BlockListItem.ValuesItem
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ActivityViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.BarChartViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.BigTitleViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.BlockListItemViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ChartLegendViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ChartLegendsBlueViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ChartLegendsPurpleViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ChipsViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.DialogButtonsViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.DividerViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.EmptyViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ExpandableItemViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.FourColumnsViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.GuideCardViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.HeaderViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ImageItemViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.InformationViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.LineChartViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.LinkViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ListItemViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ListItemWithIconViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ListItemWithImageViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.LoadingItemViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.MapLegendViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.MapViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.PieChartViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.QuickScanItemViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ReferredItemViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.TabsViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.TagViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.TextViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.TitleViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.TitleWithMoreViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ValueViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ValueWithChartViewHolder
import org.wordpress.android.ui.stats.refresh.lists.sections.viewholders.ValuesViewHolder
import org.wordpress.android.util.image.ImageManager

<span class="nc" id="L120">class BlockListAdapter(val imageManager: ImageManager) : Adapter&lt;BlockListItemViewHolder&gt;() {</span>
<span class="nc" id="L121">    private var items: List&lt;BlockListItem&gt; = listOf()</span>
    fun update(newItems: List&lt;BlockListItem&gt;) {
<span class="nc" id="L123">        val diffResult = DiffUtil.calculateDiff(</span>
<span class="nc" id="L124">                BlockDiffCallback(</span>
<span class="nc" id="L125">                        items,</span>
<span class="nc" id="L126">                        newItems</span>
                )
        )
<span class="nc" id="L129">        items = newItems</span>
<span class="nc" id="L130">        diffResult.dispatchUpdatesTo(this)</span>
<span class="nc" id="L131">    }</span>

    override fun onCreateViewHolder(parent: ViewGroup, itemType: Int): BlockListItemViewHolder {
<span class="nc bnc" id="L134" title="All 36 branches missed.">        return when (values()[itemType]) {</span>
<span class="nc" id="L135">            TITLE -&gt; TitleViewHolder(parent)</span>
<span class="nc" id="L136">            TITLE_WITH_MORE -&gt; TitleWithMoreViewHolder(parent)</span>
<span class="nc" id="L137">            BIG_TITLE -&gt; BigTitleViewHolder(parent)</span>
<span class="nc" id="L138">            TAG_ITEM -&gt; TagViewHolder(parent)</span>
<span class="nc" id="L139">            IMAGE_ITEM -&gt; ImageItemViewHolder(parent, imageManager)</span>
<span class="nc" id="L140">            LIST_ITEM_WITH_IMAGE -&gt; ListItemWithImageViewHolder(parent, imageManager = imageManager)</span>
<span class="nc" id="L141">            LIST_ITEM_WITH_ICON -&gt; ListItemWithIconViewHolder(parent, imageManager)</span>
<span class="nc" id="L142">            LIST_ITEM -&gt; ListItemViewHolder(parent)</span>
<span class="nc" id="L143">            EMPTY -&gt; EmptyViewHolder(parent)</span>
<span class="nc" id="L144">            TEXT -&gt; TextViewHolder(parent)</span>
<span class="nc" id="L145">            COLUMNS -&gt; FourColumnsViewHolder(parent)</span>
<span class="nc" id="L146">            CHIPS -&gt; ChipsViewHolder(parent)</span>
<span class="nc" id="L147">            LINK -&gt; LinkViewHolder(parent)</span>
<span class="nc" id="L148">            BAR_CHART -&gt; BarChartViewHolder(parent)</span>
<span class="nc" id="L149">            PIE_CHART -&gt; PieChartViewHolder(parent)</span>
<span class="nc" id="L150">            LINE_CHART -&gt; LineChartViewHolder(parent)</span>
<span class="nc" id="L151">            CHART_LEGEND -&gt; ChartLegendViewHolder(parent)</span>
<span class="nc" id="L152">            CHART_LEGENDS_BLUE -&gt; ChartLegendsBlueViewHolder(parent)</span>
<span class="nc" id="L153">            CHART_LEGENDS_PURPLE -&gt; ChartLegendsPurpleViewHolder(parent)</span>
<span class="nc" id="L154">            TABS -&gt; TabsViewHolder(parent, imageManager)</span>
<span class="nc" id="L155">            INFO -&gt; InformationViewHolder(parent)</span>
<span class="nc" id="L156">            HEADER -&gt; HeaderViewHolder(parent)</span>
<span class="nc" id="L157">            EXPANDABLE_ITEM -&gt; ExpandableItemViewHolder(parent, imageManager)</span>
<span class="nc" id="L158">            DIVIDER -&gt; DividerViewHolder(parent)</span>
<span class="nc" id="L159">            LOADING_ITEM -&gt; LoadingItemViewHolder(parent)</span>
<span class="nc" id="L160">            MAP -&gt; MapViewHolder(parent)</span>
<span class="nc" id="L161">            MAP_LEGEND -&gt; MapLegendViewHolder(parent)</span>
<span class="nc" id="L162">            VALUE_ITEM -&gt; ValueViewHolder(parent)</span>
<span class="nc" id="L163">            VALUE_WITH_CHART_ITEM -&gt; ValueWithChartViewHolder(parent)</span>
<span class="nc" id="L164">            VALUES_ITEM -&gt; ValuesViewHolder(parent)</span>
<span class="nc" id="L165">            ACTIVITY_ITEM -&gt; ActivityViewHolder(parent)</span>
<span class="nc" id="L166">            REFERRED_ITEM -&gt; ReferredItemViewHolder(parent)</span>
<span class="nc" id="L167">            QUICK_SCAN_ITEM -&gt; QuickScanItemViewHolder(parent)</span>
<span class="nc" id="L168">            DIALOG_BUTTONS -&gt; DialogButtonsViewHolder(parent)</span>
<span class="nc" id="L169">            ACTION_CARD -&gt; ActionCardViewHolder(parent)</span>
<span class="nc" id="L170">            GUIDE_CARD -&gt; GuideCardViewHolder(parent)</span>
        }
    }

    override fun getItemViewType(position: Int): Int {
<span class="nc" id="L175">        return items[position].type.ordinal</span>
    }

<span class="nc" id="L178">    override fun getItemCount() = items.size</span>

    override fun onBindViewHolder(holder: BlockListItemViewHolder, position: Int, payloads: List&lt;Any&gt;) {
<span class="nc" id="L181">        val item = items[position]</span>
<span class="nc" id="L182">        when (holder) {</span>
<span class="nc bnc" id="L183" title="All 2 branches missed.">            is TitleViewHolder -&gt; holder.bind(item as Title)</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">            is TitleWithMoreViewHolder -&gt; holder.bind(item as TitleWithMore)</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">            is BigTitleViewHolder -&gt; holder.bind(item as BigTitle)</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">            is TagViewHolder -&gt; holder.bind(item as Tag)</span>
<span class="nc bnc" id="L187" title="All 2 branches missed.">            is ImageItemViewHolder -&gt; holder.bind(item as ImageItem)</span>
<span class="nc bnc" id="L188" title="All 2 branches missed.">            is ValueViewHolder -&gt; holder.bind(item as ValueItem)</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">            is ValueWithChartViewHolder -&gt; holder.bind(item as ValueWithChartItem)</span>
<span class="nc bnc" id="L190" title="All 2 branches missed.">            is ValuesViewHolder -&gt; holder.bind(item as ValuesItem)</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">            is ListItemWithImageViewHolder -&gt; holder.bind(item as ListItemWithImage)</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">            is ListItemWithIconViewHolder -&gt; holder.bind(item as ListItemWithIcon)</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">            is ListItemViewHolder -&gt; holder.bind(item as ListItem)</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">            is TextViewHolder -&gt; holder.bind(item as Text)</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">            is FourColumnsViewHolder -&gt; holder.bind(item as Columns, payloads)</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">            is ChipsViewHolder -&gt; holder.bind(item as Chips)</span>
<span class="nc bnc" id="L197" title="All 2 branches missed.">            is LinkViewHolder -&gt; holder.bind(item as Link)</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">            is BarChartViewHolder -&gt; holder.bind(item as BarChartItem)</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">            is PieChartViewHolder -&gt; holder.bind(item as PieChartItem)</span>
<span class="nc bnc" id="L200" title="All 2 branches missed.">            is LineChartViewHolder -&gt; holder.bind(item as LineChartItem)</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">            is ChartLegendViewHolder -&gt; holder.bind(item as ChartLegend)</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">            is ChartLegendsBlueViewHolder -&gt; holder.bind(item as ChartLegendsBlue)</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">            is ChartLegendsPurpleViewHolder -&gt; holder.bind(item as ChartLegendsPurple)</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">            is TabsViewHolder -&gt; holder.bind(item as TabsItem, payloads.contains(TAB_CHANGED))</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">            is InformationViewHolder -&gt; holder.bind(item as Information)</span>
<span class="nc bnc" id="L206" title="All 2 branches missed.">            is HeaderViewHolder -&gt; holder.bind(item as Header)</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">            is ExpandableItemViewHolder -&gt; holder.bind(</span>
<span class="nc" id="L208">                    item as ExpandableItem,</span>
<span class="nc" id="L209">                    payloads.contains(EXPAND_CHANGED)</span>
            )
<span class="nc bnc" id="L211" title="All 2 branches missed.">            is MapViewHolder -&gt; holder.bind(item as MapItem)</span>
<span class="nc bnc" id="L212" title="All 2 branches missed.">            is MapLegendViewHolder -&gt; holder.bind(item as MapLegend)</span>
<span class="nc bnc" id="L213" title="All 2 branches missed.">            is EmptyViewHolder -&gt; holder.bind(item as Empty)</span>
<span class="nc bnc" id="L214" title="All 2 branches missed.">            is ActivityViewHolder -&gt; holder.bind(item as ActivityItem)</span>
<span class="nc bnc" id="L215" title="All 2 branches missed.">            is LoadingItemViewHolder -&gt; holder.bind(item as LoadingItem)</span>
<span class="nc bnc" id="L216" title="All 2 branches missed.">            is ReferredItemViewHolder -&gt; holder.bind(item as ReferredItem)</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">            is QuickScanItemViewHolder -&gt; holder.bind(item as QuickScanItem)</span>
<span class="nc bnc" id="L218" title="All 2 branches missed.">            is DialogButtonsViewHolder -&gt; holder.bind(item as DialogButtons)</span>
<span class="nc bnc" id="L219" title="All 2 branches missed.">            is ActionCardViewHolder -&gt; holder.bind(item as ListItemActionCard)</span>
<span class="nc bnc" id="L220" title="All 2 branches missed.">            is GuideCardViewHolder -&gt; holder.bind(item as ListItemGuideCard)</span>
        }
<span class="nc" id="L222">    }</span>

    override fun onBindViewHolder(holder: BlockListItemViewHolder, position: Int) {
<span class="nc" id="L225">        onBindViewHolder(holder, position, listOf())</span>
<span class="nc" id="L226">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>