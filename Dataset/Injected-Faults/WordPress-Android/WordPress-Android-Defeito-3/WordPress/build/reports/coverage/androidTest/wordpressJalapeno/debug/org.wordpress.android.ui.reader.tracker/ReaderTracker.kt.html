<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ReaderTracker.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.reader.tracker</a> &gt; <span class="el_source">ReaderTracker.kt</span></div><h1>ReaderTracker.kt</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.reader.tracker

import android.net.Uri
import androidx.annotation.MainThread
import org.wordpress.android.analytics.AnalyticsTracker
import org.wordpress.android.models.ReaderPost
import org.wordpress.android.models.ReaderTag
import org.wordpress.android.ui.prefs.AppPrefsWrapper
import org.wordpress.android.ui.reader.ReaderTypes.ReaderPostListType
import org.wordpress.android.ui.reader.utils.DateProvider
import org.wordpress.android.util.AppLog
import org.wordpress.android.util.DateTimeUtils
import org.wordpress.android.util.analytics.AnalyticsTrackerWrapper
import org.wordpress.android.util.analytics.AnalyticsUtilsWrapper
import javax.inject.Inject
import javax.inject.Singleton

<span class="fc" id="L18">@Singleton</span>
@MainThread
@Suppress(&quot;TooManyFunctions&quot;)
<span class="fc" id="L21">class ReaderTracker @Inject constructor(</span>
<span class="fc" id="L22">    private val dateProvider: DateProvider,</span>
<span class="fc" id="L23">    private val appPrefsWrapper: AppPrefsWrapper,</span>
<span class="fc" id="L24">    private val analyticsTrackerWrapper: AnalyticsTrackerWrapper,</span>
<span class="fc" id="L25">    private val analyticsUtilsWrapper: AnalyticsUtilsWrapper</span>
) {
    // TODO: evaluate to use something like Dispatchers.Main.Immediate in the fun(s)
    // to sync the access to trackers; so to remove the @MainThread and make the
    // usage of this class more transparent to its users
<span class="fc" id="L30">    private val trackers = mutableMapOf&lt;ReaderTrackerType, ReaderTrackerInfo&gt;()</span>

<span class="fc" id="L32">    init {</span>
<span class="fc bfc" id="L33" title="All 2 branches covered.">        for (trackerType in ReaderTrackerType.values()) {</span>
<span class="fc" id="L34">            trackers[trackerType] = ReaderTrackerInfo()</span>
        }
<span class="fc" id="L36">    }</span>

    fun setupTrackers() {
<span class="nc bnc" id="L39" title="All 2 branches missed.">        for (key in trackers.keys) {</span>
<span class="nc" id="L40">            trackers[key] = ReaderTrackerInfo()</span>
        }
<span class="nc" id="L42">    }</span>

    fun start(type: ReaderTrackerType) {
<span class="nc bnc" id="L45" title="All 2 branches missed.">        trackers[type]?.let {</span>
<span class="nc bnc" id="L46" title="All 2 branches missed.">            if (!isRunning(type)) {</span>
<span class="nc" id="L47">                AppLog.d(AppLog.T.MAIN, &quot;ReaderTracker: started $type&quot;)</span>
<span class="nc" id="L48">                trackers[type] = it.copy(startDate = dateProvider.getCurrentDate())</span>
            }
<span class="nc" id="L50">        }</span>
<span class="nc" id="L51">    }</span>

    fun stop(type: ReaderTrackerType) {
<span class="nc bnc" id="L54" title="All 2 branches missed.">        trackers[type]?.let { trackerInfo -&gt;</span>
<span class="nc bnc" id="L55" title="All 2 branches missed.">            if (isRunning(type)) {</span>
<span class="nc" id="L56">                AppLog.d(AppLog.T.MAIN, &quot;ReaderTracker: stopped $type&quot;)</span>
<span class="nc bnc" id="L57" title="All 4 branches missed.">                trackerInfo.startDate?.let { startDate -&gt;</span>
<span class="nc" id="L58">                    val accumulatedTime = trackerInfo.accumulatedTime +</span>
<span class="nc" id="L59">                            DateTimeUtils.secondsBetween(dateProvider.getCurrentDate(), startDate)</span>
                    // let reset the startDate to null
<span class="nc" id="L61">                    trackers[type] = ReaderTrackerInfo(accumulatedTime = accumulatedTime)</span>
<span class="nc" id="L62">                } ?: AppLog.e(AppLog.T.READER, &quot;ReaderTracker &gt; stop found a null startDate&quot;)</span>
            }
<span class="nc" id="L64">        }</span>
<span class="nc" id="L65">    }</span>

    fun isRunning(type: ReaderTrackerType): Boolean {
<span class="nc bnc" id="L68" title="All 4 branches missed.">        return trackers[type]?.startDate != null</span>
    }

    fun getAnalyticsData(): Map&lt;String, Any&gt; {
<span class="nc" id="L72">        return trackers.entries.associate { it.key.propertyName to it.value.accumulatedTime }</span>
    }

    fun trackReaderTabIfNecessary(readerTab: ReaderTab) {
<span class="nc bnc" id="L76" title="All 2 branches missed.">        if (readerTab != appPrefsWrapper.getReaderActiveTab()) {</span>
<span class="nc bnc" id="L77" title="All 8 branches missed.">            when (readerTab) {</span>
<span class="nc" id="L78">                ReaderTab.FOLLOWING -&gt; analyticsTrackerWrapper.track(AnalyticsTracker.Stat.READER_FOLLOWING_SHOWN)</span>
<span class="nc" id="L79">                ReaderTab.DISCOVER -&gt; analyticsTrackerWrapper.track(AnalyticsTracker.Stat.READER_DISCOVER_SHOWN)</span>
<span class="nc" id="L80">                ReaderTab.LIKED -&gt; analyticsTrackerWrapper.track(AnalyticsTracker.Stat.READER_LIKED_SHOWN)</span>
<span class="nc" id="L81">                ReaderTab.SAVED -&gt; analyticsTrackerWrapper.track(</span>
<span class="nc" id="L82">                        AnalyticsTracker.Stat.READER_SAVED_LIST_SHOWN,</span>
<span class="nc" id="L83">                        mapOf(&quot;source&quot; to &quot;reader_filter&quot;)</span>
                )
<span class="nc" id="L85">                ReaderTab.A8C -&gt; analyticsTrackerWrapper.track(AnalyticsTracker.Stat.READER_A8C_SHOWN)</span>
<span class="nc" id="L86">                ReaderTab.P2 -&gt; analyticsTrackerWrapper.track(AnalyticsTracker.Stat.READER_P2_SHOWN)</span>
<span class="nc" id="L87">                ReaderTab.CUSTOM -&gt; analyticsTrackerWrapper.track(AnalyticsTracker.Stat.READER_CUSTOM_TAB_SHOWN)</span>
            }
<span class="nc" id="L89">            appPrefsWrapper.setReaderActiveTab(readerTab)</span>
        }
<span class="nc" id="L91">    }</span>

    fun onAppGoesToBackground() {
<span class="nc" id="L94">        appPrefsWrapper.setReaderActiveTab(null)</span>
<span class="nc" id="L95">    }</span>

    fun onBottomNavigationTabChanged() {
<span class="nc" id="L98">        appPrefsWrapper.setReaderActiveTab(null)</span>
<span class="nc" id="L99">    }</span>

    /* TRACK */

    fun track(
        stat: AnalyticsTracker.Stat
    ) {
<span class="nc" id="L106">        analyticsTrackerWrapper.track(stat)</span>
<span class="nc" id="L107">    }</span>

    fun track(
        stat: AnalyticsTracker.Stat,
        source: String
    ) {
<span class="nc" id="L113">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L114">                SOURCE_KEY to source</span>
        )
<span class="nc" id="L116">        track(stat, properties)</span>
<span class="nc" id="L117">    }</span>

    fun track(
        stat: AnalyticsTracker.Stat,
        properties: MutableMap&lt;String, *&gt;
    ) {
<span class="nc" id="L123">        analyticsTrackerWrapper.track(stat, properties)</span>
<span class="nc" id="L124">    }</span>

    /* BLOG */

    fun trackBlog(
        stat: AnalyticsTracker.Stat,
        blogId: Long,
        feedId: Long
    ) {
<span class="nc" id="L133">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L134">                BLOG_ID_KEY to blogId(blogId, feedId),</span>
<span class="nc" id="L135">                FEED_ID_KEY to feedId</span>
        )
<span class="nc" id="L137">        track(stat, properties)</span>
<span class="nc" id="L138">    }</span>

    fun trackBlog(
        stat: AnalyticsTracker.Stat,
        blogId: Long,
        feedId: Long,
        isFollowed: Boolean?
    ) {
<span class="nc" id="L146">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L147">                BLOG_ID_KEY to blogId(blogId, feedId),</span>
<span class="nc" id="L148">                FEED_ID_KEY to feedId,</span>
<span class="nc bnc" id="L149" title="All 2 branches missed.">                FOLLOW_KEY to (isFollowed ?: UNKNOWN_VALUE)</span>
        )
<span class="nc" id="L151">        track(stat, properties)</span>
<span class="nc" id="L152">    }</span>

    fun trackBlog(
        stat: AnalyticsTracker.Stat,
        blogId: Long,
        feedId: Long,
        source: String
    ) {
<span class="nc" id="L160">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L161">                BLOG_ID_KEY to blogId(blogId, feedId),</span>
<span class="nc" id="L162">                FEED_ID_KEY to feedId,</span>
<span class="nc" id="L163">                SOURCE_KEY to source</span>
        )
<span class="nc" id="L165">        track(stat, properties)</span>
<span class="nc" id="L166">    }</span>

    fun trackBlog(
        stat: AnalyticsTracker.Stat,
        blogId: Long,
        feedId: Long,
        isFollowed: Boolean?,
        source: String
    ) {
<span class="nc" id="L175">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L176">                BLOG_ID_KEY to blogId(blogId, feedId),</span>
<span class="nc" id="L177">                FEED_ID_KEY to feedId,</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">                FOLLOW_KEY to (isFollowed ?: UNKNOWN_VALUE),</span>
<span class="nc" id="L179">                SOURCE_KEY to source</span>
        )
<span class="nc" id="L181">        track(stat, properties)</span>
<span class="nc" id="L182">    }</span>

    /**
     * The [org.wordpress.android.models.ReaderBlog.fromJson] method within this model class has a logic where it
     * checks whether the blogs 'blogId' is 0, if it is, then it checks whether the 'feedId' is not 0. If both
     * conditions are met then it assigns the 'feedId' to 'blogId'. It does that in order to keep consistency with the
     * '/read/' endpoints.
     *
     * This tracking function captures that and does the opposite in order to make sure that the tracking is done to the
     * absolute. As such, it check whether the 'feedId' is equal to the 'blogId' and if so it assigns 0 to the 'blog_id'
     * tracking property. Else, as should, it assigns the actual 'blogId' to the 'blog_id' tracking property.
     */
<span class="nc bnc" id="L194" title="All 2 branches missed.">    private fun blogId(blogId: Long, feedId: Long) = if (feedId == blogId) 0 else blogId</span>

    /* TAG */

    fun trackTag(
        stat: AnalyticsTracker.Stat,
        tag: String,
        source: String
    ) {
<span class="nc" id="L203">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L204">                TAG_KEY to tag,</span>
<span class="nc" id="L205">                SOURCE_KEY to source</span>
        )
<span class="nc" id="L207">        track(stat, properties)</span>
<span class="nc" id="L208">    }</span>

    fun trackTagQuantity(
        stat: AnalyticsTracker.Stat,
        quantity: Int
    ) {
<span class="nc" id="L214">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L215">                QUANTITY_KEY to quantity</span>
        )
<span class="nc" id="L217">        track(stat, properties)</span>
<span class="nc" id="L218">    }</span>

    /* POST */

    fun trackBlogPost(
        stat: AnalyticsTracker.Stat,
        blogId: Long,
        postId: Long
    ) {
<span class="nc" id="L227">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L228">                BLOG_ID_KEY to blogId,</span>
<span class="nc" id="L229">                POST_ID_KEY to postId</span>
        )
<span class="nc" id="L231">        track(stat, properties)</span>
<span class="nc" id="L232">    }</span>

    fun trackBlogPost(
        stat: AnalyticsTracker.Stat,
        blogId: Long,
        postId: Long,
        isJetpack: Boolean
    ) {
<span class="nc" id="L240">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L241">                BLOG_ID_KEY to blogId,</span>
<span class="nc" id="L242">                POST_ID_KEY to postId,</span>
<span class="nc" id="L243">                IS_JETPACK_KEY to isJetpack</span>
        )
<span class="nc" id="L245">        track(stat, properties)</span>
<span class="nc" id="L246">    }</span>

    fun trackBlogPost(
        stat: AnalyticsTracker.Stat,
        blogId: String,
        postId: String,
        commentId: Int
    ) {
<span class="nc" id="L254">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L255">                BLOG_ID_KEY to blogId,</span>
<span class="nc" id="L256">                POST_ID_KEY to postId,</span>
<span class="nc" id="L257">                COMMENT_ID_KEY to commentId</span>
        )
<span class="nc" id="L259">        track(stat, properties)</span>
<span class="nc" id="L260">    }</span>

    fun trackFeedPost(
        stat: AnalyticsTracker.Stat,
        feedId: Long,
        feedItemId: Long
    ) {
<span class="nc" id="L267">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L268">                FEED_ID_KEY to feedId,</span>
<span class="nc" id="L269">                FEED_ITEM_ID_KEY to feedItemId</span>
        )
<span class="nc" id="L271">        track(stat, properties)</span>
<span class="nc" id="L272">    }</span>

    fun trackPost(
        stat: AnalyticsTracker.Stat,
        post: ReaderPost?
    ) {
<span class="nc" id="L278">        trackPost(stat, post, mutableMapOf&lt;String, Any&gt;())</span>
<span class="nc" id="L279">    }</span>

    fun trackPost(
        stat: AnalyticsTracker.Stat,
        post: ReaderPost?,
        source: String
    ) {
<span class="nc" id="L286">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L287">                SOURCE_KEY to source</span>
        )
<span class="nc" id="L289">        trackPost(stat, post, properties)</span>
<span class="nc" id="L290">    }</span>

    private fun trackPost(
        stat: AnalyticsTracker.Stat,
        post: ReaderPost?,
        properties: MutableMap&lt;String, *&gt;
    ) {
<span class="nc" id="L297">        analyticsUtilsWrapper.trackWithReaderPostDetails(</span>
<span class="nc" id="L298">                stat,</span>
<span class="nc" id="L299">                post,</span>
<span class="nc" id="L300">                properties</span>
        )
<span class="nc" id="L302">    }</span>

    fun trackPostComments(
        stat: AnalyticsTracker.Stat,
        blogId: Long,
        postId: Long,
        post: ReaderPost?,
        properties: MutableMap&lt;String, *&gt;
    ) {
<span class="nc" id="L311">        analyticsUtilsWrapper.trackFollowCommentsWithReaderPostDetails(</span>
<span class="nc" id="L312">                stat,</span>
<span class="nc" id="L313">                blogId,</span>
<span class="nc" id="L314">                postId,</span>
<span class="nc" id="L315">                post,</span>
<span class="nc" id="L316">                properties</span>
        )
<span class="nc" id="L318">    }</span>

    /* OTHER */

    /**
     * Track when app launched via deep-linking but then fell back to external browser
     *
     * @param stat The Stat to bump
     * @param interceptedUri The fallback URI the app was started with
     */
    fun trackUri(
        stat: AnalyticsTracker.Stat,
        interceptedUri: String
    ) {
<span class="nc" id="L332">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L333">                INTERCEPTED_URI_KEY to interceptedUri</span>
        )
<span class="nc" id="L335">        track(stat, properties)</span>
<span class="nc" id="L336">    }</span>

    fun trackQuery(
        stat: AnalyticsTracker.Stat,
        query: String
    ) {
<span class="nc" id="L342">        val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L343">                QUERY_KEY to query</span>
        )
<span class="nc" id="L345">        track(stat, properties)</span>
<span class="nc" id="L346">    }</span>

    fun trackDeepLink(
        stat: AnalyticsTracker.Stat,
        action: String,
        host: String,
        uri: Uri?
    ) {
<span class="nc" id="L354">        analyticsUtilsWrapper.trackWithDeepLinkData(stat, action, host, uri)</span>
<span class="nc" id="L355">    }</span>

    fun trackRailcar(
        railcarJson: String
    ) {
<span class="nc" id="L360">        analyticsUtilsWrapper.trackRailcarRender(railcarJson)</span>
<span class="nc" id="L361">    }</span>

    /* HELPER */

    @JvmOverloads
<span class="nc" id="L366">    fun getSource(</span>
        postListType: ReaderPostListType,
<span class="nc" id="L368">        readerTab: ReaderTab? = null</span>
<span class="nc bnc" id="L369" title="All 2 branches missed.">    ): String = if (postListType == ReaderPostListType.TAG_FOLLOWED) {</span>
<span class="nc bnc" id="L370" title="All 4 branches missed.">        readerTab?.source ?: UNKNOWN_VALUE</span>
<span class="nc" id="L371">    } else {</span>
<span class="nc" id="L372">        postListType.source</span>
<span class="nc" id="L373">    }</span>

    companion object {
        private const val BLOG_ID_KEY = &quot;blog_id&quot;
        private const val POST_ID_KEY = &quot;post_id&quot;
        private const val IS_JETPACK_KEY = &quot;is_jetpack&quot;
        private const val COMMENT_ID_KEY = &quot;comment_id&quot;
        private const val FEED_ID_KEY = &quot;feed_id&quot;
        private const val FEED_ITEM_ID_KEY = &quot;feed_item_id&quot;
        private const val FOLLOW_KEY = &quot;follow&quot;
        private const val TAG_KEY = &quot;tag&quot;
        private const val QUANTITY_KEY = &quot;quantity&quot;
        private const val INTERCEPTED_URI_KEY = &quot;intercepted_uri&quot;
        private const val QUERY_KEY = &quot;query&quot;

        private const val SOURCE_KEY = &quot;source&quot;
        const val SOURCE_FOLLOWING = &quot;following&quot;
        const val SOURCE_DISCOVER = &quot;discover&quot;
        const val SOURCE_LIKED = &quot;liked&quot;
        const val SOURCE_SAVED = &quot;saved&quot;
        const val SOURCE_CUSTOM = &quot;custom&quot;
        const val SOURCE_A8C = &quot;a8c&quot;
        const val SOURCE_P2 = &quot;p2&quot;
        const val SOURCE_SETTINGS = &quot;subscriptions&quot;
        const val SOURCE_SEARCH = &quot;search&quot;
        const val SOURCE_SITE_PREVIEW = &quot;site_preview&quot;
        const val SOURCE_TAG_PREVIEW = &quot;tag_preview&quot;
        const val SOURCE_POST_DETAIL = &quot;post_detail&quot;
        const val SOURCE_POST_DETAIL_COMMENT_SNIPPET = &quot;post_detail_comment_snippet&quot;
        const val SOURCE_COMMENT = &quot;comment&quot;
        const val SOURCE_USER = &quot;user&quot;
        const val SOURCE_STATS = &quot;stats&quot;
        const val SOURCE_NOTIFICATION = &quot;notification&quot;
        const val SOURCE_READER_LIKE_LIST = &quot;reader_like_list&quot;
        const val SOURCE_READER_LIKE_LIST_USER_PROFILE = &quot;reader_like_list_user_profile&quot;
        const val SOURCE_NOTIF_LIKE_LIST_USER_PROFILE = &quot;notif_like_list_user_profile&quot;
        const val SOURCE_USER_PROFILE_UNKNOWN = &quot;user_profile_source_unknown&quot;
        const val SOURCE_ACTIVITY_LOG_DETAIL = &quot;activity_log_detail&quot;

        const val SOURCE_POST_LIST_SAVED_POST_NOTICE = &quot;post_list_saved_post_notice&quot;

        private const val UNKNOWN_VALUE = &quot;unknown&quot;

        @JvmStatic
        fun trackTag(
            stat: AnalyticsTracker.Stat,
            tag: String
        ) {
<span class="nc" id="L421">            val properties = mutableMapOf&lt;String, Any&gt;(</span>
<span class="nc" id="L422">                    TAG_KEY to tag</span>
            )
<span class="nc" id="L424">            AnalyticsTracker.track(stat, properties)</span>
<span class="nc" id="L425">        }</span>

        fun isUserProfileSource(source: String): Boolean {
<span class="nc bnc" id="L428" title="All 2 branches missed.">            return (source == SOURCE_READER_LIKE_LIST_USER_PROFILE ||</span>
<span class="nc bnc" id="L429" title="All 2 branches missed.">                    source == SOURCE_NOTIF_LIKE_LIST_USER_PROFILE ||</span>
<span class="nc bnc" id="L430" title="All 2 branches missed.">                    source == SOURCE_USER_PROFILE_UNKNOWN)</span>
        }
    }
}

<span class="nc" id="L435">enum class ReaderTab(</span>
<span class="nc" id="L436">    val id: Int,</span>
<span class="nc" id="L437">    val source: String</span>
) {
<span class="nc" id="L439">    FOLLOWING(1, ReaderTracker.SOURCE_FOLLOWING),</span>
<span class="nc" id="L440">    DISCOVER(2, ReaderTracker.SOURCE_DISCOVER),</span>
<span class="nc" id="L441">    LIKED(3, ReaderTracker.SOURCE_LIKED),</span>
<span class="nc" id="L442">    SAVED(4, ReaderTracker.SOURCE_SAVED),</span>
<span class="nc" id="L443">    CUSTOM(5, ReaderTracker.SOURCE_CUSTOM),</span>
<span class="nc" id="L444">    A8C(6, ReaderTracker.SOURCE_A8C),</span>
<span class="nc" id="L445">    P2(7, ReaderTracker.SOURCE_P2);</span>

    companion object {
        fun fromId(id: Int): ReaderTab {
<span class="nc" id="L449">            return when (id) {</span>
<span class="nc bnc" id="L450" title="All 2 branches missed.">                FOLLOWING.id -&gt; FOLLOWING</span>
<span class="nc bnc" id="L451" title="All 2 branches missed.">                DISCOVER.id -&gt; DISCOVER</span>
<span class="nc bnc" id="L452" title="All 2 branches missed.">                LIKED.id -&gt; LIKED</span>
<span class="nc bnc" id="L453" title="All 2 branches missed.">                SAVED.id -&gt; SAVED</span>
<span class="nc bnc" id="L454" title="All 2 branches missed.">                A8C.id -&gt; A8C</span>
<span class="nc bnc" id="L455" title="All 2 branches missed.">                P2.id -&gt; P2</span>
<span class="nc bnc" id="L456" title="All 2 branches missed.">                CUSTOM.id -&gt; CUSTOM</span>
<span class="nc" id="L457">                else -&gt; throw RuntimeException(&quot;Unexpected ReaderTab id&quot;)</span>
            }
        }

        @JvmStatic
        fun transformTagToTab(readerTag: ReaderTag): ReaderTab {
<span class="nc" id="L463">            return when {</span>
<span class="nc bnc" id="L464" title="All 2 branches missed.">                readerTag.isFollowedSites -&gt; FOLLOWING</span>
<span class="nc bnc" id="L465" title="All 2 branches missed.">                readerTag.isPostsILike -&gt; LIKED</span>
<span class="nc bnc" id="L466" title="All 2 branches missed.">                readerTag.isBookmarked -&gt; SAVED</span>
<span class="nc bnc" id="L467" title="All 2 branches missed.">                readerTag.isDiscover -&gt; DISCOVER</span>
<span class="nc bnc" id="L468" title="All 2 branches missed.">                readerTag.isA8C -&gt; A8C</span>
<span class="nc bnc" id="L469" title="All 2 branches missed.">                readerTag.isP2 -&gt; P2</span>
<span class="nc" id="L470">                else -&gt; CUSTOM</span>
            }
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>