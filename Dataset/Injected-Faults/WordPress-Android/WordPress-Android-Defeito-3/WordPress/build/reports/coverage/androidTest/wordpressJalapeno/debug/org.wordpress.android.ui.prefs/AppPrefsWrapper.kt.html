<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AppPrefsWrapper.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.prefs</a> &gt; <span class="el_source">AppPrefsWrapper.kt</span></div><h1>AppPrefsWrapper.kt</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.prefs

import org.wordpress.android.fluxc.model.JetpackCapability
import org.wordpress.android.fluxc.store.QuickStartStore.QuickStartTask
import org.wordpress.android.models.ReaderTag
import org.wordpress.android.ui.posts.AuthorFilterSelection
import org.wordpress.android.ui.posts.PostListViewLayoutType
import org.wordpress.android.ui.quickstart.QuickStartType
import org.wordpress.android.ui.reader.tracker.ReaderTab
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsColorSelectionViewModel.Color
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsColorSelectionViewModel.Color.DARK
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsColorSelectionViewModel.Color.LIGHT
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsDataTypeSelectionViewModel.DataType
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsDataTypeSelectionViewModel.DataType.COMMENTS
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsDataTypeSelectionViewModel.DataType.LIKES
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsDataTypeSelectionViewModel.DataType.VIEWS
import org.wordpress.android.ui.stats.refresh.lists.widget.configuration.StatsDataTypeSelectionViewModel.DataType.VISITORS
import java.util.Date
import javax.inject.Inject
import javax.inject.Singleton

/**
 * Injectable wrapper around AppPrefs.
 *
 * AppPrefs interface is consisted of static methods, which make the client code difficult to test/mock. Main purpose of
 * this wrapper is to make testing easier.
 *
 */
<span class="fc" id="L29">@Singleton</span>
<span class="fc" id="L30">class AppPrefsWrapper @Inject constructor() {</span>
    var featureAnnouncementShownVersion: Int
<span class="nc" id="L32">        get() = AppPrefs.getFeatureAnnouncementShownVersion()</span>
<span class="nc" id="L33">        set(version) = AppPrefs.setFeatureAnnouncementShownVersion(version)</span>

    var lastFeatureAnnouncementAppVersionCode: Int
<span class="nc" id="L36">        get() = AppPrefs.getLastFeatureAnnouncementAppVersionCode()</span>
<span class="nc" id="L37">        set(version) = AppPrefs.setLastFeatureAnnouncementAppVersionCode(version)</span>

    var avatarVersion: Int
<span class="nc" id="L40">        get() = AppPrefs.getAvatarVersion()</span>
<span class="nc" id="L41">        set(version) = AppPrefs.setAvatarVersion(version)</span>

    var isAztecEditorEnabled: Boolean
<span class="nc" id="L44">        get() = AppPrefs.isAztecEditorEnabled()</span>
<span class="nc" id="L45">        set(enabled) = AppPrefs.setAztecEditorEnabled(enabled)</span>

    var postListAuthorSelection: AuthorFilterSelection
<span class="nc" id="L48">        get() = AppPrefs.getAuthorFilterSelection()</span>
<span class="nc" id="L49">        set(value) = AppPrefs.setAuthorFilterSelection(value)</span>

    var postListViewLayoutType: PostListViewLayoutType
<span class="nc" id="L52">        get() = AppPrefs.getPostsListViewLayoutType()</span>
<span class="nc" id="L53">        set(value) = AppPrefs.setPostsListViewLayoutType(value)</span>

    var systemNotificationsEnabled: Boolean
<span class="fc" id="L56">        get() = AppPrefs.getSystemNotificationsEnabled()</span>
<span class="nc" id="L57">        set(value) = AppPrefs.setSystemNotificationsEnabled(value)</span>

    var shouldShowPostSignupInterstitial: Boolean
<span class="nc" id="L60">        get() = AppPrefs.shouldShowPostSignupInterstitial()</span>
<span class="nc" id="L61">        set(shouldShow) = AppPrefs.setShouldShowPostSignupInterstitial(shouldShow)</span>

    var readerTagsUpdatedTimestamp: Long
<span class="nc" id="L64">        get() = AppPrefs.getReaderTagsUpdatedTimestamp()</span>
<span class="nc" id="L65">        set(timestamp) = AppPrefs.setReaderTagsUpdatedTimestamp(timestamp)</span>

    var readerCssUpdatedTimestamp: Long
<span class="nc" id="L68">        get() = AppPrefs.getReaderCssUpdatedTimestamp()</span>
<span class="nc" id="L69">        set(timestamp) = AppPrefs.setReaderCssUpdatedTimestamp(timestamp)</span>

    var readerCardsPageHandle: String?
<span class="nc" id="L72">        get() = AppPrefs.getReaderCardsPageHandle()</span>
<span class="nc" id="L73">        set(pageHandle) = AppPrefs.setReaderCardsPageHandle(pageHandle)</span>

    var readerDiscoverWelcomeBannerShown: Boolean
<span class="nc" id="L76">        get() = AppPrefs.getReaderDiscoverWelcomeBannerShown()</span>
<span class="nc" id="L77">        set(showBanner) = AppPrefs.setReaderDiscoverWelcomeBannerShown(showBanner)</span>

    var shouldShowStoriesIntro: Boolean
<span class="nc" id="L80">        get() = AppPrefs.shouldShowStoriesIntro()</span>
<span class="nc" id="L81">        set(shouldShow) = AppPrefs.setShouldShowStoriesIntro(shouldShow)</span>

    var shouldScheduleCreateSiteNotification: Boolean
<span class="nc" id="L84">        get() = AppPrefs.shouldScheduleCreateSiteNotification()</span>
<span class="nc" id="L85">        set(shouldSchedule) = AppPrefs.setShouldScheduleCreateSiteNotification(shouldSchedule)</span>

<span class="nc" id="L87">    fun getAppWidgetSiteId(appWidgetId: Int) = AppPrefs.getStatsWidgetSelectedSiteId(appWidgetId)</span>
<span class="nc" id="L88">    fun setAppWidgetSiteId(siteId: Long, appWidgetId: Int) = AppPrefs.setStatsWidgetSelectedSiteId(siteId, appWidgetId)</span>
<span class="nc" id="L89">    fun removeAppWidgetSiteId(appWidgetId: Int) = AppPrefs.removeStatsWidgetSelectedSiteId(appWidgetId)</span>
<span class="nc" id="L90">    fun isGutenbergEditorEnabled() = AppPrefs.isGutenbergEditorEnabled()</span>
<span class="nc" id="L91">    fun getReaderCardsRefreshCounter() = AppPrefs.getReaderCardsRefreshCounter()</span>
<span class="nc" id="L92">    fun incrementReaderCardsRefreshCounter() = AppPrefs.incrementReaderCardsRefreshCounter()</span>

    fun getAppWidgetColor(appWidgetId: Int): Color? {
<span class="nc bnc" id="L95" title="All 3 branches missed.">        return when (AppPrefs.getStatsWidgetColorModeId(appWidgetId)) {</span>
<span class="nc" id="L96">            LIGHT_MODE_ID -&gt; LIGHT</span>
<span class="nc" id="L97">            DARK_MODE_ID -&gt; DARK</span>
<span class="nc" id="L98">            else -&gt; null</span>
        }
    }

    fun setAppWidgetColor(colorMode: Color, appWidgetId: Int) {
<span class="nc bnc" id="L103" title="All 2 branches missed.">        val colorModeId = when (colorMode) {</span>
<span class="nc" id="L104">            LIGHT -&gt; LIGHT_MODE_ID</span>
<span class="nc" id="L105">            DARK -&gt; DARK_MODE_ID</span>
        }
<span class="nc" id="L107">        AppPrefs.setStatsWidgetColorModeId(colorModeId, appWidgetId)</span>
<span class="nc" id="L108">    }</span>

<span class="nc" id="L110">    fun removeAppWidgetColorModeId(appWidgetId: Int) = AppPrefs.removeStatsWidgetColorModeId(appWidgetId)</span>

    fun getAppWidgetDataType(appWidgetId: Int): DataType? {
<span class="nc bnc" id="L113" title="All 5 branches missed.">        return when (AppPrefs.getStatsWidgetDataTypeId(appWidgetId)) {</span>
<span class="nc" id="L114">            VIEWS_TYPE_ID -&gt; VIEWS</span>
<span class="nc" id="L115">            VISITORS_TYPE_ID -&gt; VISITORS</span>
<span class="nc" id="L116">            COMMENTS_TYPE_ID -&gt; COMMENTS</span>
<span class="nc" id="L117">            LIKES_TYPE_ID -&gt; LIKES</span>
<span class="nc" id="L118">            else -&gt; null</span>
        }
    }

    fun setAppWidgetDataType(dataType: DataType, appWidgetId: Int) {
<span class="nc bnc" id="L123" title="All 4 branches missed.">        val dataTypeId = when (dataType) {</span>
<span class="nc" id="L124">            VIEWS -&gt; VIEWS_TYPE_ID</span>
<span class="nc" id="L125">            VISITORS -&gt; VISITORS_TYPE_ID</span>
<span class="nc" id="L126">            COMMENTS -&gt; COMMENTS_TYPE_ID</span>
<span class="nc" id="L127">            LIKES -&gt; LIKES_TYPE_ID</span>
        }
<span class="nc" id="L129">        AppPrefs.setStatsWidgetDataTypeId(dataTypeId, appWidgetId)</span>
<span class="nc" id="L130">    }</span>

<span class="nc" id="L132">    fun removeAppWidgetDataTypeModeId(appWidgetId: Int) = AppPrefs.removeStatsWidgetDataTypeId(appWidgetId)</span>

    fun hasAppWidgetData(appWidgetId: Int): Boolean {
<span class="nc" id="L135">        return AppPrefs.getStatsWidgetHasData(appWidgetId)</span>
    }

    fun setAppWidgetHasData(hasData: Boolean, appWidgetId: Int) {
<span class="nc" id="L139">        AppPrefs.setStatsWidgetHasData(hasData, appWidgetId)</span>
<span class="nc" id="L140">    }</span>

<span class="nc" id="L142">    fun removeAppWidgetHasData(appWidgetId: Int) = AppPrefs.removeStatsWidgetHasData(appWidgetId)</span>

<span class="nc" id="L144">    fun isMainFabTooltipDisabled() = AppPrefs.isMainFabTooltipDisabled()</span>
<span class="nc" id="L145">    fun setMainFabTooltipDisabled(disable: Boolean) = AppPrefs.setMainFabTooltipDisabled(disable)</span>

<span class="nc" id="L147">    fun getReaderSubfilter() = AppPrefs.getReaderSubfilter()</span>
<span class="nc" id="L148">    fun setReaderSubfilter(json: String) = AppPrefs.setReaderSubfilter(json)</span>

<span class="nc" id="L150">    fun getLastReaderKnownAccessTokenStatus() = AppPrefs.getLastReaderKnownAccessTokenStatus()</span>
    fun setLastReaderKnownAccessTokenStatus(lastKnownAccessTokenStatus: Boolean) =
<span class="nc" id="L152">            AppPrefs.setLastReaderKnownAccessTokenStatus(lastKnownAccessTokenStatus)</span>

<span class="nc" id="L154">    fun getLastReaderKnownUserId() = AppPrefs.getLastReaderKnownUserId()</span>
<span class="nc" id="L155">    fun setLastReaderKnownUserId(userId: Long) = AppPrefs.setLastReaderKnownUserId(userId)</span>

<span class="nc" id="L157">    fun getLastAppVersionCode() = AppPrefs.getLastAppVersionCode()</span>

<span class="nc" id="L159">    fun setReaderTag(selectedTag: ReaderTag?) = AppPrefs.setReaderTag(selectedTag)</span>
<span class="nc" id="L160">    fun getReaderTag(): ReaderTag? = AppPrefs.getReaderTag()</span>

<span class="nc" id="L162">    fun setReaderActiveTab(selectedTab: ReaderTab?) = AppPrefs.setReaderActiveTab(selectedTab)</span>
<span class="nc" id="L163">    fun getReaderActiveTab(): ReaderTab? = AppPrefs.getReaderActiveTab()</span>

<span class="nc" id="L165">    fun shouldShowBookmarksSavedLocallyDialog(): Boolean = AppPrefs.shouldShowBookmarksSavedLocallyDialog()</span>
<span class="nc" id="L166">    fun setBookmarksSavedLocallyDialogShown() = AppPrefs.setBookmarksSavedLocallyDialogShown()</span>

<span class="nc" id="L168">    fun isPostListFabTooltipDisabled() = AppPrefs.isPostListFabTooltipDisabled()</span>
<span class="nc" id="L169">    fun setPostListFabTooltipDisabled(disable: Boolean) = AppPrefs.setPostListFabTooltipDisabled(disable)</span>

    fun hasManualFeatureConfig(featureKey: String): Boolean {
<span class="fc" id="L172">        return AppPrefs.hasManualFeatureConfig(featureKey)</span>
    }

    fun setManualFeatureConfig(isEnabled: Boolean, featureKey: String) {
<span class="nc" id="L176">        AppPrefs.setManualFeatureConfig(isEnabled, featureKey)</span>
<span class="nc" id="L177">    }</span>

    fun getManualFeatureConfig(featureKey: String): Boolean {
<span class="nc" id="L180">        return AppPrefs.getManualFeatureConfig(featureKey)</span>
    }

    fun setBloggingRemindersShown(siteId: Int) {
<span class="nc" id="L184">        AppPrefs.setBloggingRemindersShown(siteId)</span>
<span class="nc" id="L185">    }</span>

    fun isBloggingRemindersShown(siteId: Int): Boolean {
<span class="nc" id="L188">        return AppPrefs.isBloggingRemindersShown(siteId)</span>
    }

    fun setShouldShowWeeklyRoundupNotification(siteId: Long, shouldShow: Boolean) {
<span class="nc" id="L192">        AppPrefs.setShouldShowWeeklyRoundupNotification(siteId, shouldShow)</span>
<span class="nc" id="L193">    }</span>

    fun shouldShowWeeklyRoundupNotification(siteId: Long): Boolean {
<span class="nc" id="L196">        return AppPrefs.shouldShowWeeklyRoundupNotification(siteId)</span>
    }

    fun setSiteJetpackCapabilities(remoteSiteId: Long, capabilities: List&lt;JetpackCapability&gt;) =
<span class="nc" id="L200">            AppPrefs.setSiteJetpackCapabilities(remoteSiteId, capabilities)</span>

    fun getSiteJetpackCapabilities(remoteSiteId: Long): List&lt;JetpackCapability&gt; =
<span class="nc" id="L203">            AppPrefs.getSiteJetpackCapabilities(remoteSiteId)</span>

<span class="nc" id="L205">    fun setMainPageIndex(index: Int) = AppPrefs.setMainPageIndex(index)</span>

<span class="fc" id="L207">    fun getSelectedSite() = AppPrefs.getSelectedSite()</span>

<span class="nc" id="L209">    fun setSelectedSite(siteLocalId: Int) = AppPrefs.setSelectedSite(siteLocalId)</span>

<span class="nc" id="L211">    fun isQuickStartNoticeRequired() = AppPrefs.isQuickStartNoticeRequired()</span>

<span class="nc" id="L213">    fun setQuickStartNoticeRequired(shown: Boolean) = AppPrefs.setQuickStartNoticeRequired(shown)</span>

<span class="nc" id="L215">    fun setLastSkippedQuickStartTask(task: QuickStartTask) = AppPrefs.setLastSkippedQuickStartTask(task)</span>

    fun getLastSelectedQuickStartTypeForSite(siteLocalId: Long): QuickStartType =
<span class="nc" id="L218">            AppPrefs.getLastSelectedQuickStartTypeForSite(siteLocalId)</span>

    fun setLastSelectedQuickStartTypeForSite(quickStartType: QuickStartType, siteLocalId: Long) =
<span class="nc" id="L221">            AppPrefs.setLastSelectedQuickStartTypeForSite(quickStartType, siteLocalId)</span>

<span class="nc" id="L223">    fun isMySiteDefaultTabExperimentVariantAssigned() = AppPrefs.isMySiteDefaultTabExperimentVariantAssigned()</span>

<span class="nc" id="L225">    fun setMySiteDefaultTabExperimentVariantAssigned() = AppPrefs.setMySiteDefaultTabExperimentVariantAssigned()</span>

    fun setInitialScreenFromMySiteDefaultTabExperimentVariant(variant: String) =
<span class="nc" id="L228">            AppPrefs.setInitialScreenFromMySiteDefaultTabExperimentVariant(variant)</span>

<span class="nc" id="L230">    fun getMySiteInitialScreen(): String = AppPrefs.getMySiteInitialScreen()</span>

<span class="nc" id="L232">    fun setSkippedPromptDay(date: Date?, siteId: Int) = AppPrefs.setSkippedPromptDay(date, siteId)</span>

<span class="nc" id="L234">    fun getSkippedPromptDay(siteId: Int): Date? = AppPrefs.getSkippedPromptDay(siteId)</span>

<span class="nc" id="L236">    fun markStatsRevampFeatureAnnouncementAsDisplayed() = AppPrefs.setShouldDisplayStatsRevampFeatureAnnouncement(false)</span>

    companion object {
        private const val LIGHT_MODE_ID = 0
        private const val DARK_MODE_ID = 1

        private const val VIEWS_TYPE_ID = 0
        private const val VISITORS_TYPE_ID = 1
        private const val COMMENTS_TYPE_ID = 2
        private const val LIKES_TYPE_ID = 3
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>