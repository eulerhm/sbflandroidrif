<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HistoryDetailContainerFragment.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">wordpressJalapenoDebug</a> &gt; <a href="index.source.html" class="el_package">org.wordpress.android.ui.history</a> &gt; <span class="el_source">HistoryDetailContainerFragment.java</span></div><h1>HistoryDetailContainerFragment.java</h1><pre class="source lang-java linenums">package org.wordpress.android.ui.history;

import android.app.Activity;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.os.Parcelable;
import android.text.TextUtils;
import android.text.method.LinkMovementMethod;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.ScrollView;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.appcompat.app.ActionBar;
import androidx.appcompat.app.AppCompatActivity;
import androidx.fragment.app.Fragment;
import androidx.fragment.app.FragmentManager;
import androidx.fragment.app.FragmentStatePagerAdapter;
import androidx.viewpager.widget.ViewPager;
import androidx.viewpager.widget.ViewPager.OnPageChangeListener;

import org.wordpress.android.R;
import org.wordpress.android.WordPress;
import org.wordpress.android.analytics.AnalyticsTracker;
import org.wordpress.android.analytics.AnalyticsTracker.Stat;
import org.wordpress.android.editor.EditorMediaUtils;
import org.wordpress.android.fluxc.model.revisions.RevisionModel;
import org.wordpress.android.fluxc.store.PostStore;
import org.wordpress.android.ui.history.HistoryListItem.Revision;
import org.wordpress.android.ui.posts.services.AztecImageLoader;
import org.wordpress.android.util.AniUtils;
import org.wordpress.android.util.AniUtils.Duration;
import org.wordpress.android.util.AppLog;
import org.wordpress.android.util.AppLog.T;
import org.wordpress.android.util.StringUtils;
import org.wordpress.android.util.image.ImageManager;
import org.wordpress.android.widgets.WPViewPager;
import org.wordpress.android.widgets.WPViewPagerTransformer;
import org.wordpress.android.widgets.WPViewPagerTransformer.TransformType;
import org.wordpress.aztec.AztecText;
import org.wordpress.aztec.plugins.IAztecPlugin;
import org.wordpress.aztec.plugins.shortcodes.AudioShortcodePlugin;
import org.wordpress.aztec.plugins.shortcodes.CaptionShortcodePlugin;
import org.wordpress.aztec.plugins.shortcodes.VideoShortcodePlugin;
import org.wordpress.aztec.plugins.wpcomments.HiddenGutenbergPlugin;
import org.wordpress.aztec.plugins.wpcomments.WordPressCommentsPlugin;

import java.util.ArrayList;
import java.util.List;

import javax.inject.Inject;

<span class="nc" id="L61">public class HistoryDetailContainerFragment extends Fragment {</span>
    private ArrayList&lt;Revision&gt; mRevisions;
    private HistoryDetailFragmentAdapter mAdapter;
    private ImageView mNextButton;
    private ImageView mPreviousButton;
    private OnPageChangeListener mOnPageChangeListener;
    private Revision mRevision;
    private TextView mTotalAdditions;
    private TextView mTotalDeletions;
    private WPViewPager mViewPager;
    private AztecText mVisualContent;
    private TextView mVisualTitle;
    private ScrollView mVisualPreviewContainer;
    private int mPosition;
<span class="nc" id="L75">    private boolean mIsChevronClicked = false;</span>
<span class="nc" id="L76">    private boolean mIsFragmentRecreated = false;</span>

    public static final String EXTRA_CURRENT_REVISION = &quot;EXTRA_CURRENT_REVISION&quot;;
    public static final String EXTRA_PREVIOUS_REVISIONS_IDS = &quot;EXTRA_PREVIOUS_REVISIONS_IDS&quot;;
    public static final String EXTRA_POST_ID = &quot;EXTRA_POST_ID&quot;;
    public static final String EXTRA_SITE_ID = &quot;EXTRA_SITE_ID&quot;;
    public static final String KEY_REVISION = &quot;KEY_REVISION&quot;;
    public static final String KEY_IS_IN_VISUAL_PREVIEW = &quot;KEY_IS_IN_VISUAL_PREVIEW&quot;;

    @Inject ImageManager mImageManager;

    @Inject PostStore mPostStore;

    public static HistoryDetailContainerFragment newInstance(final Revision revision,
                                                             final long[] previousRevisionsIds,
                                                             final long postId,
                                                             final long siteId) {
<span class="nc" id="L93">        Bundle args = new Bundle();</span>
<span class="nc" id="L94">        args.putParcelable(EXTRA_CURRENT_REVISION, revision);</span>
<span class="nc" id="L95">        args.putLongArray(EXTRA_PREVIOUS_REVISIONS_IDS, previousRevisionsIds);</span>
<span class="nc" id="L96">        args.putLong(EXTRA_POST_ID, postId);</span>
<span class="nc" id="L97">        args.putLong(EXTRA_SITE_ID, siteId);</span>
<span class="nc" id="L98">        HistoryDetailContainerFragment fragment = new HistoryDetailContainerFragment();</span>
<span class="nc" id="L99">        fragment.setArguments(args);</span>
<span class="nc" id="L100">        return fragment;</span>
    }

    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
<span class="nc" id="L105">        ViewGroup rootView = (ViewGroup) inflater.inflate(R.layout.history_detail_container_fragment, container, false);</span>

<span class="nc bnc" id="L107" title="All 2 branches missed.">        mIsFragmentRecreated = savedInstanceState != null;</span>

<span class="nc" id="L109">        mapRevisions();</span>

<span class="nc bnc" id="L111" title="All 2 branches missed.">        if (mRevisions != null) {</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">            for (final Revision revision : mRevisions) {</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">                if (revision.getRevisionId() == mRevision.getRevisionId()) {</span>
<span class="nc" id="L114">                    mPosition = mRevisions.indexOf(revision);</span>
                }
<span class="nc" id="L116">            }</span>
        } else {
<span class="nc" id="L118">            throw new IllegalArgumentException(&quot;Revisions list extra is null in HistoryDetailContainerFragment&quot;);</span>
        }

<span class="nc" id="L121">        mViewPager = rootView.findViewById(R.id.diff_pager);</span>
<span class="nc" id="L122">        mViewPager.setPageTransformer(false, new WPViewPagerTransformer(TransformType.SLIDE_OVER));</span>

<span class="nc" id="L124">        mAdapter = new HistoryDetailFragmentAdapter(getChildFragmentManager(), mRevisions);</span>

<span class="nc" id="L126">        mViewPager.setAdapter(mAdapter);</span>
<span class="nc" id="L127">        mViewPager.setCurrentItem(mPosition);</span>

<span class="nc" id="L129">        mTotalAdditions = rootView.findViewById(R.id.diff_additions);</span>
<span class="nc" id="L130">        mTotalDeletions = rootView.findViewById(R.id.diff_deletions);</span>

<span class="nc" id="L132">        mNextButton = rootView.findViewById(R.id.next);</span>
<span class="nc" id="L133">        mNextButton.setOnClickListener(view -&gt; {</span>
<span class="nc" id="L134">            mIsChevronClicked = true;</span>
<span class="nc" id="L135">            mViewPager.setCurrentItem(mPosition + 1, true);</span>
<span class="nc" id="L136">        });</span>

<span class="nc" id="L138">        mPreviousButton = rootView.findViewById(R.id.previous);</span>
<span class="nc" id="L139">        mPreviousButton.setOnClickListener(view -&gt; {</span>
<span class="nc" id="L140">            mIsChevronClicked = true;</span>
<span class="nc" id="L141">            mViewPager.setCurrentItem(mPosition - 1, true);</span>
<span class="nc" id="L142">        });</span>

<span class="nc" id="L144">        mVisualTitle = rootView.findViewById(R.id.visual_title);</span>
<span class="nc" id="L145">        mVisualContent = rootView.findViewById(R.id.visual_content);</span>

<span class="nc" id="L147">        Drawable loadingImagePlaceholder = EditorMediaUtils.getAztecPlaceholderDrawableFromResID(</span>
<span class="nc" id="L148">                requireContext(),</span>
                org.wordpress.android.editor.R.drawable.ic_gridicons_image,
<span class="nc" id="L150">                EditorMediaUtils.getMaximumThumbnailSizeForEditor(requireContext()));</span>

<span class="nc" id="L152">        mVisualContent.setImageGetter(new AztecImageLoader(requireContext(), mImageManager, loadingImagePlaceholder));</span>
<span class="nc" id="L153">        mVisualContent.setKeyListener(null);</span>
<span class="nc" id="L154">        mVisualContent.setTextIsSelectable(true);</span>
<span class="nc" id="L155">        mVisualContent.setCursorVisible(false);</span>
<span class="nc" id="L156">        mVisualContent.setMovementMethod(LinkMovementMethod.getInstance());</span>

<span class="nc" id="L158">        ArrayList&lt;IAztecPlugin&gt; plugins = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L159">        plugins.add(new WordPressCommentsPlugin(mVisualContent));</span>
<span class="nc" id="L160">        plugins.add(new CaptionShortcodePlugin(mVisualContent));</span>
<span class="nc" id="L161">        plugins.add(new VideoShortcodePlugin());</span>
<span class="nc" id="L162">        plugins.add(new AudioShortcodePlugin());</span>
<span class="nc" id="L163">        plugins.add(new HiddenGutenbergPlugin(mVisualContent));</span>
<span class="nc" id="L164">        mVisualContent.setPlugins(plugins);</span>

<span class="nc" id="L166">        mVisualPreviewContainer = rootView.findViewById(R.id.visual_preview_container);</span>

<span class="nc bnc" id="L168" title="All 2 branches missed.">        boolean isInVisualPreview = savedInstanceState != null</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">                                    &amp;&amp; savedInstanceState.getBoolean(KEY_IS_IN_VISUAL_PREVIEW);</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">        mVisualPreviewContainer.setVisibility(isInVisualPreview ? View.VISIBLE : View.GONE);</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">        mViewPager.setVisibility(isInVisualPreview ? View.GONE : View.VISIBLE);</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">        mPreviousButton.setVisibility(isInVisualPreview ? View.INVISIBLE : View.VISIBLE);</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">        mNextButton.setVisibility(isInVisualPreview ? View.INVISIBLE : View.VISIBLE);</span>

<span class="nc" id="L175">        refreshHistoryDetail();</span>
<span class="nc" id="L176">        resetOnPageChangeListener();</span>

<span class="nc" id="L178">        return rootView;</span>
    }

    private void mapRevisions() {
<span class="nc bnc" id="L182" title="All 2 branches missed.">        if (getArguments() != null) {</span>
<span class="nc" id="L183">            mRevision = getArguments().getParcelable(EXTRA_CURRENT_REVISION);</span>

<span class="nc" id="L185">            final long[] previousRevisionsIds = getArguments().getLongArray(EXTRA_PREVIOUS_REVISIONS_IDS);</span>
<span class="nc" id="L186">            final List&lt;RevisionModel&gt; revisionModels = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L187">            final long postId = getArguments().getLong(EXTRA_POST_ID);</span>
<span class="nc" id="L188">            final long siteId = getArguments().getLong(EXTRA_SITE_ID);</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">            for (final long revisionId : previousRevisionsIds) {</span>
<span class="nc" id="L190">                revisionModels.add(mPostStore.getRevisionById(revisionId, postId, siteId));</span>
            }
<span class="nc" id="L192">            mRevisions = mapRevisionModelsToRevisions(revisionModels);</span>
        }
<span class="nc" id="L194">    }</span>

    @Nullable
    private ArrayList&lt;Revision&gt; mapRevisionModelsToRevisions(@Nullable final List&lt;RevisionModel&gt; revisionModels) {
<span class="nc bnc" id="L198" title="All 2 branches missed.">        if (revisionModels == null) {</span>
<span class="nc" id="L199">            return null;</span>
        }
<span class="nc" id="L201">        final ArrayList&lt;Revision&gt; revisions = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">        for (int i = 0; i &lt; revisionModels.size(); i++) {</span>
<span class="nc" id="L203">            final RevisionModel current = revisionModels.get(i);</span>
<span class="nc" id="L204">            revisions.add(new Revision(current));</span>
        }
<span class="nc" id="L206">        return revisions;</span>
    }

    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
<span class="nc" id="L211">        super.onActivityCreated(savedInstanceState);</span>
<span class="nc" id="L212">        showHistoryTimeStampInToolbar();</span>
<span class="nc" id="L213">    }</span>

    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
<span class="nc" id="L217">        super.onCreate(savedInstanceState);</span>
<span class="nc" id="L218">        ((WordPress) requireActivity().getApplication()).component().inject(this);</span>
<span class="nc" id="L219">        setHasOptionsMenu(true);</span>
<span class="nc" id="L220">    }</span>

    @Override
    public void onSaveInstanceState(@NonNull Bundle outState) {
<span class="nc" id="L224">        super.onSaveInstanceState(outState);</span>
<span class="nc" id="L225">        outState.putBoolean(KEY_IS_IN_VISUAL_PREVIEW, isInVisualPreview());</span>
<span class="nc" id="L226">    }</span>

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
<span class="nc" id="L230">        super.onCreateOptionsMenu(menu, inflater);</span>
<span class="nc" id="L231">        inflater.inflate(R.menu.history_detail, menu);</span>
<span class="nc" id="L232">    }</span>

    @Override
    public void onPrepareOptionsMenu(Menu menu) {
<span class="nc" id="L236">        super.onPrepareOptionsMenu(menu);</span>
<span class="nc" id="L237">        MenuItem viewMode = menu.findItem(R.id.history_toggle_view);</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">        viewMode.setTitle(isInVisualPreview() ? R.string.history_preview_html : R.string.history_preview_visual);</span>
<span class="nc" id="L239">    }</span>

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
<span class="nc bnc" id="L243" title="All 2 branches missed.">        if (item.getItemId() == R.id.history_load) {</span>
<span class="nc" id="L244">            Intent intent = new Intent();</span>
<span class="nc" id="L245">            intent.putExtra(KEY_REVISION, mRevision);</span>

<span class="nc" id="L247">            requireActivity().setResult(Activity.RESULT_OK, intent);</span>
<span class="nc" id="L248">            requireActivity().finish();</span>
<span class="nc bnc" id="L249" title="All 2 branches missed.">        } else if (item.getItemId() == R.id.history_toggle_view) {</span>
<span class="nc bnc" id="L250" title="All 2 branches missed.">            if (isInVisualPreview()) {</span>
<span class="nc" id="L251">                AniUtils.fadeIn(mNextButton, Duration.SHORT);</span>
<span class="nc" id="L252">                AniUtils.fadeIn(mPreviousButton, Duration.SHORT);</span>
            } else {
<span class="nc bnc" id="L254" title="All 2 branches missed.">                String title = TextUtils.isEmpty(mRevision.getPostTitle())</span>
<span class="nc" id="L255">                        ? getString(R.string.history_no_title) : mRevision.getPostTitle();</span>
<span class="nc" id="L256">                mVisualTitle.setText(title);</span>
<span class="nc" id="L257">                mVisualContent.fromHtml(StringUtils.notNullStr(mRevision.getPostContent()), false);</span>
<span class="nc" id="L258">                AniUtils.fadeOut(mNextButton, Duration.SHORT, View.INVISIBLE);</span>
<span class="nc" id="L259">                AniUtils.fadeOut(mPreviousButton, Duration.SHORT, View.INVISIBLE);</span>
            }
<span class="nc" id="L261">            crossfadePreviewViews();</span>
        }
<span class="nc" id="L263">        return super.onOptionsItemSelected(item);</span>
    }

    private void crossfadePreviewViews() {
<span class="nc bnc" id="L267" title="All 2 branches missed.">        final View fadeInView = isInVisualPreview() ? mViewPager : mVisualPreviewContainer;</span>
<span class="nc bnc" id="L268" title="All 2 branches missed.">        final View fadeOutView = isInVisualPreview() ? mVisualPreviewContainer : mViewPager;</span>
<span class="nc" id="L269">        mVisualPreviewContainer.smoothScrollTo(0, 0);</span>
<span class="nc" id="L270">        mVisualPreviewContainer.post(new Runnable() {</span>
            @Override
            public void run() {
<span class="nc" id="L273">                AniUtils.fadeIn(fadeInView, Duration.SHORT);</span>
<span class="nc" id="L274">                AniUtils.fadeOut(fadeOutView, Duration.SHORT);</span>
<span class="nc" id="L275">            }</span>
        });
<span class="nc" id="L277">    }</span>

    private void showHistoryTimeStampInToolbar() {
<span class="nc" id="L280">        ActionBar actionBar = ((AppCompatActivity) requireActivity()).getSupportActionBar();</span>
<span class="nc bnc" id="L281" title="All 2 branches missed.">        if (actionBar != null) {</span>
<span class="nc" id="L282">            actionBar.setSubtitle(mRevision.getTimeSpan());</span>
        }
<span class="nc" id="L284">    }</span>

    private void refreshHistoryDetail() {
<span class="nc bnc" id="L287" title="All 2 branches missed.">        if (mRevision.getTotalAdditions() &gt; 0) {</span>
<span class="nc" id="L288">            mTotalAdditions.setText(String.valueOf(mRevision.getTotalAdditions()));</span>
<span class="nc" id="L289">            mTotalAdditions.setVisibility(View.VISIBLE);</span>
        } else {
<span class="nc" id="L291">            mTotalAdditions.setVisibility(View.GONE);</span>
        }

<span class="nc bnc" id="L294" title="All 2 branches missed.">        if (mRevision.getTotalDeletions() &gt; 0) {</span>
<span class="nc" id="L295">            mTotalDeletions.setText(String.valueOf(mRevision.getTotalDeletions()));</span>
<span class="nc" id="L296">            mTotalDeletions.setVisibility(View.VISIBLE);</span>
        } else {
<span class="nc" id="L298">            mTotalDeletions.setVisibility(View.GONE);</span>
        }

<span class="nc bnc" id="L301" title="All 2 branches missed.">        mPreviousButton.setEnabled(mPosition != 0);</span>
<span class="nc bnc" id="L302" title="All 2 branches missed.">        mNextButton.setEnabled(mPosition != mAdapter.getCount() - 1);</span>
<span class="nc" id="L303">    }</span>

    private void resetOnPageChangeListener() {
<span class="nc bnc" id="L306" title="All 2 branches missed.">        if (mOnPageChangeListener != null) {</span>
<span class="nc" id="L307">            mViewPager.removeOnPageChangeListener(mOnPageChangeListener);</span>
        } else {
<span class="nc" id="L309">            mOnPageChangeListener = new ViewPager.OnPageChangeListener() {</span>
                @Override
                public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
<span class="nc" id="L312">                }</span>

                @Override
                public void onPageScrollStateChanged(int state) {
<span class="nc" id="L316">                }</span>

                @Override
                public void onPageSelected(int position) {
<span class="nc bnc" id="L320" title="All 2 branches missed.">                    if (mIsChevronClicked) {</span>
<span class="nc" id="L321">                        AnalyticsTracker.track(Stat.REVISIONS_DETAIL_VIEWED_FROM_CHEVRON);</span>
<span class="nc" id="L322">                        mIsChevronClicked = false;</span>
                    } else {
<span class="nc bnc" id="L324" title="All 2 branches missed.">                        if (!mIsFragmentRecreated) {</span>
<span class="nc" id="L325">                            AnalyticsTracker.track(Stat.REVISIONS_DETAIL_VIEWED_FROM_SWIPE);</span>
                        } else {
<span class="nc" id="L327">                            mIsFragmentRecreated = false;</span>
                        }
                    }

<span class="nc" id="L331">                    mPosition = position;</span>
<span class="nc" id="L332">                    mRevision = mAdapter.getRevisionAtPosition(mPosition);</span>
<span class="nc" id="L333">                    refreshHistoryDetail();</span>
<span class="nc" id="L334">                    showHistoryTimeStampInToolbar();</span>
<span class="nc" id="L335">                }</span>
            };
        }

<span class="nc" id="L339">        mViewPager.addOnPageChangeListener(mOnPageChangeListener);</span>
<span class="nc" id="L340">    }</span>

    private boolean isInVisualPreview() {
<span class="nc bnc" id="L343" title="All 2 branches missed.">        return mVisualPreviewContainer.getVisibility() == View.VISIBLE;</span>
    }

    private class HistoryDetailFragmentAdapter extends FragmentStatePagerAdapter {
        private final ArrayList&lt;Revision&gt; mRevisions;

        @SuppressWarnings(&quot;unchecked&quot;)
<span class="nc" id="L350">        HistoryDetailFragmentAdapter(FragmentManager fragmentManager, ArrayList&lt;Revision&gt; revisions) {</span>
<span class="nc" id="L351">            super(fragmentManager);</span>
<span class="nc" id="L352">            mRevisions = (ArrayList&lt;Revision&gt;) revisions.clone();</span>
<span class="nc" id="L353">        }</span>

        @Override
        public Fragment getItem(int position) {
<span class="nc" id="L357">            return HistoryDetailFragment.Companion.newInstance(mRevisions.get(position));</span>
        }

        @Override
        public int getCount() {
<span class="nc" id="L362">            return mRevisions.size();</span>
        }

        @Override
        public void restoreState(Parcelable state, ClassLoader loader) {
            try {
<span class="nc" id="L368">                super.restoreState(state, loader);</span>
<span class="nc" id="L369">            } catch (IllegalStateException exception) {</span>
<span class="nc" id="L370">                AppLog.e(T.EDITOR, exception);</span>
<span class="nc" id="L371">            }</span>
<span class="nc" id="L372">        }</span>

        @Override
        public Parcelable saveState() {
<span class="nc" id="L376">            Bundle bundle = (Bundle) super.saveState();</span>

<span class="nc bnc" id="L378" title="All 2 branches missed.">            if (bundle == null) {</span>
<span class="nc" id="L379">                bundle = new Bundle();</span>
            }

<span class="nc" id="L382">            bundle.putParcelableArray(&quot;states&quot;, null);</span>
<span class="nc" id="L383">            return bundle;</span>
        }

        private Revision getRevisionAtPosition(int position) {
<span class="nc bnc" id="L387" title="All 2 branches missed.">            if (isValidPosition(position)) {</span>
<span class="nc" id="L388">                return mRevisions.get(position);</span>
            } else {
<span class="nc" id="L390">                return null;</span>
            }
        }

        private boolean isValidPosition(int position) {
<span class="nc bnc" id="L395" title="All 4 branches missed.">            return (position &gt;= 0 &amp;&amp; position &lt; getCount());</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span>Generated by the Android Gradle plugin 7.1.1</div></body></html>