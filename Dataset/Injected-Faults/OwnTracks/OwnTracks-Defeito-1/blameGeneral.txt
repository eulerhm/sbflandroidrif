rowsFile
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.ContentResolver
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.ContentValues
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.graphics.Bitmap
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.os.Environment
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.provider.MediaStore
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.util.Log
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.test.platform.app.InstrumentationRegistry
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.test.runner.screenshot.Screenshot
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.junit.rules.TestWatcher
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.junit.runner.Description
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import timber.log.Timber
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import java.io.File
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import java.io.FileOutputStream
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import java.io.IOException
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import java.io.OutputStream
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import java.util.*
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) class ScreenshotTakingOnTestEndRule : TestWatcher() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     override fun finished(description: Description?) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)         description?.run {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)             takeScreenshot(parentFolderPath = ""testscreenshots/${description.className}"", screenShotName = description.methodName)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)         } ?: run {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)             val uuid = UUID.randomUUID()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)             println(""Test finished but no description provided. Capturing under $uuid"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)             takeScreenshot(parentFolderPath = uuid.toString(), screenShotName = uuid.toString())"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)         super.finished(description)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private fun takeScreenshot(parentFolderPath: String = """", screenShotName: String) {"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)         Log.d(""Screenshots"", ""Taking screenshot of '$screenShotName'"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)         val screenCapture = Screenshot.capture()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         storeFailureScreenshot(screenCapture.bitmap, screenShotName, parentFolderPath)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     private fun storeFailureScreenshot(bitmap: Bitmap, screenshotName: String, parentFolderPath: String) {"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         val contentResolver = InstrumentationRegistry.getInstrumentation().targetContext.contentResolver
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         // Check SDK version of device to determine how to save the screenshot.
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         if (android.os.Build.VERSION.SDK_INT >= 29) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)             useMediaStoreScreenshotStorage(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)                     contentValues,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)                     contentResolver,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)                     screenshotName,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)                     parentFolderPath,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)                     bitmap
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)             usePublicExternalScreenshotStorage(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)                     contentValues,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)                     contentResolver,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)                     screenshotName,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)                     parentFolderPath,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)                     bitmap
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     private fun useMediaStoreScreenshotStorage(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)             contentValues: ContentValues,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)             contentResolver: ContentResolver,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)             screenshotName: String,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)             parentFolderPath: String,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             bitmap: Bitmap
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     ) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         contentValues.put(MediaStore.Downloads.DISPLAY_NAME, ""$screenshotName.jpeg"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         contentValues.put(MediaStore.Downloads.RELATIVE_PATH, ""${Environment.DIRECTORY_DOWNLOADS}/$parentFolderPath"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         contentValues.put(MediaStore.Downloads.IS_PENDING, 1)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         contentResolver.delete(MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY), ""${MediaStore.Downloads.DISPLAY_NAME}=?"", arrayOf(""$screenshotName.jpeg""))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         val contentUri = contentResolver.insert(MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY), contentValues)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         if (contentUri == null) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)             Timber.e(""ContentURI returned null for $screenshotName"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         contentUri?.also {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             contentResolver.openOutputStream(it)?.let { outputStream -> saveScreenshotToStream(bitmap, outputStream) }"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             contentValues.put(MediaStore.Downloads.IS_PENDING, 0)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             contentResolver.update(it, contentValues, null, null)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     private fun usePublicExternalScreenshotStorage(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             contentValues: ContentValues,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             contentResolver: ContentResolver,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)             screenshotName: String,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             parentFolderPath: String,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             bitmap: Bitmap
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     ) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         @Suppress(""DEPRECATION"") val directory = File(""${Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)}/$parentFolderPath"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         if (!directory.exists()) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             val createSuccess = directory.mkdirs()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             if (!createSuccess) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)                 Timber.e(""unable to create directory tree at ${directory}. Skipping screenshot saving."")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)                 return
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         val file = File(directory, ""$screenshotName.jpeg"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         saveScreenshotToStream(bitmap, FileOutputStream(file))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         val values = contentValues
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         contentResolver.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     private val contentValues = ContentValues().apply {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         put(MediaStore.Images.Media.MIME_TYPE, ""image/jpeg"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         put(MediaStore.Images.Media.DATE_TAKEN, System.currentTimeMillis())"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     private fun saveScreenshotToStream(bitmap: Bitmap, outputStream: OutputStream) {"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         outputStream.use {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)             try {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)                 bitmap.compress(Bitmap.CompressFormat.JPEG, 50, it)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)             } catch (e: IOException) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                 Timber.e(e, ""Screenshot not saved"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ScreenshotTakingOnTestEndRule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.Manifest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.app.NotificationManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.bluetooth.BluetoothManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.content.Context
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.content.Intent
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.content.pm.PackageManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import android.location.LocationManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import android.net.wifi.WifiManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import android.os.PowerManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import android.provider.Settings
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import android.telephony.TelephonyManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import androidx.test.core.app.ApplicationProvider
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import androidx.test.platform.app.InstrumentationRegistry
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import androidx.test.rule.GrantPermissionRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import androidx.test.uiautomator.By
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import androidx.test.uiautomator.UiDevice
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import androidx.test.uiautomator.UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import androidx.test.uiautomator.UiObject2
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import androidx.test.uiautomator.UiObjectNotFoundException
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import androidx.test.uiautomator.UiScrollable
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import androidx.test.uiautomator.UiSelector
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import androidx.test.uiautomator.Until
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.junit.BeforeClass
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.junit.Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import java.io.File
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import java.io.FileOutputStream
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import java.io.IOException
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import java.io.OutputStreamWriter
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import java.io.PrintWriter
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import java.io.Writer
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34) open class SensorConditionsTest {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     var mRuntimePermissionRule = GrantPermissionRule.grant(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         Manifest.permission.ACCESS_WIFI_STATE,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         Manifest.permission.ACCESS_NETWORK_STATE
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     companion object {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         private const val LOCATION = ""Location"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         private const val WIFION = ""ParcTE_v2"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         private const val WIFIOFF = ""Wi-Fi"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         private const val MOBILEDATA = ""Mobile data"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         private const val BLUETOOTH = ""Bluetooth"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         private const val BATTERYSAVER = ""Battery Saver"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         private const val AUTOROTATE = ""Auto-rotate"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         private const val DONOTDISTURB = ""Do Not Disturb"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         private const val CAMERAON = ""Disable Camera"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         private const val CAMERAOFF = ""Enable Camera"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         private var lastAccelerometerStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         private var lastGyroscopeStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         private var lastLightStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         private var lastMagneticFieldStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         private var lastOrientationStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         private var lastProximityStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         private var lastCameraStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         private var lastLocationStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         private var lastWifiStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         private var lastMobileDataStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         private var lastBluetoothStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         private var lastBatterySaverStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         private var lastAutoRotateStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         private var lastDoNotDisturbStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         @BeforeClass @JvmStatic
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         @Throws(UiObjectNotFoundException::class)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         fun setUpSensorConditions() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)             val mDevice: UiDevice
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)             val accelerometerEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)             val gyroscopeEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)             val lightEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)             val magneticFieldEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)             val orientationEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             val proximityEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             val cameraEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             val locationEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             val wifiEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             val mobileDataEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)             val bluetoothEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)             val batterySaverEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             val autoRotateEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             val doNotDisturbEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             val UIObjectLocation: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             var UIObjectWifi: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)             var UIObjectMobiledata: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             var UIObjectBluetooth: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             val UIObjectBatterySaver: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             val UIObjectAutoRotate: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)             var UIObjectDoNotDisturb: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)             val UIObjectCamera: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)             accelerometerEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)                 InstrumentationRegistry.getArguments().getString(""accelerometerEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             gyroscopeEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)                 InstrumentationRegistry.getArguments().getString(""gyroscopeEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)             lightEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)                 InstrumentationRegistry.getArguments().getString(""lightEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)             magneticFieldEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)                 InstrumentationRegistry.getArguments().getString(""magneticFieldEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)             orientationEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)                 InstrumentationRegistry.getArguments().getString(""orientationEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             proximityEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)                 InstrumentationRegistry.getArguments().getString(""proximityEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             cameraEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)                 InstrumentationRegistry.getArguments().getString(""cameraEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)             locationEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)                 InstrumentationRegistry.getArguments().getString(""locationEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)             wifiEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)                 InstrumentationRegistry.getArguments().getString(""wifiEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             mobileDataEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                 InstrumentationRegistry.getArguments().getString(""mobileDataEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             bluetoothEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                 InstrumentationRegistry.getArguments().getString(""bluetoothEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)             batterySaverEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                 InstrumentationRegistry.getArguments().getString(""batterySaverEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             autoRotateEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                 InstrumentationRegistry.getArguments().getString(""autoRotateEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)             doNotDisturbEnabled = java.lang.Boolean.parseBoolean(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)                 InstrumentationRegistry.getArguments().getString(""doNotDisturbEnabled"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)             mDevice = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation())
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)             mDevice.wait(Until.hasObject(By.pkg(launcherPackageName).depth(0)), 1000)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)             verifyAllSensors(mDevice)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)             mDevice.pressBack()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)             lastCameraStatus = verifyCamera(mDevice)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)             mDevice.pressBack()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)             lastLocationStatus = verifyLocation()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)             lastWifiStatus = verifyWifi()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)             lastMobileDataStatus = verifyMobileData()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)             lastBluetoothStatus = verifyBluetooth()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)             lastBatterySaverStatus = verifyBatterySaver()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)             lastAutoRotateStatus = verifyAutoRotate()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)             lastDoNotDisturbStatus = verifyDoNotDisturb()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)             //Location
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             if (locationEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)                 if (!lastLocationStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)                     UIObjectLocation =
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)                         mDevice.findObject(UiSelector().text(LOCATION)) //For Location (GPS)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)                     UIObjectLocation.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)                     lastLocationStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)                 if (lastLocationStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)                     UIObjectLocation =
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)                         mDevice.findObject(UiSelector().text(LOCATION)) //For Location (GPS)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)                     UIObjectLocation.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163)                     lastLocationStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 164)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 165)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 166)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 167)             //Wi-Fi
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 168)             if (wifiEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 169)                 if (!lastWifiStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 170)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 171)                     UIObjectWifi = mDevice.findObject(UiSelector().text(WIFIOFF))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 172)                     UIObjectWifi.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 173)                     UIObjectWifi = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 174)                     UIObjectWifi.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 175)                     lastWifiStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 176)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 177)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 178)                 if (lastWifiStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 179)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 180)                     UIObjectWifi = mDevice.findObject(UiSelector().text(WIFION))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 181)                     UIObjectWifi.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 182)                     UIObjectWifi = mDevice.findObject(UiSelector().text(""ON""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 183)                     UIObjectWifi.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 184)                     UIObjectWifi = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 185)                     UIObjectWifi.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 186)                     lastWifiStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 187)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 188)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 189)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 190)             //Mobile Data
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 191)             if (mobileDataEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 192)                 if (!lastMobileDataStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 193)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 194)                     UIObjectMobiledata = mDevice.findObject(UiSelector().text(MOBILEDATA))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 195)                     UIObjectMobiledata.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 196)                     UIObjectMobiledata = mDevice.findObject(UiSelector().text(""OFF""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 197)                     UIObjectMobiledata.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 198)                     UIObjectMobiledata = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 199)                     UIObjectMobiledata.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 200)                     lastMobileDataStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 201)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 202)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 203)                 if (lastMobileDataStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 204)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 205)                     UIObjectMobiledata = mDevice.findObject(UiSelector().text(MOBILEDATA))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 206)                     UIObjectMobiledata.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 207)                     UIObjectMobiledata = mDevice.findObject(UiSelector().text(""ON""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 208)                     UIObjectMobiledata.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 209)                     UIObjectMobiledata = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 210)                     UIObjectMobiledata.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 211)                     lastMobileDataStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 212)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 213)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 214)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 215)             //Bluetooth
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 216)             if (bluetoothEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 217)                 if (!lastBluetoothStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 218)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 219)                     UIObjectBluetooth = mDevice.findObject(UiSelector().text(BLUETOOTH))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 220)                     UIObjectBluetooth.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 221)                     UIObjectBluetooth = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 222)                     UIObjectBluetooth.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 223)                     lastBluetoothStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 224)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 225)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 226)                 if (lastBluetoothStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 227)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 228)                     UIObjectBluetooth = mDevice.findObject(UiSelector().text(BLUETOOTH))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 229)                     UIObjectBluetooth.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 230)                     UIObjectBluetooth = mDevice.findObject(UiSelector().text(""ON""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 231)                     UIObjectBluetooth.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 232)                     UIObjectBluetooth = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 233)                     UIObjectBluetooth.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 234)                     lastBluetoothStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 235)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 236)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 237)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 238)             //Battery Saver
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 239)             if (batterySaverEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 240)                 if (!lastBatterySaverStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 241)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 242)                     UIObjectBatterySaver = mDevice.findObject(UiSelector().text(BATTERYSAVER))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 243)                     UIObjectBatterySaver.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 244)                     lastBatterySaverStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 245)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 246)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 247)                 if (lastBatterySaverStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 248)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 249)                     UIObjectBatterySaver = mDevice.findObject(UiSelector().text(BATTERYSAVER))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 250)                     UIObjectBatterySaver.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 251)                     lastBatterySaverStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 252)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 253)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 254)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 255)             //Auto Rotate
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 256)             if (autoRotateEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 257)                 if (!lastAutoRotateStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 258)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 259)                     UIObjectAutoRotate = mDevice.findObject(UiSelector().text(AUTOROTATE))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 260)                     UIObjectAutoRotate.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 261)                     lastAutoRotateStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 262)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 263)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 264)                 if (lastAutoRotateStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 265)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 266)                     UIObjectAutoRotate = mDevice.findObject(UiSelector().text(AUTOROTATE))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 267)                     UIObjectAutoRotate.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 268)                     lastAutoRotateStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 269)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 270)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 271)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 272)             //Do Not Disturb
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 273)             if (doNotDisturbEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 274)                 if (!lastDoNotDisturbStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 275)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 276)                     UIObjectDoNotDisturb = mDevice.findObject(UiSelector().text(DONOTDISTURB))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 277)                     UIObjectDoNotDisturb.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 278)                     UIObjectDoNotDisturb = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 279)                     UIObjectDoNotDisturb.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 280)                     lastDoNotDisturbStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 281)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 282)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 283)                 if (lastDoNotDisturbStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 284)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 285)                     UIObjectDoNotDisturb = mDevice.findObject(UiSelector().text(DONOTDISTURB))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 286)                     UIObjectDoNotDisturb.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 287)                     UIObjectDoNotDisturb = mDevice.findObject(UiSelector().text(""ON""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 288)                     UIObjectDoNotDisturb.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 289)                     UIObjectDoNotDisturb = mDevice.findObject(UiSelector().text(""Done""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 290)                     UIObjectDoNotDisturb.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 291)                     lastDoNotDisturbStatus = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 292)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 293)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 294)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 295)             //Camera
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 296)             if (cameraEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 297)                 if (!lastCameraStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 298)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 299)                     UIObjectCamera = mDevice.findObject(UiSelector().text(CAMERAOFF))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 300)                     UIObjectCamera.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 301)                     lastCameraStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 302)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 303)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 304)                 if (lastCameraStatus) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 305)                     mDevice.openQuickSettings()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 306)                     UIObjectCamera = mDevice.findObject(UiSelector().text(CAMERAON))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 307)                     UIObjectCamera.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 308)                     lastCameraStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 309)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 310)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 311)             mDevice.pressHome()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 312)             val UIObjectSensorDisablerApp = mDevice.findObject(UiSelector().text(""Sensor Disabler""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 313)             UIObjectSensorDisablerApp.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 314)             enableDisableSensor(mDevice, ""Accelerometer"", accelerometerEnabled)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 315)             enableDisableSensor(mDevice, ""Gyroscope"", gyroscopeEnabled)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 316)             enableDisableSensor(mDevice, ""Light"", lightEnabled)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 317)             enableDisableSensor(mDevice, ""Magnetic Field"", magneticFieldEnabled)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 318)             enableDisableSensor(mDevice, ""Orientation"", orientationEnabled)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 319)             enableDisableSensor(mDevice, ""Proximity"", proximityEnabled)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 320)             mDevice.pressHome()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 321)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 322)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 323)         private fun enableDisableSensor(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 324)             mDevice: UiDevice,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 325)             sensorName: String,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 326)             sensorEnabled: Boolean
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 327)         ) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 328)             if (sensorEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 329)                 if (!getLastSensorStatus(sensorName)) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 330)                     val UIObjectSensorDisAppMenu =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 331)                         mDevice.findObject(UiSelector().description(""OK""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 332)                     changeSpecificSensor(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 333)                         mDevice,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 334)                         UIObjectSensorDisAppMenu,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 335)                         sensorName,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 336)                         ""Do nothing"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 337)                     )
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 338)                     updateLastSensorStatus(sensorName, true)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 339)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 340)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 341)                 if (getLastSensorStatus(sensorName)) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 342)                     val UIObjectSensorDisAppMenu =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 343)                         mDevice.findObject(UiSelector().description(""OK""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 344)                     changeSpecificSensor(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 345)                         mDevice,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 346)                         UIObjectSensorDisAppMenu,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 347)                         sensorName,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 348)                         ""Remove sensor"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 349)                     )
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 350)                     updateLastSensorStatus(sensorName, false)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 351)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 352)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 353)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 354)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 355)         private fun runExternalCommand(command: String) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 356)             var tempScript: File? = null
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 357)             try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 358)                 tempScript = createTempScript(command)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 359)             } catch (e: IOException) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 360)                 println(""Passou aq"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 361)                 e.printStackTrace()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 362)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 363)             try {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 364)                 val pb = ProcessBuilder(""bash"", tempScript.toString())"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 365)                 pb.inheritIO()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 366)                 val process = pb.start()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 367)                 process.waitFor()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 368)             } catch (e: InterruptedException) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 369)                 e.printStackTrace()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 370)             } catch (e: IOException) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 371)                 e.printStackTrace()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 372)             } finally {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 373)                 tempScript!!.delete()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 374)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 375)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 376)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 377)         @Throws(IOException::class)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 378)         fun createTempScript(command: String?): File {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 379)             val tempScript = File.createTempFile(""script"", null)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 380)             val streamWriter: Writer = OutputStreamWriter(
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 381)                 FileOutputStream(
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 382)                     tempScript
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 383)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 384)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 385)             val printWriter = PrintWriter(streamWriter)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 386)             printWriter.println(""#!/bin/bash"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 387)             printWriter.println(command)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 388)             printWriter.println(""exit"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 389)             printWriter.close()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 390)             return tempScript
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 391)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 392)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 393)         private fun changeSpecificSensor(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 394)             mDevice: UiDevice, UIObjectSensorDisAppMenu: UiObject,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 395)             sensorName: String, changeOption: String"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 396)         ) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 397)             val UIObjectSensorDisAppMenuItem: List<UiObject2>
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 398)             val UIObjectSensorDisablerOptions: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 399)             val UIObjectSaveOptions: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 400)             var scrolledFirstMenuItem = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 401)             try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 402)                 UIObjectSensorDisAppMenu.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 403)                 if (sensorName.equals(""Orientation"", ignoreCase = true) ||"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 404)                     sensorName.equals(""Proximity"", ignoreCase = true) ||"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 405)                     sensorName.equals(""Light"", ignoreCase = true) ||   //For Moto X2"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 406)                     sensorName.equals(""Magnetic Field"", ignoreCase = true) //For Moto X2"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 407)                 ) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 408)                     val appView = UiScrollable(UiSelector().scrollable(true))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 409)                     appView.scrollIntoView(UiSelector().text(sensorName))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 410)                     scrolledFirstMenuItem = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 411)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 412)                 UIObjectSensorDisAppMenuItem = mDevice.findObjects(By.text(sensorName))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 413)                 for (obj in UIObjectSensorDisAppMenuItem) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 414)                     if (obj.isClickable) obj.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 415)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 416)                 UIObjectSensorDisablerOptions = mDevice.findObject(UiSelector().text(changeOption))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 417)                 UIObjectSensorDisablerOptions.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 418)                 UIObjectSaveOptions = mDevice.findObject(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 419)                     UiSelector().className(""android.widget.ImageButton"").instance(2)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 420)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 421)                 UIObjectSaveOptions.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 422)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 423)                 //Need to scroll to the first menu item
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 424)                 if (scrolledFirstMenuItem) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 425)                     UIObjectSensorDisAppMenu.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 426)                     val appView = UiScrollable(UiSelector().scrollable(true))
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 427)                     appView.scrollIntoView(UiSelector().text(""Accelerometer""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 428)                     val UIObjectSensorDisAppCancel =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 429)                         mDevice.findObject(UiSelector().description(""Cancel""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 430)                     UIObjectSensorDisAppCancel.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 431)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 432)             } catch (e: UiObjectNotFoundException) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 433)                 e.printStackTrace()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 434)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 435)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 436)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 437)         private fun getLastSensorStatus(sensorName: String): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 438)             var status = false
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 439)             if (sensorName.equals(""Accelerometer"", ignoreCase = true)) status ="
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 440)                 lastAccelerometerStatus else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 441)                     ""Gyroscope"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 442)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 443)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 444)             ) status = lastGyroscopeStatus else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 445)                     ""Light"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 446)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 447)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 448)             ) status = lastLightStatus else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 449)                     ""Magnetic Field"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 450)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 451)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 452)             ) status = lastMagneticFieldStatus else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 453)                     ""Orientation"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 454)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 455)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 456)             ) status = lastOrientationStatus else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 457)                     ""Proximity"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 458)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 459)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 460)             ) status = lastProximityStatus
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 461)             return status
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 462)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 463)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 464)         private fun updateLastSensorStatus(sensorName: String, status: Boolean) {"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 465)             if (sensorName.equals(""Accelerometer"", ignoreCase = true)) lastAccelerometerStatus ="
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 466)                 status else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 467)                     ""Gyroscope"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 468)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 469)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 470)             ) lastGyroscopeStatus = status else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 471)                     ""Light"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 472)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 473)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 474)             ) lastLightStatus = status else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 475)                     ""Magnetic Field"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 476)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 477)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 478)             ) lastMagneticFieldStatus = status else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 479)                     ""Orientation"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 480)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 481)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 482)             ) lastOrientationStatus = status else if (sensorName.equals(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 483)                     ""Proximity"","
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 484)                     ignoreCase = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 485)                 )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 486)             ) lastProximityStatus = status
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 487)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 488)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 489)         private val launcherPackageName: String
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 490)             get() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 491)                 val intent = Intent(Intent.ACTION_MAIN)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 492)                 intent.addCategory(Intent.CATEGORY_HOME)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 493)                 val context = ApplicationProvider.getApplicationContext<Context>()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 494)                 val pm = context.packageManager
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 495)                 val resolveInfo = pm.resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 496)                 return resolveInfo!!.activityInfo.packageName
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 497)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 498)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 499)         /*
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 500)     private static boolean verifySensors(UiDevice mDevice) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 501)         boolean res = false;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 502)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 503)         //UiObject UIObjectCamera = mDevice.findObject(new UiSelector().description(""Camera""));"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 504)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 505)         //For Galaxy M30
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 506)         UiObject UIObjectCamera = mDevice.findObject(new UiSelector().text(""Camera""));"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 507)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 508)         try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 509)             UIObjectCamera.click();
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 510)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 511)             UiObject UIObjectPhoto = mDevice.findObject(new UiSelector().text(""PHOTO""));"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 512)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 513)             if (UIObjectPhoto.exists())
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 514)                 res = true;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 515)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 516)         } catch (UiObjectNotFoundException e) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 517)             e.printStackTrace();
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 518)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 519)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 520)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 521)         / *
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 522)         UiObject UIObjectDismissButton = mDevice.findObject(new UiSelector().text(""DISMISS""));"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 523)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 524)         try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 525)             UIObjectDismissButton.click();
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 526)             res = false;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 527)         } catch (UiObjectNotFoundException e) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 528)             e.printStackTrace();
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 529)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 530)         */
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 531)         //mDevice.pressHome();
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 532)         //return res;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 533)         //}
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 534)         private fun verifyAllSensors(mDevice: UiDevice) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 535)             val UIObjectSensorDisablerApp = mDevice.findObject(UiSelector().text(""Sensor Disabler""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 536)             lastAccelerometerStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 537)             lastGyroscopeStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 538)             lastLightStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 539)             lastMagneticFieldStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 540)             lastOrientationStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 541)             lastProximityStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 542)             lastCameraStatus = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 543)             try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 544)                 UIObjectSensorDisablerApp.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 545)                 val UIObjectSensorDisAppMenu = mDevice.findObject(UiSelector().description(""OK""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 546)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 547)                 //Accelerometer------------------------------------------------------------------------
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 548)                 lastAccelerometerStatus =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 549)                     checkSpecificSensor(mDevice, UIObjectSensorDisAppMenu, ""Accelerometer"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 550)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 551)                 //Gyroscope----------------------------------------------------------------------------
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 552)                 lastGyroscopeStatus =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 553)                     checkSpecificSensor(mDevice, UIObjectSensorDisAppMenu, ""Gyroscope"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 554)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 555)                 //Light--------------------------------------------------------------------------------
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 556)                 lastLightStatus = checkSpecificSensor(mDevice, UIObjectSensorDisAppMenu, ""Light"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 557)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 558)                 //Magnetic Field-----------------------------------------------------------------------
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 559)                 lastMagneticFieldStatus =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 560)                     checkSpecificSensor(mDevice, UIObjectSensorDisAppMenu, ""Magnetic Field"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 561)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 562)                 //Orientation---------------------------------------------------------------------------
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 563)                 lastOrientationStatus =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 564)                     checkSpecificSensor(mDevice, UIObjectSensorDisAppMenu, ""Orientation"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 565)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 566)                 //Proximity-----------------------------------------------------------------------------
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 567)                 lastProximityStatus =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 568)                     checkSpecificSensor(mDevice, UIObjectSensorDisAppMenu, ""Proximity"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 569)                 UIObjectSensorDisAppMenu.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 570)                 val appView = UiScrollable(UiSelector().scrollable(true))
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 571)                 appView.scrollIntoView(UiSelector().text(""Accelerometer""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 572)                 val UIObjectSensorDisAppCancel =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 573)                     mDevice.findObject(UiSelector().description(""Cancel""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 574)                 UIObjectSensorDisAppCancel.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 575)             } catch (e: UiObjectNotFoundException) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 576)                 e.printStackTrace()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 577)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 578)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 579)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 580)         private fun checkSpecificSensor(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 581)             mDevice: UiDevice,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 582)             UIObjectSensorDisAppMenu: UiObject,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 583)             sensorName: String
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 584)         ): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 585)             var res = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 586)             val UIObjectSensorDisAppMenuItem: List<UiObject2>
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 587)             val UIObjectSensorDisablerOptions: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 588)             try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 589)                 UIObjectSensorDisAppMenu.click()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 590)                 if (sensorName.equals(""Orientation"", ignoreCase = true) ||"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 591)                     sensorName.equals(""Proximity"", ignoreCase = true) ||"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 592)                     sensorName.equals(""Light"", ignoreCase = true) ||   //For Moto X2"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 593)                     sensorName.equals(""Magnetic Field"", ignoreCase = true) //For Moto X2"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 594)                 ) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 595)                     val appView = UiScrollable(UiSelector().scrollable(true))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 596)                     appView.scrollIntoView(UiSelector().text(sensorName))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 597)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 598)                 UIObjectSensorDisAppMenuItem = mDevice.findObjects(By.text(sensorName))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 599)                 for (obj in UIObjectSensorDisAppMenuItem) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 600)                     if (obj.isClickable) obj.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 601)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 602)                 UIObjectSensorDisablerOptions =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 603)                     mDevice.findObject(UiSelector().text(""Remove sensor""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 604)                 if (UIObjectSensorDisablerOptions.isChecked) res = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 605)             } catch (e: UiObjectNotFoundException) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 606)                 e.printStackTrace()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 607)             }
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 608)             println(""$sensorName sensor enabled: $res"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 609)             return res
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 610)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 611)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 612)         private fun verifyCamera(mDevice: UiDevice): Boolean {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 613)             val UIObjectLensCapApp = mDevice.findObject(UiSelector().text(""Lens Cap""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 614)             val UIObjectLensCapOptions: UiObject
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 615)             var res = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 616)             try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 617)                 UIObjectLensCapApp.click()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 618)                 UIObjectLensCapOptions =
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 619)                     mDevice.findObject(UiSelector().textContains(""Camera Enabled""))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 620)                 if (UIObjectLensCapOptions.exists()) res = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 621)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 622)                 //UIObjectLensCapOptions = mDevice.findObject(new UiSelector().text(""PUT CAP ON""));"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 623)                 //UIObjectLensCapOptions.click();
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 624)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 625)                 //UIObjectLensCapOptions = mDevice.findObject(new UiSelector().text(""TAKE CAP OFF""));"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 626)                 //UIObjectLensCapOptions.click();
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 627)             } catch (e: UiObjectNotFoundException) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 628)                 e.printStackTrace()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 629)             }
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 630)             println(""Camera enabled: $res"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 631)             return res
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 632)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 633)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 634)         private fun verifyLocation(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 635)             val service = InstrumentationRegistry.getInstrumentation().context
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 636)                 .getSystemService(Context.LOCATION_SERVICE) as LocationManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 637)             return service.isProviderEnabled(LocationManager.GPS_PROVIDER)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 638)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 639)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 640)         private fun verifyWifi(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 641)             val service = InstrumentationRegistry.getInstrumentation().context
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 642)                 .getSystemService(Context.WIFI_SERVICE) as WifiManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 643)             return service.isWifiEnabled
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 644)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 645)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 646)         /*
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 647)     private static boolean verifyMobileData() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 648)         boolean res = false;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 649)         ConnectivityManager connectivityMgr = (ConnectivityManager) InstrumentationRegistry.getInstrumentation().getContext()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 650)                 .getSystemService(Context.CONNECTIVITY_SERVICE);
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 651)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 652)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 653)         if (connectivityMgr != null) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 654)             NetworkCapabilities nc = connectivityMgr.getNetworkCapabilities(connectivityMgr.getActiveNetwork());
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 655)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 656)             if (nc != null) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 657)                 if (nc.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 658)                     // connected to mobile data
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 659)                     res = true;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 660)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 661)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 662)             else
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 663)                 res = false;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 664)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 665)         else
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 666)             res = false;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 667)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 668)         return res;
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 669)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 670)     */
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 671)         private fun verifyMobileData(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 672)             var mobileYN = false
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 673)             val context = InstrumentationRegistry.getInstrumentation().context
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 674)             val tm = context.getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 675)             if (tm.simState == TelephonyManager.SIM_STATE_READY) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 676)                 val tel = context.getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 677)                 if (tel.isDataEnabled) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 678)                     mobileYN = true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 679)                 }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 680)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 681)             return mobileYN
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 682)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 683)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 684)         private fun verifyBluetooth(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 685)             val btMgr = InstrumentationRegistry.getInstrumentation().targetContext.getSystemService(
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 686)                 Context.BLUETOOTH_SERVICE
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 687)             ) as BluetoothManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 688)             return btMgr.adapter.isEnabled
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 689)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 690)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 691)         private fun verifyBatterySaver(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 692)             val pwMgr = InstrumentationRegistry.getInstrumentation().context
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 693)                 .getSystemService(Context.POWER_SERVICE) as PowerManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 694)             return pwMgr.isPowerSaveMode
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 695)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 696)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 697)         private fun verifyAutoRotate(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 698)             return Settings.System.getInt(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 699)                 InstrumentationRegistry.getInstrumentation().context.contentResolver,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 700)                 Settings.System.ACCELEROMETER_ROTATION,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 701)                 0
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 702)             ) == 1
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 703)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 704)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 705)         private fun verifyDoNotDisturb(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 706)             val notifManager =
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 707)                 InstrumentationRegistry.getInstrumentation().context.getSystemService(
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 708)                     Context.NOTIFICATION_SERVICE
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 709)                 ) as NotificationManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 710)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 711)             //Sem bloqueio: INTERRUPTION_FILTER_ALL
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 712)             //Algum bloqueio: INTERRUPTION_FILTER_PRIORITY
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 713)             //Bloqueio total: INTERRUPTION_FILTER_NONE
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 714)             return notifManager.currentInterruptionFilter == NotificationManager.INTERRUPTION_FILTER_PRIORITY
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 715)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 716)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/SensorConditionsTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 717) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.e2e
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.view.View
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.view.animation.Animation
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import androidx.test.espresso.IdlingRegistry
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.test.espresso.IdlingResource
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.test.espresso.IdlingResource.ResourceCallback
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.test.ext.junit.runners.AndroidJUnit4
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.test.filters.LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import com.schibsted.spain.barista.assertion.BaristaRecyclerViewAssertions.assertRecyclerViewItemCount
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertContains
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertDisplayed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import com.schibsted.spain.barista.interaction.BaristaClickInteractions.clickBack
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import com.schibsted.spain.barista.interaction.BaristaClickInteractions.clickOn
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import com.schibsted.spain.barista.interaction.BaristaDialogInteractions.clickDialogPositiveButton
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import com.schibsted.spain.barista.interaction.BaristaDrawerInteractions.openDrawer
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import com.schibsted.spain.barista.interaction.BaristaEditTextInteractions.writeTo
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import com.schibsted.spain.barista.rule.BaristaRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import com.schibsted.spain.barista.rule.flaky.AllowFlaky
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import okhttp3.mockwebserver.Dispatcher
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import okhttp3.mockwebserver.MockResponse
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import okhttp3.mockwebserver.MockWebServer
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import okhttp3.mockwebserver.RecordedRequest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.junit.After
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.junit.Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.junit.Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.junit.Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.junit.rules.RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.junit.runner.RunWith
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import org.owntracks.android.R
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import org.owntracks.android.ScreenshotTakingOnTestEndRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import org.owntracks.android.SensorConditionsTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import org.owntracks.android.ui.map.MapActivity
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import org.owntracks.android.ui.preferences.clickOnAndWait
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37) @LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38) @RunWith(AndroidJUnit4::class)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39) class ContactActivityTests:SensorConditionsTest() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     var baristaRule = BaristaRule.create(MapActivity::class.java) // We always start e2e at the main entrypoint
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     private val screenshotRule = ScreenshotTakingOnTestEndRule()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     val ruleChain: RuleChain = RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)             .outerRule(baristaRule.activityTestRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)             .around(screenshotRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     private var mockWebServer = MockWebServer()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     @Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     fun startMockWebserver() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         mockWebServer.start()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         mockWebServer.dispatcher = MockWebserverLocationDispatcher(locationResponse)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     @After
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     fun stopMockWebserver() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         mockWebServer.shutdown()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     @After
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     fun unregisterIdlingResource() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         IdlingRegistry.getInstance().unregister(baristaRule.activityTestRule.activity.locationIdlingResource)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         IdlingRegistry.getInstance().unregister(baristaRule.activityTestRule.activity.outgoingQueueIdlingResource)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     private val locationResponse = 
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         {""_type"":""location"",""acc"":20,""al"":0,""batt"":100,""bs"":0,""conn"":""w"",""created_at"":1610748273,""lat"":51.2,""lon"":-4,""tid"":""aa"",""tst"":1610799026,""vac"":40,""vel"":7}"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     """""".trimIndent()"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     fun testClickingOnContactLoadsContactOnMap() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         val httpPort = mockWebServer.port
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         doWelcomeProcess()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         openDrawer()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         clickOnAndWait(R.string.title_activity_preferences)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         clickOnAndWait(R.string.preferencesServer)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         clickOnAndWait(R.string.mode_heading)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         clickOnAndWait(R.string.mode_http_private_label)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         clickOnAndWait(R.string.preferencesHost)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         writeTo(R.id.url, ""http://localhost:${httpPort}/"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         clickBack()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         openDrawer()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         clickOnAndWait(R.string.title_activity_map)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         val locationIdlingResource = baristaRule.activityTestRule.activity.locationIdlingResource
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         IdlingRegistry.getInstance().register(locationIdlingResource)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         clickOnAndWait(R.id.menu_report)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         val networkIdlingResource = baristaRule.activityTestRule.activity.outgoingQueueIdlingResource
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         IdlingRegistry.getInstance().register(networkIdlingResource)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         openDrawer()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         clickOnAndWait(R.string.title_activity_contacts)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         assertRecyclerViewItemCount(R.id.recycler_view, 1)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         clickOnAndWait(""aa"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         assertDisplayed(R.id.bottomSheetLayout)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         assertDisplayed(R.id.contactPeek)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         assertContains(R.id.name, ""aa"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     private fun doWelcomeProcess() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115) /* TODO Once test isolation is possible we'll have to grant the priv each test */
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116) //        clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117) //        clickOn(R.id.fix_permissions_button)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118) //        LocationPermissionGranter.allowPermissionsIfNeeded(Manifest.permission.ACCESS_FINE_LOCATION)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         clickOn(R.id.done)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     class MockWebserverLocationDispatcher(private val config: String) : Dispatcher() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         override fun dispatch(request: RecordedRequest): MockResponse {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)             val errorResponse = MockResponse().setResponseCode(404)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)             return if (request.path == ""/"") {"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)                 MockResponse().setResponseCode(200).setHeader(""Content-type"", ""application/json"").setBody(config)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                 errorResponse
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     class AnimationIdlingResource(view: View) : IdlingResource {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         private var callback: ResourceCallback? = null
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         override fun getName(): String {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)             return AnimationIdlingResource::class.java.name
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         override fun isIdleNow(): Boolean {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)             return true
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         override fun registerIdleTransitionCallback(callback: ResourceCallback) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)             this.callback = callback
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         init {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             if (view.animation == null) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)                 callback!!.onTransitionToIdle()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)                 view.animation.setAnimationListener(object : Animation.AnimationListener {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)                     override fun onAnimationStart(animation: Animation) {}
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)                     override fun onAnimationEnd(animation: Animation) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)                         callback!!.onTransitionToIdle()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)                     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)                     override fun onAnimationRepeat(animation: Animation) {}
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)                 })
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/e2e/ContactActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.ContentValues
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.Intent
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.net.Uri
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.os.ParcelFileDescriptor
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.provider.MediaStore
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.test.ext.junit.runners.AndroidJUnit4
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.test.filters.LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.test.platform.app.InstrumentationRegistry
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertContains
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertDisplayed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertNotExist
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import com.schibsted.spain.barista.interaction.BaristaSleepInteractions.sleep
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import com.schibsted.spain.barista.rule.BaristaRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import com.schibsted.spain.barista.rule.flaky.AllowFlaky
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import okhttp3.mockwebserver.Dispatcher
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import okhttp3.mockwebserver.MockResponse
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import okhttp3.mockwebserver.MockWebServer
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import okhttp3.mockwebserver.RecordedRequest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.junit.After
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.junit.Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.junit.Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.junit.rules.RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.junit.runner.RunWith
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.R
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.owntracks.android.ScreenshotTakingOnTestEndRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.SensorConditionsTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.owntracks.android.ui.preferences.load.LoadActivity
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import java.io.File
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32) @LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33) @RunWith(AndroidJUnit4::class)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34) class LoadActivityTests:SensorConditionsTest() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     var baristaRule = BaristaRule.create(LoadActivity::class.java)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     private val screenshotRule = ScreenshotTakingOnTestEndRule()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     val ruleChain: RuleChain = RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)             .outerRule(baristaRule.activityTestRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)             .around(screenshotRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     private var mockWebServer = MockWebServer()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     @After
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     fun teardown() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         mockWebServer.shutdown()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     private val expectedConfig = 
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54) {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)   ""_type"" : ""configuration"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)   ""waypoints"" : [ {"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     ""_type"" : ""waypoint"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     ""desc"" : ""work"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     ""lat"" : 51.5,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     ""lon"" : -0.02,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     ""rad"" : 150,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     ""tst"" : 1505910709000"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)   }, {"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     ""_type"" : ""waypoint"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     ""desc"" : ""home"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     ""lat"" : 53.6,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     ""lon"" : -1.5,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     ""rad"" : 100,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     ""tst"" : 1558351273"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)   } ],"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)   ""auth"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)   ""autostartOnBoot"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)   ""cleanSession"" : false,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)   ""clientId"" : ""emulator"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)   ""cmd"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)   ""debugLog"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)   ""deviceId"" : ""testdevice"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)   ""fusedRegionDetection"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)   ""geocodeEnabled"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)   ""host"" : ""testhost.example.com"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)   ""ignoreInaccurateLocations"" : 150,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)   ""ignoreStaleLocations"" : 0,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)   ""keepalive"" : 900,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)   ""locatorDisplacement"" : 5,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)   ""locatorInterval"" : 60,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)   ""locatorPriority"" : 2,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)   ""mode"" : 0,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)   ""monitoring"" : 1,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)   ""moveModeLocatorInterval"" : 10,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)   ""mqttProtocolLevel"" : 3,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)   ""notificationHigherPriority"" : false,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)   ""notificationLocation"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)   ""opencageApiKey"" : """","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)   ""password"" : ""password"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)   ""ping"" : 30,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)   ""port"" : 1883,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)   ""pubExtendedData"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)   ""pubQos"" : 1,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)   ""pubRetain"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)   ""pubTopicBase"" : ""owntracks/%u/%d"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)   ""remoteConfiguration"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)   ""sub"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)   ""subQos"" : 2,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)   ""subTopic"" : ""owntracks/+/+"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)   ""tls"" : false,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)   ""usePassword"" : true,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)   ""username"" : ""username"","
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)   ""ws"" : false"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109) }"""""".trimIndent()"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     private val servedConfig = ""{\""_type\"":\""configuration\"",\""waypoints\"":[{\""_type\"":\""waypoint\"",\""desc\"":\""work\"",\""lat\"":51.5,\""lon\"":-0.02,\""rad\"":150,\""tst\"":1505910709000},{\""_type\"":\""waypoint\"",\""desc\"":\""home\"",\""lat\"":53.6,\""lon\"":-1.5,\""rad\"":100,\""tst\"":1558351273}],\""auth\"":true,\""autostartOnBoot\"":true,\""cleanSession\"":false,\""clientId\"":\""emulator\"",\""cmd\"":true,\""debugLog\"":true,\""deviceId\"":\""testdevice\"",\""fusedRegionDetection\"":true,\""geocodeEnabled\"":true,\""host\"":\""testhost.example.com\"",\""ignoreInaccurateLocations\"":150,\""ignoreStaleLocations\"":0,\""keepalive\"":900,\""locatorDisplacement\"":5,\""locatorInterval\"":60,\""locatorPriority\"":2,\""mode\"":0,\""monitoring\"":1,\""moveModeLocatorInterval\"":10,\""mqttProtocolLevel\"":3,\""notificationHigherPriority\"":false,\""notificationLocation\"":true,\""opencageApiKey\"":\""\"",\""password\"":\""password\"",\""ping\"":30,\""port\"":1883,\""pubExtendedData\"":true,\""pubQos\"":1,\""pubRetain\"":true,\""pubTopicBase\"":\""owntracks/%u/%d\"",\""remoteConfiguration\"":true,\""sub\"":true,\""subQos\"":2,\""subTopic\"":\""owntracks/+/+\"",\""tls\"":false,\""usePassword\"":true,\""username\"":\""username\"",\""ws\"":false}"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     fun loadActivityCanLoadConfigFromOwntracksInlineConfigURL() {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, Uri.parse(""owntracks:///config?inline=eyJfdHlwZSI6ImNvbmZpZ3VyYXRpb24iLCJ3YXlwb2ludHMiOlt7Il90eXBlIjoid2F5cG9pbnQiLCJkZXNjIjoid29yayIsImxhdCI6NTEuNSwibG9uIjotMC4wMiwicmFkIjoxNTAsInRzdCI6MTUwNTkxMDcwOTAwMH0seyJfdHlwZSI6IndheXBvaW50IiwiZGVzYyI6ImhvbWUiLCJsYXQiOjUzLjYsImxvbiI6LTEuNSwicmFkIjoxMDAsInRzdCI6MTU1ODM1MTI3M31dLCJhdXRoIjp0cnVlLCJhdXRvc3RhcnRPbkJvb3QiOnRydWUsImNsZWFuU2Vzc2lvbiI6ZmFsc2UsImNsaWVudElkIjoiZW11bGF0b3IiLCJjbWQiOnRydWUsImRlYnVnTG9nIjp0cnVlLCJkZXZpY2VJZCI6InRlc3RkZXZpY2UiLCJmdXNlZFJlZ2lvbkRldGVjdGlvbiI6dHJ1ZSwiZ2VvY29kZUVuYWJsZWQiOnRydWUsImhvc3QiOiJ0ZXN0aG9zdC5leGFtcGxlLmNvbSIsImlnbm9yZUluYWNjdXJhdGVMb2NhdGlvbnMiOjE1MCwiaWdub3JlU3RhbGVMb2NhdGlvbnMiOjAsImtlZXBhbGl2ZSI6OTAwLCJsb2NhdG9yRGlzcGxhY2VtZW50Ijo1LCJsb2NhdG9ySW50ZXJ2YWwiOjYwLCJsb2NhdG9yUHJpb3JpdHkiOjIsIm1vZGUiOjAsIm1vbml0b3JpbmciOjEsIm1vdmVNb2RlTG9jYXRvckludGVydmFsIjoxMCwibXF0dFByb3RvY29sTGV2ZWwiOjMsIm5vdGlmaWNhdGlvbkhpZ2hlclByaW9yaXR5IjpmYWxzZSwibm90aWZpY2F0aW9uTG9jYXRpb24iOnRydWUsIm9wZW5jYWdlQXBpS2V5IjoiIiwicGFzc3dvcmQiOiJwYXNzd29yZCIsInBpbmciOjMwLCJwb3J0IjoxODgzLCJwdWJFeHRlbmRlZERhdGEiOnRydWUsInB1YlFvcyI6MSwicHViUmV0YWluIjp0cnVlLCJwdWJUb3BpY0Jhc2UiOiJvd250cmFja3MvJXUvJWQiLCJyZW1vdGVDb25maWd1cmF0aW9uIjp0cnVlLCJzdWIiOnRydWUsInN1YlFvcyI6Miwic3ViVG9waWMiOiJvd250cmFja3MvKy8rIiwidGxzIjpmYWxzZSwidXNlUGFzc3dvcmQiOnRydWUsInVzZXJuYW1lIjoidXNlcm5hbWUiLCJ3cyI6ZmFsc2V9Cg=="")))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         assertContains(R.id.effectiveConfiguration, expectedConfig)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         assertDisplayed(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     fun loadActivityShowsErrorWhenLoadingFromInlineConfigURLContaninigInvalidJSON() {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, Uri.parse(""owntracks:///config?inline=e30k"")))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         assertContains(R.id.effectiveConfiguration, R.string.errorPreferencesImportFailed)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         assertNotExist(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     fun loadActivityShowsErrorWhenLoadingFromInlineConfigURLContaninigInvalidBase64() {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, Uri.parse(""owntracks:///config?inline=aaaaaaaaaaaaaaaaaaaaaaaaa"")))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         assertContains(R.id.effectiveConfiguration, R.string.errorPreferencesImportFailed)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         assertNotExist(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)     fun loadActivityCanLoadConfigFromOwntracksRemoteURL() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         mockWebServer.start(8080)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         mockWebServer.dispatcher = MockWebserverConfigDispatcher(servedConfig)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, Uri.parse(""owntracks:///config?url=http%3A%2F%2Flocalhost%3A8080%2Fmyconfig.otrc"")))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         sleep(1000)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         assertContains(R.id.effectiveConfiguration, expectedConfig)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         assertDisplayed(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     fun loadActivityShowsErrorTryingToLoadNotFoundRemoteUrl() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)         mockWebServer.start(8080)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)         mockWebServer.dispatcher = MockWebserverConfigDispatcher(servedConfig)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, Uri.parse(""owntracks:///config?url=http%3A%2F%2Flocalhost%3A8080%2Fnotfound"")))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         sleep(1000)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         assertContains(R.id.effectiveConfiguration, ""Unexpected status code"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         assertNotExist(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 164)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 165)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 166)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 167)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 168)     fun loadActivityCanLoadConfigFromFileURL() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         val dir = InstrumentationRegistry.getInstrumentation().targetContext.getExternalFilesDir(null)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         val localConfig = File(dir, ""espresso-testconfig.otrc"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         localConfig.writeText(servedConfig)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 172)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, Uri.parse(""file://${localConfig.absoluteFile}"")))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 173)         assertContains(R.id.effectiveConfiguration, expectedConfig)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         assertDisplayed(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 176)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 177)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 178)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 180)     fun loadActivityCanLoadConfigFromContentURL() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         val context = InstrumentationRegistry.getInstrumentation().targetContext
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 182)         val configFilename = ""espresso-testconfig.otrc"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         context.contentResolver.delete(MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY), ""${MediaStore.Downloads.DISPLAY_NAME}=?"", arrayOf(configFilename))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         val contentValues = ContentValues().apply {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 185)             put(MediaStore.Downloads.DISPLAY_NAME, configFilename)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 186)             put(MediaStore.Downloads.IS_PENDING, 1)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 187)         }
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         val contentUri = context.contentResolver.insert(MediaStore.Downloads.getContentUri(MediaStore.VOLUME_EXTERNAL_PRIMARY), contentValues)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 189)         contentUri?.let {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 190)             context.contentResolver.openFileDescriptor(it, ""w"").use { parcelFileDescriptor ->"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 191)                 ParcelFileDescriptor.AutoCloseOutputStream(parcelFileDescriptor).write(servedConfig.toByteArray())
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 192)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 193)             contentValues.clear()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 194)             contentValues.put(MediaStore.Downloads.IS_PENDING, 0)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 195)             context.contentResolver.update(it, contentValues, null, null)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 197)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, contentUri))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 199)         assertContains(R.id.effectiveConfiguration, expectedConfig)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 200)         assertDisplayed(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 202)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 203)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 204)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 205)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 206)     fun loadActivityErrorsCorrectlyFromInvalidContentURL() {
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         baristaRule.launchActivity(Intent(Intent.ACTION_VIEW, null))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         assertContains(R.id.effectiveConfiguration, ""Import failed: No URI given for importing configuration"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 209)         assertNotExist(R.id.save)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 210)         assertDisplayed(R.id.close)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 211)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 212)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 213)     class MockWebserverConfigDispatcher(private val config: String) : Dispatcher() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 214)         override fun dispatch(request: RecordedRequest): MockResponse {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 215)             val errorResponse = MockResponse().setResponseCode(404)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 216)             return if (request.path == ""/myconfig.otrc"") {"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 217)                 MockResponse().setResponseCode(200).setHeader(""Content-type"", ""application/json"").setBody(config)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 218)             } else {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 219)                 errorResponse
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 220)             }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 221)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 222)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 223)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LoadActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 224) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Intent.*
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.test.espresso.intent.Intents
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.test.espresso.intent.Intents.intended
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.test.espresso.intent.matcher.BundleMatchers.hasEntry
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import androidx.test.espresso.intent.matcher.IntentMatchers.*
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import androidx.test.ext.junit.runners.AndroidJUnit4
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import androidx.test.filters.LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertDisplayed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import com.schibsted.spain.barista.interaction.BaristaClickInteractions.clickOn
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import com.schibsted.spain.barista.interaction.BaristaSleepInteractions.sleep
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import com.schibsted.spain.barista.rule.BaristaRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import com.schibsted.spain.barista.rule.flaky.AllowFlaky
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.hamcrest.Matchers.`is`
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) import org.hamcrest.Matchers.allOf
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import org.junit.Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19) import org.junit.Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20) import org.junit.Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) import org.junit.rules.RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22) import org.junit.runner.RunWith
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23) import org.owntracks.android.R
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24) import org.owntracks.android.ScreenshotTakingOnTestEndRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25) import org.owntracks.android.SensorConditionsTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26) import org.owntracks.android.ui.status.LogViewerActivity
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27) import java.util.concurrent.TimeUnit
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29) @LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30) @RunWith(AndroidJUnit4::class)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31) class LogViewerActivityTests:SensorConditionsTest() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     var baristaRule = BaristaRule.create(LogViewerActivity::class.java)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     private val screenshotRule = ScreenshotTakingOnTestEndRule()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     val ruleChain: RuleChain = RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)             .outerRule(baristaRule.activityTestRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)             .around(screenshotRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     @Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     fun setUp() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)     fun logViewerActivityShowsTitle() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         // Wait for the logviewer coroutine to start
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         sleep(5, TimeUnit.SECONDS)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         assertDisplayed(R.string.logViewerActivityTitle)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)     fun logViewerActivityExportFiresIntent() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         try {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)             Intents.init()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)             sleep(1, TimeUnit.SECONDS)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)             clickOn(R.id.share_fab)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)             intended(
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)                     allOf(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)                             hasAction(ACTION_CHOOSER),"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)                             hasExtras(
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)                                     allOf(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)                                             hasEntry(EXTRA_TITLE, baristaRule.activityTestRule.activity.getString(R.string.exportLogFilePrompt)),"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)                                             hasEntry(`is`(EXTRA_INTENT),"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69)                                                     allOf(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 70)                                                             hasAction(ACTION_SEND),"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 71)                                                             hasFlag(FLAG_GRANT_READ_URI_PERMISSION),"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 72)                                                             hasType(""text/plain"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 73)                                                     )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 74)                                             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 75)                                     )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 76)                             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 77)                     )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 78)             )
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 79)         } finally {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 80)             Intents.release()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 81)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 82)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/LogViewerActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 83) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Intent
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import androidx.recyclerview.widget.RecyclerView
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import androidx.test.espresso.Espresso.onView
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.test.espresso.Espresso.openActionBarOverflowOrOptionsMenu
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.test.espresso.action.ViewActions.scrollTo
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.test.espresso.contrib.RecyclerViewActions.actionOnItem
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.test.espresso.intent.Intents
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.test.espresso.intent.Intents.intended
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import androidx.test.espresso.intent.matcher.IntentMatchers.hasAction
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import androidx.test.espresso.intent.matcher.IntentMatchers.hasData
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import androidx.test.espresso.matcher.ViewMatchers.*
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import androidx.test.ext.junit.runners.AndroidJUnit4
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import androidx.test.filters.LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertContains
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertDisplayed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertNotContains
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import com.schibsted.spain.barista.interaction.BaristaClickInteractions.clickBack
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import com.schibsted.spain.barista.interaction.BaristaClickInteractions.clickOn
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import com.schibsted.spain.barista.interaction.BaristaDialogInteractions.clickDialogPositiveButton
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import com.schibsted.spain.barista.interaction.BaristaEditTextInteractions.writeTo
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import com.schibsted.spain.barista.rule.BaristaRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import com.schibsted.spain.barista.rule.flaky.AllowFlaky
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.hamcrest.CoreMatchers.allOf
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.junit.After
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.junit.Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.junit.Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.junit.Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import org.junit.rules.RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import org.junit.runner.RunWith
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import org.owntracks.android.R
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import org.owntracks.android.ScreenshotTakingOnTestEndRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import org.owntracks.android.SensorConditionsTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import org.owntracks.android.ui.preferences.PreferencesActivity
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import org.owntracks.android.ui.preferences.clickOnAndWait
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39) @LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40) @RunWith(AndroidJUnit4::class)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41) class PreferencesActivityTests:SensorConditionsTest() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     var baristaRule = BaristaRule.create(PreferencesActivity::class.java)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     private val screenshotRule = ScreenshotTakingOnTestEndRule()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     val ruleChain: RuleChain = RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)             .outerRule(baristaRule.activityTestRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)             .around(screenshotRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     @Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     fun setUp() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     @Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     fun initIntents() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         Intents.init()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     @After
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     fun releaseIntents() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         Intents.release()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     fun initialViewShowsTopLevelMenu() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         assertDisplayed(R.string.preferencesServer)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         assertDisplayed(R.string.preferencesReporting)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         assertDisplayed(R.string.preferencesNotification)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         assertDisplayed(R.string.preferencesAdvanced)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         assertDisplayed(R.string.configurationManagement)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         assertDisplayed(R.string.preferencesInfo)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     fun documentationLinkOpensSite() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         clickOn(R.string.preferencesInfo)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         clickOn(R.string.preferencesDocumentation)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         intended(allOf(hasAction(Intent.ACTION_VIEW), hasData(baristaRule.activityTestRule.activity.getString(R.string.documentationUrl))))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     fun twitterLinkOpensSite() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         clickOn(R.string.preferencesInfo)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         clickOn(R.string.preferencesTwitter)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         intended(allOf(hasAction(Intent.ACTION_VIEW), hasData(baristaRule.activityTestRule.activity.getString(R.string.twitterUrl))))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     fun sourceLinkOpensSite() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         clickOn(R.string.preferencesInfo)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         clickOn(R.string.preferencesRepository)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         intended(allOf(hasAction(Intent.ACTION_VIEW), hasData(baristaRule.activityTestRule.activity.getString(R.string.repoUrl))))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     fun librariesLinkListsLibraries() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         clickOn(R.string.preferencesInfo)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         clickOn(R.string.preferencesLicenses)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         assertDisplayed(R.string.preferencesLicenses)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     @AllowFlaky(attempts = 3)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     fun configurationManagementCanEditASetType() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         clickOn(R.string.configurationManagement)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         openActionBarOverflowOrOptionsMenu(baristaRule.activityTestRule.activity)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         clickOn(R.string.preferencesEditor)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         writeTo(R.id.inputKey, baristaRule.activityTestRule.activity.getString(R.string.preferenceKeyExperimentalFeatures))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         writeTo(R.id.inputValue, ""this, that,    other"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         clickDialogPositiveButton()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         assertContains(R.id.effectiveConfiguration, ""\""experimentalFeatures\"" : [ \""other\"", \""that\"", \""this\"" ]"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     @AllowFlaky(attempts = 3)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     fun configurationManagementCanEditAStringType() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         clickOn(R.string.configurationManagement)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         openActionBarOverflowOrOptionsMenu(baristaRule.activityTestRule.activity)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         clickOn(R.string.preferencesEditor)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         writeTo(R.id.inputKey, baristaRule.activityTestRule.activity.getString(R.string.preferenceKeyModeId))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         writeTo(R.id.inputValue, ""0"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         openActionBarOverflowOrOptionsMenu(baristaRule.activityTestRule.activity)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         clickOn(R.string.preferencesEditor)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         writeTo(R.id.inputKey, baristaRule.activityTestRule.activity.getString(R.string.preferenceKeyHost))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         writeTo(R.id.inputValue, ""example.com"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         assertContains(R.id.effectiveConfiguration, ""\""host\"" : \""example.com\"""")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)     @AllowFlaky(attempts = 3)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)     fun configurationManagementCanEditABooleanType() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         clickOn(R.string.configurationManagement)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         openActionBarOverflowOrOptionsMenu(baristaRule.activityTestRule.activity)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         clickOn(R.string.preferencesEditor)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         writeTo(R.id.inputKey, baristaRule.activityTestRule.activity.getString(R.string.preferenceKeyRemoteCommand))"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         writeTo(R.id.inputValue, ""false"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         assertContains(R.id.effectiveConfiguration, ""\""cmd\"" : false"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     @AllowFlaky(attempts = 3)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)     fun settingSimpleHTTPConfigSettingsCanBeExported() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         clickOnAndWait(R.string.preferencesServer)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         clickOnAndWait(R.string.mode_heading)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         clickOnAndWait(R.string.mode_http_private_label)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         clickOnAndWait(R.string.preferencesHost)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 164)         writeTo(R.id.url, ""https://www.example.com:8080/"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 166)         clickOnAndWait(R.string.preferencesIdentification)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 167)         writeTo(R.id.username, ""testUsername"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         writeTo(R.id.password, ""testPassword"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         writeTo(R.id.deviceId, ""testDeviceId"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         writeTo(R.id.trackerId, ""t1"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 172)         clickBack()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 173)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 174)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         clickOnAndWait(R.string.preferencesReporting)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         clickOnAndWait(R.string.preferencesPubExtendedData)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 177)         clickBack()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 178)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         clickOnAndWait(R.string.preferencesNotification)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         clickOnAndWait(R.string.preferencesNotificationEvents)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         clickBack()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 182)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         // This is an ugly hack, but there's some race conditions on underpowered hardware"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         // causing the test to move on before the view has been fully built/rendered.
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 185)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         clickOnAndWait(R.string.preferencesAdvanced)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 187)         clickOnAndWait(R.string.preferencesRemoteCommand)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         clickOnAndWait(R.string.preferencesIgnoreInaccurateLocations)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 189)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 190)         writeTo(android.R.id.edit, ""950"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 191)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 193)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 194)         clickOnAndWait(R.string.preferencesLocatorInterval)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 195)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         writeTo(android.R.id.edit, ""123"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 197)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 199)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 200)         scrollToText(R.string.preferencesMoveModeLocatorInterval)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         clickOnAndWait(R.string.preferencesMoveModeLocatorInterval)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 202)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 203)         writeTo(android.R.id.edit, ""5"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 204)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 205)         clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 206)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         scrollToText(R.string.preferencesAutostart)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         clickOnAndWait(R.string.preferencesAutostart)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 209)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 210)         /* TODO: Espresso doesn't work with dropdowns. Which is a bit silly. Restore this section once fixed */
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 211) //        scrollToText(R.string.preferencesReverseGeocodeProvider)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 212) //        clickOnAndWait(R.string.preferencesReverseGeocodeProvider)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 213) //        val something = onView(allOf(withId(android.R.id.text1), withText(""OpenCage"")))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 214) //
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 215) //        something.perform(longClick())
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 216) //
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 217) //        scrollToText(R.string.preferencesOpencageGeocoderApiKey)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 218) //        clickOnAndWait(R.string.preferencesOpencageGeocoderApiKey)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 219) //        writeTo(android.R.id.edit, ""geocodeAPIKey"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 220) //        clickDialogPositiveButton()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 221)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 222)         clickBack()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 223)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 224)         clickOnAndWait(R.string.configurationManagement)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 225)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 226)         assertContains(R.id.effectiveConfiguration, ""\""_type\"" : \""configuration\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 227)         assertContains(R.id.effectiveConfiguration, "" \""waypoints\"" : [ ]"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 228)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 229)         assertContains(R.id.effectiveConfiguration, ""\""url\"" : \""https://www.example.com:8080/\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 230)         assertContains(R.id.effectiveConfiguration, ""\""username\"" : \""testUsername\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         assertContains(R.id.effectiveConfiguration, ""\""password\"" : \""********\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 232)         assertContains(R.id.effectiveConfiguration, ""\""deviceId\"" : \""testDeviceId\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 233)         assertContains(R.id.effectiveConfiguration, ""\""tid\"" : \""t1\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 234)         assertContains(R.id.effectiveConfiguration, ""\""notificationEvents\"" : false"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 235)         assertContains(R.id.effectiveConfiguration, ""\""pubExtendedData\"" : false"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 236)         assertContains(R.id.effectiveConfiguration, ""\""ignoreInaccurateLocations\"" : 950"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 237)         assertContains(R.id.effectiveConfiguration, ""\""locatorInterval\"" : 123"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 238)         assertContains(R.id.effectiveConfiguration, ""\""moveModeLocatorInterval\"" : 5"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 239)         assertContains(R.id.effectiveConfiguration, ""\""autostartOnBoot\"" : false"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 240) //        assertContains(R.id.effectiveConfiguration, ""\""reverseGeocodeProvider\"" : \""OpenCage\""`"")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 241) //        assertContains(R.id.effectiveConfiguration, ""\""opencageApiKey\"" : \""geocodeAPIKey\"""")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 242)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 243)         // Make sure that the MQTT-specific settings aren't present
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 244)         assertNotContains(R.id.effectiveConfiguration, ""\""host\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 245)         assertNotContains(R.id.effectiveConfiguration, ""\""port\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 246)         assertNotContains(R.id.effectiveConfiguration, ""\""pubQos\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 247)         assertNotContains(R.id.effectiveConfiguration, ""\""subQos\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 248)         assertNotContains(R.id.effectiveConfiguration, ""\""info\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         assertNotContains(R.id.effectiveConfiguration, ""\""tlsCaCrt\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 250)         assertNotContains(R.id.effectiveConfiguration, ""\""tls\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         assertNotContains(R.id.effectiveConfiguration, ""\""mqttProtocolLevel\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 252)         assertNotContains(R.id.effectiveConfiguration, ""\""subTopic\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 253)         assertNotContains(R.id.effectiveConfiguration, ""\""pubTopicBase\"""")"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 254)         assertNotContains(R.id.effectiveConfiguration, ""\""clientId\"""")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 255)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 256)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 257)     private fun scrollToText(textResource: Int) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 258)         onView(withId(androidx.preference.R.id.recycler_view))
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 259)                 .perform(actionOnItem<RecyclerView.ViewHolder>(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 260)                         hasDescendant(withText(textResource)), scrollTo()))"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 261)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/PreferencesActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 262) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.test.ext.junit.runners.AndroidJUnit4
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.test.filters.LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertDisplayed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import com.schibsted.spain.barista.rule.BaristaRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import com.schibsted.spain.barista.rule.flaky.AllowFlaky
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.junit.Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.junit.Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.junit.Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.junit.rules.RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.junit.runner.RunWith
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.R
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.ScreenshotTakingOnTestEndRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.SensorConditionsTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.ui.status.StatusActivity
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) @LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19) @RunWith(AndroidJUnit4::class)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20) class StatusActivityTests:SensorConditionsTest() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     var baristaRule = BaristaRule.create(StatusActivity::class.java)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     private val screenshotRule = ScreenshotTakingOnTestEndRule()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     val ruleChain: RuleChain = RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             .outerRule(baristaRule.activityTestRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)             .around(screenshotRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     @Before
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     fun setUp() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     fun statusActivityShowsEndpointState() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         assertDisplayed(R.string.status_endpoint_state_hint)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     fun statusActivityShowsLogsLauncher() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         assertDisplayed(R.string.viewLogs)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/StatusActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.map
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.Manifest.permission.ACCESS_FINE_LOCATION
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import androidx.preference.PreferenceManager
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import androidx.test.ext.junit.runners.AndroidJUnit4
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.test.filters.LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.test.platform.app.InstrumentationRegistry
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import com.schibsted.spain.barista.assertion.BaristaClickableAssertions.assertClickable
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import com.schibsted.spain.barista.assertion.BaristaDrawerAssertions.assertDrawerIsClosed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import com.schibsted.spain.barista.assertion.BaristaEnabledAssertions.assertEnabled
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertDisplayed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import com.schibsted.spain.barista.assertion.BaristaVisibilityAssertions.assertNotDisplayed
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import com.schibsted.spain.barista.interaction.BaristaClickInteractions.clickOn
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import com.schibsted.spain.barista.interaction.BaristaDrawerInteractions.openDrawer
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import com.schibsted.spain.barista.interaction.PermissionGranter
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import com.schibsted.spain.barista.rule.BaristaRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import com.schibsted.spain.barista.rule.flaky.AllowFlaky
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import junit.framework.Assert.fail
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.junit.FixMethodOrder
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.junit.Ignore
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.junit.Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.junit.Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.junit.rules.RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.junit.runner.RunWith
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.junit.runners.MethodSorters
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.R
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.owntracks.android.ScreenshotTakingOnTestEndRule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.SensorConditionsTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) @LargeTest
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31) @RunWith(AndroidJUnit4::class)
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32) /* TODO the android orchestrator doesn't work with coverage, so until it does we need to run tests in order */"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33) @FixMethodOrder(MethodSorters.NAME_ASCENDING)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34) class MapActivityTests:SensorConditionsTest() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     var baristaRule = BaristaRule.create(MapActivity::class.java)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     private val screenshotRule = ScreenshotTakingOnTestEndRule()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @get:Rule
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     val ruleChain: RuleChain = RuleChain
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)             .outerRule(baristaRule.activityTestRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)             .around(screenshotRule)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     @Test
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     @Ignore(""Waiting for AGP4.1.0 to fix issue in https://issuetracker.google.com/issues/168642903"")"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     fun aaa_onFirstStartTheWelcomeActivityIsLoadedAndCanBeClickedThroughToTheEnd() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         assertDisplayed(R.string.welcome_heading)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         assertDisplayed(R.string.welcome_description)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         assertDisplayed(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         assertClickable(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         assertNotDisplayed(R.id.done)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         assertNotDisplayed(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         assertDisplayed(R.id.fix_permissions_button)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         assertClickable(R.id.fix_permissions_button)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         clickOn(R.id.fix_permissions_button)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         PermissionGranter.allowPermissionsIfNeeded(ACCESS_FINE_LOCATION)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         assertDisplayed(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         assertDisplayed(R.string.done_heading)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         assertDisplayed(R.id.done)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         assertClickable(R.id.done)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         assertNotDisplayed(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     fun statusActivityCanBeLaunchedFromMapActivityDrawer() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         doWelcomeProcess()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         assertDrawerIsClosed()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         openDrawer()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         assertDisplayed(R.string.title_activity_status)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         assertEnabled(R.string.title_activity_status)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         clickOn(R.string.title_activity_status)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         arrayOf(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)                 R.string.status_battery_optimization_whitelisted_hint,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)                 R.string.status_endpoint_queue_hint,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)                 R.string.status_background_service_started_hint,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)                 R.string.status_endpoint_state_hint
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         ).forEach { assertDisplayed(it) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     fun preferencesActivityCanBeLaunchedFromMapActivityDrawer() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         doWelcomeProcess()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         assertDrawerIsClosed()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         openDrawer()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         assertDisplayed(R.string.title_activity_preferences)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         assertEnabled(R.string.title_activity_preferences)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         clickOn(R.string.title_activity_preferences)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         arrayOf(
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)                 R.string.preferencesServer,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)                 R.string.preferencesReporting,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)                 R.string.preferencesNotification,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                 R.string.preferencesAdvanced,"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)                 R.string.configurationManagement,"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                 R.string.preferencesInfo
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         ).forEach {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             assertDisplayed(it)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)     fun modeButtonOnMapActivityCyclesThroughModes() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         doWelcomeProcess()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         assertDisplayed(R.id.menu_monitoring)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)     @Test
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)     @AllowFlaky(attempts = 1)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     fun welcomeActivityShouldNotRunWhenFirstStartPreferencesSet() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         val context = InstrumentationRegistry.getInstrumentation().targetContext
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         PreferenceManager.getDefaultSharedPreferences(context)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)                 .edit()
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)                 .putBoolean(context.getString(R.string.preferenceKeyFirstStart), false)"
"5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                 .putBoolean(context.getString(R.string.preferenceKeySetupNotCompleted), false)"
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)                 .apply()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         baristaRule.launchActivity()
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         assertDisplayed(R.id.mapView)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)     private fun doWelcomeProcess() {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150) /* TODO Once test isolation is possible we'll have to grant the priv each test */
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151) //        clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152) //        clickOn(R.id.fix_permissions_button)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153) //        LocationPermissionGranter.allowPermissionsIfNeeded(Manifest.permission.ACCESS_FINE_LOCATION)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         clickOn(R.id.btn_next)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         clickOn(R.id.done)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/map/MapActivityTests.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.schibsted.spain.barista.interaction.BaristaClickInteractions.clickOn
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.schibsted.spain.barista.interaction.BaristaSleepInteractions.sleep
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) private const val sleepMillis = 1000L
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) fun clickOnAndWait(int: Int) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     clickOn(int)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     sleep(sleepMillis)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) }
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) fun clickOnAndWait(str: String) {
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     clickOn(str)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     sleep(sleepMillis)
5c49fd3 project/app/src/androidTest/java/org/owntracks/android/ui/preferences/clickOnPreference.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.os.Build
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.os.StrictMode
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.os.StrictMode.VmPolicy
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.work.Configuration
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.work.WorkManager
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.work.WorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import dagger.android.AndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import dagger.android.support.DaggerApplication
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.conscrypt.Conscrypt
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.greenrobot.eventbus.Subscribe
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.injection.components.DaggerAppComponent
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.injection.qualifier.AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.services.MessageProcessor
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.services.worker.Scheduler
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.owntracks.android.support.Events.RestartApp
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.owntracks.android.support.RunThingsOnOtherThreads
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.owntracks.android.support.TimberDebugLogTree
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.ui.map.MapActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import timber.log.Timber.DebugTree
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import java.security.Security
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33) class App : DaggerApplication() {
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     lateinit var preferences: Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     lateinit var runThingsOnOtherThreads: RunThingsOnOtherThreads
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     lateinit var messageProcessor: MessageProcessor
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     lateinit var eventBus: EventBus
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     lateinit var workerFactory: WorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     lateinit var scheduler: Scheduler
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     override fun onCreate() {
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         // Make sure we use Conscrypt for advanced TLS features on all devices.
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         // X509ExtendedTrustManager not available pre-24, fall back to device. https://github.com/google/conscrypt/issues/603"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)             Security.insertProviderAt(Conscrypt.newProviderBuilder().provideTrustManager(true).build(), 1)"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)             Security.insertProviderAt(Conscrypt.newProviderBuilder().provideTrustManager(false).build(), 1)"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         super.onCreate()
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         WorkManager.initialize(this, Configuration.Builder().setWorkerFactory(workerFactory).build())"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         scheduler.cancelAllTasks()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         if (BuildConfig.DEBUG) {
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             Timber.plant(TimberDebugLogTree())
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)             Timber.e(""StrictMode enabled in DEBUG build"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)             StrictMode.setThreadPolicy(StrictMode.ThreadPolicy.Builder()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)                     .detectDiskWrites()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)                     .detectNetwork()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)                     .penaltyFlashScreen()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)                     .penaltyDialog()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)                     .build())
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)             StrictMode.setVmPolicy(VmPolicy.Builder()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)                     .detectLeakedSqlLiteObjects()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)                     .detectLeakedClosableObjects()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)                     .detectFileUriExposure()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)                     .penaltyLog()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)                     .build())
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)             Timber.plant(DebugTree())
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         for (t in Timber.forest()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             Timber.v(""Planted trees :%s"", t)"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         preferences.checkFirstStart()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         // Running this on a background thread will deadlock FirebaseJobDispatcher.
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         // Initialize will call Scheduler to connect off the main thread anyway.
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         runThingsOnOtherThreads.postOnMainHandlerDelayed(Runnable { messageProcessor.initialize() }, 510)"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         eventBus.register(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     @Subscribe
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     fun onEvent(@Suppress(""UNUSED_PARAMETER"") e: RestartApp?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         val intent = Intent(this.applicationContext, MapActivity::class.java)"
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         this.applicationContext.startActivity(intent)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         Runtime.getRuntime().exit(0)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     override fun applicationInjector(): AndroidInjector<out DaggerApplication> {
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         val appComponent = DaggerAppComponent.builder().app(this).build()
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         appComponent.inject(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         return appComponent
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106) }
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109) abstract class AppContextModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     @AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     abstract fun provideContext(app: App): Context
5c49fd3 project/app/src/main/java/org/owntracks/android/App.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114) }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.data;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import androidx.databinding.BaseObservable;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.location.Location;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import io.objectbox.annotation.Entity;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import io.objectbox.annotation.Id;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import io.objectbox.annotation.Index;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import io.objectbox.annotation.Unique;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.BR;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) @Entity
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) public class WaypointModel extends BaseObservable {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     @Id
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     private long id;
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     private String description = """";"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)     private double geofenceLatitude = 0.0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23)     private double geofenceLongitude = 0.0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     private int geofenceRadius = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     private long lastTriggered = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     private int lastTransition = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     @Unique
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     @Index
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     private long tst = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     public WaypointModel() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         setTst(TimeUnit.MILLISECONDS.toSeconds(System.currentTimeMillis()));
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     public WaypointModel(long id, long tst, @NonNull String description, double geofenceLatitude, double geofenceLongitude, int geofenceRadius, int lastTransition, long lastTriggered) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         this.id = id;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         this.tst = tst;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         this.description = description;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         setGeofenceLongitude(geofenceLongitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         setGeofenceLatitude(geofenceLatitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         this.geofenceLongitude = geofenceLongitude;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         this.geofenceRadius = geofenceRadius;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         this.lastTransition = lastTransition;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         this.lastTriggered = lastTriggered;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     public long getId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         return id;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     public void setId(long id) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         this.id = id;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     public long getTst() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         return tst; // unit is seconds
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     private void setTst(long tst) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         this.tst = tst;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     public String getDescription() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         return description;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     public void setDescription(@NonNull String description) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         this.description = description;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     public String getGeofenceLatitudeAsStr() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         return String.valueOf(geofenceLatitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     public double getGeofenceLatitude() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         return geofenceLatitude;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)     public void setGeofenceLatitudeAsStr(String geofenceLatitudeAsStr) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             double geofenceLatitude = Double.parseDouble(geofenceLatitudeAsStr);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             setGeofenceLatitude(geofenceLatitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         } catch (NumberFormatException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             // User has entered something that can't be converted to a double
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             // TODO: figure out validation feeback
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     public void setGeofenceLatitude(double geofenceLatitude) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         if(geofenceLatitude > 90)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             this.geofenceLatitude = 90;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         else if(geofenceLatitude < -90)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)             this.geofenceLatitude = -90;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         else
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)             this.geofenceLatitude = geofenceLatitude;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         notifyPropertyChanged(BR.geofenceLatitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     public String getGeofenceLongitudeAsStr() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         return String.valueOf(geofenceLongitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     public void setGeofenceLongitudeAsStr(String geofenceLongitudeAsStr) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             double geofenceLatitude = Double.parseDouble(geofenceLongitudeAsStr);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             setGeofenceLongitude(geofenceLatitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         } catch (NumberFormatException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)             // User has entered something that can't be converted to a double
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)             // TODO: figure out validation feeback
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     public double getGeofenceLongitude() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         return geofenceLongitude;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     public void setGeofenceLongitude(double geofenceLongitude) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         if(geofenceLongitude > 180 )
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)             this.geofenceLongitude = 180 ;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         else if(geofenceLongitude < -180 )
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)             this.geofenceLongitude = -180 ;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         else
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             this.geofenceLongitude = geofenceLongitude;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         notifyPropertyChanged(BR.geofenceLongitude);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     public int getGeofenceRadius() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         return geofenceRadius;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)     public void setGeofenceRadius(int geofenceRadius) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         this.geofenceRadius = geofenceRadius;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)     public Location getLocation() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)         Location l= new Location(""waypoint"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)         l.setLatitude(getGeofenceLatitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         l.setLongitude(getGeofenceLongitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         l.setAccuracy(getGeofenceRadius());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         return l;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)     public long getLastTriggered() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         return lastTriggered; // unit is seconds
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     private void setLastTriggered(long lastTriggered) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         this.lastTriggered = lastTriggered;  // unit is seconds
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)     public void setLastTriggeredNow() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)         setLastTriggered(TimeUnit.MILLISECONDS.toSeconds(System.currentTimeMillis()));
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)     public int getLastTransition() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         return this.lastTransition;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)     public void setLastTransition(int status) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)         this.lastTransition = status;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)     public boolean isUnknown() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         return this.lastTransition == 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)     public boolean hasGeofence() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         return geofenceRadius > 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)     public String toString() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         return ""WaypointModel(""+getId()+"",""+getTst()+"",""+getDescription()+"")"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/WaypointModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181) }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.data.repos
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.lifecycle.MutableLiveData
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.model.messages.MessageCard
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) interface ContactsRepo {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     val all: MutableLiveData<MutableMap<String, FusedContact>>"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     fun getById(id: String): FusedContact?
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     fun clearAll()
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     fun remove(id: String)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     fun update(id: String, messageLocation: MessageLocation)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     fun update(id: String, messageCard: MessageCard)"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     val revision: Long
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.data.repos;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.location.Location;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) public class LocationRepo {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     private final EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private Location currentLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public LocationRepo(EventBus eventBus) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         this.eventBus = eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @Nullable
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     public Location getCurrentLocation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         return this.currentLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     public boolean hasLocation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         return this.currentLocation != null;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     public long getCurrentLocationTime() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         return hasLocation() ? this.currentLocation.getTime() : 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     public void setCurrentLocation(@NonNull Location l) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         this.currentLocation = l;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         eventBus.postSticky(l);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/LocationRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39) }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.data.repos
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import androidx.annotation.MainThread
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import androidx.lifecycle.MutableLiveData
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import org.greenrobot.eventbus.Subscribe
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import org.greenrobot.eventbus.ThreadMode
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.owntracks.android.model.messages.MessageCard
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.support.ContactImageProvider
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.support.Events.*
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) @Singleton
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) class MemoryContactsRepo @Inject constructor(private val eventBus: EventBus, private val contactImageProvider: ContactImageProvider) : ContactsRepo {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     override val all = MutableLiveData<MutableMap<String, FusedContact>>(mutableMapOf())"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     private var majorRevision: Long = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     override var revision: Long = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)         get() = majorRevision + field
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     override fun getById(id: String): FusedContact? {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)         return all.value!![id]
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     @Synchronized
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     private fun put(id: String, contact: FusedContact) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)         Timber.v(""new contact allocated id:%s, tid:%s"", id, contact.trackerId)"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)         val map = all.value!!
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         map[id] = contact
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)         all.postValue(map)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     @MainThread
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     @Synchronized
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     override fun clearAll() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         all.value!!.clear()
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         majorRevision -= MAJOR_STEP
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         revision = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         contactImageProvider.invalidateCache()
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     @Synchronized
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     override fun remove(id: String) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         Timber.v(""removing contact: %s"", id)"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         val c = all.value!!.remove(id)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         if (c != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)             c.setDeleted()
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)             eventBus.post(FusedContactRemoved(c))
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)             majorRevision -= MAJOR_STEP
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)             revision = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     override fun update(id: String, messageCard: MessageCard) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         var c = getById(id)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         if (c != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)             c.messageCard = messageCard
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)             contactImageProvider.invalidateCacheLevelCard(c.id)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)             revision++
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)             eventBus.post(c)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             c = FusedContact(id)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)             c.messageCard = messageCard
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)             contactImageProvider.invalidateCacheLevelCard(c.id)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)             put(id, c)"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)             revision++
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)             eventBus.post(FusedContactAdded(c))
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     @Synchronized
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     override fun update(id: String, messageLocation: MessageLocation) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         var fusedContact = getById(id)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         if (fusedContact != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             // If timestamp of last location message is <= the new location message, skip update. We either received an old or already known message."
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             if (fusedContact.setMessageLocation(messageLocation)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)                 revision++
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)                 eventBus.post(fusedContact)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             fusedContact = FusedContact(id)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             fusedContact.setMessageLocation(messageLocation)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)             put(id, fusedContact)"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             revision++
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             eventBus.post(FusedContactAdded(fusedContact))
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     fun onEventMainThread(@Suppress(""UNUSED_PARAMETER"") e: ModeChanged?) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         clearAll()
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     fun onEventMainThread(@Suppress(""UNUSED_PARAMETER"") e: EndpointChanged?) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         clearAll()
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     companion object {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         const val MAJOR_STEP: Long = 1000000
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     init {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         eventBus.register(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/MemoryContactsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110) }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.data.repos
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.data.repos.ObjectboxWaypointsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.data.repos.WaypointsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class ObjectboxWaypointsModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     abstract fun bindWaypointsRepo(objectboxWaypointsRepo: ObjectboxWaypointsRepo): WaypointsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.data.repos;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.database.Cursor;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.database.sqlite.SQLiteDatabase;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.database.sqlite.SQLiteOpenHelper;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.owntracks.android.data.MyObjectBox;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.data.WaypointModel_;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.injection.qualifier.AppContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import io.objectbox.Box;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import io.objectbox.BoxStore;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import io.objectbox.android.ObjectBoxLiveData;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import io.objectbox.exception.UniqueViolationException;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import io.objectbox.query.Query;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) public class ObjectboxWaypointsRepo extends WaypointsRepo  {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private Box<org.owntracks.android.data.WaypointModel> box;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     public ObjectboxWaypointsRepo(@AppContext Context context, EventBus eventBus, Preferences preferences) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)         super(eventBus);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         BoxStore boxStore = MyObjectBox.builder().androidContext(context).build();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         this.box = boxStore.boxFor(org.owntracks.android.data.WaypointModel.class);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         if(!preferences.isObjectboxMigrated()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)             migrateLegacyData(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     private static class LegacyOpenHelper extends SQLiteOpenHelper {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         LegacyOpenHelper(Context context) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)             super(context, ""org.owntracks.android.db"", null, 15);"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         public void onCreate(SQLiteDatabase db) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     private void migrateLegacyData(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)             LegacyOpenHelper helper = new LegacyOpenHelper(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             SQLiteDatabase db = helper.getReadableDatabase();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)             String table = ""WAYPOINT"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)             String[] columns = {""DATE"", ""DESCRIPTION"", ""GEOFENCE_RADIUS"", ""GEOFENCE_LATITUDE"", ""GEOFENCE_LONGITUDE""};"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)             Cursor cursor = db.query(table, columns, null, null, null, null, null, null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)                 if (cursor.moveToFirst()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)                     do {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)                         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)                             WaypointModel w = new WaypointModel(0, cursor.getLong(cursor.getColumnIndex(""DATE"")),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)                                     cursor.getString(cursor.getColumnIndex(""DESCRIPTION"")),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)                                     cursor.getDouble(cursor.getColumnIndex(""GEOFENCE_LATITUDE"")),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)                                     cursor.getDouble(cursor.getColumnIndex(""GEOFENCE_LONGITUDE"")),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)                                     cursor.getInt(cursor.getColumnIndex(""GEOFENCE_RADIUS"")), 0, 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)                             Timber.v(""Migration for model %s"", w.toString());"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)                             insert_impl(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)                         } catch (UniqueViolationException exception) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)                             Timber.v(""UniqueViolationException during insert"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)                     } while (cursor.moveToNext());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             } catch (Exception e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)                 Timber.e(e, ""Error during migration"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)             } finally {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)                 cursor.close();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)                 db.close();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         } catch (Exception e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             Timber.e(e, ""Error during migration"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         } finally {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             preferences.setObjectBoxMigrated();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     public org.owntracks.android.data.WaypointModel get(long tst) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         return this.box.query().equal(WaypointModel_.tst,tst).build().findUnique();"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     public List<org.owntracks.android.data.WaypointModel> getAll() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         return this.box.getAll();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     public List<WaypointModel> getAllWithGeofences() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         return this.box.query().greater(WaypointModel_.geofenceRadius,0L).and().between(WaypointModel_.geofenceLatitude,-90, 90).and().between(WaypointModel_.geofenceLongitude,-180, 180).build().find();"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     public ObjectBoxLiveData<WaypointModel> getAllLive() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         return new ObjectBoxLiveData<>(getAllQuery());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     public Query<WaypointModel> getAllQuery() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         return this.box.query().order(WaypointModel_.description).build();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)     public void insert_impl(org.owntracks.android.data.WaypointModel w) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         box.put(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     public void update_impl(org.owntracks.android.data.WaypointModel w) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         box.put(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     public void delete_impl(org.owntracks.android.data.WaypointModel w) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         box.remove(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/ObjectboxWaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142) }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.data.repos;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.model.messages.MessageWaypoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.support.MessageWaypointCollection;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import io.objectbox.android.ObjectBoxLiveData;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import io.objectbox.query.Query;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17) public abstract class WaypointsRepo {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     private EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     protected WaypointsRepo(EventBus eventBus) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         this.eventBus = eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     public abstract WaypointModel get(long tst);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     protected abstract List<WaypointModel> getAll();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     public abstract List<WaypointModel> getAllWithGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     public abstract ObjectBoxLiveData<WaypointModel> getAllLive();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     public abstract Query<WaypointModel> getAllQuery();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     public void insert(WaypointModel w) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         insert_impl(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         eventBus.post(new Events.WaypointAdded(w));
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     public void update(WaypointModel w, boolean notify) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         update_impl(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         if(notify) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)             eventBus.post(new Events.WaypointUpdated(w));
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     public void delete(WaypointModel w) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         delete_impl(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         eventBus.post(new Events.WaypointRemoved(w));
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     public void importFromMessage(@Nullable MessageWaypointCollection waypoints) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)         if(waypoints == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         for (MessageWaypoint m: waypoints) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)             // Delete existing waypoint if one with the same tst already exists
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)             WaypointModel exisiting = get(m.getTimestamp());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)             if(exisiting != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)                 delete(exisiting);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)             insert(toDaoObject(m));
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     public MessageWaypointCollection exportToMessage() {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         MessageWaypointCollection messages = new MessageWaypointCollection();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)         for(WaypointModel waypoint : getAll()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)             messages.add(fromDaoObject(waypoint));
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         return messages;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)     private WaypointModel toDaoObject(@NonNull MessageWaypoint messageWaypoint) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 70)         return new WaypointModel(0, messageWaypoint.getTimestamp(),messageWaypoint.getDescription(), messageWaypoint.getLatitude(), messageWaypoint.getLongitude(), messageWaypoint.getRadius() != null ? messageWaypoint.getRadius() : 0, 0, 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 71)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 72)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 73)     public MessageWaypoint fromDaoObject(@NonNull WaypointModel w) {
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 74)         MessageWaypoint message = new MessageWaypoint();
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 75)         message.setDescription(w.getDescription());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 76)         message.setLatitude(w.getGeofenceLatitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 77)         message.setLongitude(w.getGeofenceLongitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 78)         message.setRadius(w.getGeofenceRadius());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 79)         message.setTimestamp(w.getTst());
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 80)         return message;
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 81)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 82)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 83)     protected abstract void insert_impl(WaypointModel w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 84)     protected abstract void update_impl(WaypointModel w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 85)     protected abstract void delete_impl(WaypointModel w);
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 86)
5c49fd3 project/app/src/main/java/org/owntracks/android/data/repos/WaypointsRepo.java (<eulerhm@dcc.ufmg.br> 2022-12-20 87) }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.geocoding
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.collection.LruCache
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import java.math.BigDecimal
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import java.math.RoundingMode
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class CachingGeocoder : Geocoder {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     private val cache = object : LruCache<Pair<BigDecimal, BigDecimal>, String?>(40) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)         override fun create(key: Pair<BigDecimal, BigDecimal>): String? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)             return doLookup(key.first, key.second)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override fun reverse(latitude: Double, longitude: Double): String? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         val result = cache[Pair(latitude.toBigDecimal().setScale(4, RoundingMode.HALF_EVEN), longitude.toBigDecimal().setScale(4, RoundingMode.HALF_EVEN))]"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         Timber.d(""Geocode cache: hits=${cache.hitCount()}, misses=${cache.missCount()}"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         return result
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     protected abstract fun doLookup(latitude: BigDecimal, longitude: BigDecimal): String?"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/CachingGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23) }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/Geocoder.java (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.geocoding;
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/Geocoder.java (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/Geocoder.java (<eulerhm@dcc.ufmg.br> 2022-12-20 3) interface Geocoder {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/Geocoder.java (<eulerhm@dcc.ufmg.br> 2022-12-20 4)     String reverse(double latitude, double longitude);"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/Geocoder.java (<eulerhm@dcc.ufmg.br> 2022-12-20 5) }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderNone.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.geocoding
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderNone.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderNone.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) class GeocoderNone internal constructor() : Geocoder {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderNone.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4)     override fun reverse(latitude: Double, longitude: Double): String? {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderNone.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5)         return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderNone.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 6)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderNone.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 7) }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.geocoding
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.SharedPreferences
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.widget.TextView
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import kotlinx.coroutines.Dispatchers
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import kotlinx.coroutines.GlobalScope
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import kotlinx.coroutines.launch
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import kotlinx.coroutines.withContext
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.injection.qualifier.AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.services.BackgroundService
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.support.preferences.OnModeChangedPreferenceChangedListener
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20) @Singleton
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) class GeocoderProvider @Inject constructor(@AppContext val context: Context, val preferences: Preferences) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     private lateinit var geocoder: Geocoder
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     private fun setGeocoderProvider(@AppContext context: Context, preferences: Preferences) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         Timber.i(""Setting geocoding provider to ${preferences.reverseGeocodeProvider}"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         geocoder = when (preferences.reverseGeocodeProvider) {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)             Preferences.REVERSE_GEOCODE_PROVIDER_OPENCAGE -> OpenCageGeocoder(preferences.openCageGeocoderApiKey)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             Preferences.REVERSE_GEOCODE_PROVIDER_GOOGLE -> GoogleGeocoder(context)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)             else -> GeocoderNone()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     private suspend fun geocoderResolve(messageLocation: MessageLocation): String? {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         return withContext(Dispatchers.IO) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)             return@withContext geocoder.reverse(messageLocation.latitude, messageLocation.longitude)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     fun resolve(messageLocation: MessageLocation) {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         if (messageLocation.hasGeocode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         GlobalScope.launch {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)             val result = geocoderResolve(messageLocation)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)             messageLocation.geocode = result
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)     fun resolve(messageLocation: MessageLocation, backgroundService: BackgroundService) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         if (messageLocation.hasGeocode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)             backgroundService.onGeocodingProviderResult(messageLocation)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         GlobalScope.launch {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)             val result = geocoderResolve(messageLocation)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)             messageLocation.geocode = result
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)             backgroundService.onGeocodingProviderResult(messageLocation)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     fun resolve(messageLocation: MessageLocation, textView: TextView) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         if (messageLocation.hasGeocode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)             textView.text = messageLocation.geocode
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         textView.text = messageLocation.fallbackGeocode // will print lat, lon until GeocodingProvider is available"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)         GlobalScope.launch {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)             val result = geocoderResolve(messageLocation)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69)             messageLocation.geocode = result
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 70)             textView.text = messageLocation.geocode
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 71)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 72)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 73)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 74)     init {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 75)         setGeocoderProvider(context, preferences)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 76)         preferences.registerOnPreferenceChangedListener(object : OnModeChangedPreferenceChangedListener {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 77)             override fun onAttachAfterModeChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 78)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 79)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 80)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 81)             override fun onSharedPreferenceChanged(sharedPreferences: SharedPreferences?, key: String?) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 82)                 if (key == preferences.getPreferenceKey(R.string.preferenceKeyReverseGeocodeProvider) || key == preferences.getPreferenceKey(R.string.preferenceKeyOpencageGeocoderApiKey)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 83)                     setGeocoderProvider(context, preferences)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 84)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 85)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 86)         })
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 87)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GeocoderProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 88) }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.geocoding
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.location.Address
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.injection.qualifier.AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import java.math.BigDecimal
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import java.util.*
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) class GoogleGeocoder internal constructor(@AppContext context: Context?) : CachingGeocoder() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     private val geocoder: android.location.Geocoder = android.location.Geocoder(context, Locale.getDefault())"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     override fun reverse(latitude: Double, longitude: Double): String? {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         if (!geocoderAvailable()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)             Timber.e(""geocoder is not present"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)             return null
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         return super.reverse(latitude, longitude)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     override fun doLookup(latitude: BigDecimal, longitude: BigDecimal): String? {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         val addresses: List<Address>?
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         return try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)             addresses = geocoder.getFromLocation(latitude.toDouble(), longitude.toDouble(), 1)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)             if (addresses != null && addresses.isNotEmpty()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)                 val g = StringBuilder()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)                 val a = addresses[0]
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)                 if (a.getAddressLine(0) != null) g.append(a.getAddressLine(0))
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)                 Timber.d(""Resolved $latitude,$longitude to $g"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)                 g.toString()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)                 ""not available"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         } catch (e: Exception) {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)             null
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     private fun geocoderAvailable(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         return android.location.Geocoder.isPresent()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/GoogleGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42) }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.geocoding
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.JsonInclude
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.fasterxml.jackson.databind.DeserializationFeature
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.fasterxml.jackson.databind.ObjectMapper
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import okhttp3.HttpUrl
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import okhttp3.OkHttpClient
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import okhttp3.Request
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.services.MessageProcessorEndpointHttp
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import java.math.BigDecimal
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class OpenCageGeocoder @JvmOverloads internal constructor(private val apiKey: String, private val httpClient: OkHttpClient = OkHttpClient()) : CachingGeocoder() {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     private val jsonMapper: ObjectMapper = ObjectMapper()
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     override fun doLookup(latitude: BigDecimal, longitude: BigDecimal): String? {"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         val url = HttpUrl.Builder()
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)                 .scheme(""http"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)                 .host(OPENCAGE_HOST)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)                 .addPathSegment(""geocode"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)                 .addPathSegment(""v1"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)                 .addPathSegment(""json"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)                 .addEncodedQueryParameter(""q"", String.format(""%s,%s"", latitude, longitude))"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)                 .addQueryParameter(""no_annotations"", ""1"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)                 .addQueryParameter(""abbrv"", ""1"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)                 .addQueryParameter(""limit"", ""1"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)                 .addQueryParameter(""no_dedupe"", ""1"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)                 .addQueryParameter(""no_record"", ""1"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)                 .addQueryParameter(""key"", apiKey)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)                 .build()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         val request = Request.Builder()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)                 .url(url)
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)                 .header(""User-Agent"", MessageProcessorEndpointHttp.USERAGENT)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)                 .get()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)                 .build()
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)             httpClient.newCall(request).execute().use { response ->
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)                 if (!response.isSuccessful || response.body == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)                     Timber.e(""Unexpected response from Opencage: %s"", response)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)                 val rs = response.body!!.string()
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)                 Timber.d(""Opencage HTTP response: %s"", rs)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)                 val deserializedOpenCageResponse = jsonMapper.readValue(rs, OpenCageResponse::class.java)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)                 if (deserializedOpenCageResponse.formatted == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)                     Timber.e(""No reverse geocode was received. Results in response: ${deserializedOpenCageResponse.results}"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)                     return null
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)                 val formattedLocation = deserializedOpenCageResponse.formatted!!
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)                 Timber.d(""Formatted location: %s"", formattedLocation)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)                 return formattedLocation
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         } catch (e: Exception) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)             Timber.e(e, ""Error reverse geocoding from opencage"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)             return null
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         private const val OPENCAGE_HOST = ""api.opencagedata.com"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     init {
"5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         jsonMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)     internal class OpenCageResult {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         val formatted: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69)     @JsonInclude(JsonInclude.Include.NON_NULL)
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 70)     internal class OpenCageResponse {
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 71)         val results: List<OpenCageResult>? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 72)         val formatted: String?
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 73)             get() = if (results != null && results.isNotEmpty()) results[0].formatted else null
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 74)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/geocoding/OpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 75) }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.components
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import dagger.BindsInstance
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Component
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.android.AndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import dagger.android.support.AndroidSupportInjectionModule
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import dagger.android.support.DaggerApplication
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.App
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.AppContextModule
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.data.repos.ObjectboxWaypointsModule
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.injection.modules.AndroidBindingModule
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.injection.modules.SingletonModule
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.services.worker.WorkerModule
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.support.preferences.SharedPreferencesStoreModule
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) @Component(modules = [
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     AppContextModule::class,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     SingletonModule::class,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     ObjectboxWaypointsModule::class,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     AndroidSupportInjectionModule::class,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     AndroidBindingModule::class,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     SharedPreferencesStoreModule::class,"
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     WorkerModule::class
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26) ])
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27) interface AppComponent : AndroidInjector<DaggerApplication> {
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     @Component.Builder
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     interface Builder {
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         @BindsInstance
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         fun app(app: App): Builder
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         fun build(): AppComponent
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     override fun inject(instance: DaggerApplication?)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     fun inject(app: App)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37) }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/components/AppComponent.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.modules;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.ui.preferences.connection.ConnectionActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.contacts.ContactsActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.preferences.editor.EditorActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.ui.preferences.load.LoadActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.ui.status.LogViewerActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.ui.map.MapActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.preferences.PreferencesActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.region.RegionActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.ui.regions.RegionsActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.ui.welcome.StatusActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.services.BackgroundServiceModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.injection.scopes.PerReceiver;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.injection.scopes.PerService;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17) import org.owntracks.android.support.receiver.StartBackgroundServiceReceiver;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import org.owntracks.android.ui.status.LogViewerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19) import org.owntracks.android.ui.welcome.WelcomeActivityModule;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) import dagger.Module;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22) import dagger.android.ContributesAndroidInjector;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25) public abstract class AndroidBindingModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @ContributesAndroidInjector(modules = {ContactsActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     abstract org.owntracks.android.ui.contacts.ContactsActivity bindContactsActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     @ContributesAndroidInjector(modules = {MapActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     abstract org.owntracks.android.ui.map.MapActivity bindMapActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     @ContributesAndroidInjector(modules = {PreferencesActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     abstract org.owntracks.android.ui.preferences.PreferencesActivity bindPreferencesActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     @ContributesAndroidInjector(modules = {ConnectionActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     abstract org.owntracks.android.ui.preferences.connection.ConnectionActivity bindConnectionActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     @ContributesAndroidInjector(modules = {LogViewerActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     abstract LogViewerActivity bindLogViewerActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     @ContributesAndroidInjector(modules = {EditorActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     abstract org.owntracks.android.ui.preferences.editor.EditorActivity bindEditorActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)     @ContributesAndroidInjector(modules = {LoadActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     abstract org.owntracks.android.ui.preferences.load.LoadActivity bindLoadActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     @ContributesAndroidInjector(modules = {StatusActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     abstract org.owntracks.android.ui.status.StatusActivity bindStatusActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     @ContributesAndroidInjector(modules = {WelcomeActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     abstract org.owntracks.android.ui.welcome.WelcomeActivity bindWelcomeActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)     @ContributesAndroidInjector(modules = {RegionsActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)     abstract org.owntracks.android.ui.regions.RegionsActivity bindRegionsActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     @ContributesAndroidInjector(modules = {RegionActivityModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68)     abstract org.owntracks.android.ui.region.RegionActivity bindRegionActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 70)     @PerService
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 71)     @ContributesAndroidInjector(modules = {BackgroundServiceModule.class})
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 72)     abstract org.owntracks.android.services.BackgroundService bindBackgroundService();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 73)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 74)     @PerReceiver
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 75)     @ContributesAndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 76)     abstract StartBackgroundServiceReceiver bindBackgroundServiceReceiver();
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/AndroidBindingModule.java (<eulerhm@dcc.ufmg.br> 2022-12-20 77) }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.modules
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.test.espresso.idling.CountingIdlingResource
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Provides
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.EventBusIndex
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.data.repos.ContactsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.data.repos.MemoryContactsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.support.ContactImageProvider
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) class SingletonModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     @Provides
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     fun provideEventbus(): EventBus {
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         return EventBus.builder().addIndex(EventBusIndex()).sendNoSubscriberEvent(false).logNoSubscriberMessages(false).build()
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     @Provides
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @Singleton
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     fun provideContactsRepo(eventBus: EventBus?, contactImageProvider: ContactImageProvider?): ContactsRepo {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         return MemoryContactsRepo(eventBus!!, contactImageProvider!!)"
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @Provides
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     fun provideOutgoingQueueIdlingResource(): CountingIdlingResource {
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         return CountingIdlingResource(""outgoingQueueIdlingResource"", true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/modules/SingletonModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32) }
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.qualifier;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import java.lang.annotation.Retention;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import java.lang.annotation.RetentionPolicy;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Qualifier;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) /* Copyright 2016 Patrick Lwenstein
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  *    http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)  * limitations under the License. */
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) @Qualifier
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22) @Retention(RetentionPolicy.RUNTIME)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/AppContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23) public @interface AppContext {}
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.qualifier;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import java.lang.annotation.Retention;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import java.lang.annotation.RetentionPolicy;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Qualifier;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Qualifier
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @Retention(RetentionPolicy.RUNTIME)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/qualifier/ServiceContext.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) public @interface ServiceContext {}
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.scopes;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import java.lang.annotation.Retention;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import java.lang.annotation.RetentionPolicy;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Scope;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) /* Copyright 2016 Patrick Lwenstein
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  *    http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)  * limitations under the License. */
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) @Scope
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22) @Retention(RetentionPolicy.RUNTIME)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23) public @interface PerActivity {}
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.scopes;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import java.lang.annotation.Retention;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import java.lang.annotation.RetentionPolicy;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Scope;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) /* Copyright 2016 Patrick Lwenstein
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  *    http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)  * limitations under the License. */
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) @Scope
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22) @Retention(RetentionPolicy.RUNTIME)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23) public @interface PerFragment {}
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.scopes;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import java.lang.annotation.Retention;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import java.lang.annotation.RetentionPolicy;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Scope;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Scope
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @Retention(RetentionPolicy.RUNTIME)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) public @interface PerReceiver {}
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.injection.scopes;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import java.lang.annotation.Retention;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import java.lang.annotation.RetentionPolicy;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Scope;
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Scope
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @Retention(RetentionPolicy.RUNTIME)
5c49fd3 project/app/src/main/java/org/owntracks/android/injection/scopes/PerService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) public @interface PerService {}
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.JsonValue
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) enum class BatteryStatus(val value: Int) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)     /**
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)      * The owntracks model for battery status
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)      */
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     UNKNOWN(0), UNPLUGGED(1), CHARGING(2), FULL(3);"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @JsonValue
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     fun getVal(): Int {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         return value;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/BatteryStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.JsonValue
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) enum class CommandAction(val value: String) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)     /**
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)      * The owntracks model for command actions
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)      */
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     REPORT_LOCATION(""reportLocation""),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     SET_WAYPOINTS(""setWaypoints""),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     SET_CONFIGURATION(""setConfiguration""),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     RESTART(""restart""),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     RECONNECT(""reconnect""),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     WAYPOINTS(""waypoints"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @JsonValue
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     fun getVal(): String {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         return value;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/CommandAction.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.model;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import androidx.databinding.BaseObservable;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.lifecycle.MutableLiveData;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import com.google.android.gms.maps.model.LatLng;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.BR;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.geocoding.GeocoderProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.model.messages.MessageCard;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.model.messages.MessageLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) public class FusedContact extends BaseObservable implements Comparable<FusedContact> {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     private final String id;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     private GeocoderProvider geocoderProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     private MutableLiveData<MessageLocation> messageLocation = new MutableLiveData<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)     private MessageCard messageCard;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23)     private Integer imageProvider = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     private long tst = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     public Integer getImageProvider() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)         return imageProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     public void setImageProvider(Integer imageProvider) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)         this.imageProvider = imageProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     public FusedContact(@Nullable String id) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         this.id = (id != null && !id.isEmpty()) ? id : ""NOID"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         this.geocoderProvider = geocoderProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     public boolean setMessageLocation(MessageLocation messageLocation) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         if (tst > messageLocation.getTimestamp())
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)             return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         Timber.v(""update contact:%s, tst:%s"", id, messageLocation.getTimestamp());"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         messageLocation.setContact(this); // Allows to update fusedLocation if geocoder of messageLocation changed
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         this.messageLocation.postValue(messageLocation);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         this.tst = messageLocation.getTimestamp();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         notifyMessageLocationPropertyChanged();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     public void setMessageCard(MessageCard messageCard) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         this.messageCard = messageCard;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         notifyMessageCardPropertyChanged();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     private void notifyMessageCardPropertyChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         this.notifyPropertyChanged(BR.fusedName);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         this.notifyPropertyChanged(BR.imageProvider);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         this.notifyPropertyChanged(BR.id);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     public void notifyMessageLocationPropertyChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         if (this.messageLocation.getValue() != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)             Timber.d(""Geocode location updated for %s: %s"", this.id, this.messageLocation.getValue().getGeocode());"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         this.notifyPropertyChanged(BR.fusedName);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         this.notifyPropertyChanged(BR.messageLocation);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         this.notifyPropertyChanged(BR.geocodedLocation);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         this.notifyPropertyChanged(BR.fusedLocationAccuracy);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         this.notifyPropertyChanged(BR.tst);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         this.notifyPropertyChanged(BR.trackerId);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         this.notifyPropertyChanged(BR.id);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)     public MessageCard getMessageCard() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         return messageCard;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     public MutableLiveData<MessageLocation> getMessageLocation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         return messageLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     public String getFusedName() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         if (hasCard() && getMessageCard().hasName())
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             return getMessageCard().getName();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         else
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)             return getTrackerId();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     public String getFusedLocationAccuracy() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         return Integer.toString(this.hasLocation() ? messageLocation.getValue().getAccuracy() : 0);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     public String getGeocodedLocation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         return this.messageLocation.getValue().getGeocode();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     public boolean hasLocation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         return this.messageLocation.getValue() != null;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     public boolean hasCard() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         return this.messageCard != null;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)     public String getTrackerId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         if (hasLocation() && getMessageLocation().getValue().hasTrackerId())
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             return getMessageLocation().getValue().getTrackerId();
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)             String id = getId().replace(""/"", """");"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)             if (id.length() > 2) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                 return id.substring(id.length() - 2);
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             } else
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                 return id;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     public @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)     String getId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         return id;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)     public LatLng getLatLng() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         return new LatLng(this.messageLocation.getValue().getLatitude(), this.messageLocation.getValue().getLongitude());"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)     private boolean deleted;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)     public boolean isDeleted() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         return deleted;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)     public void setDeleted() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         this.deleted = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)     public long getTst() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         return tst;
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)     public int compareTo(@NonNull FusedContact o) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         return Long.compare(o.tst, this.tst);"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/FusedContact.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import androidx.databinding.BaseObservable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import com.fasterxml.jackson.annotation.*
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import org.owntracks.android.support.Parser
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import java.io.IOException
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"", defaultImpl = MessageUnknown::class)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) @JsonSubTypes(JsonSubTypes.Type(value = MessageLocation::class, name = MessageLocation.TYPE), JsonSubTypes.Type(value = MessageTransition::class, name = MessageTransition.TYPE), JsonSubTypes.Type(value = MessageCard::class, name = MessageCard.TYPE), JsonSubTypes.Type(value = MessageCmd::class, name = MessageCmd.TYPE), JsonSubTypes.Type(value = MessageConfiguration::class, name = MessageConfiguration.TYPE), JsonSubTypes.Type(value = MessageEncrypted::class, name = MessageEncrypted.TYPE), JsonSubTypes.Type(value = MessageWaypoint::class, name = MessageWaypoint.TYPE), JsonSubTypes.Type(value = MessageWaypoints::class, name = MessageWaypoints.TYPE), JsonSubTypes.Type(value = MessageLwt::class, name = MessageLwt.TYPE))"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) @JsonPropertyOrder(alphabetic = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) abstract class MessageBase : BaseObservable() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15)     val messageId = System.currentTimeMillis()
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18)     open var topic: String = 
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19)         set(value) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)             field = value
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)             topicBase = getBaseTopic(value) // Normalized topic for all message types
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     private var topicBase: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     @set:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     var modeId = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     var isIncoming = false
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         private set
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     @set:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     var qos = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     @set:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     var retained = false
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     @JsonInclude(JsonInclude.Include.NON_NULL)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     @JsonProperty(""tid"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     open var trackerId: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     val contactKey: String
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         get() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)             if (topicBase != null) return topicBase!!
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)             return if (trackerId != null) trackerId!! else ""NOKEY"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     fun setIncoming() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         isIncoming = true
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     protected open val baseTopicSuffix: String?
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         get() = BASETOPIC_SUFFIX
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     // Called after deserialization to check if all required attributes are set or not.
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     // The message is discarded if false is returned.
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     open fun isValidMessage(): Boolean = true
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     fun hasTrackerId(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         return trackerId != null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     private fun getBaseTopic(topic: String): String {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         return if (baseTopicSuffix != null && topic.endsWith(baseTopicSuffix!!)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             topic.substring(0, topic.length - baseTopicSuffix!!.length)"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             topic
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     override fun toString(): String {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         return String.format(""%s id=%s"", this.javaClass.name, messageId)"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     open fun addMqttPreferences(preferences: Preferences) {}
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     @Throws(IOException::class)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     open fun toJsonBytes(parser: Parser): ByteArray? {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         return parser.toJsonBytes(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     @Throws(IOException::class)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     open fun toJson(parser: Parser): String? {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         return parser.toJson(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         const val TYPE = ""base"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         val BASETOPIC_SUFFIX = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageBase.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.databinding.Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.fasterxml.jackson.annotation.JsonIgnoreProperties
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.fasterxml.jackson.annotation.JsonInclude
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import com.fasterxml.jackson.annotation.JsonSetter
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import com.fasterxml.jackson.annotation.JsonTypeInfo
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @JsonIgnoreProperties(ignoreUnknown = true)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @JsonInclude(JsonInclude.Include.NON_EMPTY)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class MessageCard : MessageBase() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @get:Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     var name: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @set:JsonSetter
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     var face: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     fun hasFace(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         return face != null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     fun hasName(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         return name != null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     override val baseTopicSuffix: String?
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         get() = BASETOPIC_SUFFIX
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         const val BASETOPIC_SUFFIX = ""/info"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         const val TYPE = ""card"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCard.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.support.Parser
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) class MessageClear : MessageBase() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     override fun addMqttPreferences(preferences: Preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)         retained = true
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     // Clear messages are implemented as empty messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     override fun toJsonBytes(parser: Parser): ByteArray {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         return ByteArray(0)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override fun toJson(parser: Parser): String {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         return 
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageClear.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.JsonIgnoreProperties
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.fasterxml.jackson.annotation.JsonInclude
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.fasterxml.jackson.annotation.JsonTypeInfo
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.model.CommandAction
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) @JsonIgnoreProperties(ignoreUnknown = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @JsonInclude(JsonInclude.Include.NON_EMPTY)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class MessageCmd : MessageBase() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     var action: CommandAction? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     var waypoints: MessageWaypoints? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     var configuration: MessageConfiguration? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     override fun isValidMessage(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         return super.isValidMessage() && action != null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     override fun addMqttPreferences(preferences: Preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         topic = preferences.pubTopicCommands
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     override val baseTopicSuffix: String?
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         get() = BASETOPIC_SUFFIX
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         const val TYPE = ""cmd"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         private const val BASETOPIC_SUFFIX = ""/cmd"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageCmd.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.*
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.support.MessageWaypointCollection
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import java.util.*
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) class MessageConfiguration : MessageBase() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     private val map: MutableMap<String, Any?> = TreeMap()"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @JsonInclude(JsonInclude.Include.NON_NULL)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     var waypoints: MessageWaypointCollection = MessageWaypointCollection()
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @JsonAnyGetter
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     @JsonPropertyOrder(alphabetic = true)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     fun any(): Map<String, Any?> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         return map
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     @JsonAnySetter
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     operator fun set(key: String, value: Any?) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         map[key] = value
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     // TID would not be included in map for load otherwise
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @JsonInclude(JsonInclude.Include.NON_NULL)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     fun setTid(tid: String) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         set(""tid"", tid)"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     operator fun get(key: String?): Any? {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         return map[key]
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     fun containsKey(key: String?): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         return map.containsKey(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     val keys: Set<String>
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         get() = map.keys
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     fun removeKey(key: String?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)         map.remove(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         const val TYPE = ""configuration"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageConfiguration.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.JsonIgnoreProperties
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.fasterxml.jackson.annotation.JsonInclude
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.fasterxml.jackson.annotation.JsonTypeInfo
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @JsonIgnoreProperties(ignoreUnknown = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @JsonInclude(JsonInclude.Include.NON_EMPTY)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) class MessageEncrypted : MessageBase() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     var data: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         const val TYPE = ""encrypted"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageEncrypted.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import com.fasterxml.jackson.annotation.*
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import org.owntracks.android.model.BatteryStatus
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import java.lang.ref.WeakReference
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) @JsonIgnoreProperties(ignoreUnknown = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) @JsonInclude(JsonInclude.Include.NON_EMPTY)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) open class MessageLocation(private val dep: MessageWithCreatedAt = MessageCreatedAtNow(RealClock())) : MessageBase(), MessageWithCreatedAt by dep {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13)     @JsonProperty(""t"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14)     var trigger: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16)     @JsonProperty(""batt"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17)     var battery = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     @JsonProperty(""bs"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     var batteryStatus: BatteryStatus? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)     @JsonProperty(""acc"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)     var accuracy = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     @JsonProperty(""vac"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     var verticalAccuracy = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     @JsonProperty(""lat"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     var latitude = 0.0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     @JsonProperty(""lon"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     var longitude = 0.0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     @JsonProperty(""alt"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     var altitude = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     @JsonProperty(""vel"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     var velocity = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @JsonProperty(""tst"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     var timestamp: Long = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     private var _contact: WeakReference<FusedContact?>? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     var conn: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     @JsonProperty(""inregions"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     var inregions: List<String>? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     @set:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     var geocode: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         get() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)             return field ?: fallbackGeocode
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         set(value) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)             field = value
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)             hasGeocode = true
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)             notifyContactPropertyChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     internal val fallbackGeocode: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         get() = ""$latitude, $longitude"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     @get:JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     var hasGeocode: Boolean = false
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         private set
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     fun setContact(contact: FusedContact?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         _contact = WeakReference(contact)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     private fun notifyContactPropertyChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         _contact?.get()?.notifyMessageLocationPropertyChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     @JsonInclude(JsonInclude.Include.NON_NULL)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     @JsonProperty(""tid"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     override var trackerId: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         set(value) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             field = value
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             notifyContactPropertyChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     override fun isValidMessage(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         return timestamp > 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     override fun toString(): String {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         return String.format(""Location id=%s: (%s,%s)"", this.messageId, latitude, longitude)"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     override fun addMqttPreferences(preferences: Preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         topic = preferences.pubTopicLocations
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         qos = preferences.pubQosLocations
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         retained = preferences.pubRetainLocations
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         const val TYPE = ""location"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         const val REPORT_TYPE_USER = ""u"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         const val REPORT_TYPE_RESPONSE = ""r"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         const val REPORT_TYPE_CIRCULAR = ""c"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         const val REPORT_TYPE_PING = ""p"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         @JvmField
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         val REPORT_TYPE_DEFAULT: String? = null
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         const val CONN_TYPE_OFFLINE = ""o"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         const val CONN_TYPE_WIFI = ""w"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         const val CONN_TYPE_MOBILE = ""m"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLocation.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLwt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLwt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLwt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) object MessageLwt : MessageBase() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLwt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4)     const val TYPE = ""lwt"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageLwt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.*
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.google.android.gms.location.Geofence
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @JsonIgnoreProperties(ignoreUnknown = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @JsonInclude(JsonInclude.Include.NON_EMPTY)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) class MessageTransition : MessageBase() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     @JsonIgnore
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     fun getTransition(): Int = when (event) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         EVENT_ENTER -> Geofence.GEOFENCE_TRANSITION_ENTER
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         EVENT_LEAVE -> Geofence.GEOFENCE_TRANSITION_EXIT
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         else -> 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     fun setTransition(value: Int) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         this.event = when (value) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)             Geofence.GEOFENCE_TRANSITION_ENTER, Geofence.GEOFENCE_TRANSITION_DWELL -> EVENT_ENTER"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)             Geofence.GEOFENCE_TRANSITION_EXIT -> EVENT_LEAVE
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)             else -> null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @JsonProperty(""event"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     var event: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     @JsonProperty(""desc"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     var description: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     @JsonProperty(""tid"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     override var trackerId: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     @JsonProperty(""t"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     var trigger: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     @JsonProperty(""tst"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     var timestamp: Long = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     @JsonProperty(""wtst"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     var waypointTimestamp: Long = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     @JsonProperty(""acc"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     var accuracy = 0f
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)     @JsonProperty(""lon"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     var longitude = 0.0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     @JsonProperty(""lat"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     var latitude = 0.0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     override fun addMqttPreferences(preferences: Preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)         topic = preferences.pubTopicEvents
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         qos = preferences.pubQosEvents
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         retained = preferences.pubRetainEvents
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     override val baseTopicSuffix: String?
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         get() = BASETOPIC_SUFFIX
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)         const val TYPE = ""transition"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         const val TRIGGER_CIRCULAR = ""c"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)         const val TRIGGER_LOCATION = ""l"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)         private const val BASETOPIC_SUFFIX = ""/event"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69)         private const val EVENT_ENTER = ""enter"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 70)         private const val EVENT_LEAVE = ""leave"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 71)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageTransition.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 72) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageUnknown.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageUnknown.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageUnknown.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) object MessageUnknown : MessageBase() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageUnknown.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4)     const val TYPE = ""unknown"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageUnknown.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.JsonIgnoreProperties
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.fasterxml.jackson.annotation.JsonInclude
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.fasterxml.jackson.annotation.JsonProperty
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import com.fasterxml.jackson.annotation.JsonTypeInfo
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) @JsonIgnoreProperties(ignoreUnknown = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @JsonInclude(JsonInclude.Include.NON_EMPTY)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class MessageWaypoint : MessageBase() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @JsonProperty(""desc"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     var description: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @JsonProperty(""lon"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     var longitude = 0.0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     @JsonProperty(""lat"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     var latitude = 0.0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @JsonProperty(""tst"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     var timestamp: Long = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     // Optional types for optional values
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @JsonProperty(""rad"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     var radius: Int? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     override fun isValidMessage(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         return super.isValidMessage() && description != null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     override fun addMqttPreferences(preferences: Preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         topic = preferences.pubTopicWaypoints
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         qos = preferences.pubQosWaypoints
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         retained = preferences.pubRetainWaypoints
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     override val baseTopicSuffix: String?
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         get() = BASETOPIC_SUFFIX
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         const val TYPE = ""waypoint"
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)         private const val BASETOPIC_SUFFIX = ""/event"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoint.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.fasterxml.jackson.annotation.JsonIgnoreProperties
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.fasterxml.jackson.annotation.JsonInclude
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.fasterxml.jackson.annotation.JsonTypeInfo
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.support.MessageWaypointCollection
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXTERNAL_PROPERTY, property = ""_type"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) @JsonIgnoreProperties(ignoreUnknown = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @JsonInclude(JsonInclude.Include.NON_EMPTY)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class MessageWaypoints : MessageBase() {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     var waypoints: MessageWaypointCollection? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     override fun addMqttPreferences(preferences: Preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         topic = preferences.pubTopicWaypoints
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         qos = preferences.pubQosWaypoints
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         retained = preferences.pubRetainWaypoints
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         const val TYPE = ""waypoints"
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWaypoints.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.model.messages
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) interface MessageWithCreatedAt {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4)     val created_at: Long
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) class MessageCreatedAtNow(clock: Clock) : MessageWithCreatedAt {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     override val created_at: Long = clock.time
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) interface Clock {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     val time: Long
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) class RealClock : Clock {
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override val time: Long = java.util.concurrent.TimeUnit.MILLISECONDS.toSeconds(System.currentTimeMillis())
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) }
5c49fd3 project/app/src/main/java/org/owntracks/android/model/messages/MessageWithCreatedAt.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.Manifest;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.app.Notification;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.app.NotificationChannel;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.app.NotificationManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.app.PendingIntent;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import android.content.SharedPreferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import android.content.pm.PackageManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import android.graphics.Typeface;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import android.location.Location;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import android.media.AudioManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import android.os.Binder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import android.os.Build;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import android.os.IBinder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import android.os.Looper;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import android.text.Spannable;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import android.text.SpannableString;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import android.text.style.StyleSpan;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import androidx.annotation.RequiresApi;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import androidx.core.app.ActivityCompat;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import androidx.core.app.NotificationCompat;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import androidx.core.app.NotificationManagerCompat;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import com.google.android.gms.location.FusedLocationProviderClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import com.google.android.gms.location.Geofence;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import com.google.android.gms.location.GeofencingClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import com.google.android.gms.location.GeofencingEvent;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import com.google.android.gms.location.GeofencingRequest;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import com.google.android.gms.location.LocationCallback;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import com.google.android.gms.location.LocationRequest;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import com.google.android.gms.location.LocationResult;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38) import com.google.android.gms.location.LocationServices;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39) import com.google.android.gms.tasks.OnCompleteListener;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40) import com.google.android.gms.tasks.Task;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43) import org.greenrobot.eventbus.Subscribe;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44) import org.greenrobot.eventbus.ThreadMode;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47) import org.owntracks.android.data.repos.ContactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48) import org.owntracks.android.data.repos.LocationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50) import org.owntracks.android.model.messages.MessageLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51) import org.owntracks.android.model.messages.MessageTransition;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52) import org.owntracks.android.model.FusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53) import org.owntracks.android.services.worker.Scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54) import org.owntracks.android.support.DateFormatter;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56) import org.owntracks.android.geocoding.GeocoderProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58) import org.owntracks.android.support.RunThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59) import org.owntracks.android.support.ServiceBridge;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60) import org.owntracks.android.support.preferences.OnModeChangedPreferenceChangedListener;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61) import org.owntracks.android.ui.map.MapActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63) import java.util.LinkedList;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69) import dagger.android.DaggerService;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72) public class BackgroundService extends DaggerService implements OnCompleteListener<Location>, OnModeChangedPreferenceChangedListener, ServiceBridge.ServiceBridgeInterface {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     private static final int INTENT_REQUEST_CODE_LOCATION = 1263;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     private static final int INTENT_REQUEST_CODE_GEOFENCE = 1264;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     private static final int INTENT_REQUEST_CODE_CLEAR_EVENTS = 1263;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     private static final int NOTIFICATION_ID_ONGOING = 1;
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     private static final String NOTIFICATION_CHANNEL_ONGOING = ""O"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     private static final int NOTIFICATION_ID_EVENT_GROUP = 2;
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     public static final String NOTIFICATION_CHANNEL_EVENTS = ""E"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     private static int notificationEventsID = 3;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     private final String NOTIFICATION_GROUP_EVENTS = ""events"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     // NEW ACTIONS ALSO HAVE TO BE ADDED TO THE SERVICE INTENT FILTER
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     private static final String INTENT_ACTION_CLEAR_NOTIFICATIONS = ""org.owntracks.android.CLEAR_NOTIFICATIONS"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     private static final String INTENT_ACTION_SEND_LOCATION_USER = ""org.owntracks.android.SEND_LOCATION_USER"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)     private static final String INTENT_ACTION_SEND_EVENT_CIRCULAR = ""org.owntracks.android.SEND_EVENT_CIRCULAR"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     private static final String INTENT_ACTION_REREQUEST_LOCATION_UPDATES = ""org.owntracks.android.REREQUEST_LOCATION_UPDATES"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     private static final String INTENT_ACTION_CHANGE_MONITORING = ""org.owntracks.android.CHANGE_MONITORING"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     private FusedLocationProviderClient fusedLocationClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     private GeofencingClient mGeofencingClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     private LocationCallback locationCallback;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     private LocationCallback locationCallbackOnDemand;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     private MessageLocation lastLocationMessage;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     private MessageProcessor.EndpointState lastEndpointState = MessageProcessor.EndpointState.INITIAL;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     private NotificationCompat.Builder activeNotificationCompatBuilder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     private NotificationCompat.Builder eventsNotificationCompatBuilder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     private NotificationManager notificationManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     private NotificationManagerCompat notificationManagerCompat;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     private final LinkedList<Spannable> activeNotifications = new LinkedList<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     private int lastQueueLength = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     private Notification stackNotification;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)     Scheduler scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     LocationProcessor locationProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)     GeocoderProvider geocoderProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)     ContactsRepo contactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     LocationRepo locationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)     RunThingsOnOtherThreads runThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)     WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)     ServiceBridge serviceBridge;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)     MessageProcessor messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)     public void onCreate() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         super.onCreate();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         Timber.v(""Background service onCreate. ThreadID: %s"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         serviceBridge.bind(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         mGeofencingClient = LocationServices.getGeofencingClient(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         notificationManagerCompat = NotificationManagerCompat.from(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         locationCallback = new LocationCallback() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)             public void onLocationResult(LocationResult locationResult) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)                 Timber.i(""Locationresult received: %s"", locationResult);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)                 super.onLocationResult(locationResult);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)                 onLocationChanged(locationResult.getLastLocation(),MessageLocation.REPORT_TYPE_DEFAULT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         };
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         locationCallbackOnDemand = new LocationCallback() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)             public void onLocationResult(LocationResult locationResult) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)                 Timber.i(""Ondemand Locationresult received: %s"", locationResult);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)                 super.onLocationResult(locationResult);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)                 onLocationChanged(locationResult.getLastLocation(),MessageLocation.REPORT_TYPE_RESPONSE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)         };
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         setupNotificationChannels();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         startForeground(NOTIFICATION_ID_ONGOING, getOngoingNotification());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)         setupLocationRequest();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         scheduler.scheduleLocationPing();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         setupGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         eventBus.register(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         eventBus.postSticky(new Events.ServiceStarted());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         messageProcessor.initialize();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         preferences.registerOnPreferenceChangedListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     public void onDestroy() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)         stopForeground(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         preferences.unregisterOnPreferenceChangedListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         super.onDestroy();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)     public int onStartCommand(Intent intent, int flags, int startId) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         super.onStartCommand(intent, flags, startId);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)         if (intent != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)             handleIntent(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         return START_STICKY;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)     private void handleIntent(@NonNull Intent intent) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)         if (intent.getAction() != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)             Timber.v(""intent received with action:%s"", intent.getAction());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)             switch (intent.getAction()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)                 case INTENT_ACTION_SEND_LOCATION_USER:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)                     locationProcessor.publishLocationMessage(MessageLocation.REPORT_TYPE_USER);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)                 case INTENT_ACTION_SEND_EVENT_CIRCULAR:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)                     onGeofencingEvent(GeofencingEvent.fromIntent(intent));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)                 case INTENT_ACTION_CLEAR_NOTIFICATIONS:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)                     clearEventStackNotification();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)                 case INTENT_ACTION_REREQUEST_LOCATION_UPDATES:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)                     setupLocationRequest();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)                 case INTENT_ACTION_CHANGE_MONITORING:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)                     if(intent.hasExtra(preferences.getPreferenceKey(R.string.preferenceKeyMonitoring))) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)                         preferences.setMonitoring(intent.getIntExtra(preferences.getPreferenceKey(R.string.preferenceKeyMonitoring), preferences.getMonitoring()));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)                     } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)                         // Step monitoring mode if no mode is specified
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)                         preferences.setMonitoringNext();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)                 default:
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)                     Timber.v(""unhandled intent action received: %s"", intent.getAction());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)     private void setupNotificationChannels() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)         if (Build.VERSION.SDK_INT < 26) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)         // Importance min will show normal priority notification for foreground service. See https://developer.android.com/reference/android/app/NotificationManager#IMPORTANCE_MIN
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)         // User has to actively configure this in the notification channel settings.
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         NotificationChannel ongoingChannel = new NotificationChannel(NOTIFICATION_CHANNEL_ONGOING, getString(R.string.notificationChannelOngoing), NotificationManager.IMPORTANCE_DEFAULT );"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)         ongoingChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         ongoingChannel.setDescription(getString(R.string.notificationChannelOngoingDescription));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)         ongoingChannel.enableLights(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)         ongoingChannel.enableVibration(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)         ongoingChannel.setShowBadge(false);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)         ongoingChannel.setSound(null, null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)         notificationManager.createNotificationChannel(ongoingChannel);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)         NotificationChannel eventsChannel = new NotificationChannel(NOTIFICATION_CHANNEL_EVENTS, getString(R.string.events), NotificationManager.IMPORTANCE_HIGH);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)         eventsChannel.setLockscreenVisibility(Notification.VISIBILITY_PUBLIC);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)         eventsChannel.setDescription(getString(R.string.notificationChannelEventsDescription));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)         eventsChannel.enableLights(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)         eventsChannel.enableVibration(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)         eventsChannel.setShowBadge(true);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         eventsChannel.setSound(null, null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)         notificationManager.createNotificationChannel(eventsChannel);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)     @Nullable
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)     private NotificationCompat.Builder getOngoingNotificationBuilder() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)         if (activeNotificationCompatBuilder != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)             return activeNotificationCompatBuilder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)         Intent resultIntent = new Intent(this, MapActivity.class);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)         resultIntent.setAction(""android.intent.action.MAIN"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)         resultIntent.addCategory(""android.intent.category.LAUNCHER"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)         resultIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)         PendingIntent resultPendingIntent = PendingIntent.getActivity(this, 0, resultIntent, PendingIntent.FLAG_UPDATE_CURRENT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)         Intent publishIntent = new Intent();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)         publishIntent.setAction(INTENT_ACTION_SEND_LOCATION_USER);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)         PendingIntent publishPendingIntent = PendingIntent.getService(this, 0, publishIntent, PendingIntent.FLAG_UPDATE_CURRENT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)         Intent changeMonitoringIntent = new Intent();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)         publishIntent.setAction(INTENT_ACTION_CHANGE_MONITORING);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)         PendingIntent changeMonitoringPendingIntent = PendingIntent.getService(this, 0, publishIntent, PendingIntent.FLAG_UPDATE_CURRENT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)         activeNotificationCompatBuilder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ONGOING)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)                 .setContentIntent(resultPendingIntent)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)                 .setSortKey(""a"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)                 .addAction(R.drawable.ic_baseline_publish_24, getString(R.string.publish), publishPendingIntent)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)                 .addAction(R.drawable.ic_owntracks_80, getString(R.string.notificationChangeMonitoring), changeMonitoringPendingIntent)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)                 .setSmallIcon(R.drawable.ic_owntracks_80)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)                 .setPriority(preferences.getNotificationHigherPriority() ? NotificationCompat.PRIORITY_DEFAULT : NotificationCompat.PRIORITY_MIN)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294)                 .setSound(null, AudioManager.STREAM_NOTIFICATION)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)                 .setOngoing(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 296)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 297)         if (android.os.Build.VERSION.SDK_INT >= 23) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 298)             activeNotificationCompatBuilder.setColor(getColor(R.color.primary))
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 299)                     .setCategory(NotificationCompat.CATEGORY_SERVICE)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 300)                     .setVisibility(NotificationCompat.VISIBILITY_PUBLIC);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 301)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 302)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 303)         return activeNotificationCompatBuilder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 304)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 305)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 306)     private void updateOngoingNotification() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 307)         notificationManager.notify(NOTIFICATION_ID_ONGOING, getOngoingNotification());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 308)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 309)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 310)     private Notification getOngoingNotification() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 311)         NotificationCompat.Builder builder = getOngoingNotificationBuilder();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 312)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 313)         if (builder == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 314)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 315)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 316)         if (this.lastLocationMessage != null && preferences.getNotificationLocation()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 317)             builder.setContentTitle(this.lastLocationMessage.getGeocode());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 318)             builder.setWhen(TimeUnit.SECONDS.toMillis(this.lastLocationMessage.getTimestamp()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 319)             builder.setNumber(lastQueueLength);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 320)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 321)             builder.setContentTitle(getString(R.string.app_name));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 322)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 323)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 324)         // Show monitoring mode if endpoint state is not interesting
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 325)         if(lastEndpointState == MessageProcessor.EndpointState.CONNECTED || lastEndpointState == MessageProcessor.EndpointState.IDLE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 326)             builder.setContentText(getMonitoringLabel(preferences.getMonitoring()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 327)         } else if (lastEndpointState == MessageProcessor.EndpointState.ERROR && lastEndpointState.getMessage() != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 328)             builder.setContentText(lastEndpointState.getLabel(this) + "": "" + lastEndpointState.getMessage());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 329)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 330)             builder.setContentText( lastEndpointState.getLabel(this));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 331)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 332)         return builder.build();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 333)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 334)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 335)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 336)     private String getMonitoringLabel(int mode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 337)         switch (mode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 338)             case LocationProcessor.MONITORING_QUIET:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 339)                 return getString(R.string.monitoring_quiet);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 340)             case LocationProcessor.MONITORING_MANUAL:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 341)                 return getString(R.string.monitoring_manual);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 342)             case LocationProcessor.MONITORING_SIGNIFICANT:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 343)                 return getString(R.string.monitoring_significant);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 344)             case LocationProcessor.MONITORING_MOVE:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 345)                 return getString(R.string.monitoring_move);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 346)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 347)         return getString(R.string.na);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 348)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 349)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 350)     private void sendEventNotification(MessageTransition message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 351)         NotificationCompat.Builder builder = getEventsNotificationBuilder();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 352)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 353)         if (builder == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 354)             Timber.e(""no builder returned"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 355)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 356)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 357)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 358)         FusedContact c = contactsRepo.getById(message.getContactKey());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 359)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 360)         long when = TimeUnit.SECONDS.toMillis(message.getTimestamp());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 361)         String location = message.getDescription();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 362)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 363)         if (location == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 364)             location = getString(R.string.aLocation);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 365)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 366)         String title = message.getTrackerId();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 367)         if (c != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 368)             title = c.getFusedName();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 369)         else if (title == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 370)             title = message.getContactKey();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 371)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 372)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 373)         String text = String.format(""%s %s"", getString(message.getTransition() == Geofence.GEOFENCE_TRANSITION_ENTER ? R.string.transitionEntering : R.string.transitionLeaving), location);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 374)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 375)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 376)         eventsNotificationCompatBuilder.setContentTitle(title);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 377)         eventsNotificationCompatBuilder.setContentText(text);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 378)         eventsNotificationCompatBuilder.setWhen(TimeUnit.SECONDS.toMillis(message.getTimestamp()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 379)         eventsNotificationCompatBuilder.setShowWhen(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 380)         eventsNotificationCompatBuilder.setGroup(NOTIFICATION_GROUP_EVENTS);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 381)         // Deliver notification
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 382)         Notification n = eventsNotificationCompatBuilder.build();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 383)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 384)         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 385)             sendEventStackNotification(title, text, when);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 386)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 387)             notificationManagerCompat.notify(notificationEventsID++, n);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 388)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 389)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 390)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 391)     @RequiresApi(23)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 392)     private void sendEventStackNotification(String title, String text, long when) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 393)         Timber.v(""SDK_INT >= 23, building stack notification"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 394)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 395)         String whenStr = DateFormatter.formatDate(TimeUnit.MILLISECONDS.toSeconds((when)));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 396)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 397)         Spannable newLine = new SpannableString(String.format(""%s %s %s"", whenStr, title, text));"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 398)         newLine.setSpan(new StyleSpan(Typeface.BOLD), 0, whenStr.length() + 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 399)         activeNotifications.push(newLine);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 400)         Timber.v(""groupedNotifications: %s"", activeNotifications.size());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 401)         String summary = getResources().getQuantityString(R.plurals.notificationEventsTitle, activeNotifications.size(), activeNotifications.size());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 402)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 403)         NotificationCompat.InboxStyle inbox = new NotificationCompat.InboxStyle();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 404)         inbox.setSummaryText(summary);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 405)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 406)         for (Spannable n : activeNotifications) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 407)             inbox.addLine(n);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 408)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 409)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 410)         NotificationCompat.Builder builder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_EVENTS)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 411)                 .setContentTitle(getString(R.string.events))
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 412)                 .setContentText(summary)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 413)                 .setGroup(NOTIFICATION_GROUP_EVENTS) // same as group of single notifications
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 414)                 .setGroupSummary(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 415)                 .setColor(getColor(R.color.primary))
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 416)                 .setAutoCancel(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 417)                 .setPriority(NotificationCompat.PRIORITY_DEFAULT)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 418)                 .setSmallIcon(R.drawable.ic_owntracks_80)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 419)                 .setLocalOnly(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 420)                 .setDefaults(Notification.DEFAULT_ALL)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 421)                 .setNumber(activeNotifications.size())
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 422)                 .setStyle(inbox)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 423)                 .setContentIntent(PendingIntent.getActivity(this, (int) System.currentTimeMillis() / 1000, new Intent(this, MapActivity.class), PendingIntent.FLAG_ONE_SHOT))"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 424)                 .setDeleteIntent(PendingIntent.getService(this, INTENT_REQUEST_CODE_CLEAR_EVENTS, (new Intent(this, BackgroundService.class)).setAction(INTENT_ACTION_CLEAR_NOTIFICATIONS), PendingIntent.FLAG_ONE_SHOT));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 425)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 426)         stackNotification = builder.build();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 427)         notificationManagerCompat.notify(NOTIFICATION_GROUP_EVENTS, NOTIFICATION_ID_EVENT_GROUP, stackNotification);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 428)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 429)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 430)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 431)     private void clearEventStackNotification() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 432)         Timber.v(""clearing notification stack"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 433)         activeNotifications.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 434)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 435)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 436)     private void onGeofencingEvent(@Nullable final GeofencingEvent event) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 437)         if (event == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 438)             Timber.e(""geofencingEvent null"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 439)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 440)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 441)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 442)         if (event.hasError()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 443)             Timber.e(""geofencingEvent hasError: %s"", event.getErrorCode());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 444)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 445)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 446)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 447)         final int transition = event.getGeofenceTransition();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 448)         for (int index = 0; index < event.getTriggeringGeofences().size(); index++) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 449)             WaypointModel w = waypointsRepo.get(Long.parseLong(event.getTriggeringGeofences().get(index).getRequestId()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 450)             if(w == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 451)                 Timber.e(""waypoint id %s not found for geofence event"", event.getTriggeringGeofences().get(index).getRequestId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 452)                 continue;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 453)             }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 454)             locationProcessor.onWaypointTransition(w, event.getTriggeringLocation(), transition, MessageTransition.TRIGGER_CIRCULAR);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 455)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 456)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 457)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 458)     void onLocationChanged(@Nullable Location location, @Nullable String reportType) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 459)         if(location == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 460)             Timber.e(""no location provided"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 461)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 462)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 463)         Timber.v(""location update received: tst:%s, acc:%s, lat:%s, lon:%s type:%s"", location.getTime(), location.getAccuracy(), location.getLatitude(), location.getLongitude(), reportType);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 464)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 465)         if (location.getTime() > locationRepo.getCurrentLocationTime()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 466)             locationProcessor.onLocationChanged(location,reportType);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 467)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 468)             Timber.v(""Not re-sending message with same timestamp as last"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 469)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 470)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 471)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 472)     @SuppressWarnings(""MissingPermission"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 473)     public void requestOnDemandLocationUpdate() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 474)         if (missingLocationPermission()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 475)             Timber.e(""missing location permission"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 476)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 477)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 478)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 479)         LocationRequest request = new LocationRequest();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 480)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 481)         request.setNumUpdates(1);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 482)         request.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 483)         request.setExpirationDuration(TimeUnit.MINUTES.toMillis(1));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 484)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 485)         Timber.d(""On demand location request"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 486)         FusedLocationProviderClient client = LocationServices.getFusedLocationProviderClient(this);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 487)         client.requestLocationUpdates(request, locationCallbackOnDemand,  runThingsOnOtherThreads.getBackgroundLooper());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 488)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 489)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 490)     @SuppressWarnings(""MissingPermission"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 491)     private void setupLocationRequest() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 492)         if (missingLocationPermission()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 493)             Timber.e(""missing location permission"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 494)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 495)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 496)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 497)         if (fusedLocationClient == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 498)             Timber.e(""FusedLocationClient not available"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 499)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 500)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 501)         int monitoring = preferences.getMonitoring();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 502)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 503)         LocationRequest request = new LocationRequest();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 504)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 505)         switch (monitoring) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 506)             case LocationProcessor.MONITORING_QUIET:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 507)             case LocationProcessor.MONITORING_MANUAL:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 508)                 request.setInterval(TimeUnit.SECONDS.toMillis(preferences.getLocatorInterval()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 509)                 request.setSmallestDisplacement(preferences.getLocatorDisplacement());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 510)                 request.setPriority(LocationRequest.PRIORITY_LOW_POWER);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 511)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 512)             case LocationProcessor.MONITORING_SIGNIFICANT:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 513)                 request.setInterval(TimeUnit.SECONDS.toMillis(preferences.getLocatorInterval()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 514)                 request.setSmallestDisplacement(preferences.getLocatorDisplacement());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 515)                 request.setPriority(getLocationRequestPriority());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 516)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 517)             case LocationProcessor.MONITORING_MOVE:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 518)                 request.setInterval(TimeUnit.SECONDS.toMillis(preferences.getMoveModeLocatorInterval()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 519)                 request.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 520)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 521)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 522)         Timber.d(""Location update request params: mode %s, interval (s):%s, fastestInterval (s):%s, priority:%s, displacement (m):%s"", monitoring, TimeUnit.MILLISECONDS.toSeconds(request.getInterval()), TimeUnit.MILLISECONDS.toSeconds(request.getFastestInterval()), request.getPriority(), request.getSmallestDisplacement());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 523)         fusedLocationClient.flushLocations();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 524)         fusedLocationClient.requestLocationUpdates(request, locationCallback, runThingsOnOtherThreads.getBackgroundLooper())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 525)                 .addOnSuccessListener(_void -> Timber.d(""Location update request success""))"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 526)                 .addOnFailureListener(throwable -> Timber.e(throwable, ""Location update request failure""))"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 527)                 .addOnCanceledListener(() -> Timber.w(""Location update request cancelled""));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 528)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 529)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 530)     private int getLocationRequestPriority() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 531)         switch (preferences.getLocatorPriority()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 532)             case 0:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 533)                 return LocationRequest.PRIORITY_NO_POWER;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 534)             case 1:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 535)                 return LocationRequest.PRIORITY_LOW_POWER;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 536)             case 3:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 537)                 return LocationRequest.PRIORITY_HIGH_ACCURACY;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 538)             case 2:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 539)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 540)                 return LocationRequest.PRIORITY_BALANCED_POWER_ACCURACY;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 541)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 542)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 543)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 544)     private PendingIntent getGeofencePendingIntent() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 545)         Intent geofeneIntent = new Intent(this, BackgroundService.class);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 546)         geofeneIntent.setAction(INTENT_ACTION_SEND_EVENT_CIRCULAR);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 547)         return PendingIntent.getBroadcast(this, INTENT_REQUEST_CODE_GEOFENCE, geofeneIntent, PendingIntent.FLAG_UPDATE_CURRENT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 548)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 549)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 550)     @SuppressWarnings(""MissingPermission"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 551)     private void setupGeofences() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 552)         if (missingLocationPermission()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 553)             Timber.e(""missing location permission"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 554)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 555)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 556)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 557)         Timber.d(""loader thread:%s, isMain:%s"", Looper.myLooper(), Looper.myLooper() == Looper.getMainLooper());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 558)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 559)         LinkedList<Geofence> geofences = new LinkedList<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 560)         List<WaypointModel> loadedWaypoints = waypointsRepo.getAllWithGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 561)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 562)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 563)         for (WaypointModel w : loadedWaypoints){
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 564)             Timber.d(""id:%s, desc:%s, lat:%s, lon:%s, rad:%s"", w.getId(), w.getDescription(), w.getGeofenceLatitude(), w.getGeofenceLongitude(), w.getGeofenceRadius());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 565)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 566)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 567)                 geofences.add(new Geofence.Builder()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 568)                         .setRequestId(Long.toString(w.getId()))
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 569)                         .setTransitionTypes(Geofence.GEOFENCE_TRANSITION_ENTER | Geofence.GEOFENCE_TRANSITION_EXIT)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 570)                         .setNotificationResponsiveness((int) TimeUnit.MINUTES.toMillis(2))
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 571)                         .setCircularRegion(w.getGeofenceLatitude(), w.getGeofenceLongitude(), w.getGeofenceRadius())"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 572)                         .setExpirationDuration(Geofence.NEVER_EXPIRE).build());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 573)             } catch (IllegalArgumentException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 574)                 Timber.e(e, ""Invalid geofence parameter"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 575)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 576)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 577)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 578)         if (geofences.size() > 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 579)             GeofencingRequest.Builder b = new GeofencingRequest.Builder();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 580)             b.setInitialTrigger(Geofence.GEOFENCE_TRANSITION_ENTER);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 581)             GeofencingRequest request = b.addGeofences(geofences).build();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 582)             mGeofencingClient.addGeofences(request, getGeofencePendingIntent());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 583)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 584)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 585)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 586)     private boolean missingLocationPermission() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 587)         return ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_DENIED;"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 588)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 589)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 590)     private void removeGeofences() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 591)         mGeofencingClient.removeGeofences(getGeofencePendingIntent());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 592)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 593)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 594)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 595)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 596)     public void onEvent(Events.WaypointAdded e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 597)         locationProcessor.publishWaypointMessage(e.getWaypointModel()); // TODO: move to waypointsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 598)         if(e.getWaypointModel().hasGeofence()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 599)             removeGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 600)             setupGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 601)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 602)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 603)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 604)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 605)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 606)     public void onEvent(Events.WaypointUpdated e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 607)         locationProcessor.publishWaypointMessage(e.getWaypointModel()); // TODO: move to waypointsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 608)         removeGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 609)         setupGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 610)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 611)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 612)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 613)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 614)     public void onEvent(Events.WaypointRemoved e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 615)         if(e.getWaypointModel().hasGeofence()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 616)             removeGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 617)             setupGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 618)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 619)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 620)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 621)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 622)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 623)     public void onEvent(Events.ModeChanged e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 624)         removeGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 625)         setupGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 626)         setupLocationRequest();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 627)         updateOngoingNotification();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 628)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 629)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 630)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 631)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 632)     public void onEvent(Events.MonitoringChanged e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 633)         setupLocationRequest();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 634)         updateOngoingNotification();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 635)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 636)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 637)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 638)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 639)     public void onEvent(MessageTransition message) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 640)         Timber.d(""transition isIncoming:%s topic:%s"", message.isIncoming(), message.getTopic());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 641)         if (message.isIncoming())
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 642)             sendEventNotification(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 643)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 644)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 645)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 646)     @Subscribe(threadMode = ThreadMode.BACKGROUND)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 647)     public void onEvent(MessageLocation m) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 648)         Timber.d(""MessageLocation received %s, %s, outgoing: %s"", m, lastLocationMessage, !m.isIncoming());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 649)         if (lastLocationMessage == null || lastLocationMessage.getTimestamp() <= m.getTimestamp()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 650)             this.lastLocationMessage = m;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 651)             updateOngoingNotification();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 652)             geocoderProvider.resolve(m, this);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 653)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 654)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 655)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 656)     public void onGeocodingProviderResult(MessageLocation m) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 657)         if (m == lastLocationMessage) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 658)             updateOngoingNotification();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 659)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 660)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 661)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 662)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 663)     @Subscribe(sticky = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 664)     public void onEvent(MessageProcessor.EndpointState state) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 665)         Timber.d(state.getError(), ""endpoint state changed %s. Message: %s"", state.getLabel(this), state.getMessage());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 666)         this.lastEndpointState = state;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 667)         updateOngoingNotification();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 668)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 669)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 670)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 671)     @Subscribe(sticky = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 672)     public void onEvent(Events.QueueChanged e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 673)         this.lastQueueLength = e.getNewLength();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 674)         updateOngoingNotification();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 675)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 676)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 677)     @SuppressWarnings(""unused"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 678)     @Subscribe(sticky = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 679)     public void onEvent(Events.PermissionGranted event) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 680)         Timber.d(""location permission granted"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 681)         removeGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 682)         setupGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 683)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 684)         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 685)             Timber.d(""Getting last location"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 686)             fusedLocationClient.getLastLocation().addOnCompleteListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 687)         } catch (SecurityException ignored) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 688)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 689)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 690)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 691)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 692)     private NotificationCompat.Builder getEventsNotificationBuilder() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 693)         if (!preferences.getNotificationEvents())
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 694)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 695)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 696)         Timber.d(""building notification builder"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 697)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 698)         if (eventsNotificationCompatBuilder != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 699)             return eventsNotificationCompatBuilder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 700)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 701)         Timber.d(""builder not present, lazy building"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 702)         Intent openIntent = new Intent(this, MapActivity.class);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 703)         openIntent.setAction(""android.intent.action.MAIN"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 704)         openIntent.addCategory(""android.intent.category.LAUNCHER"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 705)         openIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 706)         PendingIntent openPendingIntent = PendingIntent.getActivity(this, 0, openIntent, PendingIntent.FLAG_UPDATE_CURRENT);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 707)         eventsNotificationCompatBuilder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_EVENTS)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 708)                 .setContentIntent(openPendingIntent)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 709)                 .setSmallIcon(R.drawable.ic_baseline_add_24)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 710)                 .setAutoCancel(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 711)                 .setShowWhen(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 712)                 .setPriority(NotificationCompat.PRIORITY_DEFAULT)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 713)                 .setCategory(NotificationCompat.CATEGORY_SERVICE)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 714)                 .setVisibility(NotificationCompat.VISIBILITY_PUBLIC);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 715)         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 716)             eventsNotificationCompatBuilder.setColor(getColor(R.color.primary));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 717)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 718)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 719)         return eventsNotificationCompatBuilder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 720)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 721)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 722)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 723)     public void onComplete(@NonNull Task<Location> task) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 724)         onLocationChanged(task.getResult(),MessageLocation.REPORT_TYPE_DEFAULT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 725)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 726)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 727)     private final IBinder mBinder = new LocalBinder();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 728)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 729)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 730)     public void onAttachAfterModeChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 731)         //NOOP. Handled through eventbus
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 732)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 733)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 734)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 735)     public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 736)         if (preferences.getPreferenceKey(R.string.preferenceKeyLocatorInterval).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 737)                 preferences.getPreferenceKey(R.string.preferenceKeyLocatorDisplacement).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 738)                 preferences.getPreferenceKey(R.string.preferenceKeyLocatorPriority).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 739)                 preferences.getPreferenceKey(R.string.preferenceKeyMoveModeLocatorInterval).equals(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 740)         ) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 741)             Timber.d(""locator preferences changed. Resetting location request."");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 742)             setupLocationRequest();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 743)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 744)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 745)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 746)     public class LocalBinder extends Binder {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 747)         public BackgroundService getService() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 748)             return BackgroundService.this;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 749)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 750)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 751)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 752)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 753)     public IBinder onBind(Intent intent) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 754)         Timber.v(""in onBind()"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 755)         return mBinder;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 756)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 757)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 758)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 759)     public void onRebind(Intent intent) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 760)         Timber.v(""Last client unbound from service"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 761)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundService.java (<eulerhm@dcc.ufmg.br> 2022-12-20 762) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.app.Service
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.injection.qualifier.ServiceContext
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.injection.scopes.PerService
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) abstract class BackgroundServiceModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @PerService
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @ServiceContext
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     abstract fun bindServiceContext(service: Service): Context
5c49fd3 project/app/src/main/java/org/owntracks/android/services/BackgroundServiceModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.location.Location;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.os.Build;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import com.google.android.gms.location.Geofence;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.data.repos.LocationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.model.messages.MessageLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.model.messages.MessageTransition;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.model.messages.MessageWaypoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.model.messages.MessageWaypoints;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.support.DeviceMetricsProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.support.MessageWaypointCollection;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import java.util.LinkedList;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) public class LocationProcessor {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     private final MessageProcessor messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     private final LocationRepo locationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     private final WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     private final DeviceMetricsProvider deviceMetricsProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     public static final int MONITORING_QUIET = -1;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     public static final int MONITORING_MANUAL = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     public static final int MONITORING_SIGNIFICANT = 1;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     public static final int MONITORING_MOVE = 2;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     public LocationProcessor(MessageProcessor messageProcessor, Preferences preferences, LocationRepo locationRepo, WaypointsRepo waypointsRepo, DeviceMetricsProvider deviceMetricsProvider) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         this.messageProcessor = messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         this.deviceMetricsProvider = deviceMetricsProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         this.locationRepo = locationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         this.waypointsRepo = waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     private boolean ignoreLowAccuracy(@NonNull Location l) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         int threshold = preferences.getIgnoreInaccurateLocations();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         return threshold > 0 && l.getAccuracy() > threshold;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     public void publishLocationMessage(@Nullable String trigger) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         Timber.v(""trigger: %s. ThreadID: %s"", trigger, Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         if (!locationRepo.hasLocation()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)             Timber.e(""no location available"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         Location currentLocation = locationRepo.getCurrentLocation();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         List<WaypointModel> loadedWaypoints = waypointsRepo.getAllWithGeofences();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         assert currentLocation != null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         if (ignoreLowAccuracy(currentLocation)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         // Check if publish would trigger a region if fusedRegionDetection is enabled
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         if(loadedWaypoints.size() > 0 && preferences.getFusedRegionDetection() && !MessageLocation.REPORT_TYPE_CIRCULAR.equals(trigger)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             for(WaypointModel waypoint : loadedWaypoints) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)                 onWaypointTransition(waypoint, currentLocation, currentLocation.distanceTo(waypoint.getLocation()) <= waypoint.getGeofenceRadius() ? Geofence.GEOFENCE_TRANSITION_ENTER : Geofence.GEOFENCE_TRANSITION_EXIT, MessageTransition.TRIGGER_LOCATION);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         if (preferences.getMonitoring() == MONITORING_QUIET && !MessageLocation.REPORT_TYPE_USER.equals(trigger) ) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             Timber.v(""message suppressed by monitoring settings: quiet"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         if (preferences.getMonitoring() == MONITORING_MANUAL && (!MessageLocation.REPORT_TYPE_USER.equals(trigger) && !MessageLocation.REPORT_TYPE_CIRCULAR.equals(trigger))) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             Timber.v(""message suppressed by monitoring settings: manual"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         MessageLocation message = new MessageLocation();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         message.setLatitude(currentLocation.getLatitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         message.setLongitude(currentLocation.getLongitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         message.setAltitude((int)currentLocation.getAltitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         message.setAccuracy(Math.round(currentLocation.getAccuracy()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         if (currentLocation.hasSpeed()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             message.setVelocity((int)(currentLocation.getSpeed() * 3.6)); // Convert m/s to km/h
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O && currentLocation.hasVerticalAccuracy()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)             message.setVerticalAccuracy((int)currentLocation.getVerticalAccuracyMeters());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         message.setTrigger(trigger);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         message.setTimestamp(TimeUnit.MILLISECONDS.toSeconds(currentLocation.getTime()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         message.setTrackerId(preferences.getTrackerId(true));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         message.setInregions(calculateInregions(loadedWaypoints));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         if (preferences.getPubLocationExtendedData()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             message.setBattery(deviceMetricsProvider.getBatteryLevel());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)             message.setBatteryStatus(deviceMetricsProvider.getBatteryStatus());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)             message.setConn(deviceMetricsProvider.getConnectionType());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         messageProcessor.queueMessageForSending(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     //TODO: refactor to use ObjectBox query directly
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     private List<String> calculateInregions(List<WaypointModel> loadedWaypoints) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         LinkedList<String> l = new LinkedList<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         for(WaypointModel w : loadedWaypoints) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             if(w.getLastTransition() == Geofence.GEOFENCE_TRANSITION_ENTER )
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                 l.add(w.getDescription());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         return l;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)     public void onLocationChanged(@NonNull Location l, @Nullable String reportType) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         locationRepo.setCurrentLocation(l);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)         publishLocationMessage(reportType);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)     void onWaypointTransition(@NonNull WaypointModel waypointModel, @NonNull final Location location, final int transition, @NonNull final String trigger) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         Timber.v(""geofence %s/%s transition:%s, trigger:%s"", waypointModel.getTst(), waypointModel.getDescription(), transition == Geofence.GEOFENCE_TRANSITION_ENTER ? ""enter"" : ""exit"", trigger);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         if (ignoreLowAccuracy(location)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)             Timber.d(""ignoring transition: low accuracy "");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)         // Don't send transition if the region is already triggered
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         // If the region status is unknown, send transition only if the device is inside"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         if (((transition == waypointModel.getLastTransition()) || (waypointModel.isUnknown() && transition == Geofence.GEOFENCE_TRANSITION_EXIT))) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)             Timber.d(""ignoring initial or duplicate transition: %s"", waypointModel.getDescription());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)             waypointModel.setLastTransition(transition);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)             waypointsRepo.update(waypointModel, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         waypointModel.setLastTransition(transition);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         waypointModel.setLastTriggeredNow();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         waypointsRepo.update(waypointModel, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         if(preferences.getMonitoring() ==MONITORING_QUIET) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)             Timber.v(""message suppressed by monitoring settings: %s"", preferences.getMonitoring());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         publishTransitionMessage(waypointModel, location, transition, trigger);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         if (trigger.equals(MessageTransition.TRIGGER_CIRCULAR)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)             publishLocationMessage(MessageLocation.REPORT_TYPE_CIRCULAR);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)     void publishWaypointMessage(@NonNull WaypointModel e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         messageProcessor.queueMessageForSending(waypointsRepo.fromDaoObject(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)     private void publishTransitionMessage(@NonNull WaypointModel w, @NonNull Location triggeringLocation, int transition, String trigger) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)         MessageTransition message = new MessageTransition();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)         message.setTransition(transition);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         message.setTrigger(trigger);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         message.setTrackerId(preferences.getTrackerId(true));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         message.setLatitude(triggeringLocation.getLatitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)         message.setLongitude(triggeringLocation.getLongitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         message.setAccuracy(triggeringLocation.getAccuracy());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         message.setTimestamp(TimeUnit.MILLISECONDS.toSeconds(triggeringLocation.getTime()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         message.setWaypointTimestamp(w.getTst());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         message.setDescription(w.getDescription());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)         messageProcessor.queueMessageForSending(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)     public void publishWaypointsMessage() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         MessageWaypoints message = new MessageWaypoints();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)         MessageWaypointCollection collection = new MessageWaypointCollection();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         for(WaypointModel w : waypointsRepo.getAllWithGeofences()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)             MessageWaypoint m = new MessageWaypoint();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)             m.setDescription(w.getDescription());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)             m.setLatitude(w.getGeofenceLatitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)             m.setLongitude(w.getGeofenceLongitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)             m.setRadius(w.getGeofenceRadius());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)             m.setTimestamp(w.getTst());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)             collection.add(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         message.setWaypoints(collection);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         messageProcessor.queueMessageForSending(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/LocationProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.res.Resources;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.test.espresso.idling.CountingIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.eclipse.paho.client.mqttv3.MqttException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.greenrobot.eventbus.Subscribe;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.greenrobot.eventbus.ThreadMode;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.data.repos.ContactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.injection.qualifier.AppContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.model.messages.MessageBase;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.model.messages.MessageCard;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.model.messages.MessageClear;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.model.messages.MessageCmd;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.model.messages.MessageLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.model.messages.MessageTransition;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.owntracks.android.model.messages.MessageUnknown;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.services.worker.Scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.owntracks.android.support.Parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.owntracks.android.support.RunThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.support.ServiceBridge;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.owntracks.android.support.interfaces.ConfigurationIncompleteException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import org.owntracks.android.support.interfaces.StatefulServiceMessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import java.util.Locale;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import java.util.concurrent.BlockingDeque;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import java.util.concurrent.Callable;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import java.util.concurrent.ExecutionException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import java.util.concurrent.FutureTask;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38) import java.util.concurrent.LinkedBlockingDeque;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39) import java.util.concurrent.Semaphore;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44) import dagger.Lazy;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48) public class MessageProcessor {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     private final EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     private final ContactsRepo contactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     private final WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     private Context applicationContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     private final Parser parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     private final Scheduler scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     private final Lazy<LocationProcessor> locationProcessorLazy;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     private final Events.QueueChanged queueEvent = new Events.QueueChanged();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     private final ServiceBridge serviceBridge;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     private final CountingIdlingResource outgoingQueueIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     private final RunThingsOnOtherThreads runThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     private MessageProcessorEndpoint endpoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     private boolean acceptMessages = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     private final BlockingDeque<MessageBase> outgoingQueue = new LinkedBlockingDeque<>(10000);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     private Thread backgroundDequeueThread;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     private static final long SEND_FAILURE_BACKOFF_INITIAL_WAIT = TimeUnit.SECONDS.toMillis(1);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     private static final long SEND_FAILURE_BACKOFF_MAX_WAIT = TimeUnit.MINUTES.toMillis(1);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     private boolean initialized = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     public MessageProcessor(
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             @AppContext Context applicationContext,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             EventBus eventBus,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             ContactsRepo contactsRepo,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             Preferences preferences,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             WaypointsRepo waypointsRepo,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)             Parser parser,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)             Scheduler scheduler,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             ServiceBridge serviceBridge,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             RunThingsOnOtherThreads runThingsOnOtherThreads,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             Lazy<LocationProcessor> locationProcessorLazy,"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             CountingIdlingResource outgoingQueueIdlingResource
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     ) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         this.applicationContext = applicationContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         this.eventBus = eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         this.contactsRepo = contactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         this.waypointsRepo = waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         this.parser = parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         this.scheduler = scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         this.locationProcessorLazy = locationProcessorLazy;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         this.serviceBridge = serviceBridge;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         this.outgoingQueueIdlingResource = outgoingQueueIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         this.eventBus.register(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         this.runThingsOnOtherThreads = runThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     synchronized public void initialize() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         if (!initialized) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)             Timber.d(""Initializing MessageProcessor"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)             onEndpointStateChanged(EndpointState.INITIAL);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)             reconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             initialized = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     public void reconnect() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         reconnect(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     public void reconnect(Semaphore completionNotifier) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         if (endpoint == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)             loadOutgoingMessageProcessor(); // The processor should take care of the reconnect on init
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         } else if (endpoint instanceof MessageProcessorEndpointMqtt) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             ((MessageProcessorEndpointMqtt) endpoint).reconnect(completionNotifier);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         } else if (completionNotifier != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)             // This is not an MQTT endpoint, but we've been given a notifier. Just release it."
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             completionNotifier.release();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)     public boolean statefulReconnectAndSendKeepalive() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         if (endpoint == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             loadOutgoingMessageProcessor();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         if (endpoint instanceof MessageProcessorEndpointMqtt) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)             Semaphore lock = new Semaphore(1);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)             lock.acquireUninterruptibly();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)             ((MessageProcessorEndpointMqtt) endpoint).reconnectAndSendKeepalive(lock);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)             try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)                 // Above method may re-trigger itself on a different thread, so we want to wait until"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)                 // that's complete.
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)                 Timber.tag(""MQTT"").d(""Waiting for reconnect worker to complete"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)                 lock.acquire();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)                 Timber.tag(""MQTT"").d(""Waiting done"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)             } catch (InterruptedException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                 Timber.w(e, ""Interrupted waiting for reconnect future to complete"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)                 return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)     public boolean statefulCheckConnection() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         if (endpoint == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)             loadOutgoingMessageProcessor();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         if (endpoint instanceof StatefulServiceMessageProcessor)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)             return ((StatefulServiceMessageProcessor) endpoint).checkConnection();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         else
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)     public boolean isEndpointConfigurationComplete() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)             if (this.endpoint != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)                 this.endpoint.checkConfigurationComplete();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)         } catch (ConfigurationIncompleteException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)             return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)     private void loadOutgoingMessageProcessor() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)         Timber.tag(""MQTT"").d(""Reloading outgoing message processor. ThreadID: %s"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         if (endpoint != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)             endpoint.onDestroy();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         eventBus.postSticky(queueEvent.withNewLength(outgoingQueue.size()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         switch (preferences.getMode()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)             case MessageProcessorEndpointHttp.MODE_ID:
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)                 this.endpoint = new MessageProcessorEndpointHttp(this, this.parser, this.preferences, this.scheduler, this.applicationContext);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)             case MessageProcessorEndpointMqtt.MODE_ID:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)             default:
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)                 this.endpoint = new MessageProcessorEndpointMqtt(this, this.parser, this.preferences, this.scheduler, this.eventBus, this.runThingsOnOtherThreads, this.applicationContext);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)         if (backgroundDequeueThread == null || !backgroundDequeueThread.isAlive()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)             // Create the background thread that will handle outbound msgs
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)             backgroundDequeueThread = new Thread(this::sendAvailableMessages);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)             backgroundDequeueThread.start();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         this.endpoint.onCreateFromProcessor();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         acceptMessages = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)     public void queueMessageForSending(MessageBase message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         if (!acceptMessages) return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)         outgoingQueueIdlingResource.increment();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)         Timber.d(""Queueing messageId:%s, queueLength:%s, ThreadID: %s"", message.getMessageId(), outgoingQueue.size(), Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)         synchronized (outgoingQueue) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)             if (!outgoingQueue.offer(message)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)                 MessageBase droppedMessage = outgoingQueue.poll();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)                 Timber.e(""Outoing queue full. Dropping oldest message: %s"", droppedMessage);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)                 if (!outgoingQueue.offer(message)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)                     Timber.e(""Still can't put message onto the queue. Dropping: %s"", message);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)         eventBus.postSticky(queueEvent.withNewLength(outgoingQueue.size()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)     // Should be on the background thread here, because we block"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)     private void sendAvailableMessages() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)         Timber.d(""Starting outbound message loop. ThreadID: %s"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)         MessageBase lastFailedMessageToBeRetried = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)         long retryWait = SEND_FAILURE_BACKOFF_INITIAL_WAIT;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)         while (true) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)                 MessageBase message;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)                 if (lastFailedMessageToBeRetried == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)                     message = this.outgoingQueue.take(); // <--- blocks
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)                 } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)                     message = lastFailedMessageToBeRetried;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)                 /*
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)                 We need to run the actual network sending part on a different thread because the
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)                 implementation might not be thread-safe. So we wrap `sendMessage()` up in a callable
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)                 and a FutureTask and then dispatch it off to the network thread, and block on the"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)                 return, handling any exceptions that might have been thrown."
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)                 */
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)                 Callable<Void> sendMessageCallable = () -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)                     this.endpoint.sendMessage(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)                     return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)                 };
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)                 FutureTask<Void> futureTask = new FutureTask<>(sendMessageCallable);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)                 runThingsOnOtherThreads.postOnNetworkHandlerDelayed(futureTask, 1);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)                 try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)                     try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)                         futureTask.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)                     } catch (ExecutionException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)                         if (e.getCause() != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)                             throw e.getCause();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)                         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)                             throw new Exception(""sendMessage failed, but no exception actually given"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)                     lastFailedMessageToBeRetried = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)                     retryWait = SEND_FAILURE_BACKOFF_INITIAL_WAIT;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)                 } catch (OutgoingMessageSendingException | ConfigurationIncompleteException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)                     Timber.w((""Error sending message. Re-queueing""));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)                     lastFailedMessageToBeRetried = message;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)                 } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)                     retryWait = SEND_FAILURE_BACKOFF_INITIAL_WAIT;
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)                     // Deserialization failure, drop and move on"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)                 } catch (Throwable e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)                     Timber.e(e, ""Unhandled exception in sending message"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)                 if (lastFailedMessageToBeRetried != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)                     Thread.sleep(retryWait);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)                     retryWait = Math.min(2 * retryWait, SEND_FAILURE_BACKOFF_MAX_WAIT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)                 } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)                     outgoingQueueIdlingResource.decrement();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)             } catch (InterruptedException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)                 Timber.i(e, ""Outgoing message loop interrupted"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)         Timber.w(""Exiting outgoingmessage loop"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)     @SuppressWarnings(""UnusedParameters"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)     @Subscribe(priority = 10, threadMode = ThreadMode.ASYNC)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)     public void onEvent(Events.ModeChanged event) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)         acceptMessages = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)         loadOutgoingMessageProcessor();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)     @SuppressWarnings(""UnusedParameters"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)     @Subscribe(priority = 10, threadMode = ThreadMode.ASYNC)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)     public void onEvent(Events.EndpointChanged event) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)         acceptMessages = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)         loadOutgoingMessageProcessor();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)     void onMessageDelivered(MessageBase messageBase) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)         Timber.d(""onMessageDelivered in MessageProcessor Noop. ThreadID: %s"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294)         eventBus.postSticky(queueEvent.withNewLength(outgoingQueue.size()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)         eventBus.post(messageBase);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 296)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 297)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 298)     void onMessageDeliveryFailedFinal(Long messageId) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 299)         Timber.e(""Message delivery failed, not retryable. :%s"", messageId);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 300)         eventBus.postSticky(queueEvent.withNewLength(outgoingQueue.size()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 301)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 302)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 303)     void onMessageDeliveryFailed(Long messageId) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 304)         Timber.e(""Message delivery failed. queueLength: %s, messageId: %s"", outgoingQueue.size(), messageId);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 305)         eventBus.postSticky(queueEvent.withNewLength(outgoingQueue.size()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 306)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 307)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 308)     void onEndpointStateChanged(EndpointState newState) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 309)         Timber.d(""message:%s, "", newState.getMessage());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 310)         eventBus.postSticky(newState);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 311)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 312)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 313)     public void processIncomingMessage(MessageBase message) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 314)         Timber.d(""Received incoming message: %s on %s"", message.getClass().getSimpleName(), message.getContactKey());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 315)         if (message instanceof MessageClear) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 316)             processIncomingMessage((MessageClear) message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 317)         } else if (message instanceof MessageLocation) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 318)             processIncomingMessage((MessageLocation) message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 319)         } else if (message instanceof MessageCard) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 320)             processIncomingMessage((MessageCard) message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 321)         } else if (message instanceof MessageCmd) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 322)             processIncomingMessage((MessageCmd) message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 323)         } else if (message instanceof MessageTransition) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 324)             processIncomingMessage((MessageTransition) message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 325)         } else if (message instanceof MessageUnknown) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 326)             processIncomingMessage((MessageUnknown) message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 327)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 328)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 329)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 330)     private void processIncomingMessage(MessageUnknown message) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 331)         Timber.i(""Unknown message received on %s"", message.getContactKey());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 332)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 333)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 334)     private void processIncomingMessage(MessageClear message) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 335)         Timber.d(""processing clear message %s. ThreadID: %s"", message.getContactKey(), Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 336)         contactsRepo.remove(message.getContactKey());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 337)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 338)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 339)     private void processIncomingMessage(MessageLocation message) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 340)         Timber.d(""processing location message %s. ThreadID: %s"", message.getContactKey(), Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 341)         // do not use TimeUnit.DAYS.toMillis to avoid long/double conversion issues...
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 342)         if ((preferences.getIgnoreStaleLocations() > 0) && (System.currentTimeMillis() - ((message).getTimestamp() * 1000)) > (preferences.getIgnoreStaleLocations() * 24 * 60 * 60 * 1000)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 343)             Timber.e(""discarding stale location"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 344)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 345)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 346)         contactsRepo.update(message.getContactKey(), message);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 347)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 348)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 349)     private void processIncomingMessage(MessageCard message) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 350)         contactsRepo.update(message.getContactKey(), message);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 351)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 352)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 353)     private void processIncomingMessage(MessageCmd message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 354)         if (!preferences.getRemoteCommand()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 355)             Timber.w(""remote commands are disabled"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 356)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 357)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 358)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 359)         if (message.getModeId() != MessageProcessorEndpointHttp.MODE_ID &&
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 360)                 !preferences.getPubTopicCommands().equals(message.getTopic())
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 361)         ) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 362)             Timber.e(""cmd message received on wrong topic"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 363)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 364)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 365)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 366)         if (!message.isValidMessage()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 367)             Timber.e(""Invalid action message received"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 368)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 369)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 370)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 371)         switch (message.getAction()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 372)             case REPORT_LOCATION:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 373)                 if (message.getModeId() != MessageProcessorEndpointMqtt.MODE_ID) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 374)                     Timber.e(""command not supported in HTTP mode: %s"", message.getAction());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 375)                     break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 376)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 377)                 serviceBridge.requestOnDemandLocationFix();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 378)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 379)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 380)             case WAYPOINTS:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 381)                 locationProcessorLazy.get().publishWaypointsMessage();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 382)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 383)             case SET_WAYPOINTS:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 384)                 if (message.getWaypoints() != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 385)                     waypointsRepo.importFromMessage(message.getWaypoints().getWaypoints());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 386)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 387)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 388)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 389)             case SET_CONFIGURATION:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 390)                 if (!preferences.getRemoteConfiguration()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 391)                     Timber.w(""Received a remote configuration command but remote config setting is disabled"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 392)                     break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 393)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 394)                 preferences.importFromMessage(message.getConfiguration());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 395)                 if (message.getWaypoints() != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 396)                     waypointsRepo.importFromMessage(message.getWaypoints().getWaypoints());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 397)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 398)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 399)             case RECONNECT:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 400)                 if (message.getModeId() != MessageProcessorEndpointHttp.MODE_ID) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 401)                     Timber.e(""command not supported in HTTP mode: %s"", message.getAction());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 402)                     break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 403)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 404)                 reconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 405)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 406)             case RESTART:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 407)                 eventBus.post(new Events.RestartApp());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 408)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 409)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 410)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 411)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 412)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 413)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 414)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 415)     private void processIncomingMessage(MessageTransition message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 416)         eventBus.post(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 417)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 418)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 419)     public enum EndpointState {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 420)         INITIAL,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 421)         IDLE,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 422)         CONNECTING,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 423)         CONNECTED,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 424)         DISCONNECTING,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 425)         DISCONNECTED,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 426)         DISCONNECTED_USERDISCONNECT,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 427)         ERROR,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 428)         ERROR_DATADISABLED,"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 429)         ERROR_CONFIGURATION;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 430)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 431)         String message;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 432)         private Throwable error;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 433)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 434)         public String getMessage() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 435)             if (message == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 436)                 if (error != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 437)                     if (error instanceof MqttException && error.getCause() != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 438)                         if (error.getMessage() != null && error.getMessage().equals(""MqttException"")) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 439)                             return String.format(""MQTT Error: %s"", error.getCause().getMessage());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 440)                         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 441)                         return String.format(""MQTT Error: %s"", error.getMessage());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 442)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 443)                     return error.getMessage();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 444)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 445)                 return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 446)             } else if (error != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 447)                 return String.format(Locale.ROOT, ""%s: %s"", message, error.getMessage());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 448)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 449)             return message;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 450)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 451)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 452)         public Throwable getError() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 453)             return error;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 454)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 455)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 456)         public EndpointState withMessage(String message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 457)             this.message = message;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 458)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 459)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 460)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 461)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 462)         public String getLabel(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 463)             Resources res = context.getResources();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 464)             int resId = res.getIdentifier(this.name(), ""string"", context.getPackageName());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 465)             if (0 != resId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 466)                 return (res.getString(resId));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 467)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 468)             return (name());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 469)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 470)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 471)         public EndpointState withError(Throwable error) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 472)             this.error = error;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 473)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 474)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 475)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 476) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.model.messages.MessageBase;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.support.interfaces.ConfigurationIncompleteException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.support.interfaces.OutgoingMessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public abstract class MessageProcessorEndpoint implements OutgoingMessageProcessor {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     MessageProcessor messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     MessageProcessorEndpoint(MessageProcessor messageProcessor) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         this.messageProcessor = messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     void onMessageReceived(MessageBase message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         message.setIncoming();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         message.setModeId(getModeId());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         messageProcessor.processIncomingMessage(onFinalizeMessage(message));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     protected abstract MessageBase onFinalizeMessage(MessageBase message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     abstract int getModeId();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     abstract void sendMessage(MessageBase m) throws ConfigurationIncompleteException, OutgoingMessageSendingException, IOException;"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29) class OutgoingMessageSendingException extends Exception {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     OutgoingMessageSendingException(Exception e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         super(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpoint.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.SharedPreferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import com.fasterxml.jackson.core.JsonProcessingException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.owntracks.android.BuildConfig;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.model.messages.MessageBase;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.services.MessageProcessor.EndpointState;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.services.worker.Scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.support.Parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.support.SocketFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.support.interfaces.ConfigurationIncompleteException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.support.preferences.OnModeChangedPreferenceChangedListener;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import java.io.FileNotFoundException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import java.util.Collections;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import java.util.Locale;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import javax.net.ssl.X509TrustManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import okhttp3.CacheControl;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import okhttp3.ConnectionPool;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import okhttp3.Credentials;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import okhttp3.HttpUrl;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import okhttp3.MediaType;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import okhttp3.OkHttpClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import okhttp3.Protocol;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import okhttp3.Request;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import okhttp3.RequestBody;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38) import okhttp3.Response;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41) public class MessageProcessorEndpointHttp extends MessageProcessorEndpoint implements OnModeChangedPreferenceChangedListener {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     public static final int MODE_ID = 3;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     // Headers according to https://github.com/owntracks/recorder#http-mode
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     static final String HEADER_USERNAME = ""X-Limit-U"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     static final String HEADER_DEVICE = ""X-Limit-D"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     private static final String HEADER_USERAGENT = ""User-Agent"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     static final String METHOD = ""POST"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     static final String HEADER_AUTHORIZATION = ""Authorization"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     private static String httpEndpointHeaderUser = """";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     private static String httpEndpointHeaderDevice = """";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     private static String httpEndpointHeaderPassword = """";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     private static OkHttpClient mHttpClient;
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     private static final MediaType JSON  = MediaType.parse(""application/json; charset=utf-8"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     public static final String USERAGENT = ""Owntracks/""+ BuildConfig.VERSION_CODE;"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     private static final String HTTPTOPIC = ""owntracks/http/"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     private Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     private Parser parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     private Scheduler scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     private Context applicationContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     private HttpUrl httpEndpoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     public MessageProcessorEndpointHttp(MessageProcessor messageProcessor, Parser parser, Preferences preferences, Scheduler scheduler, Context applicationContext) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         super(messageProcessor);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         this.parser = parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         this.scheduler = scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         this.applicationContext = applicationContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         preferences.registerOnPreferenceChangedListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         loadEndpointUrl();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     public void onCreateFromProcessor() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             checkConfigurationComplete();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         } catch (ConfigurationIncompleteException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             messageProcessor.onEndpointStateChanged(EndpointState.ERROR_CONFIGURATION.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     @Nullable
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     private SocketFactory getSocketFactory() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         String tlsCaCrt = preferences.getTlsCaCrt();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         String tlsClientCrt = preferences.getTlsClientCrt();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         if(tlsCaCrt.length() == 0 && tlsClientCrt.length() == 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         SocketFactory.SocketFactoryOptions socketFactoryOptions = new SocketFactory.SocketFactoryOptions();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         if (tlsCaCrt.length() > 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)                 socketFactoryOptions.withCaInputStream(applicationContext.openFileInput(tlsCaCrt));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)             } catch (FileNotFoundException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)                 Timber.e(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)                 return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         if (tlsClientCrt.length() > 0)	{
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)                 socketFactoryOptions.withClientP12InputStream(applicationContext.openFileInput(tlsClientCrt)).withClientP12Password(preferences.getTlsClientCrtPassword());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)             } catch (FileNotFoundException e1) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)                 Timber.e(e1);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)                 return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)             return new SocketFactory(socketFactoryOptions);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         } catch (Exception e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     private OkHttpClient getHttpClient() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         if(preferences.getDontReuseHttpClient()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)             return createHttpClient();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         if(mHttpClient == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)             mHttpClient = createHttpClient();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         return mHttpClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     private OkHttpClient createHttpClient() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         Timber.d(""creating new HTTP client instance"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         SocketFactory f = getSocketFactory();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         OkHttpClient.Builder builder = new OkHttpClient.Builder()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)                 .followRedirects(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                 .followSslRedirects(true)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)                 .connectTimeout(15, TimeUnit.SECONDS)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)                 .connectionPool(new ConnectionPool(1, 1, TimeUnit.MICROSECONDS))"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)                 .retryOnConnectionFailure(false)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)                 .protocols(Collections.singletonList(Protocol.HTTP_1_1))
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)                 .cache(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         if(f != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)             builder.sslSocketFactory(f, (X509TrustManager) f.getTrustManagers()[0]);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         return builder.build();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     private void loadEndpointUrl() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)             httpEndpointHeaderUser = preferences.getUsername();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)             httpEndpointHeaderDevice = preferences.getDeviceId();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)             httpEndpoint = HttpUrl.get(preferences.getUrl());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)             if(!httpEndpoint.username().isEmpty() && !httpEndpoint.password().isEmpty()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)                 httpEndpointHeaderUser = httpEndpoint.username();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)                 httpEndpointHeaderPassword = httpEndpoint.password();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)             } else if(!preferences.getPassword().trim().equals("""")) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)                 httpEndpointHeaderPassword = preferences.getPassword();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)             messageProcessor.onEndpointStateChanged(EndpointState.IDLE);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         } catch (IllegalArgumentException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)             httpEndpoint = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)             messageProcessor.onEndpointStateChanged(EndpointState.ERROR_CONFIGURATION.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)     @Nullable
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)     Request getRequest(MessageBase message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)             this.checkConfigurationComplete();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         } catch (ConfigurationIncompleteException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         Timber.d(""url:%s, messageId:%s"", this.httpEndpoint, message.getMessageId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         String body;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)             body = message.toJson(parser);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)         } catch (IOException e) { // Message serialization failed. This shouldn't happen.
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)             messageProcessor.onEndpointStateChanged(EndpointState.ERROR.withMessage(e.getMessage()));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         // Any exception here (invalid header value, invalid URL, etc) will persist for all future messages until configuration is fixed."
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         // Setting httpEndpoint to null will make sure no message can be send until the problem is corrected.
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)             Request.Builder request = new Request.Builder().url(this.httpEndpoint).header(HEADER_USERAGENT,USERAGENT).method(METHOD, RequestBody.create(JSON, body));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)             if(isSet(httpEndpointHeaderUser) && isSet(httpEndpointHeaderPassword)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)                 request.header(HEADER_AUTHORIZATION, Credentials.basic(httpEndpointHeaderUser, httpEndpointHeaderPassword));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)             if (isSet(httpEndpointHeaderUser)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)                 request.header(HEADER_USERNAME, httpEndpointHeaderUser);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)             if (isSet(httpEndpointHeaderDevice)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)                 request.header(HEADER_DEVICE, httpEndpointHeaderDevice);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)             request.cacheControl(CacheControl.FORCE_NETWORK);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)             return request.build();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)         } catch (Exception e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)             Timber.e(e,""invalid header specified"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)             messageProcessor.onEndpointStateChanged(EndpointState.ERROR_CONFIGURATION.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)             httpEndpoint = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)     private static boolean isSet(String str) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)         return str != null && str.length() > 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)     void sendMessage(MessageBase message) throws OutgoingMessageSendingException {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)         long messageId = message.getMessageId();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)         Request request = getRequest(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         if(request == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)             messageProcessor.onMessageDeliveryFailedFinal(message.getMessageId());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)         try(Response response = getHttpClient().newCall(request).execute()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)             // Message was send. Handle delivered message
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)             if((response.isSuccessful())) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)                 Timber.d(""request was successful: %s"",response);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)                 // Handle response
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)                 if(response.body() != null ) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)                     try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)                         MessageBase[] result = parser.fromJson(response.body().byteStream());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)                         //TODO apply i18n here
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)                         messageProcessor.onEndpointStateChanged(EndpointState.IDLE.withMessage(String.format(Locale.ROOT,""Response %d, (%d msgs received)"", response.code(), result.length)));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)                         for (MessageBase aResult : result) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)                             onMessageReceived(aResult);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)                     } catch (JsonProcessingException e ) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)                         Timber.e(""JsonParseException HTTP status: %s"", response.code());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)                         messageProcessor.onEndpointStateChanged(EndpointState.IDLE.withMessage(String.format(Locale.ROOT,""HTTP status %d, JsonParseException"", response.code())));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)                     } catch (Parser.EncryptionException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)                         Timber.e(""JsonParseException HTTP status: %s"", response.code());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)                         messageProcessor.onEndpointStateChanged(EndpointState.ERROR.withMessage(String.format(Locale.ROOT,""HTTP status: %d, EncryptionException"", response.code())));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)             // Server could be contacted but returned non success HTTP code
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)                 Exception httpException = new Exception(String.format(""HTTP request failed. Status: %s"", response.code()));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)                 Timber.e(httpException);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)                 messageProcessor.onEndpointStateChanged(EndpointState.ERROR.withMessage(String.format(Locale.ROOT, ""HTTP code %d"", response.code())));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)                 messageProcessor.onMessageDeliveryFailed(messageId);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)                 throw new OutgoingMessageSendingException(httpException);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         // Message was not send
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)         } catch (IOException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)             Timber.e(e, ""HTTP Delivery failed "");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)             messageProcessor.onEndpointStateChanged(EndpointState.ERROR.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)             messageProcessor.onMessageDeliveryFailed(messageId);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)             throw new OutgoingMessageSendingException(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)         messageProcessor.onMessageDelivered(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)     public void onDestroy() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)         scheduler.cancelHttpTasks();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)         preferences.unregisterOnPreferenceChangedListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)     public void onAttachAfterModeChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)         //NOOP
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)     public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)         if (
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)                 preferences.getPreferenceKey(R.string.preferenceKeyURL).equals(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)                         || preferences.getPreferenceKey(R.string.preferenceKeyUsername).equals(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)                         || preferences.getPreferenceKey(R.string.preferenceKeyPassword).equals(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)                         || preferences.getPreferenceKey(R.string.preferenceKeyDeviceId).equals(key))
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)             loadEndpointUrl();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294)         else if (preferences.getPreferenceKey(R.string.preferenceKeyTLSClientCrt).equals(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)                 || preferences.getPreferenceKey(R.string.preferenceKeyTLSClientCrtPassword).equals(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 296)                 || preferences.getPreferenceKey(R.string.preferenceKeyTLSCaCrt).equals(key))
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 297)             mHttpClient = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 298)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 299)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 300)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 301)     public void checkConfigurationComplete() throws ConfigurationIncompleteException {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 302)         if (this.httpEndpoint==null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 303)         {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 304)             throw new ConfigurationIncompleteException(""HTTP Endpoint is missing"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 305)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 306)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 307)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 308)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 309)     int getModeId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 310)         return MODE_ID;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 311)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 312)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 313)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 314)     protected MessageBase onFinalizeMessage(MessageBase message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 315)         // Build pseudo topic based on tid
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 316)         if(message.hasTrackerId()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 317)             message.setTopic(HTTPTOPIC + message.getTrackerId());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 318)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 319)         return message;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 320)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointHttp.java (<eulerhm@dcc.ufmg.br> 2022-12-20 321) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.SharedPreferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.os.Build;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.os.Looper;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.annotation.WorkerThread;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.eclipse.paho.client.mqttv3.MqttAsyncClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.eclipse.paho.client.mqttv3.MqttCallbackExtended;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.eclipse.paho.client.mqttv3.MqttClientPersistence;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.eclipse.paho.client.mqttv3.MqttException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.eclipse.paho.client.mqttv3.MqttMessage;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.eclipse.paho.client.mqttv3.MqttPersistable;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.jetbrains.annotations.NotNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.json.JSONException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.json.JSONObject;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.model.messages.MessageBase;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.owntracks.android.model.messages.MessageCard;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.owntracks.android.model.messages.MessageClear;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.services.MessageProcessor.EndpointState;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.owntracks.android.services.worker.Scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.owntracks.android.support.Parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import org.owntracks.android.support.RunThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import org.owntracks.android.support.SocketFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import org.owntracks.android.support.interfaces.ConfigurationIncompleteException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import org.owntracks.android.support.interfaces.StatefulServiceMessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import org.owntracks.android.support.preferences.OnModeChangedPreferenceChangedListener;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import java.io.FileInputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38) import java.io.FileNotFoundException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40) import java.io.InputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41) import java.net.URI;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42) import java.net.URISyntaxException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43) import java.security.KeyManagementException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44) import java.security.KeyStoreException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45) import java.security.NoSuchAlgorithmException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46) import java.security.UnrecoverableKeyException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47) import java.security.cert.CertificateException;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48) import java.security.cert.CertificateFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49) import java.security.cert.X509Certificate;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50) import java.util.Arrays;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51) import java.util.Enumeration;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52) import java.util.Hashtable;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53) import java.util.Set;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54) import java.util.TreeSet;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55) import java.util.concurrent.Semaphore;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60) import static org.owntracks.android.support.RunThingsOnOtherThreads.NETWORK_HANDLER_THREAD_NAME;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62) public class MessageProcessorEndpointMqtt extends MessageProcessorEndpoint implements StatefulServiceMessageProcessor, OnModeChangedPreferenceChangedListener {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     public static final int MODE_ID = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     private CustomMqttClient mqttClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     private String lastConnectionId;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     private static MessageProcessor.EndpointState state;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     private MessageProcessor messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     private RunThingsOnOtherThreads runThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     private Context applicationContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     private Parser parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     private Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)     private Scheduler scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     private EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     MessageProcessorEndpointMqtt(MessageProcessor messageProcessor, Parser parser, Preferences preferences, Scheduler scheduler, EventBus eventBus, RunThingsOnOtherThreads runThingsOnOtherThreads, Context applicationContext) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         super(messageProcessor);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         this.parser = parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         this.scheduler = scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         this.eventBus = eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         this.messageProcessor = messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         this.runThingsOnOtherThreads = runThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         this.applicationContext = applicationContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         if (preferences != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             preferences.registerOnPreferenceChangedListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     void reconnectAndSendKeepalive(Semaphore completionNotifier) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         if (!Thread.currentThread().getName().equals(NETWORK_HANDLER_THREAD_NAME)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             runThingsOnOtherThreads.postOnNetworkHandlerDelayed(() -> reconnectAndSendKeepalive(completionNotifier), 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)             if (!checkConnection()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)                 reconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)             if (checkConnection()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)                 Timber.tag(""MQTT"").d(""PING!"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)                 mqttClient.ping();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         } finally {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             if (completionNotifier != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)                 completionNotifier.release();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     synchronized void sendMessage(MessageBase m) throws ConfigurationIncompleteException, OutgoingMessageSendingException, IOException {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         m.addMqttPreferences(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         long messageId = m.getMessageId();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)             connectToBroker();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         } catch (MqttConnectionException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             Timber.w(""failed connection attempts :%s"", sendMessageConnectPressure);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)             messageProcessor.onMessageDeliveryFailed(messageId);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)             throw new OutgoingMessageSendingException(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)         } catch (ConfigurationIncompleteException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)             Timber.w(""failed connection attempts :%s"", sendMessageConnectPressure);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)             messageProcessor.onMessageDeliveryFailed(messageId);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)             throw e;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)             IMqttDeliveryToken pubToken = this.mqttClient.publish(m.getTopic(), m.toJsonBytes(parser), m.getQos(), m.getRetained());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)             long startTime = System.nanoTime();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)             pubToken.waitForCompletion(TimeUnit.SECONDS.toMillis(30));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)             long endTime = System.nanoTime();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)             long duration = (endTime - startTime);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)             Timber.d(""message id %s sent in %dms"", messageId, TimeUnit.NANOSECONDS.toMillis(duration));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)             messageProcessor.onMessageDelivered(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         } catch (MqttException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)             Timber.e(e, ""MQTT Exception delivering message"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)             messageProcessor.onMessageDeliveryFailed(messageId);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)             throw new OutgoingMessageSendingException(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)             // Message will not contain BUNDLE_KEY_ACTION and will be dropped by scheduler
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)             Timber.e(e, ""JSON serialization failed for message %s. Message will be dropped"", m.getMessageId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)             messageProcessor.onMessageDeliveryFailedFinal(messageId);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)             throw e;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)     private final MqttCallbackExtended iCallbackClient = new MqttCallbackExtended() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         public void connectComplete(boolean reconnect, String serverURI) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)             Timber.d(""Connect Complete. Reconnected: %s, serverUri:%s"", reconnect, serverURI);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)             onConnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         public void deliveryComplete(IMqttDeliveryToken token) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         public void connectionLost(Throwable cause) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)             Timber.tag(""MQTT"").e(cause, ""connectionLost error"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)             scheduler.cancelMqttPing();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)             changeState(EndpointState.DISCONNECTED.withError(cause));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)             scheduler.scheduleMqttReconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         public void messageArrived(String topic, MqttMessage message) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)                 MessageBase m = parser.fromJson(message.getPayload());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)                 if (!m.isValidMessage()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)                     Timber.e(""message failed validation"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)                 m.setTopic(topic);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)                 m.setRetained(message.isRetained());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)                 m.setQos(message.getQos());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)                 onMessageReceived(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)             } catch (Parser.EncryptionException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)                 Timber.e(e, ""Decryption failure payload:%s "", new String(message.getPayload()));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)             } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)                 if (message.getPayload().length == 0) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)                     Timber.d(""clear message received: %s"", topic);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)                     MessageClear m = new MessageClear();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)                     m.setTopic(topic.replace(MessageCard.BASETOPIC_SUFFIX, """"));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)                     onMessageReceived(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)                 } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)                     Timber.e(e, ""payload: %s "", new String(message.getPayload()));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     };
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)     private CustomMqttClient buildMqttClient() throws URISyntaxException, MqttException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         Timber.d(""Initializing new mqttClient"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         String scheme = ""tcp"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)         if (preferences.getTls()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)             if (preferences.getWs()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)                 scheme = ""wss"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)             } else
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)                 scheme = ""ssl"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)             if (preferences.getWs())
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)                 scheme = ""ws"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)         String cid = preferences.getClientId();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)         String connectString = new URI(scheme, null, preferences.getHost(), preferences.getPort(), null, null, null).toString();"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)         Timber.d(""client id :%s, connect string: %s"", cid, connectString);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)             CustomMqttClient mqttClient = new CustomMqttClient(connectString, cid, new MqttClientMemoryPersistence());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)             mqttClient.setCallback(iCallbackClient);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)             return mqttClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)         } catch (IllegalArgumentException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)             throw new URISyntaxException(connectString, ""Invalid URL"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)     private int sendMessageConnectPressure = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)     @WorkerThread
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)     private synchronized void connectToBroker() throws MqttConnectionException, ConfigurationIncompleteException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)         Timber.d(""Connecting to broker. ThreadId: %s"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)         sendMessageConnectPressure++;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)         boolean isUiThread = Build.VERSION.SDK_INT >= Build.VERSION_CODES.M ? Looper.getMainLooper().isCurrentThread()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)                 : Thread.currentThread() == Looper.getMainLooper().getThread();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         if (isConnected()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)             Timber.d(""already connected to broker"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)             changeState(getState()); // Background service might be restarted and not get the connection state
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)         if (isConnecting()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)             Timber.d(""already connecting"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)             checkConfigurationComplete();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)         } catch (ConfigurationIncompleteException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)             changeState(EndpointState.ERROR_CONFIGURATION.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)             throw e;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         if (isUiThread) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)             throw new RuntimeException(""BLOCKING CONNECT ON MAIN THREAD"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)             Timber.d(""Connecting on non-ui worker thread: %s"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)         changeState(EndpointState.CONNECTING);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)             this.mqttClient = buildMqttClient();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)         } catch (URISyntaxException | MqttException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)             Timber.e(e, ""Error creating MQTT client"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)             changeState(EndpointState.ERROR.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)             throw new MqttConnectionException(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         MqttConnectOptions mqttConnectOptions = getMqttConnectOptions();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)             Timber.v(""MQTT connecting synchronously"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)             this.mqttClient.connect(mqttConnectOptions).waitForCompletion();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)         } catch (MqttException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)             changeState(EndpointState.ERROR.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)             throw new MqttConnectionException(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)         Timber.d(""MQTT Connected success."");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)         scheduler.scheduleMqttMaybeReconnectAndPing(mqttConnectOptions.getKeepAliveInterval());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)         changeState(EndpointState.CONNECTED);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)         sendMessageConnectPressure = 0; // allow new connection attempts from queueMessageForSending
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)     private MqttConnectOptions getMqttConnectOptions() throws MqttConnectionException {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)         MqttConnectOptions connectOptions = new MqttConnectOptions();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)         /* Even though the MQTT spec supports various different combinations of setting the username
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)         & password flags to allow and differentiate between no usernames, empty usernames etc. there's"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)         too many permutations of these to usefully expose to the end user. So, to simplify: if the"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)         username is not the empty string, send the username and password. If it is empty, then don't"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)         send either.
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)         This might change depending on what users want.
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)          */
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)         if (!preferences.getUsername().trim().equals("""")) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)             connectOptions.setUserName(preferences.getUsername());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)             connectOptions.setPassword(preferences.getPassword().toCharArray());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 296)         connectOptions.setMqttVersion(preferences.getMqttProtocolLevel());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 297)         InputStream clientCaInputStream = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 298)         InputStream clientCertInputStream = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 299)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 300)             if (preferences.getTls()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 301)                 String tlsCaCrt = preferences.getTlsCaCrt();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 302)                 String tlsClientCrt = preferences.getTlsClientCrt();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 303)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 304)                 SocketFactory.SocketFactoryOptions socketFactoryOptions = new SocketFactory.SocketFactoryOptions();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 305)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 306)                 if (tlsCaCrt.length() > 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 307)                     try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 308)                         clientCaInputStream = applicationContext.openFileInput(tlsCaCrt);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 309)                         socketFactoryOptions.withCaInputStream(clientCaInputStream);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 310)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 311)                         /* The default for paho is to validate hostnames as per the HTTPS spec. However, this causes"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 312)                         a bit of a breakage for some users using self-signed certificates, where the verification of"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 313)                         the hostname is unnecessary under certain circumstances. Specifically when the fingerprint of
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 314)                         the server leaf certificate is the same as the certificate supplied as the CA (as would be the
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 315)                         case using self-signed certs.
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 316)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 317)                         So we turn off HTTPS behaviour and supply our own hostnameverifier that knows about the self-signed
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 318)                         case.
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 319)                          */
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 320)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 321)                         connectOptions.setHttpsHostnameVerificationEnabled(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 322)                         try (FileInputStream caFileInputStream = applicationContext.openFileInput(tlsCaCrt)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 323)                             X509Certificate ca = (X509Certificate) CertificateFactory.getInstance(""X.509"").generateCertificate(caFileInputStream);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 324)                             connectOptions.setSSLHostnameVerifier(new MqttHostnameVerifier(ca));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 325)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 326)                     } catch (FileNotFoundException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 327)                         Timber.e(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 328)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 329)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 330)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 331)                 if (tlsClientCrt.length() > 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 332)                     try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 333)                         clientCertInputStream = applicationContext.openFileInput(tlsClientCrt);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 334)                         socketFactoryOptions.withClientP12InputStream(clientCertInputStream).withClientP12Password(preferences.getTlsClientCrtPassword());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 335)                     } catch (FileNotFoundException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 336)                         Timber.e(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 337)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 338)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 339)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 340)                 connectOptions.setSocketFactory(new SocketFactory(socketFactoryOptions));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 341)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 342)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 343)         } catch (CertificateException | NoSuchAlgorithmException | UnrecoverableKeyException | KeyStoreException | KeyManagementException | IOException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 344)             changeState(EndpointState.ERROR.withError(e).withMessage(""TLS setup failed""));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 345)             throw new MqttConnectionException(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 346)         } finally {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 347)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 348)                 if (clientCaInputStream != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 349)                     clientCaInputStream.close();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 350)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 351)                 if (clientCertInputStream != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 352)                     clientCertInputStream.close();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 353)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 354)             } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 355)                 Timber.e(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 356)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 357)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 358)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 359)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 360)         setWill(connectOptions);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 361)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 362)         connectOptions.setKeepAliveInterval(preferences.getKeepalive());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 363)         connectOptions.setConnectionTimeout(30);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 364)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 365)         connectOptions.setCleanSession(preferences.getCleanSession());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 366)         return connectOptions;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 367)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 368)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 369)     private void setWill(MqttConnectOptions m) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 370)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 371)             JSONObject lwt = new JSONObject();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 372)             lwt.put(""_type"", ""lwt"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 373)             lwt.put(""tst"", (int) TimeUnit.MILLISECONDS.toSeconds(System.currentTimeMillis()));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 374)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 375)             m.setWill(preferences.getPubTopicBase(), lwt.toString().getBytes(), 0, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 376)         } catch (JSONException ignored) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 377)         } catch (IllegalArgumentException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 378)             changeState(EndpointState.ERROR_CONFIGURATION.withError(e).withMessage(""Invalid pubTopic specified""));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 379)             throw e;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 380)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 381)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 382)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 383)     private String getConnectionId() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 384)         return String.format(""%s/%s"", mqttClient.getCurrentServerURI(), mqttClient.getClientId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 385)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 386)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 387)     private void onConnect() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 388)         Timber.tag(""MQTT"").d(""MQTT connected!. Running onconnect handler (threadID %s)"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 389)         scheduler.cancelMqttReconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 390)         // Check if we're connecting to the same broker that we were already connected to
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 391)         String connectionId = getConnectionId();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 392)         if (lastConnectionId != null && !connectionId.equals(lastConnectionId)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 393)             eventBus.post(new Events.EndpointChanged());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 394)             lastConnectionId = connectionId;
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 395)             Timber.v(""lastConnectionId changed to: %s"", lastConnectionId);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 396)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 397)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 398)         if (!preferences.getSub()) // Don't subscribe if base topic is invalid
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 399)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 400)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 401)         Set<String> topics = getTopicsToSubscribeTo(
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 402)                 preferences.getSubTopic(),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 403)                 preferences.getInfo(),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 404)                 preferences.getPubTopicInfoPart(),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 405)                 preferences.getPubTopicEventsPart(),"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 406)                 preferences.getPubTopicWaypointsPart()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 407)         );
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 408)         // Receive commands for us
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 409)         topics.add(preferences.getPubTopicBase() + preferences.getPubTopicCommandsPart());
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 410)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 411)         subscribe(topics.toArray(new String[0]));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 412)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 413)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 414)     @NotNull
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 415)     Set<String> getTopicsToSubscribeTo(String subTopics, Boolean subscribeToInfo, String infoTopicSuffix, String eventsTopicSuffix, String waypointsTopicSuffix) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 416)         Set<String> topics = new TreeSet<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 417)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 418)         if (subTopics.equals(applicationContext.getString(R.string.defaultSubTopic))) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 419)             topics.add(subTopics);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 420)             if (subscribeToInfo) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 421)                 topics.add(subTopics + infoTopicSuffix);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 422)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 423)             topics.add(subTopics + eventsTopicSuffix);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 424)             topics.add(subTopics + waypointsTopicSuffix);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 425)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 426)             topics.addAll(Arrays.asList(subTopics.split("" "")));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 427)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 428)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 429)         return topics;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 430)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 431)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 432)     private void subscribe(String[] topics) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 433)         if (!isConnected()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 434)             Timber.e(""subscribe when not connected"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 435)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 436)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 437)         for (String s : topics) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 438)             Timber.v(""subscribe() - Will subscribe to: %s"", s);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 439)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 440)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 441)             int[] qos = getSubTopicsQos(topics);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 442)             this.mqttClient.subscribe(topics, qos);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 443)         } catch (MqttException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 444)             changeState(EndpointState.ERROR.withError(e).withMessage(""Subscribe failed""));"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 445)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 446)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 447)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 448)     private int[] getSubTopicsQos(String[] topics) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 449)         int[] qos = new int[topics.length];
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 450)         Arrays.fill(qos, preferences.getSubQos());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 451)         return qos;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 452)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 453)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 454)     private void unsubscribe(String[] topics) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 455)         if (!isConnected()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 456)             Timber.e(""subscribe when not connected"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 457)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 458)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 459)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 460)         for (String s : topics) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 461)             Timber.v(""unsubscribe() - Will unsubscribe from: %s"", s);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 462)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 463)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 464)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 465)             mqttClient.unsubscribe(topics);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 466)         } catch (Exception e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 467)             Timber.e(e, ""Unable to unsubscribe from topics"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 468)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 469)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 470)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 471)     private void disconnect(boolean fromUser) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 472)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 473)             throw new Exception();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 474)         } catch (Exception e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 475)             Timber.tag(""MQTT"").i(e);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 476)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 477)         Timber.tag(""MQTT"").d(""disconnect. Manually triggered? %s. ThreadID: %s"", fromUser, Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 478)         if (isConnecting()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 479)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 480)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 481)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 482)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 483)             if (isConnected()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 484)                 Timber.tag(""MQTT"").d(""Disconnecting"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 485)                 this.mqttClient.disconnect(0);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 486)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 487)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 488)         } catch (MqttException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 489)             Timber.e(e, ""Error disconnecting from broker"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 490)         } finally {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 491)             this.mqttClient = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 492)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 493)             if (fromUser)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 494)                 changeState(EndpointState.DISCONNECTED_USERDISCONNECT);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 495)             else
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 496)                 changeState(EndpointState.DISCONNECTED);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 497)             scheduler.cancelMqttPing();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 498)             scheduler.cancelMqttReconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 499)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 500)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 501)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 502)     public void reconnect() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 503)         reconnect(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 504)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 505)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 506)     public void reconnect(Semaphore completionNotifier) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 507)         if (!Thread.currentThread().getName().equals(NETWORK_HANDLER_THREAD_NAME)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 508)             runThingsOnOtherThreads.postOnNetworkHandlerDelayed(() -> reconnect(completionNotifier), 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 509)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 510)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 511)         if (isConnected() || isConnecting()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 512)             disconnect(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 513)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 514)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 515)             connectToBroker();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 516)         } catch (MqttConnectionException | ConfigurationIncompleteException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 517)             Timber.e(e, ""Failed to reconnect to MQTT broker"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 518)         } finally {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 519)             if (completionNotifier != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 520)                 completionNotifier.release();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 521)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 522)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 523)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 524)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 525)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 526)     public void disconnect() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 527)         disconnect(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 528)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 529)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 530)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 531)     public void checkConfigurationComplete() throws ConfigurationIncompleteException {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 532)         // Required to connect: host, username (only send when auth is enabled)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 533)         // When auth is enabled, password (unless usePassword is set to false which only sends username)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 534)         if (preferences.getHost().trim().isEmpty()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 535)             throw new ConfigurationIncompleteException(""Host missing"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 536)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 537)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 538)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 539)     @WorkerThread
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 540)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 541)     public boolean checkConnection() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 542)         return isConnected();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 543)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 544)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 545)     private void changeState(EndpointState newState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 546)         if (state == newState)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 547)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 548)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 549)         state = newState;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 550)         messageProcessor.onEndpointStateChanged(newState);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 551)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 552)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 553)     private boolean isConnected() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 554)         return this.mqttClient != null && this.mqttClient.isConnected();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 555)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 556)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 557)     private boolean isConnecting() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 558)         return (this.mqttClient != null) && (state == EndpointState.CONNECTING);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 559)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 560)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 561)     private static EndpointState getState() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 562)         return state;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 563)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 564)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 565)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 566)     public void onDestroy() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 567)         disconnect(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 568)         scheduler.cancelMqttTasks();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 569)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 570)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 571)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 572)     public void onCreateFromProcessor() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 573)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 574)             checkConfigurationComplete();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 575)             scheduler.scheduleMqttReconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 576)         } catch (ConfigurationIncompleteException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 577)             changeState(EndpointState.ERROR_CONFIGURATION.withError(e));
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 578)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 579)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 580)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 581)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 582)     public void onAttachAfterModeChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 583)         //NOOP
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 584)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 585)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 586)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 587)     public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 588)         if (preferences.getMode() != MessageProcessorEndpointMqtt.MODE_ID) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 589)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 590)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 591)         if (preferences.getPreferenceKey(R.string.preferenceKeyMqttProtocolLevel).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 592)                 preferences.getPreferenceKey(R.string.preferenceKeyHost).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 593)                 preferences.getPreferenceKey(R.string.preferenceKeyPassword).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 594)                 preferences.getPreferenceKey(R.string.preferenceKeyPort).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 595)                 preferences.getPreferenceKey(R.string.preferenceKeyClientId).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 596)                 preferences.getPreferenceKey(R.string.preferenceKeyTLS).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 597)                 preferences.getPreferenceKey(R.string.preferenceKeyTLSCaCrt).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 598)                 preferences.getPreferenceKey(R.string.preferenceKeyTLSClientCrt).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 599)                 preferences.getPreferenceKey(R.string.preferenceKeyTLSClientCrtPassword).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 600)                 preferences.getPreferenceKey(R.string.preferenceKeyWS).equals(key) ||
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 601)                 preferences.getPreferenceKey(R.string.preferenceKeyDeviceId).equals(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 602)         ) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 603)             Timber.d(""MQTT preferences changed. Reconnecting to broker. ThreadId: %s"", Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 604)             reconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 605)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 606)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 607)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 608)     private static final class MqttClientMemoryPersistence implements MqttClientPersistence {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 609)         private static Hashtable<String, MqttPersistable> data;"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 610)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 611)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 612)         public void open(String s, String s2) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 613)             if (data == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 614)                 data = new Hashtable<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 615)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 616)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 617)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 618)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 619)         public void close() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 620)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 621)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 622)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 623)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 624)         public void put(String key, MqttPersistable persistable) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 625)             data.put(key, persistable);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 626)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 627)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 628)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 629)         public MqttPersistable get(String key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 630)             return data.get(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 631)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 632)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 633)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 634)         public void remove(String key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 635)             data.remove(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 636)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 637)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 638)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 639)         public Enumeration keys() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 640)             return data.keys();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 641)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 642)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 643)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 644)         public void clear() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 645)             data.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 646)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 647)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 648)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 649)         public boolean containsKey(String key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 650)             return data.containsKey(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 651)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 652)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 653)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 654)     private static final class CustomMqttClient extends MqttAsyncClient {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 655)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 656)         CustomMqttClient(String serverURI, String clientId, MqttClientPersistence persistence) throws MqttException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 657)             super(serverURI, clientId, persistence);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 658)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 659)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 660)         void ping() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 661)             if (comms != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 662)                 comms.checkForActivity();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 663)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 664)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 665)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 666)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 667)     int getModeId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 668)         return MODE_ID;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 669)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 670)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 671)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 672)     protected MessageBase onFinalizeMessage(MessageBase message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 673)         // Not relevant for MQTT mode
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 674)         return message;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 675)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 676) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 677)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 678) class MqttConnectionException extends Exception {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 679)     MqttConnectionException(Exception e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 680)         super(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 681)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MessageProcessorEndpointMqtt.java (<eulerhm@dcc.ufmg.br> 2022-12-20 682) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.conscrypt.OkHostnameVerifier
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import java.security.MessageDigest
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import java.security.cert.Certificate
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import javax.net.ssl.HostnameVerifier
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import javax.net.ssl.SSLSession
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) /***
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * A Hostname verifier for use on MQTT connections that skips the verification if the server leaf
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * certificate matches the supplied CA certificate. This is typically for use with self-signed
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  * certificates where the CA is the same as the leaf cert presented by the MQTT endpoint.
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  */
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) class MqttHostnameVerifier(caCertificate: Certificate) : HostnameVerifier {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     private val caFingerprint: ByteArray = MessageDigest.getInstance(""SHA-1"").digest(caCertificate.encoded);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     override fun verify(hostname: String?, session: SSLSession?): Boolean {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         val peerCertificates = session?.peerCertificates
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         if (peerCertificates == null || peerCertificates.isEmpty()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)             Timber.e(""No server peer certificates presented for SSL session."")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)             return OkHostnameVerifier.INSTANCE.verify(emptyArray(), hostname, session)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         val cert = peerCertificates[0].encoded ?: byteArrayOf()
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         val fingerprint = MessageDigest.getInstance(""SHA-1"").digest(cert)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         return if (caFingerprint.contentEquals(fingerprint)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             Timber.i(""CA Fingerprint matches server leaf cert: %s. Skipping hostname verification"", fingerprint.joinToString("""") { ""%02x"".format(it) })"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)             true
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)             OkHostnameVerifier.INSTANCE.verify(emptyArray(), hostname, session)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/MqttHostnameVerifier.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services.worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.work.ListenableWorker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.work.WorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.work.WorkerParameters
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import javax.inject.Provider
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) class BackgroundWorkerFactory @Inject constructor(private val workerFactories: Map<Class<out ListenableWorker>, @JvmSuppressWildcards Provider<ChildWorkerFactory>>) : WorkerFactory() {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     override fun createWorker(appContext: Context, workerClassName: String, workerParameters: WorkerParameters): ListenableWorker {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         val foundEntry = workerFactories.entries.find { Class.forName(workerClassName).isAssignableFrom(it.key) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         val factoryProvider = foundEntry?.value
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)                 ?: throw IllegalArgumentException(""unknown worker class name: $workerClassName"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         return factoryProvider.get().create(appContext, workerParameters)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/BackgroundWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.services.worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4) import androidx.work.ListenableWorker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5) import androidx.work.WorkerParameters
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 6)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 7) interface ChildWorkerFactory {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 8)     fun create(appContext: Context, params: WorkerParameters): ListenableWorker"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/ChildWorkerFactory.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 9) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services.worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.work.ListenableWorker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.work.Worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.work.WorkerParameters
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.services.MessageProcessor
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) class MQTTMaybeReconnectAndPingWorker @Inject constructor(context: Context, workerParams: WorkerParameters, private val messageProcessor: MessageProcessor) : Worker(context, workerParams) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     override fun doWork(): Result {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         Timber.tag(""MQTT"").d(""MQTTMaybeReconnectAndPingWorker doing work on threadID: %s"", Thread.currentThread())"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         if (!messageProcessor.isEndpointConfigurationComplete) return Result.failure()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         return if (messageProcessor.statefulReconnectAndSendKeepalive()) Result.success() else Result.retry()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     class Factory @Inject constructor(private val messageProcessor: MessageProcessor) : ChildWorkerFactory {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         override fun create(appContext: Context, params: WorkerParameters): ListenableWorker = MQTTMaybeReconnectAndPingWorker(appContext, params, messageProcessor)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTMaybeReconnectAndPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services.worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.work.ListenableWorker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.work.Worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.work.WorkerParameters
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.services.MessageProcessor
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import java.util.concurrent.Semaphore
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class MQTTReconnectWorker(context: Context, workerParams: WorkerParameters, private val messageProcessor: MessageProcessor) : Worker(context, workerParams) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     override fun doWork(): Result {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         Timber.i(""MQTTReconnectWorker Doing work on threadID: %s"", Thread.currentThread())"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         if (!messageProcessor.isEndpointConfigurationComplete) return Result.failure()
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         // We're going to try and call messagePrcessor.reconnect() here, which may reinvoke itself on"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         // a different thread. One option here was to faff around with futures, but it seems easier just to"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         // Create a semaphore, pass it to the method and then just wait for it to be released, no matter where from."
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         val lock = Semaphore(1)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         lock.acquireUninterruptibly()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         messageProcessor.reconnect(lock)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         return try {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)             lock.acquire()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)             if (messageProcessor.statefulCheckConnection()) Result.success() else Result.retry()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         } catch (e: InterruptedException) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)             Result.failure()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     class Factory @Inject constructor(private val messageProcessor: MessageProcessor) : ChildWorkerFactory {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         override fun create(appContext: Context, params: WorkerParameters): ListenableWorker = MQTTReconnectWorker(appContext, params, messageProcessor)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/MQTTReconnectWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services.worker;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import androidx.work.BackoffPolicy;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.work.Constraints;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.work.NetworkType;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.work.OneTimeWorkRequest;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.work.PeriodicWorkRequest;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.work.WorkManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import androidx.work.WorkRequest;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.injection.qualifier.AppContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) public class Scheduler {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     public static final long MIN_PERIODIC_INTERVAL_MILLIS = PeriodicWorkRequest.MIN_PERIODIC_INTERVAL_MILLIS;
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     private static final String ONEOFF_TASK_SEND_MESSAGE_HTTP = ""SEND_MESSAGE_HTTP"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     private static final String ONEOFF_TASK_SEND_MESSAGE_MQTT = ""SEND_MESSAGE_MQTT"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     private static final String PERIODIC_TASK_SEND_LOCATION_PING = ""PERIODIC_TASK_SEND_LOCATION_PING"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     private static final String PERIODIC_TASK_MQTT_KEEPALIVE = ""PERIODIC_TASK_MQTT_KEEPALIVE"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private static final String ONETIME_TASK_MQTT_RECONNECT = ""PERIODIC_TASK_MQTT_RECONNECT"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private final Context context;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private final Constraints anyNetworkConstraint = new Constraints.Builder()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)             .setRequiredNetworkType(NetworkType.CONNECTED)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)             .build();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     public Scheduler(@AppContext Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         this.context = context;
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     public void cancelAllTasks() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         cancelMqttTasks();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         cancelHttpTasks();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         WorkManager.getInstance(this.context).cancelAllWorkByTag(PERIODIC_TASK_SEND_LOCATION_PING);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     public void cancelHttpTasks() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         Timber.tag(""MQTT"").d(""canceling tasks"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         WorkManager.getInstance(this.context).cancelAllWorkByTag(ONEOFF_TASK_SEND_MESSAGE_HTTP);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     public void cancelMqttTasks() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         Timber.tag(""MQTT"").d(""Cancelling task tag (all mqtt tasks) %s"", ONEOFF_TASK_SEND_MESSAGE_MQTT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         WorkManager.getInstance(this.context).cancelAllWorkByTag(ONEOFF_TASK_SEND_MESSAGE_MQTT);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         Timber.tag(""MQTT"").d(""Cancelling task tag (all mqtt tasks) %s"", PERIODIC_TASK_MQTT_KEEPALIVE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         WorkManager.getInstance(this.context).cancelAllWorkByTag(PERIODIC_TASK_MQTT_KEEPALIVE);
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         Timber.tag(""MQTT"").d(""Cancelling task tag (all mqtt tasks) %s"", ONETIME_TASK_MQTT_RECONNECT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         WorkManager.getInstance(this.context).cancelAllWorkByTag(ONETIME_TASK_MQTT_RECONNECT);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     public void scheduleMqttMaybeReconnectAndPing(long keepAliveSeconds) {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         if (keepAliveSeconds < TimeUnit.MILLISECONDS.toSeconds(MIN_PERIODIC_INTERVAL_MILLIS)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             Timber.tag(""MQTT"").i(""MQTT Keepalive interval is smaller than most granular workmanager interval, setting to 900 seconds"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)             keepAliveSeconds = TimeUnit.MILLISECONDS.toSeconds(MIN_PERIODIC_INTERVAL_MILLIS);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         WorkRequest mqttPingWorkRequest = new PeriodicWorkRequest.Builder(MQTTMaybeReconnectAndPingWorker.class, keepAliveSeconds, TimeUnit.SECONDS)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)                 .addTag(PERIODIC_TASK_MQTT_KEEPALIVE)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)                 .setConstraints(anyNetworkConstraint)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)                 .setBackoffCriteria(BackoffPolicy.LINEAR, 30, TimeUnit.SECONDS)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)                 .build();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         Timber.tag(""MQTT"").d(""WorkManager queue task %s as %s with interval %s"", PERIODIC_TASK_MQTT_KEEPALIVE, mqttPingWorkRequest.getId(), keepAliveSeconds);"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         WorkManager.getInstance(this.context).cancelAllWorkByTag(PERIODIC_TASK_MQTT_KEEPALIVE);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         WorkManager.getInstance(this.context).enqueue(mqttPingWorkRequest);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     public void cancelMqttPing() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         Timber.tag(""MQTT"").d(""Cancelling task tag %s threadID: %s"", PERIODIC_TASK_MQTT_KEEPALIVE, Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         WorkManager.getInstance(this.context).cancelAllWorkByTag(PERIODIC_TASK_MQTT_KEEPALIVE);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     public void scheduleLocationPing() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         WorkRequest pingWorkRequest =
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)                 new PeriodicWorkRequest.Builder(SendLocationPingWorker.class, preferences.getPing(), TimeUnit.MINUTES)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)                         .addTag(PERIODIC_TASK_SEND_LOCATION_PING)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)                         .setConstraints(anyNetworkConstraint)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)                         .build();
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         Timber.tag(""MQTT"").d(""WorkManager queue task %s as %s with interval %s minutes"", PERIODIC_TASK_SEND_LOCATION_PING, pingWorkRequest.getId(), preferences.getPing());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         WorkManager.getInstance(this.context).cancelAllWorkByTag(PERIODIC_TASK_SEND_LOCATION_PING);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         WorkManager.getInstance(this.context).enqueue(pingWorkRequest);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     public void scheduleMqttReconnect() {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         WorkRequest mqttReconnectWorkRequest =
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)                 new OneTimeWorkRequest.Builder(MQTTReconnectWorker.class)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)                         .addTag(ONETIME_TASK_MQTT_RECONNECT)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)                         .setBackoffCriteria(BackoffPolicy.LINEAR, 5, TimeUnit.SECONDS)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)                         .setConstraints(anyNetworkConstraint)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)                         .build();
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         Timber.tag(""MQTT"").d(""WorkManager queue task %s as %s"", ONETIME_TASK_MQTT_RECONNECT, mqttReconnectWorkRequest.getId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         WorkManager.getInstance(this.context).cancelAllWorkByTag(ONETIME_TASK_MQTT_RECONNECT);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         WorkManager.getInstance(this.context).enqueue(mqttReconnectWorkRequest);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     public void cancelMqttReconnect() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         Timber.tag(""MQTT"").d(""Cancelling task tag %s threadID: %s"", ONETIME_TASK_MQTT_RECONNECT, Thread.currentThread());"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         WorkManager.getInstance(this.context).cancelAllWorkByTag(ONETIME_TASK_MQTT_RECONNECT);
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/Scheduler.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services.worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.work.ListenableWorker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.work.Worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.work.WorkerParameters
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.services.LocationProcessor
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class SendLocationPingWorker @Inject constructor(context: Context, workerParams: WorkerParameters, private val locationProcessor: LocationProcessor) : Worker(context, workerParams) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     override fun doWork(): Result {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         Timber.tag(""MQTT"").d(""SendLocationPingWorker doing work. ThreadID: %s"", Thread.currentThread())"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         locationProcessor.publishLocationMessage(MessageLocation.REPORT_TYPE_PING)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         return Result.success()
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     class Factory @Inject constructor(private val locationProcessor: LocationProcessor) : ChildWorkerFactory {
"5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         override fun create(appContext: Context, params: WorkerParameters): ListenableWorker = SendLocationPingWorker(appContext, params, locationProcessor)"
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/SendLocationPingWorker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22) }
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services.worker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.work.ListenableWorker
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.work.WorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import dagger.MapKey
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import dagger.multibindings.IntoMap
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import kotlin.reflect.KClass
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @MapKey
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) @Target(AnnotationTarget.FUNCTION)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) @Retention(AnnotationRetention.RUNTIME)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) annotation class WorkerKey(val value: KClass<out ListenableWorker>)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) interface WorkerModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     @IntoMap
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     @WorkerKey(MQTTMaybeReconnectAndPingWorker::class)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     fun bindMQTTMaybeReconnectAndPingWorkerFactory(factory: MQTTMaybeReconnectAndPingWorker.Factory): ChildWorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     @IntoMap
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     @WorkerKey(MQTTReconnectWorker::class)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     fun bindMQTTReconnectWorkerFactory(factory: MQTTReconnectWorker.Factory): ChildWorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     @IntoMap
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     @WorkerKey(SendLocationPingWorker::class)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     fun bindSendLocationPingWorkerFactory(factory: SendLocationPingWorker.Factory): ChildWorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     fun bindWorkerFactory(factory: BackgroundWorkerFactory): WorkerFactory
5c49fd3 project/app/src/main/java/org/owntracks/android/services/worker/WorkerModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.graphics.Bitmap;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.graphics.BitmapFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.graphics.Canvas;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.graphics.Paint;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.graphics.PorterDuff;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import android.graphics.PorterDuffXfermode;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import android.graphics.Rect;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import android.graphics.RectF;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import android.graphics.drawable.BitmapDrawable;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import android.graphics.drawable.Drawable;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import android.os.AsyncTask;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import android.util.Base64;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import android.widget.ImageView;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import androidx.collection.ArrayMap;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import androidx.databinding.BindingAdapter;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import com.google.android.gms.maps.model.BitmapDescriptor;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import com.google.android.gms.maps.model.BitmapDescriptorFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import com.google.android.gms.maps.model.Marker;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.injection.qualifier.AppContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.model.FusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.owntracks.android.support.widgets.TextDrawable;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import java.lang.ref.WeakReference;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38) public class ContactImageProvider {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     private static ContactBitmapMemoryCache memoryCache;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     private static int FACE_DIMENSIONS;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     public void invalidateCacheLevelCard(String key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         memoryCache.clearLevelCard(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     private static class ContactDrawableWorkerTaskForImageView extends AsyncTask<FusedContact, Void, Bitmap> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         final WeakReference<ImageView> target;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         ContactDrawableWorkerTaskForImageView(ImageView imageView) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)             target = new WeakReference<>(imageView);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         protected Bitmap doInBackground(FusedContact... params) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)             return getBitmapFromCache(params[0]);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         protected void onPostExecute(Bitmap result) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)             if (result == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)                 return;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)             ImageView imageView = target.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             if (imageView != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)                 imageView.setImageBitmap(result);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     private static class ContactDrawableWorkerTaskForMarker extends AsyncTask<FusedContact, Void, BitmapDescriptor> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         final WeakReference<Marker> target;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         ContactDrawableWorkerTaskForMarker(Marker marker) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             target = new WeakReference<>(marker);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         protected BitmapDescriptor doInBackground(FusedContact... params) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)             return BitmapDescriptorFactory.fromBitmap(getBitmapFromCache(params[0]));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         protected void onPostExecute(BitmapDescriptor result) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             Marker marker = target.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)             if (marker != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)                 try {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)                     marker.setIcon(result);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)                     marker.setVisible(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)                 } catch (IllegalArgumentException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)                     Timber.e(e, ""Error setting marker icon"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     public void setMarkerAsync(Marker marker, FusedContact contact) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         (new ContactDrawableWorkerTaskForMarker(marker)).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, contact);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     public static void setImageViewAsync(ImageView imageView, FusedContact contact) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         //imageView.setImageDrawable(placeholder);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         (new ContactDrawableWorkerTaskForImageView(imageView)).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, contact);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     @Nullable
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     private static Bitmap getBitmapFromCache(@Nullable FusedContact contact) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         Bitmap d;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         if (contact == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)             return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         if (contact.hasCard()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)             d = memoryCache.getLevelCard(contact.getId());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)             if (d != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)                 return d;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             if (contact.getMessageCard().hasFace()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                 byte[] imageAsBytes = Base64.decode(contact.getMessageCard().getFace().getBytes(), Base64.DEFAULT);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                 Bitmap b = BitmapFactory.decodeByteArray(imageAsBytes, 0, imageAsBytes.length);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                 if (b == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                     Timber.e(""Decoding card bitmap failed"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                     Bitmap fallbackBitmap = Bitmap.createBitmap(FACE_DIMENSIONS, FACE_DIMENSIONS, Bitmap.Config.ARGB_8888);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                     Canvas canvas = new Canvas(fallbackBitmap);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)                     Paint paint = new Paint();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                     paint.setColor(0xFFFFFFFF);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                     canvas.drawRect(0F, 0F, (float) FACE_DIMENSIONS, (float) FACE_DIMENSIONS, paint);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)                     d = getRoundedShape(fallbackBitmap);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)                 } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)                     d = getRoundedShape(Bitmap.createScaledBitmap(b, FACE_DIMENSIONS, FACE_DIMENSIONS, true));"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)                     memoryCache.putLevelCard(contact.getId(), d);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)                 return d;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         TidBitmap td = memoryCache.getLevelTid(contact.getId());
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         // if cache doesn't contain a bitmap for a contact or if the cached bitmap was for an old tid, create a new one and cache it"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)         if (td == null || !td.isBitmapFor(contact.getTrackerId())) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)             td = new TidBitmap(contact.getTrackerId(), drawableToBitmap(TextDrawable.builder().buildRoundRect(contact.getTrackerId(), TextDrawable.ColorGenerator.MATERIAL.getColor(contact.getId()), FACE_DIMENSIONS)));"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)             memoryCache.putLevelTid(contact.getId(), td);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         return td.getBitmap();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)     public ContactImageProvider(@AppContext Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         memoryCache = new ContactBitmapMemoryCache();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         FACE_DIMENSIONS = (int) (48 * (context.getResources().getDisplayMetrics().densityDpi / 160f));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)     private static class ContactBitmapMemoryCache {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         private final ArrayMap<String, Bitmap> cacheLevelCard;"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)         private final ArrayMap<String, TidBitmap> cacheLevelTid;"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         ContactBitmapMemoryCache() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)             cacheLevelCard = new ArrayMap<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)             cacheLevelTid = new ArrayMap<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)         synchronized void putLevelCard(String key, Bitmap value) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)             cacheLevelCard.put(key, value);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)             cacheLevelTid.remove(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         synchronized void putLevelTid(String key, TidBitmap value) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)             cacheLevelTid.put(key, value);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)         synchronized Bitmap getLevelCard(String key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)             return cacheLevelCard.get(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)         synchronized TidBitmap getLevelTid(String key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)             return cacheLevelTid.get(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         synchronized void clear() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)             cacheLevelCard.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)             cacheLevelTid.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         synchronized void clearLevelCard(String key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)             cacheLevelCard.remove(key);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)     public void invalidateCache() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)         memoryCache.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)     private static Bitmap getRoundedShape(Bitmap bitmap) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         Canvas canvas = new Canvas(output);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)         final int color = 0xff424242;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         final Paint paint = new Paint();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)         final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)         final RectF rectF = new RectF(rect);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)         final float roundPx = bitmap.getWidth();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)         paint.setAntiAlias(true);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         canvas.drawARGB(0, 0, 0, 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         paint.setColor(color);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)         canvas.drawRoundRect(rectF, roundPx, roundPx, paint);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)         paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)         canvas.drawBitmap(bitmap, rect, rect, paint);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)         return output;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)     private static Bitmap drawableToBitmap(Drawable drawable) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)         if (drawable instanceof BitmapDrawable) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)             return ((BitmapDrawable) drawable).getBitmap();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)         int width = drawable.getIntrinsicWidth();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)         width = width > 0 ? width : FACE_DIMENSIONS;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)         int height = drawable.getIntrinsicHeight();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)         height = height > 0 ? height : FACE_DIMENSIONS;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)         Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)         Canvas canvas = new Canvas(bitmap);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)         drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)         drawable.draw(canvas);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)         return bitmap;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)     @BindingAdapter({""imageProvider"", ""contact""})"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)     public static void displayFaceInViewAsync(ImageView view, Integer imageProvider, FusedContact c) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)         setImageViewAsync(view, c);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ContactImageProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.text.format.DateUtils;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import java.text.SimpleDateFormat;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import java.util.Date;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import java.util.Locale;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) public class DateFormatter {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     private static SimpleDateFormat dateFormater = new SimpleDateFormat(""yyyy-MM-dd HH:mm"",Locale.getDefault());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     private static SimpleDateFormat dateFormaterToday = new SimpleDateFormat(""HH:mm"", Locale.getDefault());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private static SimpleDateFormat dateFormaterDate = new SimpleDateFormat(""HH:mm"", Locale.getDefault());"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public static String formatDate(long tstSeconds) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         return formatDate(new Date(TimeUnit.SECONDS.toMillis(tstSeconds)));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     public static String formatDateShort(long tstSeconds) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         Date d = new Date(TimeUnit.SECONDS.toMillis(tstSeconds));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         if(DateUtils.isToday(d.getTime())) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)             return dateFormaterToday.format(d);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)             return dateFormaterDate.format(d);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     public static String formatDate(@NonNull Date d) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         if(DateUtils.isToday(d.getTime())) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)             return dateFormaterToday.format(d);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)             return dateFormater.format(d);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DateFormatter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.content.IntentFilter
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.net.ConnectivityManager
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import android.net.NetworkCapabilities
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import android.os.BatteryManager
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.injection.qualifier.AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.model.BatteryStatus
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) class DeviceMetricsProvider @Inject internal constructor(@param:AppContext private val context: Context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     val batteryLevel: Int
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         get() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)             val intentFilter = IntentFilter(Intent.ACTION_BATTERY_CHANGED)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)             val batteryStatus = context.registerReceiver(null, intentFilter)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)             return batteryStatus?.getIntExtra(BatteryManager.EXTRA_LEVEL, 0) ?: 0"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     val batteryStatus: BatteryStatus
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         get() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)             val intentFilter = IntentFilter(Intent.ACTION_BATTERY_CHANGED)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)             val batteryStatus = context.registerReceiver(null, intentFilter)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)             return when (batteryStatus?.getIntExtra(BatteryManager.EXTRA_STATUS, 0)) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)                 BatteryManager.BATTERY_STATUS_FULL -> BatteryStatus.FULL
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)                 BatteryManager.BATTERY_STATUS_CHARGING -> BatteryStatus.CHARGING
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)                 BatteryManager.BATTERY_STATUS_DISCHARGING -> BatteryStatus.UNPLUGGED
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)                 BatteryManager.BATTERY_STATUS_NOT_CHARGING -> BatteryStatus.UNKNOWN
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)                 else -> BatteryStatus.UNKNOWN
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     @Suppress(""DEPRECATION"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     val connectionType: String?
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         get() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)             val cm = context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)             if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.M) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)                 cm.run {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)                     cm.getNetworkCapabilities(cm.activeNetwork)?.run {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)                         if (!hasCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)                             return MessageLocation.CONN_TYPE_OFFLINE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)                         if (hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)                             return MessageLocation.CONN_TYPE_MOBILE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)                         if (hasTransport(NetworkCapabilities.TRANSPORT_WIFI)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)                             return MessageLocation.CONN_TYPE_WIFI
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)                 return null
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)             } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)                 val activeNetworkInfo = cm.activeNetworkInfo ?: return null
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)                 if (!activeNetworkInfo.isConnected) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)                     return MessageLocation.CONN_TYPE_OFFLINE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)                 return when (activeNetworkInfo.type) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)                     ConnectivityManager.TYPE_WIFI -> MessageLocation.CONN_TYPE_WIFI
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)                     ConnectivityManager.TYPE_MOBILE -> MessageLocation.CONN_TYPE_MOBILE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)                     else -> null
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DeviceMetricsProvider.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.app.Activity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.annotation.DrawableRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.annotation.StringRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.appcompat.app.AppCompatActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.appcompat.widget.Toolbar;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import com.mikepenz.materialdrawer.DrawerBuilder;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import com.mikepenz.materialdrawer.model.PrimaryDrawerItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import com.mikepenz.materialdrawer.model.SecondaryDrawerItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import com.mikepenz.materialdrawer.model.SecondarySwitchDrawerItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.services.BackgroundService;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.services.worker.Scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.owntracks.android.ui.contacts.ContactsActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.ui.map.MapActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.owntracks.android.ui.preferences.PreferencesActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.owntracks.android.ui.regions.RegionsActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.ui.status.StatusActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) public class DrawerProvider {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private static final int COLOR_ICON_PRIMARY = R.color.md_light_primary_icon;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     private static final int COLOR_ICON_PRIMARY_ACTIVE = R.color.md_blue_600;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     private static final int COLOR_ICON_SECONDARY = R.color.md_light_secondary;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     private static final int COLOR_ICON_SECONDARY_ACTIVE = COLOR_ICON_PRIMARY_ACTIVE;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     private static final int EXIT_OPERATION_ID = 88296;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     private final AppCompatActivity activity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     private final Scheduler scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     public DrawerProvider(AppCompatActivity activity, Scheduler scheduler) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         this.activity = activity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         this.scheduler = scheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     private AppCompatActivity getActivity() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         return activity;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     private PrimaryDrawerItem drawerItemForClass(AppCompatActivity activeActivity, Class<?> targetActivityClass, @StringRes int targetActivityTitleRessource, @DrawableRes int iconResource) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         return new PrimaryDrawerItem()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)                 .withName(activeActivity.getString(targetActivityTitleRessource))
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)                 .withSelectable(false)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)                 .withSelectedTextColorRes(COLOR_ICON_PRIMARY_ACTIVE)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)                 .withIcon(iconResource)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)                 .withIconColorRes(COLOR_ICON_PRIMARY)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)                 .withIconTintingEnabled(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)                 .withSelectedIconColorRes(COLOR_ICON_PRIMARY_ACTIVE)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)                 .withTag(targetActivityClass)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)                 .withIdentifier(targetActivityClass.hashCode());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     private SecondaryDrawerItem secondaryDrawerItemForClass(AppCompatActivity activeActivity, Class<?> targetActivityClass, @StringRes int targetActivityTitleResource, @DrawableRes int iconResource) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         SecondaryDrawerItem sdi = new SecondaryDrawerItem();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         sdi.withName(activeActivity.getString(targetActivityTitleResource));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         sdi.withIcon(iconResource);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         sdi.withIconColorRes(COLOR_ICON_SECONDARY);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         sdi.withSelectedIconColorRes(COLOR_ICON_SECONDARY_ACTIVE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         sdi.withIconTintingEnabled(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         // The exit operation has no target class
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         if (targetActivityClass != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             sdi.withTag(targetActivityClass);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             sdi.withIdentifier(targetActivityClass.hashCode());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             sdi.withIdentifier(EXIT_OPERATION_ID);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         sdi.withSelectable(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         return sdi;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     public void attach(@NonNull Toolbar toolbar) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         new DrawerBuilder()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)                 .withActivity(activity)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)                 .withToolbar(toolbar)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)                 .withStickyFooterShadow(false)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)                 .withStickyFooterDivider(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)                 .addDrawerItems(
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)                         drawerItemForClass(activity, MapActivity.class, R.string.title_activity_map, R.drawable.ic_baseline_layers_24),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)                         drawerItemForClass(activity, ContactsActivity.class, R.string.title_activity_contacts, R.drawable.ic_baseline_supervisor_account_24),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)                         drawerItemForClass(activity, RegionsActivity.class, R.string.title_activity_regions, R.drawable.ic_baseline_adjust_24))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)                 .addStickyDrawerItems(
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)                         secondaryDrawerItemForClass(activity, StatusActivity.class, R.string.title_activity_status, R.drawable.ic_baseline_info_24),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)                         secondaryDrawerItemForClass(activity, PreferencesActivity.class, R.string.title_activity_preferences, R.drawable.ic_baseline_settings_24),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)                         secondaryDrawerItemForClass(activity, null, R.string.title_exit, R.drawable.ic_baseline_power_settings_new_24)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)                 )
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)                 .withOnDrawerItemClickListener((view, position, drawerItem) -> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)                     if (drawerItem == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)                         return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)                     if (drawerItem instanceof SecondarySwitchDrawerItem)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)                         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)                     // Finish when exit app drawer option selected
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)                     if (drawerItem.getIdentifier() == EXIT_OPERATION_ID) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)                         // Stop the background service
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)                         activity.stopService((new Intent(activity, BackgroundService.class)));"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)                         // Finish the activity
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)                         activity.finishAffinity();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)                         // Kill scheduled tasks
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)                         scheduler.cancelAllTasks();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)                         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                     Class<BaseActivity> targetclass = (Class<BaseActivity>) drawerItem.getTag();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                     if (activity.getClass() == targetclass) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                         return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                     startActivity(targetclass);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                     return false; // return false to enable withCloseOnClick
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                 })
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)                 .build();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)     private void startActivity(@NonNull Class<? extends Activity> activityClass) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         Activity activity = getActivity();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         Intent intent = new Intent(activity, activityClass);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         activity.startActivity(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/DrawerProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.SharedPreferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.util.Base64;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.libsodium.jni.crypto.Random;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.libsodium.jni.crypto.SecretBox;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.support.preferences.OnModeChangedPreferenceChangedListener;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import static org.libsodium.jni.SodiumConstants.XSALSA20_POLY1305_SECRETBOX_KEYBYTES;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import static org.libsodium.jni.SodiumConstants.XSALSA20_POLY1305_SECRETBOX_NONCEBYTES;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) public class EncryptionProvider {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     private static final int crypto_secretbox_NONCEBYTES = XSALSA20_POLY1305_SECRETBOX_NONCEBYTES;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     private static final int crypto_secretbox_KEYBYTES = XSALSA20_POLY1305_SECRETBOX_KEYBYTES;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     private static SecretBox b;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     private static Random r;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     private static boolean enabled;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     public boolean isPayloadEncryptionEnabled() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)         return enabled;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     private void initializeSecretBox() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         String encryptionKey = preferences.getEncryptionKey();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         enabled = encryptionKey != null && !encryptionKey.isEmpty();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         Timber.v(""encryption enabled: %s"", enabled);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         if (!enabled) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         byte[] encryptionKeyBytes = encryptionKey != null ? encryptionKey.getBytes() : new byte[0];
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         byte[] encryptionKeyBytesPadded = new byte[crypto_secretbox_KEYBYTES];
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         if (encryptionKeyBytes.length == 0 ) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)             Timber.e(""encryption key is too short or too long. Has %s bytes"", encryptionKeyBytes.length);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)             enabled = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         int copyBytes = encryptionKeyBytes.length;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         if( copyBytes > crypto_secretbox_KEYBYTES) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)             copyBytes = crypto_secretbox_KEYBYTES;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         System.arraycopy(encryptionKeyBytes, 0, encryptionKeyBytesPadded, 0, copyBytes);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         b = new SecretBox(encryptionKeyBytesPadded);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         r = new Random();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     public EncryptionProvider(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         preferences.registerOnPreferenceChangedListener(new SecretBoxManager());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         initializeSecretBox();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     String decrypt(String cyphertextb64) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         byte[] onTheWire = Base64.decode(cyphertextb64.getBytes(), Base64.DEFAULT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         byte[] nonce = new byte[crypto_secretbox_NONCEBYTES];
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         byte[] cyphertext = new byte[onTheWire.length - crypto_secretbox_NONCEBYTES];
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         System.arraycopy(onTheWire, 0, nonce, 0, crypto_secretbox_NONCEBYTES);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         System.arraycopy(onTheWire, crypto_secretbox_NONCEBYTES, cyphertext, 0, onTheWire.length - crypto_secretbox_NONCEBYTES);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         return new String(b.decrypt(nonce, cyphertext));"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     String encrypt(@NonNull String plaintext) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         return encrypt(plaintext.getBytes());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     String encrypt(@NonNull byte[] plaintext) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         byte[] nonce = r.randomBytes(crypto_secretbox_NONCEBYTES);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         byte[] cyphertext = b.encrypt(nonce, plaintext);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         byte[] out = new byte[crypto_secretbox_NONCEBYTES + cyphertext.length];
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         System.arraycopy(nonce, 0, out, 0, crypto_secretbox_NONCEBYTES);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         System.arraycopy(cyphertext, 0, out, crypto_secretbox_NONCEBYTES, cyphertext.length);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         return Base64.encodeToString(out, Base64.NO_WRAP);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     private class SecretBoxManager implements OnModeChangedPreferenceChangedListener {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         SecretBoxManager() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)             preferences.registerOnPreferenceChangedListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         public void onAttachAfterModeChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)             initializeSecretBox();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)             if (preferences.getPreferenceKey(R.string.preferenceKeyEncryptionKey).equals(key))
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)                 initializeSecretBox();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/EncryptionProvider.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import org.owntracks.android.model.FusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import java.util.Date;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) public class Events {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)     public static abstract class E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10)         final Date date;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11)         E() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12)             this.date = new Date();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)         public Date getDate() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)             return this.date;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     public static class ModeChanged extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)         final int newModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)         final int oldModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23)         public ModeChanged(int oldModeId, int newModeId) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)             this.newModeId = newModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)             this.oldModeId = oldModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)         public int getNewModeId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)             return newModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)         public int getOldModeId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)             return oldModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     public static class MonitoringChanged extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         final int newModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         public MonitoringChanged(int newModeId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)             this.newModeId = newModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         public int getNewModeId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)             return newModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46) 	static class WaypointTransition extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47) 		final WaypointModel w;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48) 		final int transition;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         //TODO
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50) 		public WaypointTransition(WaypointModel w, int transition) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51) 			super();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52) 			this.w = w;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53) 			this.transition = transition;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54) 		}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56) 		public WaypointModel getWaypoint() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57) 			return this.w;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58) 		}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60) 		public int getTransition() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61) 			return this.transition;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62) 		}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64) 	}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66) 	public static class EndpointChanged extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67) 		public EndpointChanged() {}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68) 	}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     public static class PermissionGranted extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         private final String permission;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         public PermissionGranted(String p) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)             this.permission = p;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         public String getPermission() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             return permission;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80) 	public static class ServiceStarted extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81) 	}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     public static class QueueChanged extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         int length;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         public QueueChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         public QueueChanged withNewLength(int length) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             this.length = length;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         public int getNewLength() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             return length;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     public static class WaypointEvent extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         private final WaypointModel m;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         WaypointEvent(WaypointModel m) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)             this.m = m;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         public WaypointModel getWaypointModel() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)             return this.m;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     public static class WaypointAdded extends WaypointEvent {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         public WaypointAdded(WaypointModel m) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             super(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     public static class WaypointUpdated extends WaypointEvent {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         public WaypointUpdated(WaypointModel m) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)             super(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     public static class WaypointRemoved extends WaypointEvent {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         public WaypointRemoved(WaypointModel m) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)             super(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     public static class FusedContactAdded extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         private final FusedContact fusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         public FusedContactAdded(FusedContact c) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             this.fusedContact = c;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         public FusedContact getContact() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)             return this.fusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)     public static class FusedContactRemoved extends E {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         private final FusedContact fusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         public FusedContactRemoved(FusedContact c) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)             this.fusedContact = c;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)         public FusedContact getContact() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)             return this.fusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)     public static class RestartApp extends E {}
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Events.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.model.messages.MessageWaypoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import java.util.LinkedList;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) public class MessageWaypointCollection extends LinkedList<MessageWaypoint> {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     public MessageWaypointCollection() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         super();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/MessageWaypointCollection.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import com.fasterxml.jackson.databind.DeserializationFeature;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import com.fasterxml.jackson.databind.ObjectMapper;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import com.fasterxml.jackson.databind.SerializationFeature;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.owntracks.android.model.messages.MessageBase;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.model.messages.MessageEncrypted;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import java.io.InputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) public class Parser {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     private static ObjectMapper defaultMapper;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     private static ObjectMapper arrayCompatMapper;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)     private final EncryptionProvider encryptionProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     public Parser(EncryptionProvider encryptionProvider) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)         this.encryptionProvider = encryptionProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)         defaultMapper = new ObjectMapper();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)         defaultMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)         defaultMapper.configure(SerializationFeature.ORDER_MAP_ENTRIES_BY_KEYS, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)         arrayCompatMapper = new ObjectMapper();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)         arrayCompatMapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         arrayCompatMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     public String toJsonPlainPretty(@NonNull MessageBase message) throws IOException {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         return defaultMapper.writerWithDefaultPrettyPrinter().writeValueAsString(message).replaceAll(""\\r\\n"", ""\n"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     public String toJsonPlain(@NonNull MessageBase message) throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         return defaultMapper.writeValueAsString(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     private byte[] toJsonPlainBytes(@NonNull MessageBase message) throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         return defaultMapper.writeValueAsBytes(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     public String toJson(@NonNull MessageBase message) throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         return encryptString(toJsonPlain(message));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     public byte[] toJsonBytes(@NonNull MessageBase message) throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         return encryptBytes(toJsonPlainBytes(message));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     public MessageBase fromJson(@NonNull String input) throws IOException, EncryptionException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         return decrypt(defaultMapper.readValue(input, MessageBase.class));"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     // Accepts {plain} as byte array
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     public MessageBase fromJson(@NonNull byte[] input) throws IOException, EncryptionException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         return decrypt(defaultMapper.readValue(input, MessageBase.class));"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     // Accepts 1) [{plain},{plain},...], 2) {plain}, 3) {encrypted, data:[{plain}, {plain}, ...]} as input stream"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     public MessageBase[] fromJson(@NonNull InputStream input) throws IOException, EncryptionException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         return decrypt(arrayCompatMapper.readValue(input, MessageBase[].class));"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     private MessageBase[] decrypt(MessageBase[] a) throws IOException, EncryptionException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         // Recorder compatiblity, encrypted messages with data array"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         if (a == null)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)             throw new IOException(""null array"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         if (a.length == 1 && a[0] instanceof MessageEncrypted) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             if (!encryptionProvider.isPayloadEncryptionEnabled())
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)                 throw new EncryptionException(""received encrypted message but payload encryption is not enabled"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             return defaultMapper.readValue(encryptionProvider.decrypt(((MessageEncrypted) a[0]).getData()), MessageBase[].class);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         } else { // single message wrapped in array by mapper or array of messages
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)             return a;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     private MessageBase decrypt(MessageBase m) throws IOException, EncryptionException {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         if (m instanceof MessageEncrypted) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             if (!encryptionProvider.isPayloadEncryptionEnabled())
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)                 throw new EncryptionException(""received encrypted message but payload encryption is not enabled"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             return defaultMapper.readValue(encryptionProvider.decrypt(((MessageEncrypted) m).getData()), MessageBase.class);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         return m;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     private String encryptString(@NonNull String input) throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         if (encryptionProvider.isPayloadEncryptionEnabled()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             MessageEncrypted m = new MessageEncrypted();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)             m.setData(encryptionProvider.encrypt(input));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)             return defaultMapper.writeValueAsString(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         return input;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     private byte[] encryptBytes(@NonNull byte[] input) throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         if (encryptionProvider.isPayloadEncryptionEnabled()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)             MessageEncrypted m = new MessageEncrypted();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             m.setData(encryptionProvider.encrypt(input));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)             return defaultMapper.writeValueAsBytes(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         return input;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     public static class EncryptionException extends Exception {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         EncryptionException(String s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)             super(s);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Parser.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.annotation.SuppressLint
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.os.Build
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import org.eclipse.paho.client.mqttv3.MqttConnectOptions
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.owntracks.android.BuildConfig
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.owntracks.android.injection.qualifier.AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.model.messages.MessageConfiguration
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.services.LocationProcessor
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.services.MessageProcessorEndpointHttp
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.services.MessageProcessorEndpointMqtt
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.services.worker.Scheduler
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.support.Events.ModeChanged
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.support.Events.MonitoringChanged
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.support.preferences.OnModeChangedPreferenceChangedListener
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.support.preferences.PreferencesStore
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import java.lang.reflect.InvocationTargetException
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import java.lang.reflect.Method
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import java.lang.reflect.ParameterizedType
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import java.lang.reflect.Type
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import java.util.*
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import java.util.concurrent.TimeUnit
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) @Singleton
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31) class Preferences @Inject constructor(@AppContext c: Context, private val eventBus: EventBus?, private val preferencesStore: PreferencesStore) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private val context: Context = c
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     private var isFirstStart = false
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     private var currentMode = MessageProcessorEndpointMqtt.MODE_ID
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     val sharedPreferencesName: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         get() = preferencesStore.getSharedPreferencesName()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     // need to iterated thought hierarchy in order to retrieve methods from above the current instance
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     // iterate though the list of methods declared in the class represented by klass variable, and insert those annotated with the specified annotation"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     private val exportMethods: Map<String, Method>"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         get() = Preferences::class.java
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)                 .parentClasses()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)                 .flatMap { it.declaredMethods.asSequence() }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)                 .filter { it.isAnnotationPresent(Export::class.java) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)                 .filter {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)                     val annotation = it.getAnnotation(Export::class.java)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)                     annotation != null &&
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)                             (currentMode == MessageProcessorEndpointMqtt.MODE_ID && annotation.exportModeMqtt ||
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)                                     currentMode == MessageProcessorEndpointHttp.MODE_ID && annotation.exportModeHttp)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)                 }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)                 .map { Pair(getPreferenceKey(it.getAnnotation(Export::class.java)!!.keyResId), it) }"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)                 .toMap()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     val importKeys: List<String>
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         get() = ArrayList(importMethods.keys)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     // need to iterated thought hierarchy in order to retrieve methods from above the current instance
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     // iterate though the list of methods declared in the class represented by klass variable, and insert those annotated with the specified annotation"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     private val importMethods: Map<String, Method>"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         get() = Preferences::class.java
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)                 .parentClasses()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)                 .flatMap { it.declaredMethods.asSequence() }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)                 .filter { it.isAnnotationPresent(Import::class.java) }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)                 .map { Pair(getPreferenceKey(it.getAnnotation(Import::class.java)!!.keyResId), it) }"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)                 .toMap()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     private fun Class<*>.parentClasses(): Sequence<Class<*>> {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         var k = this
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         return sequence {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)             yield(k)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)             while (k.superclass != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)                 k = k.superclass!!
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)                 yield(k)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     fun registerOnPreferenceChangedListener(listener: OnModeChangedPreferenceChangedListener?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         preferencesStore.registerOnSharedPreferenceChangeListener(listener!!)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     fun unregisterOnPreferenceChangedListener(listener: OnModeChangedPreferenceChangedListener?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         preferencesStore.unregisterOnSharedPreferenceChangeListener(listener!!)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     fun checkFirstStart() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         if (preferencesStore.getBoolean(getPreferenceKey(R.string.preferenceKeyFirstStart), true)) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)             Timber.v(""Initial application launch"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)             isFirstStart = true
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)             preferencesStore.putBoolean(getPreferenceKey(R.string.preferenceKeyFirstStart), false)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             preferencesStore.putBoolean(getPreferenceKey(R.string.preferenceKeySetupNotCompleted), true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     @Throws(IllegalAccessException::class, IllegalArgumentException::class)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     fun importKeyValue(key: String?, value: String?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         Timber.v(""setting %s, for key %s"", value, key)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         val methods = importMethods
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         val m = methods[key] ?: throw IllegalAccessException()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         if (value == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)             clearKey(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             val t = m.genericParameterTypes[0]
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)             Timber.v(""type of parameter: %s %s"", t, t.javaClass)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             methods[key]!!.invoke(this, convert(t, value))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         } catch (e: InvocationTargetException) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)             throw IllegalAccessException()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     @Throws(IllegalArgumentException::class)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     private fun convert(t: Type, value: String): Any {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         if (java.lang.Boolean.TYPE == t) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)             require(!(""true"" != value && ""false"" != value))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             return java.lang.Boolean.parseBoolean(value)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             if (Integer.TYPE == t) return value.toInt()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         } catch (e: NumberFormatException) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)             throw IllegalArgumentException()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         if (t is ParameterizedType && Set::class.java.isAssignableFrom(t.rawType as Class<*>))
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             return value.split("","").map { it.trim() }.filter { it.isNotBlank() }.toSortedSet()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         return value
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)     fun exportToMessage(): MessageConfiguration {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         val cfg = MessageConfiguration()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         cfg[getPreferenceKey(R.string.preferenceKeyVersion)] = BuildConfig.VERSION_CODE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         exportMethods.forEach {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)             cfg[it.key] = it.value.invoke(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         return cfg
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)     @SuppressLint(""CommitPrefEdits"", ""ApplySharedPref"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)     fun importFromMessage(messageConfiguration: MessageConfiguration) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)         Timber.v(""importing %s keys "", messageConfiguration.keys.size)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         if (messageConfiguration.containsKey(getPreferenceKey(R.string.preferenceKeyModeId))) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)             Timber.v(""setting mode to %s"", messageConfiguration[getPreferenceKey(R.string.preferenceKeyModeId)])"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)             mode = messageConfiguration[getPreferenceKey(R.string.preferenceKeyModeId)] as Int
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)             messageConfiguration.removeKey(getPreferenceKey(R.string.preferenceKeyModeId))
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         // Don't show setup if a config has been imported
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         setSetupCompleted()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         messageConfiguration.keys
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)                 .filter { messageConfiguration[it] == null }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)                 .forEach {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)                     Timber.d(""clearing value for key %s"", it)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)                     clearKey(it)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         val methods = importMethods
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         messageConfiguration.keys
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)                 .filter { messageConfiguration[it] != null }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)                 .filter { methods.containsKey(it) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163)                 .forEach {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 164)                     Timber.d(""Loading key %s from method: %s"", it, methods.getValue(it).name)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 165)                     try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 166)                         methods.getValue(it).invoke(this, messageConfiguration[it])"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 167)                     } catch (e: IllegalArgumentException) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 168)                         Timber.e(""Tried to import %s but value is wrong type. Expected: %s, given %s"", it, methods.getValue(it).parameterTypes.first().canonicalName, messageConfiguration[it]?.javaClass?.canonicalName)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 169)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 170)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 171)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 172)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 173)     private fun setMode(requestedMode: Int, init: Boolean) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         Timber.v(""setMode: %s"", requestedMode)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         if (!(requestedMode == MessageProcessorEndpointMqtt.MODE_ID || requestedMode == MessageProcessorEndpointHttp.MODE_ID)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 176)             Timber.v(""Invalid mode requested: %s"", requestedMode)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 177)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         val oldModeId = currentMode
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         if (!init && currentMode == requestedMode) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 181)             Timber.v(""mode is already set to requested mode"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 182)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         Timber.v(""setting mode to: %s"", requestedMode)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 185)         preferencesStore.setMode(getPreferenceKey(R.string.preferenceKeyModeId), requestedMode)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         currentMode = requestedMode
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 187)         if (!init && eventBus != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 188)             Timber.v(""broadcasting mode change event"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 189)             eventBus.post(ModeChanged(oldModeId, currentMode))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 190)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 191)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 192)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     fun setMonitoringNext() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 194)         var mode = monitoring
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         if (mode < LocationProcessor.MONITORING_MOVE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 196)             mode++
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 198)             mode = LocationProcessor.MONITORING_QUIET
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 199)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 200)         Timber.v(""setting monitoring mode %s"", mode)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         monitoring = mode
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 202)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 203)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 204)     @get:Export(keyResId = R.string.preferenceKeyModeId, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 205)     @set:Import(keyResId = R.string.preferenceKeyModeId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 206)     var mode: Int
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         get() = currentMode
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         set(active) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 209)             setMode(active, false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 210)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 211)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 212)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 213)     @get:Export(keyResId = R.string.preferenceKeyMonitoring, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 214)     @set:Import(keyResId = R.string.preferenceKeyMonitoring)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 215)     var monitoring: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 216)         get() = getIntOrDefault(R.string.preferenceKeyMonitoring, R.integer.valMonitoring)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 217)         set(newMode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 218)             if (newMode < LocationProcessor.MONITORING_QUIET || newMode > LocationProcessor.MONITORING_MOVE) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 219)                 Timber.e(""invalid monitoring mode specified %s"", newMode)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 220)                 return
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 221)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 222)             if (newMode != this.monitoring) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 223)                 setInt(R.string.preferenceKeyMonitoring, newMode)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 224)                 eventBus?.post(MonitoringChanged(newMode))
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 225)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 226)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 227)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 228)     @get:Export(keyResId = R.string.preferenceKeyDontReuseHttpClient, exportModeMqtt = false, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 229)     @set:Import(keyResId = R.string.preferenceKeyDontReuseHttpClient)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 230)     var dontReuseHttpClient: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         get() = getBooleanOrDefault(R.string.preferenceKeyDontReuseHttpClient, R.bool.valFalse)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 232)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 233)             setBoolean(R.string.preferenceKeyDontReuseHttpClient, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 234)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 235)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 236)     @get:Export(keyResId = R.string.preferenceKeyOpencageGeocoderApiKey, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 237)     @set:Import(keyResId = R.string.preferenceKeyOpencageGeocoderApiKey)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 238)     var openCageGeocoderApiKey: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 239)         get() = getStringOrDefault(R.string.preferenceKeyOpencageGeocoderApiKey, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 240)         set(key) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 241)             setString(R.string.preferenceKeyOpencageGeocoderApiKey, key.trim { it <= ' ' })"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 242)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 243)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 244)     @get:Export(keyResId = R.string.preferenceKeyRemoteCommand, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 245)     @set:Import(keyResId = R.string.preferenceKeyRemoteCommand)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 246)     var remoteCommand: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 247)         get() = getBooleanOrDefault(R.string.preferenceKeyRemoteCommand, R.bool.valRemoteCommand)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 248)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 249)             setBoolean(R.string.preferenceKeyRemoteCommand, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 250)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 251)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 252)     @get:Export(keyResId = R.string.preferenceKeyCleanSession, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 253)     @set:Import(keyResId = R.string.preferenceKeyCleanSession)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 254)     var cleanSession: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 255)         get() = getBooleanOrDefault(R.string.preferenceKeyCleanSession, R.bool.valCleanSession)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 256)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 257)             setBoolean(R.string.preferenceKeyCleanSession, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 258)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 259)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 260)     @get:Export(keyResId = R.string.preferenceKeyPublishExtendedData, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 261)     @set:Import(keyResId = R.string.preferenceKeyPublishExtendedData)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 262)     var pubLocationExtendedData: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 263)         get() = getBooleanOrDefault(R.string.preferenceKeyPublishExtendedData, R.bool.valPubExtendedData)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 265)             setBoolean(R.string.preferenceKeyPublishExtendedData, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 266)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 267)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 268)     @get:Export(keyResId = R.string.preferenceKeyLocatorInterval, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 269)     @set:Import(keyResId = R.string.preferenceKeyLocatorInterval)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 270)     var locatorInterval: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 271)         get() = getIntOrDefault(R.string.preferenceKeyLocatorInterval, R.integer.valLocatorInterval)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 272)         set(anInt) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 273)             setInt(R.string.preferenceKeyLocatorInterval, anInt)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 274)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 275)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 276)     @get:Export(keyResId = R.string.preferenceKeyMoveModeLocatorInterval, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 277)     @set:Import(keyResId = R.string.preferenceKeyMoveModeLocatorInterval)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 278)     var moveModeLocatorInterval: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 279)         get() = getIntOrDefault(R.string.preferenceKeyMoveModeLocatorInterval, R.integer.valMoveModeLocatorInterval)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 280)         set(moveModeLocatorInterval) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 281)             setInt(R.string.preferenceKeyMoveModeLocatorInterval, moveModeLocatorInterval)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 282)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 283)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 284)     // Unit is minutes
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 285)     // Unit is minutes
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 286)     @get:Export(keyResId = R.string.preferenceKeyPing, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 287)     @set:Import(keyResId = R.string.preferenceKeyPing)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 288)     var ping: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 289)         get() = getIntOrDefault(R.string.preferenceKeyPing, R.integer.valPing).coerceAtLeast(TimeUnit.MILLISECONDS.toMinutes(Scheduler.MIN_PERIODIC_INTERVAL_MILLIS).toInt())"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 290)         set(anInt) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 291)             setInt(R.string.preferenceKeyPing, anInt)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 292)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 293)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 294)     @get:Export(keyResId = R.string.preferenceKeyUsername, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 295)     @set:Import(keyResId = R.string.preferenceKeyUsername)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 296)     var username: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 297)         get() = getStringOrDefault(R.string.preferenceKeyUsername, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 298)         set(value) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 299)             setString(R.string.preferenceKeyUsername, value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 300)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 301)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 302)     @get:Export(keyResId = R.string.preferenceKeyDeviceId, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 303)     @set:Import(keyResId = R.string.preferenceKeyDeviceId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 304)     var deviceId: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 305)         get() = getDeviceId(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 306)         set(deviceId) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 307)             setString(R.string.preferenceKeyDeviceId, deviceId)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 308)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 309)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 310)     fun getDeviceId(fallbackToDefault: Boolean): String {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 311)         val deviceId = getStringOrDefault(R.string.preferenceKeyDeviceId, R.string.valEmpty)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 312)         return if ("""" == deviceId && fallbackToDefault) deviceIdDefault else deviceId"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 313)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 314)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 315)     @get:Export(keyResId = R.string.preferenceKeyIgnoreStaleLocations, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 316)     @set:Import(keyResId = R.string.preferenceKeyIgnoreStaleLocations)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 317)     var ignoreStaleLocations: Double
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 318)         get() = getStringOrDefault(R.string.preferenceKeyIgnoreStaleLocations, R.string.valIgnoreStaleLocations).toDouble()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 319)         set(days) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 320)             setString(R.string.preferenceKeyIgnoreStaleLocations, days.toString())"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 321)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 322)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 323)     @get:Export(keyResId = R.string.preferenceKeyIgnoreInaccurateLocations, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 324)     @set:Import(keyResId = R.string.preferenceKeyIgnoreInaccurateLocations)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 325)     var ignoreInaccurateLocations: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 326)         get() = getIntOrDefault(R.string.preferenceKeyIgnoreInaccurateLocations, R.integer.valIgnoreInaccurateLocations)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 327)         set(meters) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 328)             setInt(R.string.preferenceKeyIgnoreInaccurateLocations, meters)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 329)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 330)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 331)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 332)     @get:Export(keyResId = R.string.preferenceKeyClientId, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 333)     @set:Import(keyResId = R.string.preferenceKeyClientId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 334)     var clientId: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 335)         get() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 336)             var clientId = getStringOrDefault(R.string.preferenceKeyClientId, R.string.valEmpty)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 337)             if ("""" == clientId) clientId = clientIdDefault"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 338)             return clientId
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 339)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 340)         set(clientId) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 341)             setString(R.string.preferenceKeyClientId, clientId)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 342)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 343)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 344)     @get:Export(keyResId = R.string.preferenceKeyPubTopicBase, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 345)     @set:Import(keyResId = R.string.preferenceKeyPubTopicBase)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 346)     var pubTopicBaseFormatString: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 347)         get() = getStringOrDefault(R.string.preferenceKeyPubTopicBase, R.string.valPubTopic)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 348)         set(deviceTopic) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 349)             setString(R.string.preferenceKeyPubTopicBase, deviceTopic)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 350)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 351)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 352)     val pubTopicBase: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 353)         get() = pubTopicBaseFormatString.replace(""%u"", username).replace(""%d"", deviceId)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 354)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 355)     @get:Export(keyResId = R.string.preferenceKeySubTopic, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 356)     @set:Import(keyResId = R.string.preferenceKeySubTopic)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 357)     var subTopic: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 358)         get() = getStringOrDefault(R.string.preferenceKeySubTopic, R.string.defaultSubTopic)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 359)         set(string) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 360)             setString(R.string.preferenceKeySubTopic, string)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 361)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 362)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 363)     @get:Export(keyResId = R.string.preferenceKeySub, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 364)     @set:Import(keyResId = R.string.preferenceKeySub)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 365)     var sub: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 366)         get() = getBooleanOrDefault(R.string.preferenceKeySub, R.bool.valSub)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 367)         set(sub) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 368)             setBoolean(R.string.preferenceKeySub, sub)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 369)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 370)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 371)     // value validation - must be max 2 characters, only letters and digits"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 372)     @get:Export(keyResId = R.string.preferenceKeyTrackerId, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 373)     @set:Import(keyResId = R.string.preferenceKeyTrackerId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 374)     var trackerId: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 375)         get() = getTrackerId(false)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 376)         set(trackerId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 377)             val len = trackerId.length
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 378)             // value validation - must be max 2 characters, only letters and digits"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 379)             if (len >= 2) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 380)                 val shortTrackerId = trackerId.substring(0, 2)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 381)                 if (Character.isLetterOrDigit(shortTrackerId[0]) && Character.isLetterOrDigit(shortTrackerId[1])) setString(R.string.preferenceKeyTrackerId, shortTrackerId)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 382)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 383)                 if (len > 0 && Character.isLetterOrDigit(trackerId[0])) setString(R.string.preferenceKeyTrackerId, trackerId) else setString(R.string.preferenceKeyTrackerId, """")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 384)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 385)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 386)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 387)     fun getTrackerId(fallback: Boolean): String {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 388)         val tid = getStringOrDefault(R.string.preferenceKeyTrackerId, R.string.valEmpty)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 389)         return if (tid.isEmpty()) if (fallback) trackerIdDefault else """" else tid"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 390)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 391)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 392)     // defaults to the last two characters of configured deviceId.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 393)     // Empty trackerId won't be included in the message.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 394)     private val trackerIdDefault: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 395)         get() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 396)             val deviceId: String? = deviceId
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 397)             return if (deviceId != null && deviceId.length >= 2) deviceId.substring(deviceId.length - 2) // defaults to the last two characters of configured deviceId.
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 398)             else ""na"" // Empty trackerId won't be included in the message."
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 399)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 400)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 401)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 402)     @get:Export(keyResId = R.string.preferenceKeyPort, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 403)     @set:Import(keyResId = R.string.preferenceKeyPort)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 404)     var port: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 405)         get() = getIntOrDefault(R.string.preferenceKeyPort, R.integer.valPort)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 406)         set(port) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 407)             if (port in 1..65535) setInt(R.string.preferenceKeyPort, port) else setPortDefault()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 408)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 409)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 410)     val portWithHintSupport: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 411)         get() = getIntWithHintSupport(R.string.preferenceKeyPort)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 412)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 413)     fun setPortDefault() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 414)         clearKey(R.string.preferenceKeyPort)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 415)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 416)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 417)     @get:Export(keyResId = R.string.preferenceKeyMqttProtocolLevel, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 418)     @set:Import(keyResId = R.string.preferenceKeyMqttProtocolLevel)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 419)     var mqttProtocolLevel: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 420)         get() = getIntOrDefault(R.string.preferenceKeyMqttProtocolLevel, R.integer.valMqttProtocolLevel)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 421)         set(mqttProtocolLevel) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 422)             setInt(R.string.preferenceKeyMqttProtocolLevel, if ("
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 423)                     mqttProtocolLevel == MqttConnectOptions.MQTT_VERSION_DEFAULT ||
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 424)                     mqttProtocolLevel == MqttConnectOptions.MQTT_VERSION_3_1 ||
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 425)                     mqttProtocolLevel == MqttConnectOptions.MQTT_VERSION_3_1_1) mqttProtocolLevel else MqttConnectOptions.MQTT_VERSION_DEFAULT)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 426)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 427)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 428)     // Unit is seconds
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 429)     // Minimum time is 15minutes because work manager cannot schedule any faster
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 430)     @get:Export(keyResId = R.string.preferenceKeyKeepalive, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 431)     @set:Import(keyResId = R.string.preferenceKeyKeepalive)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 432)     var keepalive: Int
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 433)         get() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 434)             if (isExperimentalFeatureEnabled(EXPERIMENTAL_FEATURE_ALLOW_SMALL_KEEPALIVE)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 435)                 return getIntOrDefault(R.string.preferenceKeyKeepalive, R.integer.valKeepalive).coerceAtLeast(1)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 436)             }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 437)             return getIntOrDefault(R.string.preferenceKeyKeepalive, R.integer.valKeepalive).coerceAtLeast(TimeUnit.MILLISECONDS.toSeconds(Scheduler.MIN_PERIODIC_INTERVAL_MILLIS).toInt())"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 438)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 439)         set(value) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 440)             when {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 441)                 isExperimentalFeatureEnabled(EXPERIMENTAL_FEATURE_ALLOW_SMALL_KEEPALIVE) -> {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 442)                     setInt(R.string.preferenceKeyKeepalive, value.coerceAtLeast(1))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 443)                 }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 444)                 keepAliveInRange(value) -> setInt(R.string.preferenceKeyKeepalive, value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 445)                 else -> setKeepaliveDefault()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 446)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 447)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 448)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 449)     fun keepAliveInRange(i: Int): Boolean = i >= TimeUnit.MILLISECONDS.toSeconds(Scheduler.MIN_PERIODIC_INTERVAL_MILLIS)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 450)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 451)     val minimumKeepalive = TimeUnit.MILLISECONDS.toSeconds(Scheduler.MIN_PERIODIC_INTERVAL_MILLIS)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 452)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 453)     val keepaliveWithHintSupport: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 454)         get() = getIntWithHintSupport(R.string.preferenceKeyKeepalive)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 455)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 456)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 457)     fun setKeepaliveDefault() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 458)         clearKey(R.string.preferenceKeyKeepalive)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 459)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 460)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 461)     @get:Export(keyResId = R.string.preferenceKeyNotificationEvents, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 462)     @set:Import(keyResId = R.string.preferenceKeyNotificationEvents)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 463)     var notificationEvents: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 464)         get() = getBooleanOrDefault(R.string.preferenceKeyNotificationEvents, R.bool.valNotificationEvents)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 465)         set(notificationEvents) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 466)             setBoolean(R.string.preferenceKeyNotificationEvents, notificationEvents)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 467)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 468)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 469)     @get:Export(keyResId = R.string.preferenceKeyLocatorDisplacement, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 470)     @set:Import(keyResId = R.string.preferenceKeyLocatorDisplacement)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 471)     var locatorDisplacement: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 472)         get() = getIntOrDefault(R.string.preferenceKeyLocatorDisplacement, R.integer.valLocatorDisplacement)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 473)         set(anInt) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 474)             setInt(R.string.preferenceKeyLocatorDisplacement, anInt)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 475)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 476)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 477)     @get:Export(keyResId = R.string.preferenceKeyLocatorPriority, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 478)     @set:Import(keyResId = R.string.preferenceKeyLocatorPriority)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 479)     var locatorPriority: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 480)         get() = getIntOrDefault(R.string.preferenceKeyLocatorPriority, R.integer.valLocatorPriority)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 481)         set(anInt) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 482)             if (anInt in 0..3) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 483)                 setInt(R.string.preferenceKeyLocatorPriority, anInt)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 484)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 485)                 Timber.e(""invalid locator priority specified %s"", anInt)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 486)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 487)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 488)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 489)     @get:Export(keyResId = R.string.preferenceKeyTLSCaCrt, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 490)     @set:Import(keyResId = R.string.preferenceKeyTLSCaCrt)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 491)     var tlsCaCrt: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 492)         get() = getStringOrDefault(R.string.preferenceKeyTLSCaCrt, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 493)         set(name) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 494)             setString(R.string.preferenceKeyTLSCaCrt, name)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 495)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 496)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 497)     @get:Export(keyResId = R.string.preferenceKeyHost, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 498)     @set:Import(keyResId = R.string.preferenceKeyHost)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 499)     var host: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 500)         get() = getStringOrDefault(R.string.preferenceKeyHost, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 501)         set(value) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 502)             setString(R.string.preferenceKeyHost, value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 503)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 504)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 505)     @get:Export(keyResId = R.string.preferenceKeyPassword, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 506)     @set:Import(keyResId = R.string.preferenceKeyPassword)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 507)     var password: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 508)         get() = getStringOrDefault(R.string.preferenceKeyPassword, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 509)         set(password) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 510)             setString(R.string.preferenceKeyPassword, password)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 511)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 512)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 513)     @get:Export(keyResId = R.string.preferenceKeyTLS, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 514)     @set:Import(keyResId = R.string.preferenceKeyTLS)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 515)     var tls: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 516)         get() = getBooleanOrDefault(R.string.preferenceKeyTLS, R.bool.valTls)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 517)         set(tlsSpecifier) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 518)             setBoolean(R.string.preferenceKeyTLS, tlsSpecifier)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 519)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 520)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 521)     @get:Export(keyResId = R.string.preferenceKeyWS, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 522)     @set:Import(keyResId = R.string.preferenceKeyWS)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 523)     var ws: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 524)         get() = getBooleanOrDefault(R.string.preferenceKeyWS, R.bool.valWs)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 525)         set(wsEnable) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 526)             setBoolean(R.string.preferenceKeyWS, wsEnable)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 527)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 528)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 529)     @get:Export(keyResId = R.string.preferenceKeyTLSClientCrt, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 530)     @set:Import(keyResId = R.string.preferenceKeyTLSClientCrt)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 531)     var tlsClientCrt: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 532)         get() = getStringOrDefault(R.string.preferenceKeyTLSClientCrt, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 533)         set(name) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 534)             setString(R.string.preferenceKeyTLSClientCrt, name)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 535)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 536)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 537)     @get:Export(keyResId = R.string.preferenceKeyNotificationHigherPriority, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 538)     @set:Import(keyResId = R.string.preferenceKeyNotificationHigherPriority)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 539)     var notificationHigherPriority: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 540)         get() = getBooleanOrDefault(R.string.preferenceKeyNotificationHigherPriority, R.bool.valNotificationHigherPriority)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 541)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 542)             setBoolean(R.string.preferenceKeyNotificationHigherPriority, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 543)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 544)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 545)     @get:Export(keyResId = R.string.preferenceKeyNotificationLocation, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 546)     @set:Import(keyResId = R.string.preferenceKeyNotificationLocation)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 547)     var notificationLocation: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 548)         get() = getBooleanOrDefault(R.string.preferenceKeyNotificationLocation, R.bool.valNotificationLocation)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 549)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 550)             setBoolean(R.string.preferenceKeyNotificationLocation, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 551)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 552)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 553)     @get:Export(keyResId = R.string.preferenceKeyPubQos, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 554)     @set:Import(keyResId = R.string.preferenceKeyPubQos)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 555)     var pubQos: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 556)         get() = getIntOrDefault(R.string.preferenceKeyPubQos, R.integer.valPubQos)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 557)         set(anInt) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 558)             setInt(R.string.preferenceKeyPubQos, anInt.coerceAtMost(2))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 559)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 560)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 561)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 562)     @get:Export(keyResId = R.string.preferenceKeyPubRetain, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 563)     @set:Import(keyResId = R.string.preferenceKeyPubRetain)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 564)     var pubRetain: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 565)         get() = getBooleanOrDefault(R.string.preferenceKeyPubRetain, R.bool.valPubRetain)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 566)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 567)             setBoolean(R.string.preferenceKeyPubRetain, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 568)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 569)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 570)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 571)     @get:Export(keyResId = R.string.preferenceKeySubQos, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 572)     @set:Import(keyResId = R.string.preferenceKeySubQos)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 573)     var subQos: Int
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 574)         get() = getIntOrDefault(R.string.preferenceKeySubQos, R.integer.valSubQos)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 575)         set(anInt) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 576)             setInt(R.string.preferenceKeySubQos, anInt.coerceAtMost(2))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 577)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 578)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 579)     @get:Export(keyResId = R.string.preferenceKeyAutostartOnBoot, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 580)     @set:Import(keyResId = R.string.preferenceKeyAutostartOnBoot)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 581)     var autostartOnBoot: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 582)         get() = getBooleanOrDefault(R.string.preferenceKeyAutostartOnBoot, R.bool.valAutostartOnBoot)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 583)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 584)             setBoolean(R.string.preferenceKeyAutostartOnBoot, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 585)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 586)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 587)     @get:Export(keyResId = R.string.preferenceKeyInfo, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 588)     @set:Import(keyResId = R.string.preferenceKeyInfo)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 589)     var info: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 590)         get() = getBooleanOrDefault(R.string.preferenceKeyInfo, R.bool.valInfo)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 591)         set(info) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 592)             setBoolean(R.string.preferenceKeyInfo, info)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 593)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 594)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 595)     @get:Export(keyResId = R.string.preferenceKeyTLSClientCrtPassword, exportModeMqtt = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 596)     @set:Import(keyResId = R.string.preferenceKeyTLSClientCrtPassword)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 597)     var tlsClientCrtPassword: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 598)         get() = getStringOrDefault(R.string.preferenceKeyTLSClientCrtPassword, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 599)         set(password) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 600)             setString(R.string.preferenceKeyTLSClientCrtPassword, password)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 601)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 602)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 603)     @get:Export(keyResId = R.string.preferenceKeyURL, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 604)     @set:Import(keyResId = R.string.preferenceKeyURL)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 605)     var url: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 606)         get() = getStringOrDefault(R.string.preferenceKeyURL, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 607)         set(url) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 608)             setString(R.string.preferenceKeyURL, url)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 609)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 610)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 611)     @get:Export(keyResId = R.string.preferenceKeyFusedRegionDetection, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 612)     @set:Import(keyResId = R.string.preferenceKeyFusedRegionDetection)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 613)     var fusedRegionDetection: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 614)         get() = getBooleanOrDefault(R.string.preferenceKeyFusedRegionDetection, R.bool.valTrue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 615)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 616)             setBoolean(R.string.preferenceKeyFusedRegionDetection, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 617)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 618)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 619)     @get:Export(keyResId = R.string.preferenceKeyDebugLog, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 620)     @set:Import(keyResId = R.string.preferenceKeyDebugLog)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 621)     var debugLog: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 622)         get() = getBooleanOrDefault(R.string.preferenceKeyDebugLog, R.bool.valFalse)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 623)         set(debug) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 624)             setBoolean(R.string.preferenceKeyDebugLog, debug)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 625)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 626)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 627)     @get:Export(keyResId = R.string.preferenceKeyRemoteConfiguration, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 628)     @set:Import(keyResId = R.string.preferenceKeyRemoteConfiguration)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 629)     var remoteConfiguration: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 630)         get() = getBooleanOrDefault(R.string.preferenceKeyRemoteConfiguration, R.bool.valFalse)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 631)         set(newValue) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 632)             setBoolean(R.string.preferenceKeyRemoteConfiguration, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 633)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 634)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 635)     @Import(keyResId = R.string.preferenceKeyGeocodeEnabled)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 636)     fun setGeocodeEnabled(newValue: Boolean) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 637)         reverseGeocodeProvider = if (newValue) REVERSE_GEOCODE_PROVIDER_GOOGLE else REVERSE_GEOCODE_PROVIDER_NONE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 638)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 639)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 640)     @get:Export(keyResId = R.string.preferenceKeyReverseGeocodeProvider, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 641)     @set:Import(keyResId = R.string.preferenceKeyReverseGeocodeProvider)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 642)     var reverseGeocodeProvider: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 643)         get() = getStringOrDefault(R.string.preferenceKeyReverseGeocodeProvider, R.string.valDefaultGeocoder)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 644)         set(newValue) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 645)             if (REVERSE_GEOCODE_PROVIDERS.contains(newValue)) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 646)                 setString(R.string.preferenceKeyReverseGeocodeProvider, newValue)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 647)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 648)                 setString(R.string.preferenceKeyReverseGeocodeProvider, REVERSE_GEOCODE_PROVIDER_NONE)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 649)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 650)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 651)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 652)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 653)     @get:Export(keyResId = R.string.preferenceKeyExperimentalFeatures, exportModeMqtt = true, exportModeHttp = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 654)     @set:Import(keyResId = R.string.preferenceKeyExperimentalFeatures)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 655)     var experimentalFeatures: Set<String>
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 656)         get() = getStringSet(R.string.preferenceKeyExperimentalFeatures).toSortedSet()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 657)         set(value) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 658)             setStringSet(R.string.preferenceKeyExperimentalFeatures, value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 659)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 660)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 661)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 662)     // Not used on public, as many people might use the same device type"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 663)     private val deviceIdDefault: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 664)         get() = // Use device name (Mako, Surnia, etc. and strip all non alpha digits)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 665)             Build.DEVICE?.replace("" "", ""-"")?.replace(""[a-zA-Z0-9]+"".toRegex(), """")?.toLowerCase(Locale.getDefault())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 666)                     ?: ""unknown"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 667)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 668)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 669)     private val clientIdDefault: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 670)         get() = (username + deviceId).replace(""\\W"".toRegex(), """").toLowerCase(Locale.getDefault())"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 671)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 672)     val pubTopicLocations: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 673)         get() = pubTopicBase
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 674)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 675)     val pubTopicWaypoints: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 676)         get() = pubTopicBase + pubTopicWaypointsPart
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 677)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 678)     val pubTopicWaypointsPart: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 679)         get() = ""/waypoints"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 680)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 681)     val pubTopicEvents: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 682)         get() = pubTopicBase + pubTopicEventsPart
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 683)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 684)     val pubTopicEventsPart: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 685)         get() = ""/event"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 686)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 687)     val pubTopicInfoPart: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 688)         get() = ""/info"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 689)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 690)     val pubTopicCommands: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 691)         get() = pubTopicBase + pubTopicCommandsPart
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 692)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 693)     val pubTopicCommandsPart: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 694)         get() = ""/cmd"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 695)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 696)     // Maybe make this configurable
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 697)     // For now it makes things easier to change
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 698)     val pubQosEvents: Int
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 699)         get() = pubQos
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 700)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 701)     val pubRetainEvents: Boolean
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 702)         get() = false
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 703)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 704)     val pubQosWaypoints: Int
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 705)         get() = 0
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 706)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 707)     val pubRetainWaypoints: Boolean
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 708)         get() = false
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 709)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 710)     val pubQosLocations: Int
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 711)         get() = pubQos
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 712)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 713)     val pubRetainLocations: Boolean
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 714)         get() = pubRetain
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 715)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 716)     val encryptionKey: String
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 717)         get() = getStringOrDefault(R.string.preferenceKeyEncryptionKey, R.string.valEmpty)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 718)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 719)     // sharedPreferences because the value is independent from the selected mode
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 720)     val isSetupCompleted: Boolean
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 721)         get() =// sharedPreferences because the value is independent from the selected mode
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 722)             !preferencesStore.getBoolean(getPreferenceKey(R.string.preferenceKeySetupNotCompleted), true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 723)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 724)     fun setSetupCompleted() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 725)         preferencesStore.putBoolean(getPreferenceKey(R.string.preferenceKeySetupNotCompleted), false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 726)         isFirstStart = false
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 727)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 728)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 729)     val isObjectboxMigrated: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 730)         get() = isFirstStart || preferencesStore.getBoolean(getPreferenceKey(R.string.preferenceKeyObjectboxMigrated), false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 731)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 732)     fun setObjectBoxMigrated() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 733)         preferencesStore.putBoolean(getPreferenceKey(R.string.preferenceKeyObjectboxMigrated), true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 734)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 735)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 736)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 737)     private fun getBooleanOrDefault(resKeyId: Int, defId: Int): Boolean {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 738)         return preferencesStore.getBoolean(getPreferenceKey(resKeyId), getBooleanResource(defId))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 739)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 740)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 741)     private fun getBooleanResource(resId: Int): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 742)         return context.resources.getBoolean(resId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 743)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 744)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 745)     private fun getIntOrDefault(resKeyId: Int, defId: Int): Int {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 746)         return try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 747)             preferencesStore.getInt(getPreferenceKey(resKeyId), getIntResource(defId))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 748)         } catch (e: ClassCastException) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 749)             Timber.e(""Error retriving string preference %s, returning default"", getPreferenceKey(resKeyId))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 750)             getIntResource(defId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 751)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 752)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 753)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 754)     private fun getIntResource(resId: Int): Int {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 755)         return context.resources.getInteger(resId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 756)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 757)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 758)     private fun getIntWithHintSupport(resKeyId: Int): String {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 759)         val i = getIntOrDefault(resKeyId, R.integer.valInvalid)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 760)         return if (i == -1) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 761)             
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 762)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 763)             i.toString()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 764)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 765)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 766)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 767)     private fun getStringOrDefault(resKeyId: Int, defId: Int): String {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 768)         val key = getPreferenceKey(resKeyId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 769)         return try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 770)             val s = preferencesStore.getString(key, """")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 771)             if ("""" == s) getStringResource(defId) else s!!"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 772)         } catch (e: ClassCastException) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 773)             Timber.e(""Error retriving string preference %s, returning default"", key)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 774)             getStringResource(defId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 775)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 776)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 777)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 778)     private fun getStringResource(resId: Int): String {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 779)         return context.resources.getString(resId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 780)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 781)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 782)     private fun setString(resKeyId: Int, value: String) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 783)         preferencesStore.putString(getPreferenceKey(resKeyId), value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 784)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 785)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 786)     private fun setInt(resKeyId: Int, value: Int) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 787)         preferencesStore.putInt(getPreferenceKey(resKeyId), value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 788)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 789)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 790)     private fun setBoolean(resKeyId: Int, value: Boolean) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 791)         preferencesStore.putBoolean(getPreferenceKey(resKeyId), value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 792)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 793)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 794)     private fun setStringSet(resKeyId: Int, value: Set<String>) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 795)         preferencesStore.putStringSet(getPreferenceKey(resKeyId), value)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 796)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 797)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 798)     private fun getStringSet(resKeyId: Int): Set<String> {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 799)         return preferencesStore.getStringSet(getPreferenceKey(resKeyId))
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 800)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 801)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 802)     private fun clearKey(key: String?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 803)         preferencesStore.remove(key!!)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 804)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 805)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 806)     private fun clearKey(resKeyId: Int) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 807)         clearKey(getPreferenceKey(resKeyId))
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 808)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 809)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 810)     fun isExperimentalFeatureEnabled(feature: String): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 811)         return when {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 812)             else -> experimentalFeatures.contains(feature)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 813)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 814)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 815)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 816)     @Retention(AnnotationRetention.RUNTIME)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 817)     @Target(AnnotationTarget.FUNCTION, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.PROPERTY_SETTER)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 818)     annotation class Export(val keyResId: Int = 0, val exportModeMqtt: Boolean = false, val exportModeHttp: Boolean = false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 819)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 820)     @Retention(AnnotationRetention.RUNTIME)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 821)     @Target(AnnotationTarget.FUNCTION, AnnotationTarget.PROPERTY_GETTER, AnnotationTarget.PROPERTY_SETTER)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 822)     annotation class Import(val keyResId: Int = 0)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 823)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 824)     fun getPreferenceKey(res: Int): String {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 825)         return getStringResource(res)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 826)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 827)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 828)     init {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 829)         val modePreferenceKey = getPreferenceKey(R.string.preferenceKeyModeId)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 830)         val initMode = preferencesStore.getInitMode(
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 831)                 modePreferenceKey,"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 832)                 getIntResource(R.integer.valModeId))
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 833)         setMode(initMode, true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 834)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 835)         // Migrations
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 836)         if (preferencesStore.hasKey(getPreferenceKey(R.string.preferenceKeyGeocodeEnabled))) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 837)             val oldEnabledValue = preferencesStore.getBoolean(getPreferenceKey(R.string.preferenceKeyGeocodeEnabled), false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 838)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 839)             val opencageApiKey = preferencesStore.getString(getPreferenceKey(R.string.preferenceKeyOpencageGeocoderApiKey), """")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 840)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 841)             reverseGeocodeProvider = if (oldEnabledValue && opencageApiKey.isNullOrBlank()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 842)                 REVERSE_GEOCODE_PROVIDER_GOOGLE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 843)             } else if (oldEnabledValue && !opencageApiKey.isNullOrBlank()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 844)                 REVERSE_GEOCODE_PROVIDER_OPENCAGE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 845)             } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 846)                 REVERSE_GEOCODE_PROVIDER_NONE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 847)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 848)             preferencesStore.remove(getPreferenceKey(R.string.preferenceKeyGeocodeEnabled))
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 849)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 850)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 851)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 852)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 853)         const val EXPERIMENTAL_FEATURE_ALLOW_SMALL_KEEPALIVE = ""allowSmallKeepalive"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 854)         const val REVERSE_GEOCODE_PROVIDER_NONE = ""None"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 855)         const val REVERSE_GEOCODE_PROVIDER_GOOGLE = ""Google"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 856)         const val REVERSE_GEOCODE_PROVIDER_OPENCAGE = ""OpenCage"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 857)         val REVERSE_GEOCODE_PROVIDERS = listOf(REVERSE_GEOCODE_PROVIDER_NONE, REVERSE_GEOCODE_PROVIDER_GOOGLE, REVERSE_GEOCODE_PROVIDER_OPENCAGE)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 858)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/Preferences.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 859) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.Manifest
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.pm.PackageManager
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.core.content.ContextCompat
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import com.google.android.gms.common.ConnectionResult
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import com.google.android.gms.common.GoogleApiAvailability
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) @PerActivity
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class RequirementsChecker @Inject constructor(private val preferences: Preferences, val context: AppCompatActivity) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     fun areRequirementsMet(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         return isPlayCheckPassed && isPermissionCheckPassed && preferences.isSetupCompleted
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     val isPlayCheckPassed: Boolean
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         get() = GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(context) == ConnectionResult.SUCCESS
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     val isPermissionCheckPassed: Boolean
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         get() = ContextCompat.checkSelfPermission(context, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED && ContextCompat.checkSelfPermission(context, Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RequirementsChecker.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.os.Handler
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.os.HandlerThread
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.os.Looper
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.injection.qualifier.AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class RunThingsOnOtherThreads @Inject constructor(@AppContext appContext: Context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     private val backgroundHandler: Handler
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     private val mainHandler: Handler
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private val networkHandler: Handler
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     init {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         val serviceHandlerThread = HandlerThread(BACKGROUND_HANDLER_THREAD_NAME)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         serviceHandlerThread.start()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         val networkHandlerThread = HandlerThread(NETWORK_HANDLER_THREAD_NAME)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         networkHandlerThread.start()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         networkHandler = Handler(networkHandlerThread.looper)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         backgroundHandler = Handler(serviceHandlerThread.looper)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         mainHandler = Handler(appContext.mainLooper)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     fun getBackgroundLooper(): Looper {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         return backgroundHandler.looper
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     fun postOnMainHandlerDelayed(r: Runnable, delayMilliseconds: Long) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         mainHandler.postDelayed(r, delayMilliseconds)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     fun postOnNetworkHandlerDelayed(r: Runnable, delayMilliseconds: Long) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         networkHandler.postDelayed(r, delayMilliseconds)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         const val NETWORK_HANDLER_THREAD_NAME = ""networkHandlerThread"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         const val BACKGROUND_HANDLER_THREAD_NAME = ""backgroundHandlerThread"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/RunThingsOnOtherThreads.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import javax.inject.Singleton;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import java.lang.ref.WeakReference;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) public class ServiceBridge {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     private WeakReference<ServiceBridgeInterface> serviceWeakReference;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public interface ServiceBridgeInterface {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         void requestOnDemandLocationUpdate();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     ServiceBridge() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         this.serviceWeakReference = new WeakReference<>(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     public void bind(@NonNull ServiceBridgeInterface service) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         this.serviceWeakReference = new WeakReference<>(service);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     public void requestOnDemandLocationFix() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         if(serviceWeakReference == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)             Timber.e(""missing service reference"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         ServiceBridgeInterface service = serviceWeakReference.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         if(service != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)             service.requestOnDemandLocationUpdate();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/ServiceBridge.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) /*
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)  * Copyright 2016, The Android Open Source Project"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)  *      http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  * limitations under the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  */
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) package org.owntracks.android.support
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import androidx.test.espresso.IdlingResource
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19) import androidx.test.espresso.IdlingResource.ResourceCallback
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20) import org.jetbrains.annotations.NotNull
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) import java.util.concurrent.atomic.AtomicBoolean
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23) /**
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)  * A very simple implementation of [IdlingResource].
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)  * Consider using CountingIdlingResource from espresso-contrib package if you use this class from
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)  * multiple threads or need to keep a count of pending operations.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)  */
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30) class SimpleIdlingResource(private val resourceName: @NotNull String, initialIdlingState: Boolean) : IdlingResource {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     @Volatile
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     private var mCallback: ResourceCallback? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     // Idleness is controlled with this boolean.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     private val mIsIdleNow = AtomicBoolean(initialIdlingState)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     override fun getName(): String {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         return this.resourceName
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     override fun isIdleNow(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         return mIsIdleNow.get()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     override fun registerIdleTransitionCallback(callback: ResourceCallback) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         mCallback = callback
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     /**
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)      * Sets the new idle state, if isIdleNow is true, it pings the [ResourceCallback]."
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)      * @param isIdleNow false if there are pending operations, true if idle."
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)      */
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     fun setIdleState(isIdleNow: Boolean) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)         mIsIdleNow.set(isIdleNow)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         if (isIdleNow && mCallback != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)             mCallback!!.onTransitionToIdle()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleIdlingResource.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.text.Editable;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.text.TextWatcher;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) public abstract class SimpleTextChangeListener implements TextWatcher {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     public void beforeTextChanged(CharSequence s, int start, int count, int after) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     public void onTextChanged(CharSequence s, int start, int before, int count) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         onChanged(s.toString());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public void afterTextChanged(Editable s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     public abstract void onChanged(String s);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SimpleTextChangeListener.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import java.io.InputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import java.net.InetAddress;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import java.net.Socket;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import java.security.KeyManagementException;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import java.security.KeyStore;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import java.security.KeyStoreException;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import java.security.NoSuchAlgorithmException;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import java.security.UnrecoverableKeyException;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import java.security.cert.CertificateFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import java.security.cert.X509Certificate;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import java.util.Enumeration;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import javax.net.ssl.KeyManagerFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import javax.net.ssl.SSLContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import javax.net.ssl.SSLSocket;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import javax.net.ssl.TrustManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import javax.net.ssl.TrustManagerFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) public class SocketFactory extends javax.net.ssl.SSLSocketFactory{
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     private javax.net.ssl.SSLSocketFactory factory;
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     private String[] protocols=new String[] {""TLSv1"", ""TLSv1.1"", ""TLSv1.2"", ""TLSv1.3""};"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     public static class SocketFactoryOptions {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)         private InputStream caCrtInputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)         private InputStream caClientP12InputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         private String caClientP12Password;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)         public SocketFactoryOptions withCaInputStream(InputStream stream) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)             this.caCrtInputStream = stream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         public SocketFactoryOptions withClientP12InputStream(InputStream stream) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)             this.caClientP12InputStream = stream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         public SocketFactoryOptions withClientP12Password(String password) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)             this.caClientP12Password = password;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         boolean hasCaCrt() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)             return caCrtInputStream != null;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         boolean hasClientP12Crt() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)             return caClientP12Password != null;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         InputStream getCaCrtInputStream() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)             return caCrtInputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         InputStream getCaClientP12InputStream() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)             return caClientP12InputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         String getCaClientP12Password() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)             return caClientP12Password;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         boolean hasClientP12Password() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)             return (caClientP12Password != null) && !caClientP12Password.equals("""");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     private final TrustManagerFactory tmf;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     public SocketFactory(SocketFactoryOptions options) throws KeyStoreException, NoSuchAlgorithmException, IOException, KeyManagementException, java.security.cert.CertificateException, UnrecoverableKeyException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         Timber.tag(this.toString()).v(""initializing CustomSocketFactory"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         KeyManagerFactory kmf = KeyManagerFactory.getInstance(""X509"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         if(options.hasCaCrt()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             Timber.tag(this.toString()).v(""options.hasCaCrt(): true"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             KeyStore caKeyStore = KeyStore.getInstance(KeyStore.getDefaultType());
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)             caKeyStore.load(null, null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             CertificateFactory caCF = CertificateFactory.getInstance(""X.509"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             X509Certificate ca = (X509Certificate) caCF.generateCertificate(options.getCaCrtInputStream());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)             String alias = ca.getSubjectX500Principal().getName();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)             // Set propper alias name
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)             caKeyStore.setCertificateEntry(alias, ca);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             tmf.init(caKeyStore);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             Timber.v(""Certificate Owner: %s"", ca.getSubjectDN().toString());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)             Timber.v(""Certificate Issuer: %s"", ca.getIssuerDN().toString());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             Timber.v(""Certificate Serial Number: %s"", ca.getSerialNumber().toString());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)             Timber.v(""Certificate Algorithm: %s"", ca.getSigAlgName());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)             Timber.v(""Certificate Version: %s"", ca.getVersion());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)             Timber.v(""Certificate OID: %s"", ca.getSigAlgOID());"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)             Enumeration<String> aliasesCA = caKeyStore.aliases();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)             while (aliasesCA.hasMoreElements()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)                 String o = aliasesCA.nextElement();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)                 Timber.v(""Alias: %s isKeyEntry:%s isCertificateEntry:%s"", o, caKeyStore.isKeyEntry(o), caKeyStore.isCertificateEntry(o));"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             Timber.v(""CA sideload: false, using system keystore"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)             KeyStore keyStore = KeyStore.getInstance(""AndroidCAStore"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             keyStore.load(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             tmf.init(keyStore);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         if (options.hasClientP12Crt()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)             Timber.tag(this.toString()).v(""options.hasClientP12Crt(): true"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)             KeyStore clientKeyStore = KeyStore.getInstance(""PKCS12"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)             clientKeyStore.load(options.getCaClientP12InputStream(), options.hasClientP12Password() ? options.getCaClientP12Password().toCharArray() : new char[0]);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             kmf.init(clientKeyStore, options.hasClientP12Password() ? options.getCaClientP12Password().toCharArray() : new char[0]);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)             Timber.tag(this.toString()).v(""Client .p12 Keystore content: "");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             Enumeration<String> aliasesClientCert = clientKeyStore.aliases();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)             while (aliasesClientCert.hasMoreElements()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                 String o = aliasesClientCert.nextElement();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                 Timber.v(""Alias: %s"", o);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             Timber.tag(this.toString()).v(""Client .p12 sideload: false, using null client cert"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)             kmf.init(null,null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         // Create an SSLContext that uses our TrustManager
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         SSLContext context = SSLContext.getInstance(""TLS"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         context.init(kmf.getKeyManagers(), getTrustManagers(), null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         this.factory= context.getSocketFactory();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)     public TrustManager[] getTrustManagers() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         return tmf.getTrustManagers();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)     public String[] getDefaultCipherSuites() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         return this.factory.getDefaultCipherSuites();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)     public String[] getSupportedCipherSuites() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         return this.factory.getSupportedCipherSuites();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     public Socket createSocket() throws IOException{
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         SSLSocket r = (SSLSocket)this.factory.createSocket();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         r.setEnabledProtocols(protocols);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         return r;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)     public Socket createSocket(Socket s, String host, int port, boolean autoClose) throws IOException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         SSLSocket r = (SSLSocket)this.factory.createSocket(s, host, port, autoClose);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         r.setEnabledProtocols(protocols);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         return r;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)     public Socket createSocket(String host, int port) throws IOException {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         SSLSocket r = (SSLSocket)this.factory.createSocket(host, port);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         r.setEnabledProtocols(protocols);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         return r;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     public Socket createSocket(String host, int port, InetAddress localHost, int localPort) throws IOException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         SSLSocket r = (SSLSocket)this.factory.createSocket(host, port, localHost, localPort);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)         r.setEnabledProtocols(protocols);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         return r;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)     public Socket createSocket(InetAddress host, int port) throws IOException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         SSLSocket r = (SSLSocket)this.factory.createSocket(host, port);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         r.setEnabledProtocols(protocols);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)         return r;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)     public Socket createSocket(InetAddress address, int port, InetAddress localAddress, int localPort) throws IOException {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)         SSLSocket r = (SSLSocket)this.factory.createSocket(address, port, localAddress,localPort);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)         r.setEnabledProtocols(protocols);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         return r;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/SocketFactory.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.graphics.Bitmap;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) class TidBitmap {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)     private final String tid;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     private Bitmap bitmap;
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     TidBitmap(String tid, Bitmap bitmap) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         this.bitmap = bitmap;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)         this.tid = tid;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     boolean isBitmapFor(String compare) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         return compare.equals(this.tid);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     public Bitmap getBitmap() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         return bitmap;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TidBitmap.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) public class TimberDebugLogTree extends Timber.DebugTree {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     protected String createStackElementTag(@NonNull StackTraceElement element) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         return super.createStackElementTag(element) + ""/"" + element.getMethodName() + ""/"" + element.getLineNumber();"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/TimberDebugLogTree.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/ConfigurationIncompleteException.java (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.support.interfaces;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/ConfigurationIncompleteException.java (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/ConfigurationIncompleteException.java (<eulerhm@dcc.ufmg.br> 2022-12-20 3) public class ConfigurationIncompleteException extends Exception {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/ConfigurationIncompleteException.java (<eulerhm@dcc.ufmg.br> 2022-12-20 4)     public ConfigurationIncompleteException(String message) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/ConfigurationIncompleteException.java (<eulerhm@dcc.ufmg.br> 2022-12-20 5)         super(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/ConfigurationIncompleteException.java (<eulerhm@dcc.ufmg.br> 2022-12-20 6)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/ConfigurationIncompleteException.java (<eulerhm@dcc.ufmg.br> 2022-12-20 7) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.interfaces;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) public interface OutgoingMessageProcessor {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)     void onCreateFromProcessor();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)     void onDestroy();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     void checkConfigurationComplete() throws ConfigurationIncompleteException;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/OutgoingMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.support.interfaces;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 3)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 4) public interface StatefulServiceMessageProcessor {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 5)     void reconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 6)     void disconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 7)     boolean checkConnection();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/interfaces/StatefulServiceMessageProcessor.java (<eulerhm@dcc.ufmg.br> 2022-12-20 8) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/OnModeChangedPreferenceChangedListener.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.support.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/OnModeChangedPreferenceChangedListener.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/OnModeChangedPreferenceChangedListener.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) import android.content.SharedPreferences.OnSharedPreferenceChangeListener
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/OnModeChangedPreferenceChangedListener.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/OnModeChangedPreferenceChangedListener.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5) interface OnModeChangedPreferenceChangedListener : OnSharedPreferenceChangeListener {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/OnModeChangedPreferenceChangedListener.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 6)     fun onAttachAfterModeChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/OnModeChangedPreferenceChangedListener.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 7) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) /***
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4)  * Allows a preferences class to read and write values from some sort of store
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5)  */
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) interface PreferencesStore {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     fun getSharedPreferencesName(): String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     fun setMode(key: String, mode: Int)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     fun getInitMode(key: String, default: Int): Int"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     fun putBoolean(key: String, value: Boolean)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     fun getBoolean(key: String, default: Boolean): Boolean"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     fun putInt(key: String, value: Int)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     fun getInt(key: String, default: Int): Int"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     fun putString(key: String, value: String)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     fun getString(key: String, default: String): String?"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     fun putStringSet(key: String, values: Set<String>)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     fun getStringSet(key: String): Set<String>
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     fun hasKey(key:String):Boolean
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     fun remove(key: String)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     fun registerOnSharedPreferenceChangeListener(listenerModeChanged: OnModeChangedPreferenceChangedListener)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     fun unregisterOnSharedPreferenceChangeListener(listenerModeChanged: OnModeChangedPreferenceChangedListener)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/PreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.SharedPreferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import androidx.preference.PreferenceManager
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.owntracks.android.injection.qualifier.AppContext
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import javax.inject.Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.services.MessageProcessorEndpointHttp
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.services.MessageProcessorEndpointMqtt
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import java.util.*
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) private const val FILENAME_PRIVATE = ""org.owntracks.android.preferences.private"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) private const val FILENAME_HTTP = ""org.owntracks.android.preferences.http"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) /***
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)  * Implements a PreferencesStore that uses a SharedPreferecnces as a backend.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)  */
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) @Singleton
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) class SharedPreferencesStore @Inject constructor(@AppContext context: Context) : PreferencesStore {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     private lateinit var sharedPreferencesName: String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     private val activeSharedPreferencesChangeListener = LinkedList<OnModeChangedPreferenceChangedListener>()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     private lateinit var activeSharedPreferences: SharedPreferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     private val commonSharedPreferences: SharedPreferences = PreferenceManager.getDefaultSharedPreferences(context)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private val privateSharedPreferences: SharedPreferences = context.getSharedPreferences(FILENAME_PRIVATE, Context.MODE_PRIVATE)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private val httpSharedPreferences: SharedPreferences = context.getSharedPreferences(FILENAME_HTTP, Context.MODE_PRIVATE)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     // Some preferences are always read from commonSharedPreferences. We list these out so that we can use the right store when these keys are requested.
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     private val commonPreferenceKeys: List<String> = listOf(
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)             context.getString(R.string.preferenceKeyFirstStart),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)             context.getString(R.string.preferenceKeySetupNotCompleted),"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)             context.getString(R.string.preferenceKeyObjectboxMigrated)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     )
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     override fun putString(key: String, value: String) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         activeSharedPreferences.edit().putString(key, value).apply()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     override fun getString(key: String, default: String): String? = activeSharedPreferences.getString(key, default)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     override fun remove(key: String) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         activeSharedPreferences.edit().remove(key).apply()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     override fun getBoolean(key: String, default: Boolean): Boolean ="
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)             if (commonPreferenceKeys.contains(key)) commonSharedPreferences.getBoolean(key, default) else activeSharedPreferences.getBoolean(key, default)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     override fun putBoolean(key: String, value: Boolean) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         if (commonPreferenceKeys.contains(key)) commonSharedPreferences.edit().putBoolean(key, value).apply() else activeSharedPreferences.edit().putBoolean(key, value).apply()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     override fun getInt(key: String, default: Int): Int = activeSharedPreferences.getInt(key, default)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     override fun putInt(key: String, value: Int) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         activeSharedPreferences.edit().putInt(key, value).apply()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     override fun getSharedPreferencesName(): String = sharedPreferencesName
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     override fun putStringSet(key: String, values: Set<String>) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         activeSharedPreferences.edit().putStringSet(key, values).apply()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     override fun getStringSet(key: String): Set<String> {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         return activeSharedPreferences.getStringSet(key, setOf()) ?: setOf()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     override fun hasKey(key: String): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         return activeSharedPreferences.contains(key)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     override fun getInitMode(key: String, default: Int): Int = commonSharedPreferences.getInt(key, default)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     override fun setMode(key: String, mode: Int) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         detachAllActivePreferenceChangeListeners()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         when (mode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             MessageProcessorEndpointMqtt.MODE_ID -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)                 activeSharedPreferences = privateSharedPreferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)                 sharedPreferencesName = FILENAME_PRIVATE
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             MessageProcessorEndpointHttp.MODE_ID -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)                 activeSharedPreferences = httpSharedPreferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)                 sharedPreferencesName = FILENAME_HTTP
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         commonSharedPreferences.edit().putInt(key, mode).apply()"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         // Mode switcher reads from currently active sharedPreferences, so we commit the value to all"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         privateSharedPreferences.edit().putInt(key, mode).apply()"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         httpSharedPreferences.edit().putInt(key, mode).apply()"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         attachAllActivePreferenceChangeListeners()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     override fun registerOnSharedPreferenceChangeListener(listenerModeChanged: OnModeChangedPreferenceChangedListener) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         if (this::activeSharedPreferences.isInitialized) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)             activeSharedPreferences.registerOnSharedPreferenceChangeListener(listenerModeChanged)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         activeSharedPreferencesChangeListener.push(listenerModeChanged)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     override fun unregisterOnSharedPreferenceChangeListener(listenerModeChanged: OnModeChangedPreferenceChangedListener) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         if (this::activeSharedPreferences.isInitialized) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             activeSharedPreferences.unregisterOnSharedPreferenceChangeListener(listenerModeChanged)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         activeSharedPreferencesChangeListener.remove(listenerModeChanged)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     private fun detachAllActivePreferenceChangeListeners() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         activeSharedPreferencesChangeListener.forEach { activeSharedPreferences.unregisterOnSharedPreferenceChangeListener(it) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     private fun attachAllActivePreferenceChangeListeners() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         activeSharedPreferencesChangeListener.forEach {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)             activeSharedPreferences.registerOnSharedPreferenceChangeListener(it)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             it.onAttachAfterModeChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128) abstract class SharedPreferencesStoreModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     abstract fun bindSharedPreferencesStoreModule(sharedPreferencesStore: SharedPreferencesStore): PreferencesStore
5c49fd3 project/app/src/main/java/org/owntracks/android/support/preferences/SharedPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.receiver
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.os.Build
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import dagger.android.DaggerBroadcastReceiver
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.services.BackgroundService
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class StartBackgroundServiceReceiver : DaggerBroadcastReceiver() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @JvmField
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     var preferences: Preferences? = null
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override fun onReceive(context: Context, intent: Intent) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         super.onReceive(context, intent)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         if ((""android.intent.action.MY_PACKAGE_REPLACED"" == intent.action ||"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)                         ""android.intent.action.BOOT_COMPLETED"" == intent.action)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)                 && preferences!!.autostartOnBoot) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)             Timber.v(""android.intent.action.BOOT_COMPLETED received"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)             if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)                 Timber.v(""running startForegroundService"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)                 context.startForegroundService(Intent(context, BackgroundService::class.java))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)                 Timber.v(""running legacy startService"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)                 context.startService(Intent(context, BackgroundService::class.java))"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/StartBackgroundServiceReceiver.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.receiver;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.BroadcastReceiver;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) public final class TaskerReceiver extends BroadcastReceiver
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     public void onReceive(final Context context, final Intent intent)"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         Timber.v(""Receiver Fired"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/receiver/TaskerReceiver.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support.widgets;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.text.format.DateUtils;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.widget.TextView;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.databinding.BindingAdapter;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.databinding.BindingConversion;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.databinding.InverseMethod;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import com.google.android.gms.location.Geofence;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import com.rengwuxian.materialedittext.MaterialEditText;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.services.MessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.services.MessageProcessorEndpointHttp;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.services.MessageProcessorEndpointMqtt;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import java.text.DateFormat;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) public class BindingConversions {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     private static final String EMPTY_STRING = """";"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     // XX to String
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     @BindingConversion
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     @InverseMethod(""convertToInteger"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     public static String convertToString(@Nullable Integer d) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)         return d != null ? d.toString() : EMPTY_STRING;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     @BindingConversion
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @InverseMethod(""convertToIntegerZeroIsEmpty"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     public static String convertToStringZeroIsEmpty(@Nullable Integer d) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         return d != null && d > 0 ? d.toString() : EMPTY_STRING;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     @BindingConversion
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     public static String convertToString(@Nullable Long d) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         return d != null ? d.toString() : EMPTY_STRING;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     @BindingConversion
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     public static String convertToString(boolean d) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         return String.valueOf(d);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     @BindingConversion
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     public static String convertToString(String s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         return s != null ? s : EMPTY_STRING;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     // XX to Integer
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     @BindingConversion
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     public static Integer convertToInteger(String d) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)             return Integer.parseInt(d);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         } catch (NumberFormatException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)             return 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     @BindingConversion
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     public static Integer convertToIntegerZeroIsEmpty(String d) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         return convertToInteger(d);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     // Misc
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     @BindingAdapter({""android:text""})"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     public static void setText(TextView view, MessageProcessor.EndpointState state) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         view.setText(state != null ? state.getLabel(view.getContext()) : view.getContext().getString(R.string.na));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     @BindingAdapter(""met_helperText"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     public static void setVisibility(MaterialEditText view, String text) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         view.setHelperText(text);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     @BindingAdapter(""android:visibility"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     public static void setVisibility(View view, boolean visible) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         view.setVisibility(visible ? View.VISIBLE : View.GONE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     @BindingAdapter(""relativeTimeSpanString"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)     public static void setRelativeTimeSpanString(TextView view, long tstSeconds) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         if (DateUtils.isToday(TimeUnit.SECONDS.toMillis(tstSeconds))) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)             view.setText(DateFormat.getTimeInstance(DateFormat.SHORT).format(TimeUnit.SECONDS.toMillis(tstSeconds)));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             view.setText(DateFormat.getDateInstance(DateFormat.SHORT).format(TimeUnit.SECONDS.toMillis(tstSeconds)));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     @BindingAdapter(""lastTransition"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     public static void setLastTransition(TextView view, int transition) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         switch (transition) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)             case 0:
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)                 view.setText(view.getResources().getString(R.string.region_unknown));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)             case Geofence.GEOFENCE_TRANSITION_ENTER:
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)                 view.setText(view.getResources().getString(R.string.region_inside));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             case Geofence.GEOFENCE_TRANSITION_EXIT:
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)                 view.setText(view.getResources().getString(R.string.region_outside));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     public static int convertModeIdToLabelResId(int modeId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         switch (modeId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)             case MessageProcessorEndpointHttp.MODE_ID:
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                 return R.string.mode_http_private_label;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             case MessageProcessorEndpointMqtt.MODE_ID:
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                 return R.string.mode_mqtt_private_label;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/BindingConversions.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.widgets;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.util.AttributeSet;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public class EditIntegerPreference extends EditStringPreference {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     public EditIntegerPreference(Context context, AttributeSet attrs) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         super(context, attrs);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     public EditIntegerPreference(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         super(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     protected boolean persistString(String value) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         if(value == null || """".equals(value)) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)             getSharedPreferences().edit().remove(getKey()).apply();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)             return persistInt(Integer.valueOf(value));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         } catch (NumberFormatException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     protected String getPersistedString(String defaultReturnValue) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         if(getSharedPreferences().contains(getKey())) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)                 int intValue = getPersistedInt(0);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)                 return String.valueOf(intValue);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)             }  catch (ClassCastException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)                 Timber.e(""Error retriving string preference %s, returning default"", defaultReturnValue);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)                 return defaultReturnValue;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)             return defaultReturnValue;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditIntegerPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.widgets;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.util.AttributeSet;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.annotation.StringRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.preference.EditTextPreference;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) public class EditStringPreference extends EditTextPreference {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     EditStringPreference(Context context, AttributeSet attrs) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         super(context, attrs);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     public EditStringPreference(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         super(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19) //
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20) //    @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) //    protected void showDialog(Bundle s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22) //        super.showDialog(s);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23) //        getEditText().setHint(this.hint);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24) //    }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         private String hint;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     public void setHint(String hint) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         this.hint = hint;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     public void setText(String text) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         if(!shouldPersist())
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         super.setText(text);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     public EditStringPreference withPreferencesSummary(@StringRes int res) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         setSummary(res);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     public EditStringPreference withDialogMessage(@StringRes int res) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         setDialogMessage(res);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/EditStringPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.widgets;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.util.AttributeSet;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) // Recycler view that dynamically shows/hides an empty placeholder view
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) public class RecyclerView extends androidx.recyclerview.widget.RecyclerView {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     private View emptyView;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     private final AdapterDataObserver emptyObserver = new AdapterDataObserver() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         public void onChanged() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)             Adapter<?> adapter =  getAdapter();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)             if(adapter != null && emptyView != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)                 if(adapter.getItemCount() == 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)                     emptyView.setVisibility(View.VISIBLE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)                     RecyclerView.this.setVisibility(View.GONE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)                 else {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)                     emptyView.setVisibility(View.GONE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)                     RecyclerView.this.setVisibility(View.VISIBLE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     };
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     public RecyclerView(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         super(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     public RecyclerView(Context context, AttributeSet attrs) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         super(context, attrs);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     public RecyclerView(Context context, AttributeSet attrs, int defStyle) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         super(context, attrs, defStyle);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     public void setAdapter(Adapter adapter) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         super.setAdapter(adapter);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)         if(adapter != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)             adapter.registerAdapterDataObserver(emptyObserver);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         emptyObserver.onChanged();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     public void setEmptyView(View emptyView) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         this.emptyView = emptyView;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/RecyclerView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support.widgets;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2) // Based on https://github.com/amulyakhare/TextDrawable with some fixes
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.graphics.*;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.graphics.drawable.ShapeDrawable;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.graphics.drawable.shapes.OvalShape;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.graphics.drawable.shapes.RectShape;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.graphics.drawable.shapes.RoundRectShape;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import java.util.Arrays;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import java.util.Locale;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import java.util.Random;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) public class TextDrawable extends ShapeDrawable {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18)     private final Paint textPaint;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     private final Paint borderPaint;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     private static final float SHADE_FACTOR = 0.9f;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     private final String text;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)     private final RectShape shape;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23)     private final int height;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     private final int width;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     private final int fontSize;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     private final float radius;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     private final int borderThickness;
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     private static final Typeface typeface = Typeface.create(""sans-serif-light"", Typeface.NORMAL);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private TextDrawable(Builder builder) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)         super(builder.shape);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         int color;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)         // shape properties
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         shape = builder.shape;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         height = builder.height;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         width = builder.width;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         radius = builder.radius;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         // text and color
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         text = builder.toUpperCase ? builder.text.toUpperCase(Locale.getDefault()) : builder.text;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         color = builder.color;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         // text paint settings
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         fontSize = builder.fontSize;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         textPaint = new Paint();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         textPaint.setColor(builder.textColor);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         textPaint.setAntiAlias(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         textPaint.setFakeBoldText(builder.isBold);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         textPaint.setStyle(Paint.Style.FILL);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         textPaint.setTypeface(typeface);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         textPaint.setTextAlign(Paint.Align.CENTER);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         textPaint.setStrokeWidth(builder.borderThickness);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         // border paint settings
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         borderThickness = builder.borderThickness;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         borderPaint = new Paint();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         borderPaint.setColor(getDarkerShade(color));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         borderPaint.setStyle(Paint.Style.STROKE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         borderPaint.setStrokeWidth(borderThickness);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         // drawable paint color
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         Paint paint = getPaint();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         paint.setColor(color);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     private int getDarkerShade(int color) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         return Color.rgb((int)(SHADE_FACTOR * Color.red(color)),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)                 (int)(SHADE_FACTOR * Color.green(color)),"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)                 (int)(SHADE_FACTOR * Color.blue(color)));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     public void draw(Canvas canvas) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         super.draw(canvas);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         Rect r = getBounds();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         // draw border
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         if (borderThickness > 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             drawBorder(canvas);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         int count = canvas.save();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         canvas.translate(r.left, r.top);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         // draw text
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         int width = this.width < 0 ? r.width() : this.width;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         int height = this.height < 0 ? r.height() : this.height;
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         int fontSize = this.fontSize < 0 ? (Math.min(width, height) / 2) : this.fontSize;"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         textPaint.setTextSize(fontSize);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         canvas.drawText(text, width / 2, (float)height / 2 - ((textPaint.descent() + textPaint.ascent()) / 2), textPaint);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         canvas.restoreToCount(count);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     private void drawBorder(Canvas canvas) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         RectF rect = new RectF(getBounds());
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         rect.inset(borderThickness/2, borderThickness/2);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         if (shape instanceof OvalShape) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)             canvas.drawOval(rect, borderPaint);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         else if (shape instanceof RoundRectShape) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             canvas.drawRoundRect(rect, radius, radius, borderPaint);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             canvas.drawRect(rect, borderPaint);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     public void setAlpha(int alpha) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         textPaint.setAlpha(alpha);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)     public void setColorFilter(ColorFilter cf) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         textPaint.setColorFilter(cf);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)     public int getOpacity() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         return PixelFormat.TRANSLUCENT;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     public int getIntrinsicWidth() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)         return width;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)     public int getIntrinsicHeight() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         return height;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)     public static IShapeBuilder builder() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         return new Builder();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)     public static class Builder implements IConfigBuilder, IShapeBuilder, IBuilder {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         private String text;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         private int color;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         private int borderThickness;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         private int width;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         private int height;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         private RectShape shape;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)         int textColor;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         private int fontSize;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         private boolean isBold;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         private boolean toUpperCase;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         float radius;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)         private Builder() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)             text = """";"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)             color = Color.GRAY;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)             textColor = Color.WHITE;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)             borderThickness = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)             width = -1;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)             height = -1;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)             shape = new RectShape();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)             fontSize = -1;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)             isBold = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)             toUpperCase = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         public IConfigBuilder width(int width) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)             this.width = width;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)         public IConfigBuilder height(int height) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)             this.height = height;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)         public IConfigBuilder textColor(int color) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)             this.textColor = color;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         public IConfigBuilder withBorder(int thickness) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)             this.borderThickness = thickness;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)         public IConfigBuilder fontSize(int size) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)             this.fontSize = size;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)         public IConfigBuilder bold() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)             this.isBold = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)         public IConfigBuilder toUpperCase() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)             this.toUpperCase = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)         public IConfigBuilder beginConfig() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)         public IShapeBuilder endConfig() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)         public IBuilder rect() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)             this.shape = new RectShape();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)         public IBuilder round() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)             this.shape = new OvalShape();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)         public IBuilder roundRect(int radius) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)             this.radius = radius;
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)             float[] radii = {radius, radius, radius, radius, radius, radius, radius, radius};"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)             this.shape = new RoundRectShape(radii, null, null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)             return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)         public TextDrawable buildRect(String text, int color) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)             rect();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)             return build(text, color);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)         public TextDrawable buildRoundRect(String text, int color, int radius) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)             roundRect(radius);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)             return build(text, color);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)         public TextDrawable buildRound(String text, int color) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)             round();
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)             return build(text, color);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         public TextDrawable build(String text, int color) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)             this.color = color;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)             this.text = text;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)             return new TextDrawable(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)     public interface IConfigBuilder {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)         IConfigBuilder width(int width);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)         IConfigBuilder height(int height);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)         IConfigBuilder textColor(int color);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)         IConfigBuilder withBorder(int thickness);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)         IConfigBuilder fontSize(int size);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)         IConfigBuilder bold();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)         IConfigBuilder toUpperCase();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)         IShapeBuilder endConfig();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)     public interface IBuilder {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)         TextDrawable build(String text, int color);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294)     public interface IShapeBuilder {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 296)         IConfigBuilder beginConfig();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 297)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 298)         IBuilder rect();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 299)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 300)         IBuilder round();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 301)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 302)         IBuilder roundRect(int radius);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 303)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 304)         TextDrawable buildRect(String text, int color);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 305)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 306)         TextDrawable buildRoundRect(String text, int color, int radius);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 307)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 308)         TextDrawable buildRound(String text, int color);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 309)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 310)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 311)     public static class ColorGenerator {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 312)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 313)         public static ColorGenerator MATERIAL;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 314)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 315)         static {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 316)             MATERIAL = create(Arrays.asList(
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 317)                     0xffe57373,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 318)                     0xfff06292,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 319)                     0xffba68c8,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 320)                     0xff9575cd,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 321)                     0xff7986cb,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 322)                     0xff64b5f6,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 323)                     0xff4fc3f7,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 324)                     0xff4dd0e1,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 325)                     0xff4db6ac,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 326)                     0xff81c784,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 327)                     0xffaed581,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 328)                     0xffff8a65,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 329)                     0xffd4e157,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 330)                     0xffffd54f,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 331)                     0xffffb74d,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 332)                     0xffa1887f,"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 333)                     0xff90a4ae
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 334)             ));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 335)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 336)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 337)         private final List<Integer> mColors;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 338)         private final Random mRandom;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 339)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 340)         static ColorGenerator create(List<Integer> colorList) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 341)             return new ColorGenerator(colorList);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 342)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 343)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 344)         private ColorGenerator(List<Integer> colorList) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 345)             mColors = colorList;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 346)             mRandom = new Random(System.currentTimeMillis());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 347)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 348)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 349)         public int getRandomColor() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 350)             return mColors.get(mRandom.nextInt(mColors.size()));
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 351)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 352)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 353)         public int getColor(Object key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 354)             return mColors.get(Math.abs(key.hashCode()) % mColors.size());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 355)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 356)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 357)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/TextDrawable.java (<eulerhm@dcc.ufmg.br> 2022-12-20 358) }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support.widgets;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.util.AttributeSet;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.view.LayoutInflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.appcompat.widget.Toolbar;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import androidx.preference.Preference;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import androidx.preference.PreferenceScreen;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) // This is a prefrence that fakes a toolbar for a preference screen until the Android Support library supports toolbars in preferences_private screens
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) public class ToolbarPreference extends Preference {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private String title;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     private Toolbar toolbar;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     private PreferenceScreen screen;
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public ToolbarPreference(Context context, AttributeSet attrs) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         super(context, attrs);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     public ToolbarPreference(Context context, PreferenceScreen parent) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         super(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         this.screen = parent;
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24) //        parent.setPadding(0, 0, 0, 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         this.setLayoutResource(R.layout.settings_toolbar);
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27) //        View layout = inflater.inflate(R.layout.settings_toolbar, parent, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29) //        toolbar = layout.findViewById(R.id.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30) //        toolbar.setTitle(getTitle());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31) //        toolbar.setNavigationOnClickListener(v -> goUp());
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     private void goUp() {
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         if (screen == null)
"5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)             screen= findPreferenceInHierarchy(getKey()+""Screen"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40) //        if(screen != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41) //            screen.getDialog().dismiss();
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     public Toolbar getToolbar(){
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)         return toolbar;
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)
5c49fd3 project/app/src/main/java/org/owntracks/android/support/widgets/ToolbarPreference.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.base;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.ComponentName;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.content.ServiceConnection;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.os.IBinder;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.annotation.CallSuper;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.annotation.LayoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import androidx.appcompat.widget.Toolbar;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import androidx.databinding.DataBindingUtil;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import androidx.databinding.ViewDataBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.BR;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.support.DrawerProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import dagger.android.support.DaggerAppCompatActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) public abstract class BaseActivity<B extends ViewDataBinding, V extends MvvmViewModel> extends DaggerAppCompatActivity {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     protected B binding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     protected V viewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     DrawerProvider drawerProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     protected Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     private boolean hasEventBus = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     private boolean disablesAnimation = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     protected void setHasEventBus(boolean enable) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         this.hasEventBus = enable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     /* Use this method to set the content view on your Activity. This method also handles
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)      * creating the binding, setting the view model on the binding and attaching the view. */"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     protected final void bindAndAttachContentView(@LayoutRes int layoutResId, @Nullable Bundle savedInstanceState) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         if (viewModel == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)             throw new IllegalStateException(""viewModel must not be null and should be injected via activityComponent().inject(this)"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         binding = DataBindingUtil.setContentView(this, layoutResId);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         binding.setVariable(BR.vm, viewModel);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         binding.setLifecycleOwner(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         //noinspection unchecked
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         viewModel.attachView(savedInstanceState, (MvvmView) this);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     private boolean mBound;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     void setBound(boolean bound) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         mBound = bound;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     // Monitors the state of the connection to the service.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     private final ServiceConnection mServiceConnection = new ServiceConnection() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         public void onServiceConnected(ComponentName name, IBinder service) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)             if (service != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)                 setBound(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         public void onServiceDisconnected(ComponentName name) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)             setBound(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     };
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     protected void setSupportToolbar(@NonNull Toolbar toolbar) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         setSupportToolbar(toolbar, true, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     protected void setSupportToolbar(@NonNull Toolbar toolbar, boolean showTitle, boolean showHome) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         setSupportActionBar(toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         if (getSupportActionBar() != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             if (showTitle)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)                 getSupportActionBar().setTitle(getTitle());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)             getSupportActionBar().setDisplayShowTitleEnabled(showTitle);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             getSupportActionBar().setDisplayShowHomeEnabled(showHome);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)             getSupportActionBar().setDisplayHomeAsUpEnabled(showHome);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     protected void setSupportToolbarWithDrawer(@NonNull Toolbar toolbar) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         setSupportToolbar(toolbar, true, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         setDrawer(toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     protected void setDrawer(@NonNull Toolbar toolbar) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         drawerProvider.attach(toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     protected void onCreate(Bundle b) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         super.onCreate(b);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         disablesAnimation = (getIntent().getFlags() & Intent.FLAG_ACTIVITY_NO_ANIMATION) != 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     @CallSuper
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     protected void onSaveInstanceState(Bundle outState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         super.onSaveInstanceState(outState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         if (viewModel != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)             viewModel.saveInstanceState(outState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     public void onStart() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         if (disablesAnimation)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)             overridePendingTransition(0, 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         else
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)             overridePendingTransition(R.anim.push_up_in, R.anim.none);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         super.onStart();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)         //bindService(new Intent(this, BackgroundService.class), mServiceConnection, Context.BIND_AUTO_CREATE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)     protected void onStop() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         if (mBound) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)             unbindService(mServiceConnection);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             mBound = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         super.onStop();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     @CallSuper
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)     protected void onDestroy() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)         super.onDestroy();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         if (viewModel != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)             viewModel.detachView();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         binding = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         viewModel = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)     public void onResume() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         super.onResume();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         if (hasEventBus && !eventBus.isRegistered(viewModel))
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)             eventBus.register(viewModel);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     public void onPause() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         super.onPause();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         if (eventBus.isRegistered(viewModel))
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)             eventBus.unregister(viewModel);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         if (disablesAnimation)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)             overridePendingTransition(0, 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         else
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)             overridePendingTransition(R.anim.push_up_in, R.anim.none);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)     protected void disablesAnimation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         disablesAnimation = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.base;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.os.Looper;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.view.LayoutInflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.view.ViewGroup;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.annotation.LayoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import androidx.databinding.DataBindingUtil;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import androidx.databinding.ObservableList;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import androidx.databinding.OnRebindCallback;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import androidx.databinding.ViewDataBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import androidx.recyclerview.widget.RecyclerView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import androidx.recyclerview.widget.RecyclerView.ViewHolder;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import java.lang.ref.WeakReference;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) public class BaseAdapter<T> extends RecyclerView.Adapter<ViewHolder> implements View.OnClickListener, View.OnLongClickListener {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     static final Object DATA_INVALIDATION = new Object();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     private final BaseAdapterItemView itemViewArg;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     private final WeakReferenceOnListChangedCallback<T> callback = new WeakReferenceOnListChangedCallback<>(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     private WeakReference<ClickListener> clickListenerWeakReference;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private List<T> items;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private LayoutInflater inflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private ItemIds<T> itemIds;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     // Currently attached recyclerview, we don't have to listen to notifications if null."
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @Nullable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     private RecyclerView recyclerView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     protected BaseAdapter(@NonNull BaseAdapterItemView arg) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         this.itemViewArg = arg;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     public BaseAdapterItemView getItemViewArg() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         return itemViewArg;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     protected void setItems(@Nullable List<T> items) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         if (this.items == items) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         // If a recyclerview is listening, set up listeners. Otherwise wait until one is attached."
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         // No need to make a sound if nobody is listening right?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         if (recyclerView != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)             if (this.items instanceof ObservableList) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)                 ((ObservableList<T>) this.items).removeOnListChangedCallback(callback);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)             if (items instanceof ObservableList) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)                 ((ObservableList<T>) items).addOnListChangedCallback(callback);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         this.items = items;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         notifyDataSetChanged();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     private T getAdapterItem(int position) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         return items.get(position);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     private ViewDataBinding onCreateBinding(LayoutInflater inflater, @LayoutRes int layoutId, ViewGroup viewGroup) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         return DataBindingUtil.inflate(inflater, layoutId, viewGroup, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     private void onBindBinding(ViewDataBinding binding, int bindingVariable, @LayoutRes int layoutRes, int position, T item) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         if (bindingVariable != BaseAdapterItemView.BINDING_VARIABLE_NONE) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             boolean result = binding.setVariable(bindingVariable, item);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)             if (!result) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)                 Timber.e(""Unable to bind %s to %s"", bindingVariable, item);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             binding.executePendingBindings();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     public void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         if (this.recyclerView == null && items instanceof ObservableList) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)             ((ObservableList<T>) items).addOnListChangedCallback(callback);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         this.recyclerView = recyclerView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     public void onDetachedFromRecyclerView(@NonNull RecyclerView recyclerView) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         if (this.recyclerView != null && items instanceof ObservableList) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             ((ObservableList<T>) items).removeOnListChangedCallback(callback);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         this.recyclerView = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     public final ViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int layoutId) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         if (inflater == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)             inflater = LayoutInflater.from(viewGroup.getContext());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         ViewDataBinding binding = onCreateBinding(inflater, layoutId, viewGroup);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         binding.getRoot().setOnClickListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         binding.getRoot().setOnLongClickListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         final ViewHolder holder = onCreateViewHolder(binding);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         binding.addOnRebindCallback(new OnRebindCallback() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             public boolean onPreBind(ViewDataBinding binding) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)                 return isRecyclerReady();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)             public void onCanceled(ViewDataBinding binding) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)                 if (!isRecyclerReady()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)                 int position = holder.getAdapterPosition();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                 if (position != RecyclerView.NO_POSITION) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                     notifyItemChanged(position, DATA_INVALIDATION);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         return holder;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)     boolean isRecyclerReady() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         return recyclerView != null && recyclerView.isComputingLayout();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     private ViewHolder onCreateViewHolder(ViewDataBinding binding) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         return new BindingViewHolder(binding);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     public void onClick(View view) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         ClickListener<T> listener = clickListenerWeakReference.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         if (listener != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)             if (recyclerView != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)                 listener.onClick(getAdapterItem(recyclerView.getChildLayoutPosition(view)), view, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)     public boolean onLongClick(View view) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         ClickListener<T> listener = clickListenerWeakReference.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)         if (listener != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)             if (recyclerView != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)                 listener.onClick(getAdapterItem(recyclerView.getChildLayoutPosition(view)), view, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     private static class BindingViewHolder extends RecyclerView.ViewHolder {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)         BindingViewHolder(ViewDataBinding binding) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)             super(binding.getRoot());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)     public final void onBindViewHolder(ViewHolder viewHolder, int position) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)         T item = items.get(position);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         ViewDataBinding binding = DataBindingUtil.getBinding(viewHolder.itemView);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)         onBindBinding(binding, itemViewArg.bindingVariable(), itemViewArg.layoutRes(), position, item);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)     public void onBindViewHolder(ViewHolder holder, int position, List<Object> payloads) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         if (isForDataBinding(payloads)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)             ViewDataBinding binding = DataBindingUtil.getBinding(holder.itemView);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)             binding.executePendingBindings();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)             super.onBindViewHolder(holder, position, payloads);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     private boolean isForDataBinding(List<Object> payloads) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         if (payloads == null || payloads.size() == 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)             return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         for (int i = 0; i < payloads.size(); i++) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)             Object obj = payloads.get(i);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)             if (obj != DATA_INVALIDATION) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)                 return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     public int getItemViewType(int position) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)         return itemViewArg.layoutRes();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)     /**
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)      * Set the item id's for the items. If not null, this will set {@link"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)      * RecyclerView.Adapter#setHasStableIds(boolean)} to true.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)      */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)     public void setItemIds(@Nullable ItemIds<T> itemIds) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)         this.itemIds = itemIds;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)         setHasStableIds(itemIds != null);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)     public int getItemCount() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         return items == null ? 0 : items.size();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)     public long getItemId(int position) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)         return itemIds == null ? position : itemIds.getItemId(position, items.get(position));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)     private static class WeakReferenceOnListChangedCallback<T> extends ObservableList.OnListChangedCallback<ObservableList<T>> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)         final WeakReference<BaseAdapter<T>> adapterRef;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)         WeakReferenceOnListChangedCallback(BaseAdapter<T> adapter) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)             this.adapterRef = new WeakReference<>(adapter);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)         public void onChanged(ObservableList sender) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)             BaseAdapter<T> adapter = adapterRef.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)             if (adapter == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)                 return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)             ensureChangeOnMainThread();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)             adapter.notifyDataSetChanged();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)         public void onItemRangeChanged(ObservableList sender, final int positionStart, final int itemCount) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)             BaseAdapter<T> adapter = adapterRef.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)             if (adapter == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)                 return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)             ensureChangeOnMainThread();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)             adapter.notifyItemRangeChanged(positionStart, itemCount);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)         public void onItemRangeInserted(ObservableList sender, final int positionStart, final int itemCount) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)             BaseAdapter<T> adapter = adapterRef.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)             if (adapter == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)                 return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)             ensureChangeOnMainThread();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)             adapter.notifyItemRangeInserted(positionStart, itemCount);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)         public void onItemRangeMoved(ObservableList sender, final int fromPosition, final int toPosition, final int itemCount) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)             BaseAdapter<T> adapter = adapterRef.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)             if (adapter == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)                 return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)             ensureChangeOnMainThread();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)             for (int i = 0; i < itemCount; i++) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)                 adapter.notifyItemMoved(fromPosition + i, toPosition + i);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)         public void onItemRangeRemoved(ObservableList sender, final int positionStart, final int itemCount) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)             BaseAdapter<T> adapter = adapterRef.get();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)             if (adapter == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)                 return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)             ensureChangeOnMainThread();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)             adapter.notifyItemRangeRemoved(positionStart, itemCount);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)     interface ItemIds<T> {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)         long getItemId(int position, T item);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)     static void ensureChangeOnMainThread() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)         if (Thread.currentThread() != Looper.getMainLooper().getThread()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)             throw new IllegalStateException(""You must only modify the ObservableList on the main thread."");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)     public interface ClickListener<T> {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)         void onClick(@NonNull T object, @NonNull View view, boolean longClick);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)     protected void setClickListener(ClickListener listener) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)         this.clickListenerWeakReference = new WeakReference<>(listener);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.base;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.annotation.LayoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) public final class BaseAdapterItemView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     /**
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)      * Use this constant as the {@code bindingVariable} to not bind any variable to the layout. This
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)      * is useful if no data is needed for that layout, like a static footer or loading indicator for"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)      * example.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)      */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     public static final int BINDING_VARIABLE_NONE = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     private int bindingVariable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     @LayoutRes
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     private int layoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     /**
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)      * Constructs a new {@code BaseAdapterItemView} with the given binding variable and layout res.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)      *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)      * @see #setBindingVariable(int)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)      * @see #setLayoutRes(int)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)      */
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     public static BaseAdapterItemView of(int bindingVariable, @LayoutRes int layoutRes) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         return new BaseAdapterItemView()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)                 .setBindingVariable(bindingVariable)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)                 .setLayoutRes(layoutRes);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     /**
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)      * A convenience method for {@code BaseAdapterItemView.setBindingVariable(int).setLayoutRes(int)}.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)      *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)      * @return the {@code BaseAdapterItemView} for chaining
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)      */
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     public BaseAdapterItemView set(int bindingVariable, @LayoutRes int layoutRes) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         this.bindingVariable = bindingVariable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         this.layoutRes = layoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     /**
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)      * Sets the binding variable. This is one of the {@code BR} constants that references the
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)      * variable tag in the item layout file.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)      *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)      * @return the {@code BaseAdapterItemView} for chaining
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)      */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     private BaseAdapterItemView setBindingVariable(int bindingVariable) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)         this.bindingVariable = bindingVariable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     /**
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)      * Sets the layout resource of the item.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)      *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)      * @return the {@code BaseAdapterItemView} for chaining
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)      */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)     private BaseAdapterItemView setLayoutRes(@LayoutRes int layoutRes) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         this.layoutRes = layoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)     public int bindingVariable() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)         return bindingVariable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)     @LayoutRes
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     public int layoutRes() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68)         return layoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 70)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 71)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 72)     public boolean equals(Object o) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 73)         if (this == o) return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 74)         if (o == null || getClass() != o.getClass()) return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 75)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 76)         BaseAdapterItemView itemView = (BaseAdapterItemView) o;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 77)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 78)         return bindingVariable == itemView.bindingVariable && layoutRes == itemView.layoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 79)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 80)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 81)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 82)     public int hashCode() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 83)         int result = bindingVariable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 84)         result = 31 * result + layoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 85)         return result;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 86)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseAdapterItemView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 87) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.base;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.view.LayoutInflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.view.ViewGroup;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import androidx.annotation.CallSuper;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import androidx.annotation.LayoutRes;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import androidx.databinding.DataBindingUtil;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import androidx.databinding.ViewDataBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.BR;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22) import dagger.android.support.DaggerFragment;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24) public abstract class BaseSupportFragment<B extends ViewDataBinding, V extends MvvmViewModel> extends DaggerFragment {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     protected B binding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @Inject protected V viewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     @Inject protected Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     /* Use this method to inflate the content view for your Fragment.  */
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     protected final View setAndBindContentView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @LayoutRes int layoutResId, Bundle savedInstanceState) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         if(viewModel == null) { throw new IllegalStateException(""viewModel must not be null and should be injected""); }"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         binding = DataBindingUtil.inflate(inflater, layoutResId, container, false);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         binding.setVariable(BR.vm, viewModel);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         //noinspection unchecked
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         viewModel.attachView(savedInstanceState, (MvvmView) this);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         return binding.getRoot();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     @CallSuper
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     public void onSaveInstanceState(@NonNull Bundle outState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         super.onSaveInstanceState(outState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)         if(viewModel != null) { viewModel.saveInstanceState(outState); }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     @CallSuper
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)     public void onDestroyView() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         super.onDestroyView();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         if(viewModel != null) { viewModel.detachView(); }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         binding = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)         viewModel = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/BaseSupportFragment.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.base.navigator
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.app.Activity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.net.Uri
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import android.os.Parcelable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class Navigator @Inject constructor(private val activity: AppCompatActivity) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     fun startActivity(intent: Intent) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         activity.startActivity(intent)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     fun startActivity(action: String) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         activity.startActivity(Intent(action))
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     fun startActivity(action: String, uri: Uri) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         activity.startActivity(Intent(action, uri))"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     fun startActivity(activityClass: Class<out Activity?>) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         startActivity(activityClass, null, 0)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     fun startActivity(activityClass: Class<out Activity?>, args: Bundle?, flags: Int) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         val activity = activity
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         val intent = Intent(activity, activityClass)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         intent.flags = flags
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         if (args != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)             intent.putExtra(EXTRA_ARGS, args)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         activity.startActivity(intent)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     fun startActivity(activityClass: Class<out Activity?>, args: Parcelable?) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         val activity = activity
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         val intent = Intent(activity, activityClass)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         if (args != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)             intent.putExtra(EXTRA_ARGS, args)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)         activity.startActivity(intent)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)     fun getExtrasBundle(intent: Intent): Bundle? {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         return if (intent.hasExtra(EXTRA_ARGS)) intent.getBundleExtra(EXTRA_ARGS) else Bundle()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     fun startActivityForResult(intent: Intent?, requestCode: Int) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         activity.startActivityForResult(intent, requestCode)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         private const val EXTRA_ARGS = ""_args"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/navigator/Navigator.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.base.view;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) /* Copyright 2016 Patrick Lwenstein
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)  *    http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  * limitations under the License. */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16) public interface MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/view/MvvmView.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.base.viewmodel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.databinding.BaseObservable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.annotation.CallSuper;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) public abstract class BaseViewModel<V extends MvvmView> extends BaseObservable implements MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @Inject protected Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     private V mView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     protected V getView() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         return mView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @CallSuper
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     public void attachView(@Nullable Bundle savedInstanceState, @NonNull V view) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         mView = view;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         if(savedInstanceState != null) { restoreInstanceState(savedInstanceState); }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     @CallSuper
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     public void detachView() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         mView = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     public void saveInstanceState(@NonNull Bundle outState) { }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     public void restoreInstanceState(@NonNull Bundle savedInstanceState) { }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/BaseViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.base.viewmodel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.databinding.Observable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) /* Copyright 2016 Patrick Lwenstein
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  *    http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)  * limitations under the License. */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22) public interface MvvmViewModel<V extends MvvmView> extends Observable {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     void attachView(Bundle savedInstanceState, V view);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     void detachView();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     void saveInstanceState(@NonNull Bundle outState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     void restoreInstanceState(@NonNull Bundle savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/MvvmViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.base.viewmodel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) /* Copyright 2016 Patrick Lwenstein
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  *    http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)  * limitations under the License. */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20) public final class NoOpViewModel extends BaseViewModel<MvvmView> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     public NoOpViewModel() { }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/base/viewmodel/NoOpViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.contacts
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.view.View
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.recyclerview.widget.LinearLayoutManager
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.databinding.UiContactsBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.geocoding.GeocoderProvider
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.ui.base.BaseActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.ui.base.BaseAdapter
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.ui.map.MapActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) class ContactsActivity : BaseActivity<UiContactsBinding?, ContactsMvvm.ViewModel<*>?>(), ContactsMvvm.View, BaseAdapter.ClickListener<FusedContact?> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     private val contactsAdapter = ContactsAdapter(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     @JvmField
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     var geocoderProvider: GeocoderProvider? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     override fun onCreate(savedInstanceState: Bundle?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         super.onCreate(savedInstanceState)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         setHasEventBus(false)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         bindAndAttachContentView(R.layout.ui_contacts, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         setSupportToolbar(binding!!.toolbar)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         setDrawer(binding!!.toolbar)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         binding!!.vm!!.contacts.observe({ this.lifecycle }, { contacts: Map<String, FusedContact> ->"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)             contactsAdapter.setContactList(contacts.values)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)             for (contact in contacts.values) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)                 contact.messageLocation.removeObservers(this)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)                 contact.messageLocation.observe({ this.lifecycle }, { messageLocation: MessageLocation? -> geocoderProvider!!.resolve(messageLocation!!) })"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         })
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         binding!!.recyclerView.layoutManager = LinearLayoutManager(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         binding!!.recyclerView.adapter = contactsAdapter
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     override fun onClick(fusedContact: FusedContact, view: View, longClick: Boolean) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         val bundle = Bundle()
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         bundle.putString(MapActivity.BUNDLE_KEY_CONTACT_ID, fusedContact.id)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         val intent = Intent(this, MapActivity::class.java)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)         intent.putExtra(""_args"", bundle)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         startActivity(intent)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.contacts
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class ContactsActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: ContactsActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     abstract fun bindViewModel(viewModel: ContactsViewModel?): ContactsMvvm.ViewModel<*>?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.contacts
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.view.LayoutInflater
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.view.ViewGroup
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.databinding.DataBindingUtil
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.databinding.ViewDataBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.recyclerview.widget.RecyclerView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.BR
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.ui.base.BaseAdapter
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import java.util.*
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) internal class ContactsAdapter(private val clickListener: BaseAdapter.ClickListener<FusedContact?>) : RecyclerView.Adapter<FusedContactViewHolder>() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private lateinit var contactList: List<FusedContact>
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): FusedContactViewHolder {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         val binding = DataBindingUtil.inflate<ViewDataBinding>(LayoutInflater.from(parent.context), R.layout.ui_row_contact, parent, false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         return FusedContactViewHolder(binding)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     override fun onBindViewHolder(holder: FusedContactViewHolder, position: Int) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         holder.bind(contactList[position], clickListener)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     override fun getItemCount(): Int {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         return contactList.size
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     fun setContactList(contacts: Collection<FusedContact>) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         contactList = ArrayList(contacts)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         notifyDataSetChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35) internal class FusedContactViewHolder(private val binding: ViewDataBinding) : RecyclerView.ViewHolder(binding.root) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     fun bind(fusedContact: FusedContact?, clickListener: BaseAdapter.ClickListener<FusedContact?>) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         binding.setVariable(BR.contact, fusedContact)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         binding.root.setOnClickListener { clickListener.onClick(fusedContact!!, binding.root, false) }"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         binding.executePendingBindings()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.contacts
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.lifecycle.MutableLiveData
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.view.MvvmView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) /* Copyright 2016 Patrick Lwenstein
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)  * Licensed under the Apache License, Version 2.0 (the ""License"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)  * you may not use this file except in compliance with the License.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)  * You may obtain a copy of the License at
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)  *
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)  *    http://www.apache.org/licenses/LICENSE-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)  *
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)  * Unless required by applicable law or agreed to in writing, software"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)  * distributed under the License is distributed on an ""AS IS"" BASIS,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied."
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)  * See the License for the specific language governing permissions and
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)  * limitations under the License. */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) interface ContactsMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     interface View : MvvmView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     interface ViewModel<V : MvvmView?> : MvvmViewModel<V> {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         val contacts: MutableLiveData<MutableMap<String, FusedContact>>"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.contacts
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.lifecycle.MutableLiveData
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.data.repos.ContactsRepo
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.ui.base.viewmodel.BaseViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @PerActivity
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class ContactsViewModel @Inject constructor(private val contactsRepo: ContactsRepo) : BaseViewModel<ContactsMvvm.View?>(), ContactsMvvm.ViewModel<ContactsMvvm.View?> {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     override fun attachView(savedInstanceState: Bundle?, view: ContactsMvvm.View?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         super.attachView(savedInstanceState, view!!)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     override val contacts: MutableLiveData<MutableMap<String, FusedContact>>"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         get() = contactsRepo.all
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/contacts/ContactsViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.map;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.Manifest;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.app.Activity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.content.ActivityNotFoundException;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.content.pm.PackageManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.location.Location;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import android.net.Uri;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import android.os.Build;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import android.view.Gravity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import android.view.Menu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import android.view.MenuInflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import android.view.MenuItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import android.widget.LinearLayout;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import android.widget.Toast;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import androidx.annotation.VisibleForTesting;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import androidx.appcompat.app.AlertDialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import androidx.appcompat.widget.PopupMenu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import androidx.coordinatorlayout.widget.CoordinatorLayout;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import androidx.core.app.ActivityCompat;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import androidx.lifecycle.Observer;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import androidx.test.espresso.IdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import androidx.test.espresso.idling.CountingIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import com.google.android.gms.location.FusedLocationProviderClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import com.google.android.gms.location.LocationCallback;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import com.google.android.gms.location.LocationRequest;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import com.google.android.gms.location.LocationResult;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import com.google.android.gms.location.LocationServices;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import com.google.android.gms.maps.CameraUpdateFactory;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import com.google.android.gms.maps.GoogleMap;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38) import com.google.android.gms.maps.OnMapReadyCallback;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39) import com.google.android.gms.maps.model.LatLng;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40) import com.google.android.gms.maps.model.Marker;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41) import com.google.android.gms.maps.model.MarkerOptions;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42) import com.google.android.material.appbar.AppBarLayout;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43) import com.google.android.material.bottomsheet.BottomSheetBehavior;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47) import org.owntracks.android.data.repos.LocationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48) import org.owntracks.android.databinding.UiMapBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49) import org.owntracks.android.geocoding.GeocoderProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50) import org.owntracks.android.model.FusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51) import org.owntracks.android.services.BackgroundService;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52) import org.owntracks.android.services.LocationProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53) import org.owntracks.android.services.MessageProcessorEndpointHttp;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54) import org.owntracks.android.support.ContactImageProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56) import org.owntracks.android.support.RequirementsChecker;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57) import org.owntracks.android.support.RunThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58) import org.owntracks.android.support.widgets.BindingConversions;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61) import org.owntracks.android.ui.welcome.WelcomeActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63) import java.util.HashMap;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64) import java.util.Locale;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65) import java.util.Map;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72) public class MapActivity extends BaseActivity<UiMapBinding, MapMvvm.ViewModel<MapMvvm.View>> implements MapMvvm.View, View.OnClickListener, View.OnLongClickListener, PopupMenu.OnMenuItemClickListener, OnMapReadyCallback, Observer {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     public static final String BUNDLE_KEY_CONTACT_ID = ""BUNDLE_KEY_CONTACT_ID"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     private static final long ZOOM_LEVEL_STREET = 15;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     private final int PERMISSIONS_REQUEST_CODE = 1;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     private final Map<String, Marker> markers = new HashMap<>();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     private GoogleMap googleMap;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     private BottomSheetBehavior<LinearLayout> bottomSheetBehavior;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     private boolean isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     private Menu mMenu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     private FusedLocationProviderClient fusedLocationClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     LocationCallback locationRepoUpdaterCallback = new LocationCallback() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         public void onLocationResult(LocationResult locationResult) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             Timber.d(""Foreground location result received: %s"", locationResult);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             locationRepo.setCurrentLocation(locationResult.getLastLocation());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             super.onLocationResult(locationResult);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     };
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     LocationRepo locationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     RunThingsOnOtherThreads runThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     ContactImageProvider contactImageProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     GeocoderProvider geocoderProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     CountingIdlingResource countingIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     RequirementsChecker requirementsChecker;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     protected void onCreate(@Nullable Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         super.onCreate(savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         if (!preferences.isSetupCompleted()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)             navigator.startActivity(WelcomeActivity.class);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)             finish();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         bindAndAttachContentView(R.layout.ui_map, savedInstanceState);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         setSupportToolbar(this.binding.toolbar, false, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         setDrawer(this.binding.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)         // Workaround for Google Maps crash on Android 6
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)             binding.mapView.onCreate(savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         } catch (Exception e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)             Timber.e(e, ""Failed to bind map to view."");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)             isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         this.bottomSheetBehavior = BottomSheetBehavior.from(this.binding.bottomSheetLayout);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         this.binding.contactPeek.contactRow.setOnClickListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         this.binding.contactPeek.contactRow.setOnLongClickListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)         this.binding.moreButton.setOnClickListener(this::showPopupMenu);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)         setBottomSheetHidden();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         AppBarLayout appBarLayout = this.binding.appBarLayout;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         CoordinatorLayout.LayoutParams params = (CoordinatorLayout.LayoutParams) appBarLayout.getLayoutParams();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         AppBarLayout.Behavior behavior = new AppBarLayout.Behavior();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         behavior.setDragCallback(new AppBarLayout.Behavior.DragCallback() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             public boolean canDrag(@NonNull AppBarLayout appBarLayout) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)                 return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         params.setBehavior(behavior);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         viewModel.getContact().observe(this, this);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         viewModel.getBottomSheetHidden().observe(this, o -> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)             if ((Boolean) o) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)                 setBottomSheetHidden();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)             } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)                 setBottomSheetCollapsed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         });
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         viewModel.getCenter().observe(this, o -> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)             if (o != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)                 updateCamera((LatLng) o);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         checkAndRequestLocationPermissions();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         Timber.v(""starting BackgroundService"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)             startForegroundService((new Intent(this, BackgroundService.class)));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)             startService((new Intent(this, BackgroundService.class)));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         fusedLocationClient = LocationServices.getFusedLocationProviderClient(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)     private void checkAndRequestLocationPermissions() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         if (!requirementsChecker.isPermissionCheckPassed()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)             if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)                 if (shouldShowRequestPermissionRationale(Manifest.permission.ACCESS_FINE_LOCATION)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)                     Activity currentActivity = this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)                     new AlertDialog.Builder(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)                             .setCancelable(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)                             .setMessage(R.string.permissions_description)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)                             .setPositiveButton(""OK"", (dialog, which) ->"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)                                     ActivityCompat.requestPermissions(currentActivity, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSIONS_REQUEST_CODE)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)                             )
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)                             .show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)                 } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)                     ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSIONS_REQUEST_CODE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)                 ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, PERMISSIONS_REQUEST_CODE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)     public void onChanged(@Nullable Object activeContact) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         if (activeContact != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)             FusedContact c = (FusedContact) activeContact;
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)             Timber.v(""for contact: %s"", c.getId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)             binding.contactPeek.name.setText(c.getFusedName());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)             if (c.hasLocation()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)                 ContactImageProvider.setImageViewAsync(binding.contactPeek.image, c);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)                 geocoderProvider.resolve(c.getMessageLocation().getValue(), binding.contactPeek.location);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)                 BindingConversions.setRelativeTimeSpanString(binding.contactPeek.locationDate, c.getTst());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)                 binding.acc.setText(String.format(Locale.getDefault(), ""%s m"", c.getFusedLocationAccuracy()));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)                 binding.tid.setText(c.getTrackerId());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)                 binding.id.setText(c.getId());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)                 if (viewModel.hasLocation()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)                     binding.distance.setVisibility(View.VISIBLE);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)                     binding.distanceLabel.setVisibility(View.VISIBLE);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)                     float[] distance = new float[2];
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)                     Location.distanceBetween(viewModel.getCurrentLocation().latitude, viewModel.getCurrentLocation().longitude, c.getLatLng().latitude, c.getLatLng().longitude, distance);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)                     binding.distance.setText(String.format(Locale.getDefault(), ""%d m"", Math.round(distance[0])));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)                 } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)                     binding.distance.setVisibility(View.GONE);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)                     binding.distanceLabel.setVisibility(View.GONE);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)             } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)                 binding.contactPeek.location.setText(R.string.na);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)                 binding.contactPeek.locationDate.setText(R.string.na);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)     public void onSaveInstanceState(Bundle bundle) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)         super.onSaveInstanceState(bundle);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)             binding.mapView.onSaveInstanceState(bundle);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)         } catch (Exception ignored) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)             isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)     public void onDestroy() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)             binding.mapView.onDestroy();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)         } catch (Exception ignored) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)             isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         super.onDestroy();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)     public void onResume() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)         super.onResume();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)         this.isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)             binding.mapView.onResume();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)             if (googleMap == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)                 Timber.v(""map not ready. Running initDelayed()"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)                 this.isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)                 initMapDelayed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)                 Timber.v(""map ready. Running onMapReady()"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)                 this.isMapReady = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)                 viewModel.onMapReady();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)         } catch (Exception e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)             Timber.e(e, ""Not showing map due to crash in Google Maps library"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)             isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)         handleIntentExtras(getIntent());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)         if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &&"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)                 ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)             checkAndRequestLocationPermissions();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)         fusedLocationClient.requestLocationUpdates(
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)                 new LocationRequest()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)                         .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)                         .setInterval(TimeUnit.SECONDS.toMillis(5)),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)                 locationRepoUpdaterCallback,"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)                 null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)         ).addOnCompleteListener(task ->
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)                 Timber.i(""Requested foreground location updates. isSuccessful: %s isCancelled: %s"", task.isSuccessful(), task.isCanceled())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)         );
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)         updateMonitoringModeMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)     public void onPause() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 296)         super.onPause();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 297)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 298)             binding.mapView.onPause();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 299)         } catch (Exception e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 300)             isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 301)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 302)         fusedLocationClient.removeLocationUpdates(locationRepoUpdaterCallback).addOnCompleteListener(task ->
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 303)                 Timber.i(""Removed foreground location updates. isSuccessful: %s isCancelled: %s"", task.isSuccessful(), task.isCanceled())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 304)         );
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 305)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 306)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 307)     private void handleIntentExtras(Intent intent) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 308)         Timber.v(""handleIntentExtras"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 309)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 310)         Bundle b = navigator.getExtrasBundle(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 311)         if (b != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 312)             Timber.v(""intent has extras from drawerProvider"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 313)             String contactId = b.getString(BUNDLE_KEY_CONTACT_ID);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 314)             if (contactId != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 315)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 316)                 viewModel.restore(contactId);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 317)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 318)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 319)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 320)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 321)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 322)     public void onLowMemory() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 323)         super.onLowMemory();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 324)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 325)             binding.mapView.onLowMemory();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 326)         } catch (Exception ignored) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 327)             isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 328)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 329)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 330)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 331)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 332)     public void onNewIntent(Intent intent) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 333)         super.onNewIntent(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 334)         handleIntentExtras(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 335)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 336)             binding.mapView.onLowMemory();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 337)         } catch (Exception ignored) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 338)             isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 339)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 340)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 341)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 342)     private void initMapDelayed() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 343)         isMapReady = false;
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 344)         runThingsOnOtherThreads.postOnMainHandlerDelayed(this::initMap, 500);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 345)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 346)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 347)     private void initMap() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 348)         isMapReady = false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 349)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 350)             binding.mapView.getMapAsync(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 351)         } catch (Exception ignored) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 352)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 353)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 354)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 355)     public boolean onCreateOptionsMenu(Menu menu) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 356)         MenuInflater inflater = getMenuInflater();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 357)         inflater.inflate(R.menu.activity_map, menu);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 358)         this.mMenu = menu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 359)         if (viewModel.hasLocation())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 360)             enableLocationMenus();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 361)         else
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 362)             disableLocationMenus();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 363)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 364)         updateMonitoringModeMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 365)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 366)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 367)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 368)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 369)     public void updateMonitoringModeMenu() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 370)         if (this.mMenu == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 371)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 372)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 373)         MenuItem item = this.mMenu.findItem(R.id.menu_monitoring);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 374)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 375)         switch (preferences.getMonitoring()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 376)             case LocationProcessor.MONITORING_QUIET:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 377)                 item.setIcon(R.drawable.ic_baseline_stop_36);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 378)                 item.setTitle(R.string.monitoring_quiet);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 379)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 380)             case LocationProcessor.MONITORING_MANUAL:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 381)                 item.setIcon(R.drawable.ic_baseline_pause_36);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 382)                 item.setTitle(R.string.monitoring_manual);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 383)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 384)             case LocationProcessor.MONITORING_SIGNIFICANT:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 385)                 item.setIcon(R.drawable.ic_baseline_play_arrow_36);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 386)                 item.setTitle(R.string.monitoring_significant);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 387)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 388)             case LocationProcessor.MONITORING_MOVE:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 389)                 item.setIcon(R.drawable.ic_step_forward_2);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 390)                 item.setTitle(R.string.monitoring_move);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 391)                 break;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 392)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 393)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 394)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 395)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 396)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 397)     public boolean onOptionsItemSelected(MenuItem item) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 398)         int itemId = item.getItemId();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 399)         if (itemId == R.id.menu_report) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 400)             viewModel.sendLocation();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 401)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 402)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 403)         } else if (itemId == R.id.menu_mylocation) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 404)             viewModel.onMenuCenterDeviceClicked();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 405)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 406)         } else if (itemId == android.R.id.home) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 407)             finish();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 408)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 409)         } else if (itemId == R.id.menu_monitoring) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 410)             stepMonitoringModeMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 411)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 412)         return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 413)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 414)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 415)     private void stepMonitoringModeMenu() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 416)         preferences.setMonitoringNext();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 417)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 418)         int newmode = preferences.getMonitoring();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 419)         if (newmode == LocationProcessor.MONITORING_QUIET) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 420)             Toast.makeText(this, R.string.monitoring_quiet, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 421)         } else if (newmode == LocationProcessor.MONITORING_MANUAL) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 422)             Toast.makeText(this, R.string.monitoring_manual, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 423)         } else if (newmode == LocationProcessor.MONITORING_SIGNIFICANT) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 424)             Toast.makeText(this, R.string.monitoring_significant, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 425)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 426)             Toast.makeText(this, R.string.monitoring_move, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 427)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 428)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 429)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 430)     private void disableLocationMenus() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 431)         if (this.mMenu != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 432)             this.mMenu.findItem(R.id.menu_mylocation).setEnabled(false).getIcon().setAlpha(128);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 433)             this.mMenu.findItem(R.id.menu_report).setEnabled(false).getIcon().setAlpha(128);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 434)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 435)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 436)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 437)     public void enableLocationMenus() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 438)         if (this.mMenu != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 439)             this.mMenu.findItem(R.id.menu_mylocation).setEnabled(true).getIcon().setAlpha(255);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 440)             this.mMenu.findItem(R.id.menu_report).setEnabled(true).getIcon().setAlpha(255);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 441)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 442)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 443)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 444)     // MAP CALLBACKS
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 445)     @SuppressWarnings(""MissingPermission"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 446)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 447)     public void onMapReady(GoogleMap googleMap) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 448)         this.googleMap = googleMap;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 449)         this.googleMap.setIndoorEnabled(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 450)         this.googleMap.setLocationSource(viewModel.getMapLocationSource());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 451)         this.googleMap.setMyLocationEnabled(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 452)         this.googleMap.getUiSettings().setMyLocationButtonEnabled(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 453)         this.googleMap.setOnMapClickListener(viewModel.getOnMapClickListener());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 454)         this.googleMap.setOnCameraMoveStartedListener(viewModel.getOnMapCameraMoveStartedListener());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 455)         this.googleMap.setOnMarkerClickListener(viewModel.getOnMarkerClickListener());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 456)         this.googleMap.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 457)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 458)             public View getInfoWindow(Marker marker) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 459)                 return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 460)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 461)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 462)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 463)             public View getInfoContents(Marker marker) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 464)                 return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 465)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 466)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 467)         this.isMapReady = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 468)         viewModel.onMenuCenterDeviceClicked();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 469)         viewModel.onMapReady();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 470)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 471)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 472)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 473)     private void updateCamera(@NonNull LatLng latLng) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 474)         if (isMapReady)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 475)             googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, ZOOM_LEVEL_STREET));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 476)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 477)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 478)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 479)     public void clearMarkers() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 480)         if (isMapReady)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 481)             googleMap.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 482)         markers.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 483)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 484)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 485)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 486)     public void removeMarker(@Nullable FusedContact contact) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 487)         if (contact == null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 488)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 489)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 490)         Marker m = markers.get(contact.getId());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 491)         if (m != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 492)             m.remove();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 493)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 494)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 495)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 496)     public void updateMarker(@Nullable FusedContact contact) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 497)         if (contact == null || !contact.hasLocation() || !isMapReady) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 498)             Timber.v(""unable to update marker. null:%s, location:%s, mapReady:%s"", contact == null, contact == null || contact.hasLocation(), isMapReady);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 499)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 500)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 501)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 502)         Timber.v(""updating marker for contact: %s"", contact.getId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 503)         Marker marker = markers.get(contact.getId());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 504)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 505)         if (marker != null && marker.getTag() != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 506)             marker.setPosition(contact.getLatLng());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 507)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 508)             // If a marker has been removed, its tag will be null. Doing anything with it will make it explode"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 509)             if (marker != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 510)                 markers.remove(contact.getId());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 511)             }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 512)             marker = googleMap.addMarker(new MarkerOptions().position(contact.getLatLng()).anchor(0.5f, 0.5f).visible(false));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 513)             marker.setTag(contact.getId());
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 514)             markers.put(contact.getId(), marker);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 515)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 516)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 517)         contactImageProvider.setMarkerAsync(marker, contact);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 518)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 519)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 520)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 521)     public boolean onMenuItemClick(MenuItem item) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 522)         switch (item.getItemId()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 523)             case R.id.menu_navigate:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 524)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 525)                 FusedContact c = viewModel.getActiveContact();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 526)                 if (c != null && c.hasLocation()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 527)                     try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 528)                         LatLng l = c.getLatLng();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 529)                         Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(""google.navigation:q="" + l.latitude + "","" + l.longitude));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 530)                         intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 531)                         startActivity(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 532)                     } catch (ActivityNotFoundException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 533)                         Toast.makeText(this, getString(R.string.noNavigationApp), Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 534)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 535)                 } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 536)                     Toast.makeText(this, getString(R.string.contactLocationUnknown), Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 537)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 538)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 539)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 540)             case R.id.menu_clear:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 541)                 viewModel.onClearContactClicked();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 542)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 543)                 return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 544)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 545)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 546)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 547)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 548)     public boolean onLongClick(View view) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 549)         viewModel.onBottomSheetLongClick();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 550)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 551)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 552)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 553)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 554)     public void setBottomSheetExpanded() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 555)         bottomSheetBehavior.setState(BottomSheetBehavior.STATE_EXPANDED);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 556)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 557)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 558)     // BOTTOM SHEET CALLBACKS
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 559)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 560)     public void onClick(View view) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 561)         viewModel.onBottomSheetClick();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 562)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 563)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 564)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 565)     public void setBottomSheetCollapsed() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 566)         Timber.v(""vm contact: %s"", binding.getVm().getActiveContact());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 567)         bottomSheetBehavior.setState(BottomSheetBehavior.STATE_COLLAPSED);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 568)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 569)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 570)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 571)     public void setBottomSheetHidden() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 572)         bottomSheetBehavior.setState(BottomSheetBehavior.STATE_HIDDEN);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 573)         if (mMenu != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 574)             mMenu.close();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 575)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 576)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 577)     private void showPopupMenu(View v) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 578)         PopupMenu popupMenu = new PopupMenu(this, v, Gravity.START); //new PopupMenu(this, v);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 579)         popupMenu.getMenuInflater().inflate(R.menu.menu_popup_contacts, popupMenu.getMenu());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 580)         popupMenu.setOnMenuItemClickListener(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 581)         if (preferences.getMode() == MessageProcessorEndpointHttp.MODE_ID)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 582)             popupMenu.getMenu().removeItem(R.id.menu_clear);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 583)         popupMenu.show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 584)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 585)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 586)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 587)     public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 588)         if (requestCode == PERMISSIONS_REQUEST_CODE && grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 589)             eventBus.postSticky(new Events.PermissionGranted(Manifest.permission.ACCESS_FINE_LOCATION));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 590)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 591)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 592)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 593)     @VisibleForTesting
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 594)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 595)     public IdlingResource getLocationIdlingResource() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 596)         return binding.getVm().getLocationIdlingResource();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 597)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 598)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 599)     @VisibleForTesting
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 600)     @NonNull
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 601)     public IdlingResource getOutgoingQueueIdlingResource() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 602)         return countingIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 603)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 604) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.map
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class MapActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: MapActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     abstract fun bindViewModel(viewModel: MapViewModel): MapMvvm.ViewModel<MapMvvm.View>
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.map
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.databinding.Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.lifecycle.LiveData
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.google.android.gms.maps.GoogleMap
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import com.google.android.gms.maps.LocationSource
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import com.google.android.gms.maps.model.LatLng
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.base.view.MvvmView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) interface MapMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     interface View : MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         fun setBottomSheetExpanded()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         fun setBottomSheetCollapsed()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         fun setBottomSheetHidden()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         fun updateMarker(contact: FusedContact?)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         fun removeMarker(c: FusedContact?)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         fun clearMarkers()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         fun enableLocationMenus()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         fun updateMonitoringModeMenu()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     interface ViewModel<V : MvvmView?> : MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         val currentLocation: LatLng?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         @get:Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         val activeContact: FusedContact?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         fun onBottomSheetLongClick()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         fun onBottomSheetClick()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         fun onMenuCenterDeviceClicked()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         fun onClearContactClicked()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         fun restore(contactId: String?)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         fun hasLocation(): Boolean
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         fun onMapReady()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         val mapLocationSource: LocationSource?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         val onMapClickListener: GoogleMap.OnMapClickListener?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         val onMarkerClickListener: GoogleMap.OnMarkerClickListener?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         val onMapCameraMoveStartedListener: GoogleMap.OnCameraMoveStartedListener?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         val contact: LiveData<FusedContact?>?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         val bottomSheetHidden: LiveData<Boolean?>?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         val center: LiveData<LatLng?>?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         fun sendLocation()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.map;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.location.Location;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.lifecycle.LiveData;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.lifecycle.MutableLiveData;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import com.google.android.gms.maps.GoogleMap;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import com.google.android.gms.maps.LocationSource;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import com.google.android.gms.maps.model.LatLng;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import com.google.android.gms.maps.model.Marker;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.greenrobot.eventbus.Subscribe;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.greenrobot.eventbus.ThreadMode;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.data.repos.ContactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.model.FusedContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.owntracks.android.model.messages.MessageClear;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.model.messages.MessageLocation;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.owntracks.android.services.LocationProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.owntracks.android.services.MessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.owntracks.android.support.SimpleIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) @PerActivity
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) public class MapViewModel extends BaseViewModel<MapMvvm.View> implements MapMvvm.ViewModel<MapMvvm.View>, LocationSource, GoogleMap.OnMapClickListener, GoogleMap.OnMarkerClickListener, GoogleMap.OnCameraMoveStartedListener {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     private final ContactsRepo contactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     private final LocationProcessor locationProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     private FusedContact activeContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     private LocationSource.OnLocationChangedListener onLocationChangedListener;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     private MessageProcessor messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     private Location location;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     private static final int VIEW_FREE = 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     private static final int VIEW_CONTACT = 1;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     private static final int VIEW_DEVICE = 2;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     private static int mode = VIEW_DEVICE;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     private MutableLiveData<FusedContact> liveContact = new MutableLiveData<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     private MutableLiveData<Boolean> liveBottomSheetHidden = new MutableLiveData<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     private MutableLiveData<LatLng> liveCamera = new MutableLiveData<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     private final SimpleIdlingResource locationIdlingResource = new SimpleIdlingResource(""locationIdlingResource"", false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     public MapViewModel(ContactsRepo contactsRepo, LocationProcessor locationRepo, MessageProcessor messageProcessor) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         Timber.v(""onCreate"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         this.contactsRepo = contactsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         this.messageProcessor = messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         this.locationProcessor = locationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     public void saveInstanceState(@NonNull Bundle outState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     public void restoreInstanceState(@NonNull Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     public LocationSource getMapLocationSource() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     public GoogleMap.OnMapClickListener getOnMapClickListener() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)     public GoogleMap.OnMarkerClickListener getOnMarkerClickListener() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     public void onMapReady() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         for (Object c : contactsRepo.getAll().getValue().values()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             getView().updateMarker((FusedContact) c);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         if (mode == VIEW_CONTACT && activeContact != null)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             setViewModeContact(activeContact, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         else if (mode == VIEW_FREE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             setViewModeFree();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             setViewModeDevice();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     public LiveData<FusedContact> getContact() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         return liveContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     public LiveData<Boolean> getBottomSheetHidden() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         return liveBottomSheetHidden;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     public LiveData<LatLng> getCenter() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         return liveCamera;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     public void sendLocation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         locationProcessor.publishLocationMessage(MessageLocation.REPORT_TYPE_USER);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)     private void setViewModeContact(@NonNull String contactId, boolean center) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         FusedContact c = contactsRepo.getById(contactId);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         if (c != null)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)             setViewModeContact(c, center);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         else
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             Timber.e(""contact not found %s, "", contactId);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     private void setViewModeContact(@NonNull FusedContact c, boolean center) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)         mode = VIEW_CONTACT;
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         Timber.v(""contactId:%s, obj:%s "", c.getId(), activeContact);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         activeContact = c;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         liveContact.postValue(c);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         liveBottomSheetHidden.postValue(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         if (center)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)             liveCamera.postValue(c.getLatLng());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)     private void setViewModeFree() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         Timber.v(""setting view mode: VIEW_FREE"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         mode = VIEW_FREE;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         clearActiveContact();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)     private void setViewModeDevice() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         Timber.v(""setting view mode: VIEW_DEVICE"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         mode = VIEW_DEVICE;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         clearActiveContact();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         if (hasLocation()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)             liveCamera.postValue(getCurrentLocation());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)             Timber.e(""no location available"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)     @Nullable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)     public LatLng getCurrentLocation() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         return location != null ? new LatLng(location.getLatitude(), location.getLongitude()) : null;"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)     public FusedContact getActiveContact() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         return activeContact;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)     public void restore(@NonNull String contactId) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)         Timber.v(""restoring contact id:%s"", contactId);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         setViewModeContact(contactId, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)     public boolean hasLocation() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         return location != null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)     private void clearActiveContact() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         activeContact = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)         liveContact.postValue(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)         liveBottomSheetHidden.postValue(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)     public void onBottomSheetClick() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         getView().setBottomSheetExpanded();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)     public void onMenuCenterDeviceClicked() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)         setViewModeDevice();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)     public void onClearContactClicked() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)         MessageClear m = new MessageClear();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         if (activeContact != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)             m.setTopic(activeContact.getId());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)             messageProcessor.queueMessageForSending(m);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)     @Subscribe(threadMode = ThreadMode.MAIN)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)     public void onEvent(Events.FusedContactAdded e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)         onEvent(e.getContact());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)     @Subscribe(threadMode = ThreadMode.MAIN)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)     public void onEvent(Events.FusedContactRemoved c) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)         if (c.getContact() == activeContact) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)             clearActiveContact();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)             setViewModeFree();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)         getView().removeMarker(c.getContact());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)     @Subscribe(threadMode = ThreadMode.MAIN)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)     public void onEvent(FusedContact c) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)         getView().updateMarker(c);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)         if (c == activeContact) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)             liveContact.postValue(c);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)             liveCamera.postValue(c.getLatLng());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)     @Subscribe(threadMode = ThreadMode.MAIN)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)     public void onEvent(Events.ModeChanged e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)         getView().clearMarkers();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)         clearActiveContact();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)     @Subscribe(threadMode = ThreadMode.MAIN)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)     public void onEvent(Events.MonitoringChanged e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)         getView().updateMonitoringModeMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)     @Subscribe(threadMode = ThreadMode.MAIN, priority = 1, sticky = true)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)     public void onEvent(@NonNull Location location) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         Timber.v(""location source updated"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)         this.location = location;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         getView().enableLocationMenus();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)         locationIdlingResource.setIdleState(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)         if (mode == VIEW_DEVICE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)             liveCamera.postValue(getCurrentLocation());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)         if (onLocationChangedListener != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)             this.onLocationChangedListener.onLocationChanged(this.location);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)     // Map Callback
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)     public void activate(OnLocationChangedListener onLocationChangedListener) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         Timber.v(""location source activated"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265)         this.onLocationChangedListener = onLocationChangedListener;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)         if (location != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 267)             this.onLocationChangedListener.onLocationChanged(location);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 268)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 269)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 270)     // Map Callback
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 271)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 272)     public void deactivate() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 273)         onLocationChangedListener = null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 274)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 275)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 276)     // Map Callback
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 277)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 278)     public void onMapClick(LatLng latLng) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 279)         setViewModeFree();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 280)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 281)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 282)     // Map Callback
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 283)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 284)     public boolean onMarkerClick(Marker marker) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 285)         if (marker.getTag() != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 286)             setViewModeContact((String) marker.getTag(), false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 287)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 288)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 289)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 290)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 291)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 292)     public void onBottomSheetLongClick() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 293)         setViewModeContact(activeContact.getId(), true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 294)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 295)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 296)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 297)     public GoogleMap.OnCameraMoveStartedListener getOnMapCameraMoveStartedListener() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 298)         return this;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 299)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 300)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 301)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 302)     public void onCameraMoveStarted(int reason) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 303)         if (reason == REASON_GESTURE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 304)             setViewModeFree();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 305)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 306)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 307)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 308)     public SimpleIdlingResource getLocationIdlingResource() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 309)         return locationIdlingResource;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 310)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/map/MapViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 311) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.takisoft.preferencex.PreferenceFragmentCompat;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import dagger.android.support.AndroidSupportInjection
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) abstract class AbstractPreferenceFragment: PreferenceFragmentCompat() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     lateinit var preferences: Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     override fun onCreatePreferencesFix(savedInstanceState: Bundle?, rootKey: String?) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         preferenceManager.sharedPreferencesName = preferences.sharedPreferencesName
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     override fun onAttach(context: Context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         AndroidSupportInjection.inject(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         super.onAttach(context)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AbstractPreferenceFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.preference.DropDownPreference
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.preference.EditTextPreference
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.preference.Preference
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.preference.SwitchPreferenceCompat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class AdvancedFragment : AbstractPreferenceFragment() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     override fun onCreatePreferencesFix(savedInstanceState: Bundle?, rootKey: String?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         super.onCreatePreferencesFix(savedInstanceState, rootKey)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         setPreferencesFromResource(R.xml.preferences_advanced, rootKey)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         val remoteConfigurationPreference = findPreference<SwitchPreferenceCompat>(getString(R.string.preferenceKeyRemoteConfiguration))
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         val remoteCommandPreference = findPreference<SwitchPreferenceCompat>(getString(R.string.preferenceKeyRemoteCommand))
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         val remoteCommandAndConfigurationChangeListener = Preference.OnPreferenceChangeListener { preference, newValue ->"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)             if (newValue is Boolean) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)                 when (preference.key) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)                     getString(R.string.preferenceKeyRemoteCommand) -> if (!newValue) remoteConfigurationPreference?.isChecked = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)                     getString(R.string.preferenceKeyRemoteConfiguration) -> if (newValue) remoteCommandPreference?.isChecked = true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)             true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         remoteConfigurationPreference?.onPreferenceChangeListener = remoteCommandAndConfigurationChangeListener
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         remoteCommandPreference?.onPreferenceChangeListener = remoteCommandAndConfigurationChangeListener
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         val geocoderDropDownPreference = findPreference<DropDownPreference>(getString(R.string.preferenceKeyReverseGeocodeProvider))
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         geocoderDropDownPreference?.setOnPreferenceChangeListener { _, newValue ->"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)             preferences.reverseGeocodeProvider = newValue.toString()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)             setOpenCageAPIKeyPreferenceVisibility()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)             true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         setOpenCageAPIKeyPreferenceVisibility()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     private fun setOpenCageAPIKeyPreferenceVisibility() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         findPreference<EditTextPreference>(getString(R.string.preferenceKeyOpencageGeocoderApiKey))?.isVisible = preferences.reverseGeocodeProvider == Preferences.REVERSE_GEOCODE_PROVIDER_OPENCAGE
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/AdvancedFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.pm.PackageManager
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.os.Build
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.preference.Preference
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.preference.PreferenceFragmentCompat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) class InfoFragment : PreferenceFragmentCompat() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         setPreferencesFromResource(R.xml.preferences_info, rootKey)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         findPreference<Preference>(UI_PREFERENCE_VERSION)?.setSummaryProvider { _ ->
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)                 val pm = requireActivity().packageManager
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)                 @Suppress(""DEPRECATION"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)                 ""%s (%s)"".format("
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)                         pm.getPackageInfo(requireActivity().packageName, 0).versionName,"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)                         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) pm.getPackageInfo(requireActivity().packageName, 0).longVersionCode else pm.getPackageInfo(requireActivity().packageName, 0).versionCode"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)                 )
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)             } catch (e: PackageManager.NameNotFoundException) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)                 getString(R.string.na)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         const val UI_PREFERENCE_VERSION = ""version"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/InfoFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.preference.PreferenceFragmentCompat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) class LicenseFragment : PreferenceFragmentCompat() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     override fun onCreatePreferences(savedInstanceState: Bundle?, rootKey: String?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         setPreferencesFromResource(R.xml.preferences_licenses, rootKey)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/LicenseFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) class NotificationFragment : AbstractPreferenceFragment() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     override fun onCreatePreferencesFix(savedInstanceState: Bundle?, rootKey: String?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)         super.onCreatePreferencesFix(savedInstanceState, rootKey)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)         setPreferencesFromResource(R.xml.preferences_notification, rootKey)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/NotificationFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.fragment.app.Fragment;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.fragment.app.FragmentTransaction;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import androidx.preference.Preference;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import androidx.preference.PreferenceFragmentCompat;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.databinding.UiPreferencesBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.ui.base.viewmodel.NoOpViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17) public class PreferencesActivity extends BaseActivity<UiPreferencesBinding, NoOpViewModel> implements MvvmView, PreferenceFragmentCompat.OnPreferenceStartFragmentCallback {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     protected void onCreate(@Nullable Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         super.onCreate(savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         setContentView(R.layout.ui_preferences);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         bindAndAttachContentView(R.layout.ui_preferences, savedInstanceState);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         setHasEventBus(false);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         setSupportToolbar(this.binding.toolbar, true, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         setDrawer(binding.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         getSupportFragmentManager().addOnBackStackChangedListener(() -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)                     if (getSupportFragmentManager().getFragments().isEmpty()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)                         setToolbarTitle(getTitle());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)                     } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)                         setToolbarTitle(((PreferenceFragmentCompat) getSupportFragmentManager().getFragments().get(0)).getPreferenceScreen().getTitle());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         );
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction().replace(R.id.content_frame, new PreferencesFragment(), null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         fragmentTransaction.commit();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         getSupportFragmentManager().executePendingTransactions();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     private void setToolbarTitle(CharSequence text) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         binding.toolbar.setTitle(text);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     public boolean onPreferenceStartFragment(PreferenceFragmentCompat caller, Preference pref) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)         final Bundle args = pref.getExtras();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)         final Fragment fragment = getSupportFragmentManager().getFragmentFactory().instantiate(
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)                 getClassLoader(),"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)                 pref.getFragment());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         fragment.setArguments(args);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)         fragment.setTargetFragment(caller, 0);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         // Replace the existing Fragment with the new Fragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         getSupportFragmentManager().beginTransaction()
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)                 .replace(R.id.content_frame, fragment)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)                 .addToBackStack(pref.getKey())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)                 .commit();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import dagger.android.ContributesAndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) abstract class PreferencesActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     abstract fun bindActivity(a: PreferencesActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @ContributesAndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     abstract fun bindPreferencesFragment(): PreferencesFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     @ContributesAndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     abstract fun bindReportingPreferencesFragment(): ReportingFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     @ContributesAndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     abstract fun bindNotificationPreferencesFragment(): NotificationFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     @ContributesAndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     abstract fun bindAdvancedPreferencesFragment(): AdvancedFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.preference.Preference
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.services.MessageProcessorEndpointHttp
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.services.MessageProcessorEndpointMqtt
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.preferences.connection.ConnectionActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.preferences.editor.EditorActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) class PreferencesFragment : AbstractPreferenceFragment() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     override fun onCreatePreferencesFix(savedInstanceState: Bundle?, rootKey: String?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         super.onCreatePreferencesFix(savedInstanceState, rootKey)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         setPreferencesFromResource(R.xml.preferences_root, rootKey)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         // Have to do these manually here, as there's an android bug that prevents the activity from being found when launched from intent declared on the preferences XML."
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         findPreference<Preference>(UI_SCREEN_CONFIGURATION)!!.intent = Intent(context, EditorActivity::class.java).addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         //TODO move this to a preferences fragment rather than its own activity.
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         findPreference<Preference>(UI_PREFERENCE_SCREEN_CONNECTION)!!.intent = Intent(context, ConnectionActivity::class.java).addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     override fun onResume() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         super.onResume()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         findPreference<Preference>(UI_PREFERENCE_SCREEN_CONNECTION)!!.summary = connectionMode
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     private val connectionMode: String
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         get() = when (preferences.mode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)             MessageProcessorEndpointHttp.MODE_ID -> getString(R.string.mode_http_private_label)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)             MessageProcessorEndpointMqtt.MODE_ID -> getString(R.string.mode_mqtt_private_label)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)             else -> getString(R.string.mode_mqtt_private_label)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         private const val UI_PREFERENCE_SCREEN_CONNECTION = ""connectionScreen"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         private const val UI_SCREEN_CONFIGURATION = ""configuration"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) public interface PreferencesFragmentMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)         void loadRoot();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         void setModeSummary(int mode);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     interface ViewModel<V extends MvvmView> extends MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         Preferences getPreferences();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) public class PreferencesFragmentViewModel extends BaseViewModel<PreferencesFragmentMvvm.View> implements PreferencesFragmentMvvm.ViewModel<PreferencesFragmentMvvm.View> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public PreferencesFragmentViewModel(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     public void attachView(@Nullable Bundle savedInstanceState, @NonNull PreferencesFragmentMvvm.View view) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         super.attachView(savedInstanceState, view);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         view.loadRoot();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         view.setModeSummary(preferences.getMode());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     public Preferences getPreferences() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         return preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/PreferencesFragmentViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) class ReportingFragment : AbstractPreferenceFragment() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     override fun onCreatePreferencesFix(savedInstanceState: Bundle?, rootKey: String?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)         super.onCreatePreferencesFix(savedInstanceState, rootKey)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         setPreferencesFromResource(R.xml.preferences_reporting, rootKey)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/ReportingFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.preferences.connection;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.view.LayoutInflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.view.Menu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.view.MenuItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.widget.Toast;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import androidx.appcompat.app.AlertDialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import androidx.databinding.DataBindingUtil;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import com.rengwuxian.materialedittext.MaterialEditText;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import com.rengwuxian.materialedittext.validation.METValidator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.databinding.UiPreferencesConnectionBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.databinding.UiPreferencesConnectionHostHttpBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.databinding.UiPreferencesConnectionHostMqttBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.owntracks.android.databinding.UiPreferencesConnectionIdentificationBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.databinding.UiPreferencesConnectionModeBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.owntracks.android.databinding.UiPreferencesConnectionParametersBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.owntracks.android.databinding.UiPreferencesConnectionSecurityBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.services.MessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.owntracks.android.services.MessageProcessorEndpointHttp;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.owntracks.android.support.RunThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import org.owntracks.android.ui.preferences.connection.dialog.BaseDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionParametersViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import org.owntracks.android.ui.status.StatusActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) public class ConnectionActivity extends BaseActivity<UiPreferencesConnectionBinding, ConnectionMvvm.ViewModel<ConnectionMvvm.View>> implements ConnectionMvvm.View {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     private BaseDialogViewModel activeDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     RunThingsOnOtherThreads runThingsOnOtherThreads;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     MessageProcessor messageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     protected void onCreate(@Nullable Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         super.onCreate(savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         disablesAnimation();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         bindAndAttachContentView(R.layout.ui_preferences_connection, savedInstanceState);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         setSupportToolbar(binding.toolbar, true, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         setHasEventBus(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     public void showModeDialog() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         UiPreferencesConnectionModeBinding dialogBinding = DataBindingUtil.inflate(LayoutInflater.from(this), R.layout.ui_preferences_connection_mode, null, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         dialogBinding.setVm(viewModel.getModeDialogViewModel());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         activeDialogViewModel = dialogBinding.getVm();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         new AlertDialog.Builder(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)                 .setView(dialogBinding.getRoot())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)                 .setTitle(R.string.mode_heading)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)                 .setPositiveButton(R.string.accept, dialogBinding.getVm())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)                 .setNegativeButton(R.string.cancel, dialogBinding.getVm())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)                 .show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     public void showHostDialog() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         if (viewModel.getModeId() == MessageProcessorEndpointHttp.MODE_ID) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)             UiPreferencesConnectionHostHttpBinding dialogBinding = DataBindingUtil.inflate(LayoutInflater.from(this), R.layout.ui_preferences_connection_host_http, null, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)             dialogBinding.setVm(viewModel.getHostDialogViewModelHttp());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             activeDialogViewModel = dialogBinding.getVm();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             new AlertDialog.Builder(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)                     .setView(dialogBinding.getRoot())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)                     .setTitle(R.string.preferencesHost)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)                     .setPositiveButton(R.string.accept, dialogBinding.getVm())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)                     .setNegativeButton(R.string.cancel, dialogBinding.getVm())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)                     .show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             UiPreferencesConnectionHostMqttBinding dialogBinding = DataBindingUtil.inflate(LayoutInflater.from(this), R.layout.ui_preferences_connection_host_mqtt, null, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)             dialogBinding.setVm(viewModel.getHostDialogViewModelMqtt());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             activeDialogViewModel = dialogBinding.getVm();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)             new AlertDialog.Builder(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)                     .setView(dialogBinding.getRoot())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)                     .setTitle(R.string.preferencesHost)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)                     .setPositiveButton(R.string.accept, dialogBinding.getVm())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)                     .setNegativeButton(R.string.cancel, dialogBinding.getVm())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)                     .show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     public void showIdentificationDialog() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         UiPreferencesConnectionIdentificationBinding dialogBinding = DataBindingUtil.inflate(LayoutInflater.from(this), R.layout.ui_preferences_connection_identification, null, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         dialogBinding.setVm(viewModel.getIdentificationDialogViewModel());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         activeDialogViewModel = dialogBinding.getVm();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         new AlertDialog.Builder(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)                 .setView(dialogBinding.getRoot())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)                 .setTitle(R.string.preferencesIdentification)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)                 .setPositiveButton(R.string.accept, dialogBinding.getVm())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)                 .setNegativeButton(R.string.cancel, dialogBinding.getVm())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)                 .show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     public boolean onSupportNavigateUp() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         onBackPressed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)     public void showSecurityDialog() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         UiPreferencesConnectionSecurityBinding dialogBinding = DataBindingUtil.inflate(LayoutInflater.from(this), R.layout.ui_preferences_connection_security, null, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         dialogBinding.setVm(viewModel.getConnectionSecurityViewModel());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)         activeDialogViewModel = dialogBinding.getVm();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         new AlertDialog.Builder(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                 .setView(dialogBinding.getRoot())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                 .setTitle(R.string.preferencesSecurity)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)                 .setPositiveButton(R.string.accept, dialogBinding.getVm())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                 .setNegativeButton(R.string.cancel, dialogBinding.getVm())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                 .show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     ConnectionParametersViewModel connectionParametersViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)     public void showParametersDialog() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         UiPreferencesConnectionParametersBinding dialogBinding = DataBindingUtil.inflate(LayoutInflater.from(this), R.layout.ui_preferences_connection_parameters, null, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)         connectionParametersViewModel = viewModel.getConnectionParametersViewModel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)         dialogBinding.setVm(connectionParametersViewModel);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)         activeDialogViewModel = dialogBinding.getVm();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)         AlertDialog dialog = new AlertDialog.Builder(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                 .setView(dialogBinding.getRoot())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)                 .setTitle(R.string.preferencesParameters)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)                 .setPositiveButton(R.string.accept, dialogBinding.getVm())"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)                 .setNegativeButton(R.string.cancel, dialogBinding.getVm()).create();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         MaterialEditText keepAliveEditText = dialogBinding.getRoot().findViewById(R.id.keepalive);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         keepAliveEditText.addValidator(new METValidator(getString(R.string.preferencesKeepaliveValidationError, preferences.isExperimentalFeatureEnabled(Preferences.EXPERIMENTAL_FEATURE_ALLOW_SMALL_KEEPALIVE) ? 1 : preferences.getMinimumKeepalive())) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)             @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             public boolean isValid(@NonNull CharSequence text, boolean isEmpty) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)                 try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)                     int intValue = Integer.parseInt(text.toString());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)                     return isEmpty || preferences.keepAliveInRange(intValue) || (preferences.isExperimentalFeatureEnabled(Preferences.EXPERIMENTAL_FEATURE_ALLOW_SMALL_KEEPALIVE) && intValue >= 1);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)                 } catch (NumberFormatException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)                     return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)         keepAliveEditText.setAutoValidate(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         dialog.show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         dialog.getButton(AlertDialog.BUTTON_POSITIVE).setOnClickListener(v -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)             if (keepAliveEditText.validate()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)                 connectionParametersViewModel.save();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)                 dialog.dismiss();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)     protected void onActivityResult(int requestCode, int resultCode, Intent data) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         super.onActivityResult(requestCode, resultCode, data);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         activeDialogViewModel.onActivityResult(requestCode, resultCode, data);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     public void recreateOptionsMenu() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         invalidateOptionsMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     public boolean onCreateOptionsMenu(Menu menu) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         if (menu != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)             menu.clear();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         if (viewModel.getModeId() == MessageProcessorEndpointHttp.MODE_ID) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)             getMenuInflater().inflate(R.menu.preferences_connection_http, menu);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)             getMenuInflater().inflate(R.menu.preferences_connection_mqtt, menu);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)     public boolean onOptionsItemSelected(MenuItem item) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         switch (item.getItemId()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)             case R.id.connect:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)                 if (messageProcessor.isEndpointConfigurationComplete()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)                     messageProcessor.reconnect();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)                 } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)                     Toast.makeText(this, R.string.ERROR_CONFIGURATION, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)             case R.id.status:
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)                 startActivity(new Intent(this, StatusActivity.class));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)                 return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class ConnectionActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: ConnectionActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     abstract fun bindViewModel(viewModel: ConnectionViewModel): ConnectionMvvm.ViewModel<ConnectionMvvm.View>
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionHostHttpDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionHostMqttDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionIdentificationViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionModeDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionParametersViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionSecurityViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) public interface ConnectionMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         void showModeDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         void showHostDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         void showIdentificationDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         void showSecurityDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         void showParametersDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         void recreateOptionsMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     interface ViewModel<V extends MvvmView> extends MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         void onModeClick();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         void onHostClick();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         void onIdentificationClick();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         void onSecurityClick();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         void onParametersClick();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         int getModeId();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         void setModeId(int newModeId);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         ConnectionHostMqttDialogViewModel getHostDialogViewModelMqtt();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         ConnectionHostHttpDialogViewModel getHostDialogViewModelHttp();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         ConnectionModeDialogViewModel getModeDialogViewModel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         ConnectionIdentificationViewModel getIdentificationDialogViewModel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         ConnectionSecurityViewModel getConnectionSecurityViewModel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         ConnectionParametersViewModel getConnectionParametersViewModel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.preferences.connection;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.greenrobot.eventbus.Subscribe;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.injection.qualifier.AppContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionHostHttpDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionHostMqttDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionIdentificationViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionModeDialogViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionParametersViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.ui.preferences.connection.dialog.ConnectionSecurityViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) public class ConnectionViewModel extends BaseViewModel<ConnectionMvvm.View> implements ConnectionMvvm.ViewModel<ConnectionMvvm.View> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private final Context context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private int modeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     ConnectionViewModel(Preferences preferences,@AppContext Context context) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         this.context = context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     public void attachView(@Nullable Bundle savedInstanceState, @NonNull ConnectionMvvm.View view) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         super.attachView(savedInstanceState, view);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         setModeId(preferences.getMode());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     public void setModeId(int newModeId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         this.modeId = newModeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     public int getModeId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         return modeId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     @Subscribe
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     public void onEvent(Events.ModeChanged e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         Timber.v(""mode changed %s"", e.getNewModeId());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         setModeId(e.getNewModeId());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         getView().recreateOptionsMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         notifyChange();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     public void onModeClick() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         getView().showModeDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     public void onHostClick() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         getView().showHostDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)     public void onIdentificationClick() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         getView().showIdentificationDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     public void onSecurityClick() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         getView().showSecurityDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     public void onParametersClick() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         getView().showParametersDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     public ConnectionModeDialogViewModel getModeDialogViewModel() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         return new ConnectionModeDialogViewModel(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     public ConnectionHostMqttDialogViewModel getHostDialogViewModelMqtt() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         return new ConnectionHostMqttDialogViewModel(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     public ConnectionHostHttpDialogViewModel getHostDialogViewModelHttp() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         return new ConnectionHostHttpDialogViewModel(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     public ConnectionIdentificationViewModel getIdentificationDialogViewModel() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         return new ConnectionIdentificationViewModel(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     public ConnectionSecurityViewModel getConnectionSecurityViewModel() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         return new ConnectionSecurityViewModel(preferences, navigator,context);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     public ConnectionParametersViewModel getConnectionParametersViewModel() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         return new ConnectionParametersViewModel(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/ConnectionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection.dialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.DialogInterface;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.databinding.BaseObservable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public abstract class BaseDialogViewModel extends BaseObservable implements DialogInterface.OnClickListener {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     BaseDialogViewModel(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         load();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     public void onClick(DialogInterface dialog, int which) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         if(which == DialogInterface.BUTTON_POSITIVE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)             save();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         } else if(which == DialogInterface.BUTTON_NEGATIVE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)             dialog.cancel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     public abstract void onActivityResult(int requestCode, int resultCode, Intent data);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     abstract void load();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     abstract void save();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/BaseDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection.dialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public class ConnectionHostHttpDialogViewModel extends BaseDialogViewModel {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     private String url;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     public ConnectionHostHttpDialogViewModel(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         super(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     public void onActivityResult(int requestCode, int resultCode, Intent data) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     public void load() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         this.url = preferences.getUrl();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     public void save() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         Timber.v(""saving url:%s"", url);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         preferences.setUrl(url);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     public String getUrlText() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         return url;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     public void setUrlText(String url) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         this.url = url;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostHttpDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection.dialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) public class ConnectionHostMqttDialogViewModel extends BaseDialogViewModel {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     private String host;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     private boolean hostDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     private String port;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     private boolean portDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     private boolean ws;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     private boolean wsDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     private String clientId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private boolean clientIdDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     public ConnectionHostMqttDialogViewModel(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         super(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     public void onActivityResult(int requestCode, int resultCode, Intent data) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     public void load() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         this.host = preferences.getHost();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         this.port = preferences.getPortWithHintSupport();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         this.ws = preferences.getWs();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         this.clientId = preferences.getClientId();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     public void save() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         Timber.v(""saving host:%s, port:%s, ws:%s, clientId:%s"", host, port, ws, clientId);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         if(hostDirty) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)             preferences.setHost(host);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         if(portDirty) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)                 preferences.setPort(Integer.parseInt(port));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)             } catch (NumberFormatException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)                 preferences.setPortDefault();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)         if(wsDirty) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)             preferences.setWs(ws);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         if (clientIdDirty) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)             preferences.setClientId(clientId);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)     public String getHostText() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         return preferences.getHost();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     public void setHostText(String host) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         this.host = host;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)         this.hostDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)     public String getPortText() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)         return port;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 70)     public void setPortText(String port) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 71)         this.port = port;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 72)         this.portDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 73)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 74)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 75)     public boolean isWs() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 76)         return ws;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 78)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 79)     public void setWs(boolean ws) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 80)         this.ws = ws;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 81)         this.wsDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 82)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 83)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 84)     public String getClientId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 85)         return clientId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 86)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 87)     public void setClientId(String clientId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 88)         this.clientId = clientId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 89)         this.clientIdDirty=true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 90)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 91) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionHostMqttDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 92)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection.dialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) public class ConnectionIdentificationViewModel extends BaseDialogViewModel {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     private String username;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     private boolean usernameDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     private String password;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     private boolean passwordDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     private String deviceId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     private boolean deviceIdDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     private String trackerId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     private boolean trackerIdDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     public ConnectionIdentificationViewModel(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         super(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     public void onActivityResult(int requestCode, int resultCode, Intent data) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     public void load() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         this.username = preferences.getUsername();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         this.password = preferences.getPassword();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         this.deviceId = preferences.getDeviceId(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         this.trackerId = preferences.getTrackerId(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     public void save() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         if(usernameDirty)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)             preferences.setUsername(username);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         if(passwordDirty)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)             preferences.setPassword(password);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         if(deviceIdDirty)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)             preferences.setDeviceId(deviceId);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         if(trackerIdDirty)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)             preferences.setTrackerId(trackerId);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)     public String getUsername() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         return username;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     public void setUsername(String username) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         this.username = username;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         this.usernameDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     public String getPassword() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)         return password;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)     public void setPassword(String password) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)         this.password = password;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)         this.passwordDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     public String getDeviceId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68)         return deviceId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 70)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 71)     public void setDeviceId(String deviceId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 72)         this.deviceId = deviceId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 73)         this.deviceIdDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 74)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 75)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 76)     public String getTrackerId() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 77)         return trackerId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 78)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 79)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 80)     public void setTrackerId(String trackerId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 81)         this.trackerId = trackerId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 82)         this.trackerIdDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 83)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 84) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionIdentificationViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 85)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection.dialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.services.MessageProcessorEndpointHttp;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.services.MessageProcessorEndpointMqtt;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) public class ConnectionModeDialogViewModel extends BaseDialogViewModel {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     private int modeResId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     public ConnectionModeDialogViewModel(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         super(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public void onActivityResult(int requestCode, int resultCode, Intent data) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     public void load() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         this.modeResId = modeToResId(preferences.getMode());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     public void save() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         preferences.setMode(resIdToMode(modeResId));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     public int getMode() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         return modeResId;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     public void setMode(int mode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         this.modeResId = mode;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     private int modeToResId(int mode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         switch (mode) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)             case MessageProcessorEndpointHttp.MODE_ID:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)                 return R.id.radioModeHttpPrivate;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)             case MessageProcessorEndpointMqtt.MODE_ID:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)                 return R.id.radioModeMqttPrivate;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     private int resIdToMode(int resId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         switch (resId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)             case R.id.radioModeHttpPrivate:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)                 return MessageProcessorEndpointHttp.MODE_ID;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)             case R.id.radioModeMqttPrivate:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)                 return MessageProcessorEndpointMqtt.MODE_ID;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionModeDialogViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.connection.dialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) public class ConnectionParametersViewModel extends BaseDialogViewModel {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     private boolean cleanSession;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     private String keepaliveText;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     private boolean keepaliveTextDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     public ConnectionParametersViewModel(Preferences preferences) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         super(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     public void onActivityResult(int requestCode, int resultCode, Intent data) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     public void load() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         this.cleanSession = preferences.getCleanSession();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         this.keepaliveText = preferences.getKeepaliveWithHintSupport();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     public void save() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         preferences.setCleanSession(cleanSession);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         if(keepaliveTextDirty) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)                 preferences.setKeepalive(Integer.parseInt(keepaliveText));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)             } catch (NumberFormatException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)                 preferences.setKeepaliveDefault();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     public boolean isCleanSession() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         return cleanSession;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     public void setCleanSession(boolean cleanSession) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)         this.cleanSession = cleanSession;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)     public String getKeepaliveText() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         return keepaliveText;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     public void setKeepaliveText(String keepaliveText) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         this.keepaliveText = keepaliveText;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         this.keepaliveTextDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionParametersViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.preferences.connection.dialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.database.Cursor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.net.Uri;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.os.AsyncTask;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.provider.OpenableColumns;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import android.widget.CompoundButton;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import android.widget.Toast;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import androidx.appcompat.widget.PopupMenu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import java.io.FileOutputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import java.io.InputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import static android.app.Activity.RESULT_OK;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) public class ConnectionSecurityViewModel extends BaseDialogViewModel {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     private static final int REQUEST_CODE_FILE_CA_CRT = 1;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     private static final int REQUEST_CODE_FILE_CLIENT_CRT = 2;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private final Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private final Context context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private boolean tls;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     private String tlsCaCrtName;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     private String tlsClientCrtName;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     private String tlsClientCrtPassword;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     private boolean tlsClientCrtNameDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     private boolean tlsCaCrtNameDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     private boolean tlsClientCrtPasswortDirty;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     public ConnectionSecurityViewModel(Preferences preferences, Navigator navigator, Context context) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         super(preferences);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         this.navigator = navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         this.context = context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     public void load() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         this.tls = preferences.getTls();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         this.tlsCaCrtName = preferences.getTlsCaCrt();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         this.tlsClientCrtName = preferences.getTlsClientCrt();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         this.tlsClientCrtPassword = preferences.getTlsClientCrtPassword();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     public void save() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         preferences.setTls(tls);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         if(tlsCaCrtNameDirty)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)             preferences.setTlsCaCrt(tlsCaCrtName == null ? """" : tlsCaCrtName);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         if(tlsClientCrtNameDirty)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)             preferences.setTlsClientCrt(tlsClientCrtName == null ? """" : tlsClientCrtName);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         if(tlsClientCrtPasswortDirty)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             preferences.setTlsClientCrtPassword(tlsClientCrtPassword == null ? """" : tlsClientCrtPassword);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     public boolean isTls() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         return tls;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     private void setTls(boolean tls) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         this.tls = tls;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         notifyChange();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     public String getTlsCaCrtName() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         return tlsCaCrtName;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     private void setTlsCaCrtName(String tlsCaCrtName) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         this.tlsCaCrtName = tlsCaCrtName;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         this.tlsCaCrtNameDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         notifyChange();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)     public String getTlsClientCrtName() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         return tlsClientCrtName;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     private void setTlsClientCrtName(String tlsClientCrtName) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         this.tlsClientCrtName = tlsClientCrtName;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         this.tlsClientCrtNameDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         notifyChange();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     public String getTlsClientCrtPassword() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         return tlsClientCrtPassword;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     public void setTlsClientCrtPassword(String tlsClientCrtPassword) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         this.tlsClientCrtPassword = tlsClientCrtPassword;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         this.tlsClientCrtPasswortDirty = true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     public void onTlsCheckedChanged(final CompoundButton ignored, boolean isChecked) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         setTls(isChecked);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     public void onTlsCaCrtNameClick(final View v) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         PopupMenu popup = new PopupMenu(v.getContext(), v);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         popup.getMenuInflater().inflate(R.menu.picker, popup.getMenu());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         popup.setOnMenuItemClickListener(item -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)             if (item.getItemId() == R.id.clear) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)                 setTlsCaCrtName(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)             } else if (item.getItemId() == R.id.select) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)                 Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                 intent.addCategory(Intent.CATEGORY_OPENABLE);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)                 intent.setType(""*/*"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                 try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                     navigator.startActivityForResult(Intent.createChooser(intent, ""Select a file""), REQUEST_CODE_FILE_CA_CRT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                 } catch (android.content.ActivityNotFoundException ex) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                     // Potentially direct the user to the Market with a Dialog
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         popup.show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)     public void onTlsClientCrtNameClick(final View v) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         PopupMenu popup = new PopupMenu(v.getContext(), v);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         popup.getMenuInflater().inflate(R.menu.picker, popup.getMenu());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         popup.setOnMenuItemClickListener(item -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)             if (item.getItemId() == R.id.clear) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)                 setTlsClientCrtName(null);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)             } else if (item.getItemId() == R.id.select) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)                 Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)                 intent.addCategory(Intent.CATEGORY_OPENABLE);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                 intent.setType(""*/*"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)                 try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)                     navigator.startActivityForResult(Intent.createChooser(intent, ""Select a file""), REQUEST_CODE_FILE_CLIENT_CRT);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)                 } catch (android.content.ActivityNotFoundException ex) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)                     // Potentially direct the user to the Market with a Dialog
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         popup.show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)     public void onActivityResult(int requestCode, int resultCode, Intent data) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         if(resultCode == RESULT_OK && (requestCode == ConnectionSecurityViewModel.REQUEST_CODE_FILE_CA_CRT || requestCode == ConnectionSecurityViewModel.REQUEST_CODE_FILE_CLIENT_CRT )) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)             Uri uri = data.getData();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)             Timber.v(""uri:  %s,"", uri.toString());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)             if (requestCode == ConnectionSecurityViewModel.REQUEST_CODE_FILE_CA_CRT)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)                 new CaCrtCopyTask(context).execute(uri);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)             else
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)                 new ClientCrtCopyTask(context).execute(uri);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)     private abstract class CopyTask extends AsyncTask<Uri, String, String> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         protected final Context context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)         protected CopyTask(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)             this.context = context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)         protected String doInBackground(Uri... params) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)             try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)                 Timber.v(""CopyTask with URI: %s"", params[0]);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)                 String filename = uriToFilename(params[0]);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)                 Timber.v(""filename for save is: %s"", filename);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)                 InputStream inputStream = context.getApplicationContext().getContentResolver().openInputStream(params[0]);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)                 FileOutputStream outputStream = context.getApplicationContext().openFileOutput(filename, Context.MODE_PRIVATE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)                 byte[] buffer = new byte[256];
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)                 int bytesRead;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)                 while ((bytesRead = inputStream.read(buffer)) != -1) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)                     outputStream.write(buffer, 0, bytesRead);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)                 inputStream.close();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)                 outputStream.close();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)                 Timber.v(""copied file to private storage: %s"", filename);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)                 return filename;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)             } catch (Exception e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)                 Timber.e(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)                 this.cancel(true);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)                 return null;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)     private class CaCrtCopyTask extends CopyTask {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)         protected CaCrtCopyTask(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)             super(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)         protected void onPostExecute(String s) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)             Timber.v(""crt copied %s"",s);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)             setTlsCaCrtName(s);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 222)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 223)         protected void onCancelled(String s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 224)             setTlsCaCrtName(null);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 225)             Toast.makeText(context.getApplicationContext(), context.getString(R.string.unableToCopyCertificate), Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 226)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 227)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 228)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 229)     private class ClientCrtCopyTask extends CopyTask {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 230)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         protected ClientCrtCopyTask(Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 232)             super(context);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 233)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 234)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 235)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 236)         protected void onPostExecute(String s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 237)             setTlsClientCrtName(s);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 238)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 239)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 240)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 241)         protected void onCancelled(String s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 242)             setTlsClientCrtName(null);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 243)             Toast.makeText(context.getApplicationContext(), context.getString(R.string.unableToCopyCertificate), Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 244)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 245)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 246)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 247)     private String uriToFilename(Uri uri) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 248)         String result = null;
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         if (uri.getScheme().equals(""content"")) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 250)             try (Cursor cursor = context.getApplicationContext().getContentResolver().query(uri, null, null, null, null)) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 251)                 if (cursor != null && cursor.moveToFirst()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 252)                     result = cursor.getString(cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 253)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 254)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 255)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 256)         if (result == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 257)             result = uri.getPath();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 258)             int cut = result.lastIndexOf('/');
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 259)             if (cut != -1) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 260)                 result = result.substring(cut + 1);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 261)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 262)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 263)         return result;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 264)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 265) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/connection/dialog/ConnectionSecurityViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 266)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.preferences.editor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.net.Uri;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.os.AsyncTask;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.view.LayoutInflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.view.Menu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import android.view.MenuInflater;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import android.view.MenuItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import android.widget.ArrayAdapter;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import android.widget.Toast;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import androidx.appcompat.app.AlertDialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import androidx.core.content.FileProvider;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import com.rengwuxian.materialedittext.MaterialAutoCompleteTextView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import com.rengwuxian.materialedittext.MaterialEditText;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import org.owntracks.android.databinding.UiPreferencesEditorBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import org.owntracks.android.model.messages.MessageConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import org.owntracks.android.support.Parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import org.owntracks.android.ui.preferences.load.LoadActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import java.io.File;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import java.io.FileWriter;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import java.lang.ref.WeakReference;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43) public class EditorActivity extends BaseActivity<UiPreferencesEditorBinding, EditorMvvm.ViewModel<EditorMvvm.View>> implements EditorMvvm.View {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     Parser parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     protected void onCreate(@Nullable Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         super.onCreate(savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         disablesAnimation();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         bindAndAttachContentView(R.layout.ui_preferences_editor, savedInstanceState);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         setHasEventBus(false);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         setSupportToolbar(binding.toolbar, true, true);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)     public boolean onCreateOptionsMenu(Menu menu) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         MenuInflater inflater = getMenuInflater();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         inflater.inflate(R.menu.activity_configuration, menu);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     public boolean onOptionsItemSelected(MenuItem item) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         switch (item.getItemId()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             case R.id.exportConfigurationFile:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)                 new ExportTask(this).execute();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             case R.id.importConfigurationFile:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)                 showImportConfigurationFilePickerView();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             case R.id.importConfigurationSingleValue:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)                 showEditorView();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             case R.id.restart:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)                 eventBus.post(new Events.RestartApp());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)                 return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     public boolean onSupportNavigateUp() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         onBackPressed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     private void showImportConfigurationFilePickerView() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         Bundle b = new Bundle();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         b.putBoolean(LoadActivity.FLAG_IN_APP, true);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         navigator.startActivity(LoadActivity.class, b);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     private void showEditorView() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         AlertDialog.Builder builder = new AlertDialog.Builder(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         LayoutInflater inflater = getLayoutInflater();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         final View layout = inflater.inflate(R.layout.ui_preferences_editor_dialog,null);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         // Set autocomplete items
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         MaterialAutoCompleteTextView inputKeyView = layout.findViewById(R.id.inputKey);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         inputKeyView.setAdapter(new ArrayAdapter<>(this, android.R.layout.simple_dropdown_item_1line, preferences.getImportKeys()));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         builder.setTitle(R.string.preferencesEditor)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                 .setPositiveButton(R.string.accept, (dialog, which) -> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)                     final MaterialEditText inputValue = layout.findViewById(R.id.inputValue);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                     String key = inputKeyView.getText().toString();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                     String value = inputValue.getText().toString();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                     try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                         preferences.importKeyValue(key, value);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                         viewModel.onPreferencesValueForKeySetSuccessful();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)                         dialog.dismiss();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                     } catch (IllegalAccessException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                         Timber.w(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)                         displayPreferencesValueForKeySetFailedKey();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)                     } catch (IllegalArgumentException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)                         Timber.w(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)                         displayPreferencesValueForKeySetFailedValue();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)                 })
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)                 .setNegativeButton(R.string.cancel, (dialog, which) -> dialog.dismiss())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)                 .setView(layout);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         builder.show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)     public boolean exportConfigurationToFile(String exportStr) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         File cDir = getBaseContext().getCacheDir();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         File tempFile = new File(cDir.getPath() + ""/config.otrc"") ;"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             FileWriter writer = new FileWriter(tempFile);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)             writer.write(exportStr);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)             writer.close();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)             displayExportToFileFailed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)             return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         Uri configUri = FileProvider.getUriForFile(this, ""org.owntracks.android.fileprovider"", tempFile);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)         Intent sendIntent = new Intent();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)         sendIntent.setAction(Intent.ACTION_SEND);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         sendIntent.putExtra(Intent.EXTRA_STREAM, configUri);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         sendIntent.setType(""text/plain"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         startActivity(Intent.createChooser(sendIntent, getString(R.string.exportConfiguration)));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)     public void displayLoadFailed() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         Toast.makeText(this, R.string.preferencesLoadFailed, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     public void displayExportToFileFailed() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         Toast.makeText(this, R.string.preferencesExportFailed, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     public void displayExportToFileSuccessful() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         Toast.makeText(this, R.string.preferencesExportSuccess, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)     private void displayPreferencesValueForKeySetFailedKey() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         Toast.makeText(this, R.string.preferencesEditorKeyError, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)     private void displayPreferencesValueForKeySetFailedValue() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)         Toast.makeText(this, R.string.preferencesEditorValueError, Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)     private String getExportString() throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)         MessageConfiguration message = preferences.exportToMessage();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         message.setWaypoints(waypointsRepo.exportToMessage());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)         return parser.toJsonPlain(message);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 196)     static class ExportTask extends AsyncTask<Void, Void, Boolean> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         WeakReference<EditorActivity> ref;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         ExportTask(EditorActivity activity) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 199)             ref = new WeakReference<>(activity);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 200)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 201)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 202)         protected Boolean doInBackground(Void... voids) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 203)             String exportStr;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 204)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 205)                 exportStr = ref.get().getExportString();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 206)             } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 207)                 return false;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 208)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 209)             if(ref.get() != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 210)                 ref.get().exportConfigurationToFile(exportStr);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 211)             return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 212)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 213)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 214)         @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 215)         protected void onPostExecute(Boolean success) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 216)             if(ref.get() != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 217)                 ref.get().displayExportToFileSuccessful();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 218)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 219)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 220)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 221) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.editor
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class EditorActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: EditorActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     abstract fun bindViewModel(viewModel: EditorViewModel): EditorMvvm.ViewModel<EditorMvvm.View>
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.editor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) public interface EditorMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         void displayLoadFailed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)         void displayExportToFileFailed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         void displayExportToFileSuccessful();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         boolean exportConfigurationToFile(String exportStr);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     interface ViewModel<V extends MvvmView> extends MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         void onPreferencesValueForKeySetSuccessful();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         @Bindable String getEffectiveConfiguration();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.editor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.BR;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.model.messages.MessageConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.support.Parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24) public class EditorViewModel extends BaseViewModel<EditorMvvm.View> implements EditorMvvm.ViewModel<EditorMvvm.View> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     private final Parser parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     private String effectiveConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     public EditorViewModel(Preferences preferences, Parser parser) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         this.parser = parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     public void attachView(@Nullable Bundle savedInstanceState, @NonNull EditorMvvm.View view) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         super.attachView(savedInstanceState, view);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         updateEffectiveConfiguration();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     private void updateEffectiveConfiguration() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)             MessageConfiguration message = preferences.exportToMessage();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)             message.setWaypoints(waypointsRepo.exportToMessage());
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)             message.set(preferences.getPreferenceKey(R.string.preferenceKeyPassword), ""********"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)             setEffectiveConfiguration(parser.toJsonPlainPretty(message));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)             getView().displayLoadFailed();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     public String getEffectiveConfiguration() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         return effectiveConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     private void setEffectiveConfiguration(String effectiveConfiguration) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         this.effectiveConfiguration = effectiveConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)         notifyPropertyChanged(BR.effectiveConfiguration);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     public void onPreferencesValueForKeySetSuccessful() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68)         updateEffectiveConfiguration();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)         notifyPropertyChanged(BR.effectiveConfiguration);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 70)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/editor/EditorViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 71) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/ImportStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.ui.preferences.load
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/ImportStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/ImportStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) enum class ImportStatus {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/ImportStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4)     LOADING, SUCCESS, FAILED"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/ImportStatus.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.preferences.load;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.annotation.SuppressLint;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.ContentResolver;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.net.Uri;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.view.Menu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import android.view.MenuItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import android.widget.Toast;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import androidx.appcompat.app.AlertDialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import androidx.databinding.Observable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.greenrobot.eventbus.EventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.databinding.UiPreferencesLoadBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import java.io.InputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import java.net.URI;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import java.net.URISyntaxException;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) @SuppressLint(""GoogleAppIndexingApiWarning"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) public class LoadActivity extends BaseActivity<UiPreferencesLoadBinding, LoadMvvm.ViewModel<LoadMvvm.View>> implements LoadMvvm.View {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     private static final int REQUEST_CODE = 1;
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     public static final String FLAG_IN_APP = ""INAPP"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     EventBus eventBus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     protected void onCreate(@Nullable Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         super.onCreate(savedInstanceState);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         bindAndAttachContentView(R.layout.ui_preferences_load, savedInstanceState);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         setHasEventBus(false);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         setSupportToolbar(binding.toolbar, true, false);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         if (getSupportActionBar() != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)             getSupportActionBar().setTitle(R.string.title_activity_load);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         binding.getVm().addOnPropertyChangedCallback(propertyChangedCallback);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         handleIntent(getIntent());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     protected void onNewIntent(Intent intent) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         super.onNewIntent(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         setHasBack(false);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         handleIntent(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     public boolean onOptionsItemSelected(MenuItem item) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         switch (item.getItemId()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)             case R.id.save:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)                 viewModel.saveConfiguration();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)             case R.id.close:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)             case android.R.id.home:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)                 finish();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)                 return super.onOptionsItemSelected(item);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     private void setHasBack(boolean hasBackArrow) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         if (getSupportActionBar() != null)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             getSupportActionBar().setDisplayHomeAsUpEnabled(hasBackArrow);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     public boolean onCreateOptionsMenu(Menu menu) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         getMenuInflater().inflate(R.menu.activity_load, menu);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     public boolean onPrepareOptionsMenu(Menu menu) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         menu.findItem(R.id.close).setVisible(viewModel.getConfigurationImportStatus() != ImportStatus.LOADING);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         menu.findItem(R.id.save).setVisible(viewModel.getConfigurationImportStatus() == ImportStatus.SUCCESS);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     private final Observable.OnPropertyChangedCallback propertyChangedCallback = new Observable.OnPropertyChangedCallback() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         public void onPropertyChanged(Observable observable, int i) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)             invalidateOptionsMenu();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     };
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     private void handleIntent(@Nullable Intent intent) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         if (intent == null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             Timber.e(""no intent provided"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)             return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         setHasBack(navigator.getExtrasBundle(getIntent()).getBoolean(FLAG_IN_APP, false));"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         Timber.v(""inApp %s"", intent.getBooleanExtra(FLAG_IN_APP, false));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         final String action = intent.getAction();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         if (Intent.ACTION_VIEW.equals(action)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)             Uri uri = intent.getData();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             if (uri != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                 Timber.v(""uri: %s"", uri);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                 if (ContentResolver.SCHEME_CONTENT.equals(uri.getScheme())) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                     try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                         viewModel.extractPreferences(getContentFromURI(uri));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                     } catch (IOException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                         String msg = String.format(""Could not extract content from %s"", uri);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                         viewModel.setError(new Exception(msg, e));"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)                         Timber.e(e, msg);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                 } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)                     try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)                         viewModel.extractPreferences(new URI(uri.toString()));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)                     } catch (URISyntaxException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)                         String msg = ""Error parsing intent URI"";"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)                         viewModel.setError(new Exception(msg, e));"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)                         Timber.e(e, msg);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)                 String msg = ""No URI given for importing configuration"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)                 viewModel.setError(new Exception(msg));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                 Timber.e(msg);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)             Intent pickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)             pickerIntent.addCategory(Intent.CATEGORY_OPENABLE);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)             pickerIntent.setType(""*/*"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)             try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)                 Timber.v(""loading picker"");"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)                 startActivityForResult(Intent.createChooser(pickerIntent, ""Select a file""), LoadActivity.REQUEST_CODE);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)             } catch (android.content.ActivityNotFoundException ex) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)                 Toast.makeText(this, ""No file explorer app found"", Toast.LENGTH_SHORT).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)     // Return path from file picker
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)     public void onActivityResult(int requestCode, int resultCode, Intent resultIntent) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         super.onActivityResult(requestCode, resultCode, resultIntent);"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         Timber.v(""RequestCode: %s resultCode: %s"", requestCode, resultCode);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)         if (requestCode == LoadActivity.REQUEST_CODE) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)             if (resultCode == RESULT_OK) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)                 byte[] content = new byte[0];
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)                 try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)                     content = getContentFromURI(resultIntent.getData());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)                 } catch (IOException e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)                     Timber.e(e, ""Could not extract content from %s"", resultIntent);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)                 viewModel.extractPreferences(content);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)             } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)                 finish();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     private byte[] getContentFromURI(Uri uri) throws IOException {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         InputStream stream = getContentResolver().openInputStream(uri);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         byte[] output = new byte[stream.available()];
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)         int bytesRead = stream.read(output);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         Timber.d(""Read %d bytes from content URI"", bytesRead);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         return output;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)     public void showFinishDialog() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)         (new AlertDialog.Builder(this)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)                 .setTitle(""Import successful"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)                 .setMessage(""It is recommended to restart the app to apply all imported values"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)                 .setPositiveButton(""Restart"", (dialog, which) -> eventBus.post(new Events.RestartApp()))"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)                 .setNegativeButton(""Cancel"", (dialog, which) -> finish())).show();"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.load
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class LoadActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: LoadActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     abstract fun bindViewModel(viewModel: LoadViewModel): LoadMvvm.ViewModel<LoadMvvm.View>?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.load;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import java.net.URI;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public interface LoadMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         void showFinishDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     interface ViewModel<V extends MvvmView> extends MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         void extractPreferences(URI uri);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         void extractPreferences(byte[] content);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         void saveConfiguration();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         String getDisplayedConfiguration();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         ImportStatus getConfigurationImportStatus();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         void setError(Throwable e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.preferences.load;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.ContentResolver;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.apache.commons.codec.binary.Base64;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.apache.hc.core5.http.NameValuePair;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.apache.hc.core5.net.URLEncodedUtils;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.model.messages.MessageBase;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.model.messages.MessageConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.support.Parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.support.Preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import java.io.BufferedReader;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import java.io.FileInputStream;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import java.io.IOException;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import java.io.InputStreamReader;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import java.net.URI;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import java.net.URL;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import java.nio.charset.StandardCharsets;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import java.util.ArrayList;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import okhttp3.Call;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import okhttp3.Callback;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import okhttp3.OkHttpClient;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import okhttp3.Request;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import okhttp3.Response;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import okhttp3.ResponseBody;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42) public class LoadViewModel extends BaseViewModel<LoadMvvm.View> implements LoadMvvm.ViewModel<LoadMvvm.View> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     private final Preferences preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     private final Parser parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     private final WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     private MessageConfiguration configuration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)     private String displayedConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     private ImportStatus importStatus = ImportStatus.LOADING;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     public LoadViewModel(Preferences preferences, Parser parser, WaypointsRepo waypointsRepo) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         this.preferences = preferences;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         this.parser = parser;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         this.waypointsRepo = waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     public void attachView(@Nullable Bundle savedInstanceState, @NonNull LoadMvvm.View view) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         super.attachView(savedInstanceState, view);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     private void setConfiguration(String json) throws IOException, Parser.EncryptionException {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         MessageBase message = parser.fromJson(json.getBytes());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         if (message instanceof MessageConfiguration) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)             this.configuration = (MessageConfiguration) parser.fromJson(json.getBytes());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)             String prettyConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)             try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)                 prettyConfiguration = parser.toJsonPlainPretty(this.configuration);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)             } catch (IOException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)                 Timber.e(e);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)                 prettyConfiguration = ""Unable to parse configuration"";"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)             displayedConfiguration = prettyConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)             importStatus = ImportStatus.SUCCESS;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             notifyChange();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             throw new IOException(""Message is not a valid configuration message"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)     public void saveConfiguration() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         preferences.importFromMessage(configuration);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         if (!configuration.getWaypoints().isEmpty()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             waypointsRepo.importFromMessage(configuration.getWaypoints());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         getView().showFinishDialog();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     public void extractPreferences(byte[] content) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             setConfiguration(new String(content, StandardCharsets.UTF_8));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         } catch (IOException | Parser.EncryptionException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)             configurationImportFailed(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)     public void extractPreferences(URI uri) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)             if (ContentResolver.SCHEME_FILE.equals(uri.getScheme())) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)                 // Note: left here to avoid breaking compatibility.  May be removed
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)                 // with sufficient testing. Will not work on Android >5 without granting READ_EXTERNAL_STORAGE permission
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)                 Timber.v(""using file:// uri"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)                 BufferedReader r = new BufferedReader(new InputStreamReader(new FileInputStream(uri.getPath())));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)                 StringBuilder total = new StringBuilder();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)                 String content;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)                 while ((content = r.readLine()) != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)                     total.append(content);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)                 setConfiguration(total.toString());
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116)             } else if (""owntracks"".equals(uri.getScheme()) && ""/config"".equals(uri.getPath())) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 117)                 Timber.v(""Importing config using owntracks: scheme"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 118)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 119)                 List<NameValuePair> queryParams = URLEncodedUtils.parse(uri, StandardCharsets.UTF_8);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                 List<String> urlQueryParam = new ArrayList<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                 List<String> configQueryParam = new ArrayList<>();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                 for (NameValuePair queryParam : queryParams) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                     if (queryParam.getName().equals(""url"")) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                         urlQueryParam.add(queryParam.getValue());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                     }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                     if (queryParam.getName().equals(""inline"")) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 127)                         configQueryParam.add(queryParam.getValue());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 130)                 if (configQueryParam.size() == 1) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 131)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 132)                     byte[] config = new Base64().decodeBase64(configQueryParam.get(0).getBytes());
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 133)                     setConfiguration(new String(config, StandardCharsets.UTF_8));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 134)                 } else if (urlQueryParam.size() == 1) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 135)                     URL remoteConfigUrl = new URL(urlQueryParam.get(0));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 136)                     OkHttpClient client = new OkHttpClient();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 137)                     Request request = new Request.Builder()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 138)                             .url(remoteConfigUrl)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 139)                             .build();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 140)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 141)                     client.newCall(request).enqueue(new Callback() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 143)                         public void onFailure(Call call, IOException e) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 144)                             configurationImportFailed(new Exception(""Failure fetching config from remote URL"", e));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 145)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 146)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 147)                         @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 148)                         public void onResponse(Call call, Response response) throws IOException {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 149)                             try (ResponseBody responseBody = response.body()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 150)                                 if (!response.isSuccessful()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 151)                                     configurationImportFailed(new IOException(String.format(""Unexpected status code: %s"", response)));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 152)                                     return;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 153)                                 }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 154)                                 setConfiguration(responseBody != null ? responseBody.string() : """");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 155)                             } catch (Parser.EncryptionException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 156)                                 configurationImportFailed(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 157)                             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 158)                         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 159)                     });
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 160)                     // This is async, so result handled on the callback"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 161)                 } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 162)                     throw new IOException(""Invalid config URL"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 163)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 164)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 165)                 throw new IOException(""Invalid config URL"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 166)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 167)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         } catch (OutOfMemoryError | IOException | Parser.EncryptionException | IllegalArgumentException e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 169)             configurationImportFailed(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 171)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 172)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 173)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 174)     public String getDisplayedConfiguration() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         return displayedConfiguration;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 176)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 177)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 178)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 179)     public ImportStatus getConfigurationImportStatus() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         return importStatus;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 181)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 182)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 183)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 184)     public void setError(Throwable e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 185)         configurationImportFailed(e);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 186)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 187)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 188)     private void configurationImportFailed(Throwable e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 189)         Timber.e(e);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 190)         displayedConfiguration = String.format(""Import failed: %s"",e.getMessage());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 191)         importStatus = ImportStatus.FAILED;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         notifyChange();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 193)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 194) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/preferences/load/LoadViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 195)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.region;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.text.Editable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.text.TextWatcher;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.view.Menu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import android.view.MenuItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.databinding.UiRegionBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18) public class RegionActivity extends BaseActivity<UiRegionBinding, RegionMvvm.ViewModel<RegionMvvm.View>> implements RegionMvvm.View {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     private MenuItem saveButton;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     protected void onCreate(@Nullable Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         super.onCreate(savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         setHasEventBus(false);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         bindAndAttachContentView(R.layout.ui_region, savedInstanceState);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         setSupportToolbar(binding.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         Bundle b = navigator.getExtrasBundle(getIntent());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         if (b != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)             viewModel.loadWaypoint(b.getLong(""waypointId"", 0));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         binding.description.addTextChangedListener(new TextWatcher() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)             @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)             public void beforeTextChanged(CharSequence s, int start, int count, int after) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)             @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)             public void onTextChanged(CharSequence s, int start, int before, int count) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)             @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)             public void afterTextChanged(Editable s) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)                 conditionallyEnableSaveButton();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         });
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)     public boolean onCreateOptionsMenu(Menu menu) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         getMenuInflater().inflate(R.menu.activity_waypoint, menu);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)         this.saveButton = menu.findItem(R.id.save);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)         conditionallyEnableSaveButton();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)     public boolean onOptionsItemSelected(MenuItem item) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         switch (item.getItemId()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)             case R.id.save:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68)                 viewModel.saveWaypoint();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)                 finish();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 70)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 71)             case android.R.id.home:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 72)                 finish();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 73)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 74)             default:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 75)                 return super.onOptionsItemSelected(item);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 76)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 78)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 79)     private void conditionallyEnableSaveButton() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 80)         if (saveButton != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 81)             saveButton.setEnabled(viewModel.canSaveWaypoint());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 82)             saveButton.getIcon().setAlpha(viewModel.canSaveWaypoint() ? 255 : 130);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 83)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 84)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 85) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.region
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class RegionActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: RegionActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     abstract fun bindViewModel(viewModel: RegionViewModel): RegionMvvm.ViewModel<RegionMvvm.View>
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.region;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public interface RegionMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     interface ViewModel<V extends MvvmView> extends MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         void loadWaypoint(long waypointId);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         @Bindable WaypointModel getWaypoint();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         boolean canSaveWaypoint();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         void saveWaypoint();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.region;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.data.repos.LocationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18) public class RegionViewModel extends BaseViewModel<RegionMvvm.View> implements RegionMvvm.ViewModel<RegionMvvm.View> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     private final LocationRepo locationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     private WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     private WaypointModel waypoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     public RegionViewModel(WaypointsRepo waypointsRepo, LocationRepo locationRepo) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         super();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         this.waypointsRepo = waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         this.locationRepo = locationRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     public void attachView(@Nullable Bundle savedInstanceState, @NonNull RegionMvvm.View view) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         super.attachView(savedInstanceState, view);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     public void loadWaypoint(long id) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         WaypointModel w = waypointsRepo.get(id);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         if(w == null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)             w = new WaypointModel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)             if (locationRepo.hasLocation()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40)                 w.setGeofenceLatitude(locationRepo.getCurrentLocation().getLatitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)                 w.setGeofenceLongitude(locationRepo.getCurrentLocation().getLongitude());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 42)             } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 43)                 w.setGeofenceLatitude(0);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 44)                 w.setGeofenceLongitude(0);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 45)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 46)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 47)         setWaypoint(w);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 49)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     public boolean canSaveWaypoint() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         return this.waypoint.getDescription().length() > 0;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 53)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 54)     public void saveWaypoint() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         if(canSaveWaypoint()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 56)             waypointsRepo.insert(waypoint);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 59)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     public WaypointModel getWaypoint() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         return waypoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 63)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 64)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 65)     private void setWaypoint(WaypointModel waypoint) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         this.waypoint = waypoint;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 68) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/region/RegionViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 69)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.regions;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.view.Menu;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.view.MenuItem;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import androidx.appcompat.app.AlertDialog;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.recyclerview.widget.LinearLayoutManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.databinding.UiRegionsBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.ui.base.navigator.Navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.ui.region.RegionActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import io.objectbox.android.AndroidScheduler;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import io.objectbox.reactive.DataSubscription;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) public class RegionsActivity extends BaseActivity<UiRegionsBinding, RegionsMvvm.ViewModel<RegionsMvvm.View>> implements RegionsMvvm.View, RegionsAdapter.ClickListener {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     Navigator navigator;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private RegionsAdapter recyclerViewAdapter;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private DataSubscription subscription;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     protected void onCreate(Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         super.onCreate(savedInstanceState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         setHasEventBus(false);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         bindAndAttachContentView(R.layout.ui_regions, savedInstanceState);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         setSupportToolbar(binding.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         setDrawer(binding.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         recyclerViewAdapter = new RegionsAdapter(this);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         binding.recyclerView.setLayoutManager(new LinearLayoutManager(this));
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         binding.recyclerView.setAdapter(recyclerViewAdapter);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         binding.recyclerView.setEmptyView(binding.placeholder);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     public boolean onCreateOptionsMenu(Menu menu) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         getMenuInflater().inflate(R.menu.activity_waypoints, menu);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     public boolean onOptionsItemSelected(MenuItem item) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         switch (item.getItemId()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)             case R.id.add:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)                 navigator.startActivity(RegionActivity.class);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)             case R.id.exportWaypointsService:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)                 viewModel.exportWaypoints();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)                 return true;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         return super.onOptionsItemSelected(item);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     @Override
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     public void onClick(@NonNull final WaypointModel model, @NonNull View view, boolean longClick) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         if(longClick) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             Timber.v(""model %s "", model.getDescription());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)             //TODO: Refactor and make nicer
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             AlertDialog myQuittingDialogBox =new AlertDialog.Builder(this)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)                     //set message, title, and icon"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)                     .setTitle(""Delete"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)                     .setMessage(""Do you want to Delete"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)                     .setPositiveButton(""Delete"", (dialog, whichButton) -> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)                         viewModel.delete(model);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)                         dialog.dismiss();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)                     }).setNegativeButton(""cancel"", (dialog, which) -> dialog.dismiss())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)                     .create();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)             myQuittingDialogBox.show();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)             Bundle b = new Bundle();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)             b.putLong(""waypointId"", model.getTst());"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)             navigator.startActivity(RegionActivity.class, b);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     public void onStart() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         super.onStart();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         if(this.subscription == null || this.subscription.isCanceled()) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)             this.subscription = viewModel.getWaypointsList().subscribe().on(AndroidScheduler.mainThread()).observer(recyclerViewAdapter) ;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     protected void onStop() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         super.onStop();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         subscription.cancel();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.regions
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class RegionsActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: RegionsActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     abstract fun bindViewModel(viewModel: RegionsViewModel): RegionsMvvm.ViewModel<RegionsMvvm.View>
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.regions;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.view.View;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.BR;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.base.BaseAdapter;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.base.BaseAdapterItemView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import java.util.List;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import io.objectbox.reactive.DataObserver;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17) class RegionsAdapter extends BaseAdapter<WaypointModel> implements DataObserver<List<WaypointModel>> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     RegionsAdapter(ClickListener clickListener) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         super(BaseAdapterItemView.of(BR.waypoint, R.layout.ui_row_region));"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         setClickListener(clickListener);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     public void onData(@NonNull List<WaypointModel> data) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         setItems(data);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     interface ClickListener extends BaseAdapter.ClickListener<WaypointModel> {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         void onClick(@NonNull WaypointModel object, @NonNull View view, boolean longClick);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsAdapter.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.regions;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import io.objectbox.query.Query;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public interface RegionsMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     interface ViewModel<V extends MvvmView> extends MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         Query<WaypointModel> getWaypointsList();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         void delete(WaypointModel model);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         void exportWaypoints();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.regions;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.data.WaypointModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.data.repos.WaypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.services.LocationProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import io.objectbox.query.Query;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) public class RegionsViewModel extends BaseViewModel<RegionsMvvm.View> implements RegionsMvvm.ViewModel<RegionsMvvm.View> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     private final LocationProcessor locationProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     private WaypointsRepo waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     @Inject
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     public RegionsViewModel(WaypointsRepo waypointsRepo, LocationProcessor locationProcessor) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         super();
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         Timber.v(""new vm instantiated"");"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         this.waypointsRepo = waypointsRepo;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         this.locationProcessor = locationProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         public Query<WaypointModel> getWaypointsList() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             return this.waypointsRepo.getAllQuery();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     public void delete(WaypointModel model) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         waypointsRepo.delete(model);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     public void exportWaypoints() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         locationProcessor.publishWaypointsMessage();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 40) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/regions/RegionsViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) /*
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)  * Copyright  2020 WireGuard LLC. All Rights Reserved.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3)  * SPDX-License-Identifier: Apache-2.0
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4)  */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) /*
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) Derived and adapted from the wireguard implementation taken from: https://github.com/WireGuard/wireguard-android/blob/1.0.20200724/ui/src/main/java/com/wireguard/android/activity/LogViewerActivity.kt
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) Adaptations include:
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) * Allowing option to clear logs
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) * Removing or simplifying  wireguard-specific implementation details
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) */
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) package org.owntracks.android.ui.status
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import android.content.ContentProvider
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import android.content.ContentValues
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import android.database.Cursor
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import android.database.MatrixCursor
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import android.graphics.Typeface
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import android.net.Uri
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) import android.os.ParcelFileDescriptor
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import android.provider.OpenableColumns
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26) import android.text.Spannable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import android.text.SpannableString
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28) import android.text.style.ForegroundColorSpan
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29) import android.text.style.StyleSpan
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30) import android.view.*
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31) import androidx.core.app.ShareCompat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32) import androidx.recyclerview.widget.DividerItemDecoration
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33) import androidx.recyclerview.widget.LinearLayoutManager
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34) import androidx.recyclerview.widget.RecyclerView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35) import com.google.android.material.textview.MaterialTextView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36) import kotlinx.coroutines.*
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37) import org.owntracks.android.BuildConfig
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39) import org.owntracks.android.databinding.UiPreferencesLogsBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40) import org.owntracks.android.ui.base.BaseActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41) import org.owntracks.android.ui.base.view.MvvmView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42) import org.owntracks.android.ui.base.viewmodel.NoOpViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44) import java.io.BufferedReader
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45) import java.io.FileOutputStream
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46) import java.io.IOException
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47) import java.io.InputStreamReader
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48) import java.nio.charset.StandardCharsets
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49) import java.text.DateFormat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50) import java.text.ParseException
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51) import java.text.SimpleDateFormat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52) import java.util.*
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53) import java.util.concurrent.ConcurrentHashMap
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54) import java.util.regex.Matcher
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55) import java.util.regex.Pattern
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57) class LogViewerActivity : BaseActivity<UiPreferencesLogsBinding, NoOpViewModel>(), MvvmView {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     private data class LogLine(val pid: Int, val tid: Int, val time: Date?, val level: String, val tag: String, var msg: String)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     private lateinit var logAdapter: LogEntryAdapter
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     private lateinit var streamingJob: Job
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     private var logExportUri: Uri? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     private var logLines = arrayListOf<LogLine>()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)     private var rawLogLines = StringBuffer()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     private var recyclerView: RecyclerView? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     private val coroutineScope = CoroutineScope(Dispatchers.Default)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     private var clearButton: MenuItem? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     private val year by lazy {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         val yearFormatter: DateFormat = SimpleDateFormat(""yyyy"", Locale.US)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         yearFormatter.format(Date())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     override fun onCreate(savedInstanceState: Bundle?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         super.onCreate(savedInstanceState)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         bindAndAttachContentView(R.layout.ui_preferences_logs, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         setSupportToolbar(binding.toolbar)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         setHasEventBus(false)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         logAdapter = LogEntryAdapter()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         binding.recyclerView.apply {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)             recyclerView = this
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             layoutManager = LinearLayoutManager(context)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)             adapter = logAdapter
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)             addItemDecoration(DividerItemDecoration(context, LinearLayoutManager.VERTICAL))"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         streamingJob = coroutineScope.launch { streamingLog() }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         binding.shareFab.setOnClickListener {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)             revokeExportUriPermissions()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)             val key = getRandomHexString()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)             LOGS[key] = rawLogLines.toString().toByteArray(Charsets.UTF_8)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)             logExportUri = Uri.parse(""content://${BuildConfig.APPLICATION_ID}.log/$key"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             val shareIntent = ShareCompat.IntentBuilder.from(this)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)                     .setType(""text/plain"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)                     .setSubject(""Owntracks Log File"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)                     .setChooserTitle(R.string.exportLogFilePrompt)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)                     .setStream(logExportUri)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)                     .createChooserIntent()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)                     .addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)             grantUriPermission(""android"", logExportUri, Intent.FLAG_GRANT_READ_URI_PERMISSION)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)             startActivityForResult(shareIntent, SHARE_ACTIVITY_REQUEST)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     override fun onCreateOptionsMenu(menu: Menu?): Boolean {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         menuInflater.inflate(R.menu.log_viewer, menu)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         clearButton = menu?.findItem(R.id.clear_log)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         return true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)     override fun onPrepareOptionsMenu(menu: Menu): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         menu.findItem(R.id.show_debug_logs).isChecked = preferences.debugLog
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)         return true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)     override fun onOptionsItemSelected(item: MenuItem): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         return when (item.itemId) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)             android.R.id.home -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                 finish()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                 true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)             R.id.clear_log -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                 coroutineScope.launch { clearLog() }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                 true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             R.id.show_debug_logs -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                 item.isChecked = !item.isChecked
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)                 preferences.debugLog = item.isChecked
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)                 streamingJob.cancel(""Debug settings changed"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)                 streamingJob = coroutineScope.launch { streamingLog() }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)                 true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)             else -> super.onOptionsItemSelected(item)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)     override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)         if (requestCode == SHARE_ACTIVITY_REQUEST) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)             revokeExportUriPermissions()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)         super.onActivityResult(requestCode, resultCode, data)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)     override fun onDestroy() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         super.onDestroy()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)         coroutineScope.cancel()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)     private fun getRandomHexString(): String {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         return Random().nextInt(0X1000000).toString(16)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)     private fun revokeExportUriPermissions() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)         logExportUri?.let {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)             LOGS.remove(it.pathSegments.lastOrNull())
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)             revokeUriPermission(it, Intent.FLAG_GRANT_READ_URI_PERMISSION)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)             logExportUri = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 164)     private suspend fun clearLog() = withContext(Dispatchers.IO) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         val builder = ProcessBuilder().command(""logcat"", ""-c"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 166)         builder.environment()[""LC_ALL""] = ""C"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 167)         try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 168)             builder.start()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         } catch (e: IOException) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 170)             Timber.e(e, ""Unable to start process to clear log"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 171)             return@withContext
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 172)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 173)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 174)         Timber.i(""Logs cleared"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 175)         withContext(Dispatchers.Main) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 176)             recyclerView?.let {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 177)                 logLines.clear()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 178)                 logAdapter.notifyDataSetChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 179)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 181)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 182)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 183)     private suspend fun streamingLog() = withContext(Dispatchers.IO) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         val builder = ProcessBuilder().command(""logcat"", ""-v"", ""threadtime"", if (preferences.debugLog) ""*:D"" else ""*:I"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 185)         builder.environment()[""LC_ALL""] = ""C"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         val process = try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 187)             builder.start()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 188)         } catch (e: IOException) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 189)             Timber.e(e, ""Unable to start process to stream log"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 190)             return@withContext
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 191)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         val stdout = BufferedReader(InputStreamReader(process!!.inputStream, StandardCharsets.UTF_8))"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 193)         var haveScrolled = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 194)         val start = System.nanoTime()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         var startPeriod = start
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         logLines.clear()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         rawLogLines.setLength(0)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         while (true) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 199)             val line = stdout.readLine() ?: break
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 200)             rawLogLines.append(line)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 201)             rawLogLines.append('\n')
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 202)             val logLine = parseLine(line)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 203)             withContext(Dispatchers.Main) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 204)                 if (logLine != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 205)                     recyclerView?.let {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 206)                         val shouldScroll = haveScrolled && !it.canScrollVertically(1)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 207)                         logLines.add(logLine)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 208)                         if (haveScrolled) logAdapter.notifyDataSetChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 209)                         if (shouldScroll)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 210)                             it.scrollToPosition(logLines.size - 1)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 211)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 212)                 } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 213)                     /* I'd prefer for the next line to be:
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 214)                      *    logLines.lastOrNull()?.msg += ""\n$line"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 215)                      * However, as of writing, that causes the kotlin compiler to freak out and crash, spewing bytecode."
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 216)                      */
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 217)                     logLines.lastOrNull()?.apply { msg += ""\n$line"" }"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 218)                     if (haveScrolled) logAdapter.notifyDataSetChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 219)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 220)                 if (!haveScrolled) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 221)                     val end = System.nanoTime()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 222)                     val scroll = (end - start) > 1000000000L * 2.5 || !stdout.ready()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 223)                     if (logLines.isNotEmpty() && (scroll || (end - startPeriod) > 1000000000L / 4)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 224)                         logAdapter.notifyDataSetChanged()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 225)                         recyclerView?.scrollToPosition(logLines.size - 1)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 226)                         startPeriod = end
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 227)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 228)                     if (scroll) haveScrolled = true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 229)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 230)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 231)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 232)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 233)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 234)     private fun parseTime(timeStr: String): Date? {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 235)         val formatter: DateFormat = SimpleDateFormat(""yyyy-MM-dd HH:mm:ss.SSS"", Locale.US)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 236)         return try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 237)             formatter.parse(""$year-$timeStr"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 238)         } catch (e: ParseException) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 239)             null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 240)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 241)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 242)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 243)     private fun parseLine(line: String): LogLine? {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 244)         val m: Matcher = THREADTIME_LINE.matcher(line)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 245)         return if (m.matches()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 246)             LogLine(m.group(2)!!.toInt(), m.group(3)!!.toInt(), parseTime(m.group(1)!!), m.group(4)!!, m.group(5)!!, m.group(6)!!)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 247)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 248)             null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 250)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 251)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 252)     companion object {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 253)         private val THREADTIME_LINE: Pattern = Pattern.compile(""(\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}.\\d{3})(?:\\s+[0-9A-Za-z]+)?\\s+(\\d+)\\s+(\\d+)\\s+([A-Z])\\s+(.+?)\\s*: (.*)$"")"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 254)         private val LOGS: MutableMap<String, ByteArray> = ConcurrentHashMap()"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 255)         private const val SHARE_ACTIVITY_REQUEST = 45043
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 256)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 257)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 258)     private inner class LogEntryAdapter : RecyclerView.Adapter<LogEntryAdapter.ViewHolder>() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 259)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 260)         @Suppress(""Deprecation"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 261)         private val defaultColor by lazy { resources.getColor(R.color.primary) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 262)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 263)         @Suppress(""Deprecation"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         private val debugColor by lazy { resources.getColor(R.color.log_debug_tag_color) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 265)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 266)         @Suppress(""Deprecation"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 267)         private val errorColor by lazy { resources.getColor(R.color.log_error_tag_color) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 268)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 269)         @Suppress(""Deprecation"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 270)         private val infoColor by lazy { resources.getColor(R.color.log_info_tag_color) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 271)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 272)         @Suppress(""Deprecation"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 273)         private val warningColor by lazy { resources.getColor(R.color.log_warning_tag_color) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 274)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 275)         private inner class ViewHolder(val layout: View, var isSingleLine: Boolean = true) : RecyclerView.ViewHolder(layout)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 276)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 277)         private fun levelToColor(level: String): Int {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 278)             return when (level) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 279)                 ""D"" -> debugColor"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 280)                 ""E"" -> errorColor"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 281)                 ""I"" -> infoColor"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 282)                 ""W"" -> warningColor"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 283)                 else -> defaultColor
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 284)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 285)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 286)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 287)         override fun getItemCount() = logLines.size
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 288)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 289)         override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 290)             val view = LayoutInflater.from(parent.context)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 291)                     .inflate(R.layout.log_viewer_entry, parent, false)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 292)             return ViewHolder(view)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 293)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 294)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 295)         override fun onBindViewHolder(holder: ViewHolder, position: Int) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 296)             val line = logLines[position]
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 297)             val spannable = if (position > 0 && logLines[position - 1].tag == line.tag)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 298)                 SpannableString(line.msg)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 299)             else
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 300)                 SpannableString(""${line.tag}: ${line.msg}"").apply {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 301)                     setSpan(StyleSpan(Typeface.BOLD), 0, ""${line.tag}:"".length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 302)                     setSpan(ForegroundColorSpan(levelToColor(line.level)),"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 303)                             0, ""${line.tag}:"".length, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 304)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 305)             holder.layout.apply {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 306)                 findViewById<MaterialTextView>(R.id.log_date).text = line.time.toString()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 307)                 findViewById<MaterialTextView>(R.id.log_msg).apply {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 308)                     setSingleLine()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 309)                     text = spannable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 310)                     setOnClickListener {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 311)                         isSingleLine = !holder.isSingleLine
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 312)                         holder.isSingleLine = !holder.isSingleLine
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 313)                     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 314)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 315)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 316)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 317)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 318)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 319)     class ExportedLogContentProvider : ContentProvider() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 320)         private fun logForUri(uri: Uri): ByteArray? = LOGS[uri.pathSegments.lastOrNull()]
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 321)         override fun insert(uri: Uri, values: ContentValues?): Uri? {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 322)             return null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 323)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 324)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 325)         override fun query(uri: Uri, projection: Array<out String>?, selection: String?, selectionArgs: Array<out String>?, sortOrder: String?): Cursor? ="
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 326)                 logForUri(uri)?.let {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 327)                     val m = MatrixCursor(arrayOf(OpenableColumns.DISPLAY_NAME, OpenableColumns.SIZE), 1)"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 328)                     m.addRow(arrayOf(""owntracks-log.txt"", it.size.toLong()))"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 329)                     m
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 330)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 331)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 332)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 333)         override fun onCreate(): Boolean = true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 334)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 335)         override fun update(uri: Uri, values: ContentValues?, selection: String?, selectionArgs: Array<out String>?): Int {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 336)             return 0
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 337)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 338)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 339)         override fun delete(uri: Uri, selection: String?, selectionArgs: Array<out String>?): Int {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 340)             return 0
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 341)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 342)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 343)         override fun getType(uri: Uri): String? = ""text/plain"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 344)         override fun openFile(uri: Uri, mode: String): ParcelFileDescriptor? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 345)             if (mode != ""r"") return null"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 346)             val log = logForUri(uri) ?: return null
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 347)             return openPipeHelper(uri, ""text/plain"", null, log) { output, _, _, _, l ->"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 348)                 try {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 349)                     FileOutputStream(output.fileDescriptor).write(l!!)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 350)                 } catch (e: Exception) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 351)                     Timber.e(e, ""Can't write logs to output"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 352)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 353)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 354)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 355)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 356) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.status
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class LogViewerActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindActivity(a: LogViewerActivity): AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/LogViewerActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.status;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.R;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.databinding.UiStatusBinding;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.ui.base.BaseActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) public class StatusActivity extends BaseActivity<UiStatusBinding, StatusMvvm.ViewModel<StatusMvvm.View>> implements StatusMvvm.View {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     protected void onCreate(@Nullable Bundle savedInstanceState) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         super.onCreate(savedInstanceState);
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         bindAndAttachContentView(R.layout.ui_status, savedInstanceState);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         setSupportToolbar(binding.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         setDrawer(binding.toolbar);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusActivity.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.status;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.services.MessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.MvvmViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import java.util.Date;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9) public interface StatusMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     interface ViewModel<V extends MvvmView> extends MvvmViewModel<V> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         MessageProcessor.EndpointState getEndpointState();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         String getEndpointMessage();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         int getEndpointQueue();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         long getLocationUpdated();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         Date getServiceStarted();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         boolean getDozeWhitelisted();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 23) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.status;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.Intent;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.location.Location;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.os.Build;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import android.os.Bundle;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import android.os.PowerManager;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20   9)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import androidx.annotation.NonNull;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import androidx.annotation.Nullable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import androidx.databinding.Bindable;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.greenrobot.eventbus.Subscribe;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.BR;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.injection.qualifier.AppContext;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.injection.scopes.PerActivity;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.services.MessageProcessor;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.support.Events;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.ui.base.viewmodel.BaseViewModel;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  22) import java.util.Date;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  23) import java.util.concurrent.TimeUnit;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  25) import javax.inject.Inject;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  27) import timber.log.Timber;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  28)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  30) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  31) public class StatusViewModel extends BaseViewModel<StatusMvvm.View> implements StatusMvvm.ViewModel<StatusMvvm.View> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private final Context context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     private MessageProcessor.EndpointState endpointState;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     private String endpointMessage;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  35)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     private Date serviceStarted;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  37)     private long locationUpdated;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  38)     private int queueLength;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  39)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     public StatusViewModel(@AppContext Context context) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         this.context = context;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  44)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  45)     public void attachView(@Nullable Bundle savedInstanceState, @NonNull StatusMvvm.View view) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         super.attachView(savedInstanceState, view);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  48)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  50)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     public MessageProcessor.EndpointState getEndpointState() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         return endpointState;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  54)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     public String getEndpointMessage() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         return endpointMessage;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  60)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     public int getEndpointQueue() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         return queueLength;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  65)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  66)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     public Date getServiceStarted() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         return serviceStarted;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     public boolean getDozeWhitelisted() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         return Build.VERSION.SDK_INT < Build.VERSION_CODES.M ||
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  76)                 ((PowerManager) context.getApplicationContext().getSystemService(Context.POWER_SERVICE)).isIgnoringBatteryOptimizations(context.getApplicationContext().getPackageName());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  77)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  78)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  79)     @Override
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     @Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  81)     public long getLocationUpdated() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         return locationUpdated;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     @Subscribe(sticky = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     public void onEvent(MessageProcessor.EndpointState e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         this.endpointState = e;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         this.endpointMessage = e.getMessage();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         notifyPropertyChanged(BR.endpointState);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         notifyPropertyChanged(BR.endpointMessage);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  92)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  93)     @Subscribe(sticky = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  94)     public void onEvent(Events.ServiceStarted e) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         this.serviceStarted = e.getDate();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         notifyPropertyChanged(BR.serviceStarted);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  98)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     @Subscribe(sticky = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 100)     public void onEvent(Location l) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         this.locationUpdated = TimeUnit.MILLISECONDS.toSeconds(l.getTime());
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         notifyPropertyChanged(BR.locationUpdated);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 104)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     @Subscribe(sticky = true)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 106)     public void onEvent(Events.QueueChanged e) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         Timber.v(""queue changed %s"", e.getNewLength());"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         this.queueLength = e.getNewLength();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         notifyPropertyChanged(BR.endpointQueue);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 110)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 111)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     public void viewLogs() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         Intent intent = new Intent(context, LogViewerActivity.class).addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         context.startActivity(intent);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/status/StatusViewModel.java (<eulerhm@dcc.ufmg.br> 2022-12-20 116) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.ui.status.StatusActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.ui.status.StatusMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.status.StatusViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) abstract class StatusActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     abstract fun bindActivity(a: StatusActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)     abstract fun bindViewModel(viewModel: StatusViewModel): StatusMvvm.ViewModel<StatusMvvm.View>
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/StatusActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.ui.welcome
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import android.view.ViewGroup
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import android.widget.ImageView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import androidx.core.content.ContextCompat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.owntracks.android.databinding.UiWelcomeBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.owntracks.android.support.RequirementsChecker
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.ui.base.BaseActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.ui.base.navigator.Navigator
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.ui.map.MapActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.ui.welcome.finish.FinishFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.ui.welcome.intro.IntroFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.ui.welcome.permission.PermissionFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.ui.welcome.play.PlayFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.ui.welcome.version.VersionFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) class WelcomeActivity : BaseActivity<UiWelcomeBinding?, WelcomeViewModel?>(), WelcomeMvvm.View {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     lateinit var navigator: Navigator
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     lateinit var requirementsChecker: RequirementsChecker
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private var welcomeAdapter: WelcomeAdapter? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private var playFragment: PlayFragment? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     override fun onCreate(savedInstanceState: Bundle?) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)         super.onCreate(savedInstanceState)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         welcomeAdapter = WelcomeAdapter(this, requirementsChecker)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         if (requirementsChecker.areRequirementsMet()) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)             navigator.startActivity(MapActivity::class.java, null, Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_NEW_TASK)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)             finish()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         bindAndAttachContentView(R.layout.ui_welcome, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         setHasEventBus(false)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         playFragment = PlayFragment()
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         welcomeAdapter!!.setupFragments(IntroFragment(), VersionFragment(), playFragment!!, PermissionFragment(), FinishFragment())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         binding!!.viewPager.isUserInputEnabled = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         binding!!.viewPager.adapter = welcomeAdapter
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         binding!!.vm!!.currentFragmentPosition.observe({ this.lifecycle }, { fragmentPosition: Int ->"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)             showFragment(fragmentPosition)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         })
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         Timber.v(""pager setup with %s fragments"", welcomeAdapter!!.itemCount)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         buildPagerIndicator()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         showFragment(0)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     override fun showNextFragment() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         val currentItem = binding!!.viewPager.currentItem
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         if (currentItem == welcomeAdapter!!.lastItemPosition) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)             Timber.e(""viewPager is at the end"")"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)             setNextEnabled(false)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)             return
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         showFragment(currentItem + 1)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     override fun setPagerIndicator(index: Int) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         if (index < welcomeAdapter!!.itemCount) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)             for (i in 0 until welcomeAdapter!!.itemCount) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)                 val circle = binding!!.circles.getChildAt(i) as ImageView
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)                 if (i == index) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)                     circle.alpha = 1f
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)                 } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)                     circle.alpha = 0.5f
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)     private fun setNextEnabled(enabled: Boolean) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         viewModel!!.nextEnabled = enabled
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     private fun setDoneEnabled(enabled: Boolean) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         viewModel!!.doneEnabled = enabled
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)     private fun showFragment(position: Int) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         binding!!.viewPager.currentItem = position
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         welcomeAdapter!!.getFragment(binding!!.viewPager.currentItem).onShowFragment()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         refreshNextDoneButtons()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         setPagerIndicator(position)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     // TODO I really feel like we can replace this to auto refresh when the VM changes. Somehow.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     override fun refreshNextDoneButtons() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         setNextEnabled(welcomeAdapter!!.getFragment(binding!!.viewPager.currentItem).isNextEnabled)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         setDoneEnabled(binding!!.viewPager.currentItem == welcomeAdapter!!.lastItemPosition)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)     private fun buildPagerIndicator() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         val scale = resources.displayMetrics.density
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         val padding = (5 * scale + 0.5f).toInt()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         for (i in 0 until welcomeAdapter!!.itemCount) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             val circle = ImageView(this)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)             circle.setImageDrawable(ContextCompat.getDrawable(this, R.drawable.ic_baseline_fiber_manual_record_24))"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)             circle.layoutParams = ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)             circle.adjustViewBounds = true
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)             circle.setPadding(padding, 0, padding, 0)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)             binding!!.circles.addView(circle)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         setPagerIndicator(0)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     override fun onBackPressed() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         if (binding!!.viewPager.currentItem == 0) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             finish()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)             binding!!.vm!!.moveBack()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)     public override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         super.onActivityResult(requestCode, resultCode, data)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         if (requestCode == PlayFragment.PLAY_SERVICES_RESOLUTION_REQUEST) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             playFragment!!.onPlayServicesResolutionResult()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivity.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2) import androidx.appcompat.app.AppCompatActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.android.ContributesAndroidInjector
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.ui.base.viewmodel.BaseViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.welcome.finish.FinishFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.welcome.finish.FinishFragmentModule
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.ui.welcome.intro.IntroFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.ui.welcome.intro.IntroFragmentModule
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.ui.welcome.permission.PermissionFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.ui.welcome.permission.PermissionFragmentModule
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.ui.welcome.play.PlayFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.ui.welcome.play.PlayFragmentModule
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) import org.owntracks.android.ui.welcome.version.VersionFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import org.owntracks.android.ui.welcome.version.VersionFragmentModule
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) abstract class WelcomeActivityModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     abstract fun bindActivity(a: WelcomeActivity?): AppCompatActivity?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     abstract fun bindViewModel(viewModel: WelcomeViewModel?): BaseViewModel<WelcomeMvvm.View?>?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     @ContributesAndroidInjector(modules = [PlayFragmentModule::class])
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     abstract fun bindPlayFragment(): PlayFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     @ContributesAndroidInjector(modules = [IntroFragmentModule::class])
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     abstract fun bindIntroFragment(): IntroFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     @ContributesAndroidInjector(modules = [VersionFragmentModule::class])
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     abstract fun bindVersionFragment(): VersionFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     @ContributesAndroidInjector(modules = [PermissionFragmentModule::class])
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     abstract fun bindPermissionFragment(): PermissionFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     @ContributesAndroidInjector(modules = [FinishFragmentModule::class])
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     abstract fun bindFinishFragment(): FinishFragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeActivityModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Build
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.fragment.app.Fragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import androidx.viewpager2.adapter.FragmentStateAdapter
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.support.RequirementsChecker
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import java.util.*
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) @PerActivity class WelcomeAdapter constructor(welcomeActivity: WelcomeActivity, private val requirementsChecker: RequirementsChecker) : FragmentStateAdapter(welcomeActivity) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     private val fragments = ArrayList<Fragment>()
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     fun setupFragments(introFragment: Fragment, versionFragment: Fragment, playFragment: Fragment, permissionFragment: Fragment, finishFragment: Fragment) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         fragments.add(introFragment)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) fragments.add(versionFragment)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         if (!requirementsChecker.isPlayCheckPassed) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)             fragments.add(playFragment)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         if (!requirementsChecker.isPermissionCheckPassed) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)             fragments.add(permissionFragment)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)         fragments.add(finishFragment)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     val lastItemPosition: Int
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         get() = fragments.size - 1
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     fun getFragment(position: Int): WelcomeFragmentMvvm.View {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         return getItem(position) as WelcomeFragmentMvvm.View
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     private fun getItem(position: Int): Fragment {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         if (position >= fragments.size) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)             Timber.e(""Welcome position %d is out of bounds for fragment list length %d"", position, fragments.size)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)             throw IndexOutOfBoundsException()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         Timber.v(""position:%s fragment:%s"", position, fragments[position].toString())"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         return fragments[position]
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)     override fun getItemCount(): Int {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         return fragments.size
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)     override fun createFragment(position: Int): Fragment {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)         return fragments[position]
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeAdapter.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) public interface WelcomeFragmentMvvm  {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)         boolean isNextEnabled();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         void onShowFragment();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeFragmentMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.ui.base.view.MvvmView;
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  5) public interface WelcomeMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     // The view methods get called from all sorts of places. Fragments etc.
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     interface View extends MvvmView {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         void showNextFragment();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 10)         void setPagerIndicator(int position);
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         // Called from Fragments to set button states
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         void refreshNextDoneButtons();
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeMvvm.java (<eulerhm@dcc.ufmg.br> 2022-12-20 15) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import androidx.lifecycle.MutableLiveData
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.ui.base.viewmodel.BaseViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.ui.map.MapActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import timber.log.Timber
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class WelcomeViewModel @Inject constructor(private val preferences: Preferences) : BaseViewModel<WelcomeMvvm.View?>() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     var currentFragmentPosition: MutableLiveData<Int> = MutableLiveData(0)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     var doneEnabled = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         set(value) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)             field = value
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)             notifyChange()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     var nextEnabled = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         set(value) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)             field = value
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)             notifyChange()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     fun moveNext() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         currentFragmentPosition.postValue(currentFragmentPosition.value!! + 1)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         notifyChange()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     fun moveBack() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         currentFragmentPosition.postValue(currentFragmentPosition.value!! - 1)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         notifyChange()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     fun onDoneClicked() {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         Timber.v(""onDoneClicked next:%s, done:%s"", nextEnabled, doneEnabled)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         preferences.setSetupCompleted()
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         navigator.startActivity(MapActivity::class.java, null, Intent.FLAG_ACTIVITY_CLEAR_TOP or Intent.FLAG_ACTIVITY_NEW_TASK)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/WelcomeViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.finish
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.view.LayoutInflater
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.view.View
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.view.ViewGroup
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.databinding.UiWelcomeFinishBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.base.BaseSupportFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.base.viewmodel.NoOpViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.ui.welcome.WelcomeFragmentMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class FinishFragment : BaseSupportFragment<UiWelcomeFinishBinding?, NoOpViewModel?>(), WelcomeFragmentMvvm.View {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         return setAndBindContentView(inflater, container, R.layout.ui_welcome_finish, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     override fun isNextEnabled(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         return false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     override fun onShowFragment() {}
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.finish
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.fragment.app.Fragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class FinishFragmentModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindSupportFragment(f: FinishFragment?): Fragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/finish/FinishFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.intro
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.view.LayoutInflater
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.view.View
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.view.ViewGroup
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.databinding.UiWelcomeIntroBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.ui.base.BaseSupportFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.ui.base.viewmodel.NoOpViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.ui.welcome.WelcomeFragmentMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class IntroFragment : BaseSupportFragment<UiWelcomeIntroBinding?, NoOpViewModel?>(), WelcomeFragmentMvvm.View {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         return setAndBindContentView(inflater, container, R.layout.ui_welcome_intro, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     override fun isNextEnabled(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         return true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     override fun onShowFragment() {}
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.intro
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.fragment.app.Fragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class IntroFragmentModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindSupportFragment(f: IntroFragment?): Fragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/intro/IntroFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.permission
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.Manifest
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.DialogInterface
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.content.pm.PackageManager
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.os.Build
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import android.view.LayoutInflater
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import android.view.View
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import android.view.ViewGroup
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import android.widget.Toast
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import androidx.appcompat.app.AlertDialog
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import androidx.core.content.ContextCompat
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.databinding.UiWelcomePermissionsBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) import org.owntracks.android.support.Events.PermissionGranted
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import org.owntracks.android.ui.base.BaseSupportFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19) import org.owntracks.android.ui.welcome.WelcomeMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22) class PermissionFragment : BaseSupportFragment<UiWelcomePermissionsBinding?, PermissionFragmentViewModel>(), PermissionFragmentMvvm.View {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     private var askedForPermission = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     @Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     lateinit var eventBus: EventBus
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         return setAndBindContentView(inflater, container, R.layout.ui_welcome_permissions, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     override fun requestFix() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)             if (askedForPermission) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)                 if (shouldShowRequestPermissionRationale(Manifest.permission.ACCESS_FINE_LOCATION)) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)                     AlertDialog.Builder(requireContext())
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)                             .setCancelable(true)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)                             .setMessage(R.string.permissions_description)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)                             .setPositiveButton(""OK"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)                             ) { _: DialogInterface?, _: Int -> requestPermissions(arrayOf(Manifest.permission.ACCESS_FINE_LOCATION), Companion.PERMISSIONS_REQUEST_CODE) }"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)                             .show()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)                 } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)                     Toast.makeText(this.context, ""Unable to proceed without location permissions."", Toast.LENGTH_SHORT).show()"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)                 }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)             } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)                 requestPermissions(arrayOf(Manifest.permission.ACCESS_FINE_LOCATION), Companion.PERMISSIONS_REQUEST_CODE)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)         } else {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)             requestPermissions(arrayOf(Manifest.permission.ACCESS_FINE_LOCATION), Companion.PERMISSIONS_REQUEST_CODE)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)     override fun onRequestPermissionsResult(requestCode: Int, permissions: Array<String>, grantResults: IntArray) {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         askedForPermission = true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         if (requestCode == PERMISSIONS_REQUEST_CODE && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)             eventBus.postSticky(PermissionGranted(Manifest.permission.ACCESS_FINE_LOCATION))
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         (activity as WelcomeMvvm.View?)!!.refreshNextDoneButtons()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     private fun checkPermission() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         if (context != null) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)             viewModel!!.isPermissionGranted = ContextCompat.checkSelfPermission(requireContext(), Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     override fun isNextEnabled(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)         checkPermission()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69)         return if (viewModel != null) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 70)             viewModel!!.isPermissionGranted
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 71)         } else {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 72)             false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 73)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 74)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 75)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 76)     override fun onShowFragment() {}
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 77)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 78)     companion object {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 79)         private  const val PERMISSIONS_REQUEST_CODE = 1
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 80)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 81) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.permission
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.fragment.app.Fragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) abstract class PermissionFragmentModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     abstract fun bindSupportFragment(f: PermissionFragment?): Fragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.ui.welcome.permission
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) import org.owntracks.android.ui.welcome.WelcomeFragmentMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5) interface PermissionFragmentMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 6)     interface View : WelcomeFragmentMvvm.View {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 7)         fun requestFix()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 8)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 9) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.permission
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.injection.scopes.PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.BaseViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @PerActivity
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) class PermissionFragmentViewModel @Inject internal constructor() : BaseViewModel<PermissionFragmentMvvm.View?>() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     var isPermissionGranted = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)         set(permissionGranted) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)             field = permissionGranted
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)             notifyChange()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override fun attachView(savedInstanceState: Bundle?, view: PermissionFragmentMvvm.View) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         super.attachView(savedInstanceState, view)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     fun onFixClicked() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         view!!.requestFix()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/permission/PermissionFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.play
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.view.LayoutInflater
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.view.View
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.view.ViewGroup
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import android.widget.Toast
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import com.google.android.gms.common.ConnectionResult
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import com.google.android.gms.common.GoogleApiAvailability
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.databinding.UiWelcomePlayBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.ui.base.BaseSupportFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.ui.welcome.WelcomeMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) class PlayFragment : BaseSupportFragment<UiWelcomePlayBinding?, PlayFragmentViewModel>(), PlayFragmentMvvm.View {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         return setAndBindContentView(inflater, container, R.layout.ui_welcome_play, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     fun onPlayServicesResolutionResult() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         checkAvailability()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     override fun requestFix() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         val googleAPI = GoogleApiAvailability.getInstance()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         val result = googleAPI.isGooglePlayServicesAvailable(activity)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         if (!googleAPI.showErrorDialogFragment(activity, result, PLAY_SERVICES_RESOLUTION_REQUEST)) {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             Toast.makeText(this.context, ""Unable to update Google Play Services"", Toast.LENGTH_SHORT).show()"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         checkAvailability()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     private var canProceed = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     private fun checkAvailability() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         val googleAPI = GoogleApiAvailability.getInstance()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         val result = googleAPI.isGooglePlayServicesAvailable(activity)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         var fixAvailable = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         val playServicesStatusMessage: String
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         when (result) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)             ConnectionResult.SUCCESS -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)                 canProceed = true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)                 playServicesStatusMessage = getString(R.string.play_services_now_available)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)             }
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)             ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED, ConnectionResult.SERVICE_UPDATING -> {"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)                 canProceed = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)                 fixAvailable = true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)                 playServicesStatusMessage = getString(R.string.play_services_update_required)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)             else -> {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)                 canProceed = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)                 fixAvailable = googleAPI.isUserResolvableError(result)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)                 playServicesStatusMessage = getString(R.string.play_services_not_available)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)             }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         viewModel.fixAvailable= fixAvailable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)         viewModel.message = playServicesStatusMessage
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         (activity as WelcomeMvvm.View?)!!.refreshNextDoneButtons()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)         binding!!.invalidateAll()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)     override fun isNextEnabled(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         return canProceed
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)     override fun onShowFragment() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         checkAvailability()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69)     companion object {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 70)         const val PLAY_SERVICES_RESOLUTION_REQUEST = 1
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 71)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 72) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.play
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.fragment.app.Fragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class PlayFragmentModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindSupportFragment(f: PlayFragment?): Fragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 1) package org.owntracks.android.ui.welcome.play
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 3) import org.owntracks.android.ui.welcome.WelcomeFragmentMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 4)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 5) interface PlayFragmentMvvm {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 6)     interface View : WelcomeFragmentMvvm.View {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 7)         fun requestFix()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 8)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentMvvm.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 9) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.play
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.databinding.Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.owntracks.android.ui.base.viewmodel.BaseViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import javax.inject.Inject
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) class PlayFragmentViewModel @Inject constructor() : BaseViewModel<PlayFragmentMvvm.View?>() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @get:Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @set:Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     var fixAvailable = false
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @get:Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     @set:Bindable
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     var message: String? = null
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     fun onFixClicked() {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         view!!.requestFix()
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/play/PlayFragmentViewModel.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.version
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.ActivityNotFoundException
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.Intent
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.net.Uri
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import android.os.Bundle
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import android.view.LayoutInflater
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import android.view.View
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import android.view.ViewGroup
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import android.widget.Toast
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.R
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.databinding.UiWelcomeVersionBinding
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.ui.base.BaseSupportFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.ui.base.viewmodel.NoOpViewModel
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.ui.welcome.WelcomeFragmentMvvm
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) class VersionFragment : BaseSupportFragment<UiWelcomeVersionBinding?, NoOpViewModel?>(), WelcomeFragmentMvvm.View, View.OnClickListener {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {"
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         val v = setAndBindContentView(inflater, container, R.layout.ui_welcome_version, savedInstanceState)"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         binding!!.uiFragmentWelcomeVersionButtonLearnMore.setOnClickListener(this)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         return v
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     override fun onClick(view: View) {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         try {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)             val i = Intent(Intent.ACTION_VIEW, Uri.parse(getString(R.string.documentationUrlAndroid)))"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)             startActivity(i)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         } catch (e: ActivityNotFoundException) {
"5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)             Toast.makeText(context, ""No suitable browser installed"", Toast.LENGTH_SHORT).show()"
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     override fun isNextEnabled(): Boolean {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         return true
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)     override fun onShowFragment() {}
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragment.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38) }
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.welcome.version
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.fragment.app.Fragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import dagger.Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import dagger.Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.injection.scopes.PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) @Module
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) abstract class VersionFragmentModule {
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     @Binds
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     @PerFragment
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     abstract fun bindSupportFragment(f: VersionFragment?): Fragment?
5c49fd3 project/app/src/main/java/org/owntracks/android/ui/welcome/version/VersionFragmentModule.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.data.repos
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.res.Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import android.util.DisplayMetrics
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import androidx.arch.core.executor.testing.InstantTaskExecutorRule
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import com.nhaarman.mockitokotlin2.any
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.junit.Assert.*
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.junit.Before
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.junit.Rule
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import org.owntracks.android.support.ContactImageProvider
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17) import org.owntracks.android.support.Events.EndpointChanged
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) import org.owntracks.android.support.Events.ModeChanged
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19) import java.io.IOException
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21) class MemoryContactsRepoTest {
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     @get:Rule
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     val instantTaskExecutorRule = InstantTaskExecutorRule()
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     private lateinit var mockResources: Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     private lateinit var mockContext: Context
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     private lateinit var messageLocation: MessageLocation
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     private lateinit var eventBus: EventBus
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     private var contactsRepo: ContactsRepo? = null
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     @Before
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     fun setup() {
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         eventBus = mock {}
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         val mockDisplayMetrics = DisplayMetrics()
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)         mockDisplayMetrics.densityDpi = 160
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         mockResources = mock {
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)             on { getString(any()) } doReturn 
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)             on { displayMetrics } doReturn mockDisplayMetrics
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         mockContext = mock {
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)             on { resources } doReturn mockResources
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)             on { packageName } doReturn javaClass.canonicalName
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         val contactImageProvider = ContactImageProvider(mockContext)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)         messageLocation = MessageLocation()
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)         messageLocation.accuracy = 10
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)         messageLocation.altitude = 20
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)         messageLocation.battery = 30
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)         messageLocation.conn = ""TestConn"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         messageLocation.latitude = 50.1
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)         messageLocation.longitude = 60.2
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         messageLocation.timestamp = 123456789
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         contactsRepo = MemoryContactsRepo(eventBus, contactImageProvider)"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)     fun repoCorrectlyUpdatesContactWithMessageLocation() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)         assertEquals(0, contactsRepo!!.revision)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)         contactsRepo!!.update(CONTACT_ID, messageLocation)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)         assertEquals(1, contactsRepo!!.revision)"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)         val c = contactsRepo!!.getById(CONTACT_ID)
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)         assertEquals(messageLocation, c!!.messageLocation.value)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)         assertEquals(messageLocation.timestamp, c.tst)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         assertEquals(CONTACT_ID, c.id)"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 70)     fun repoCorrectlyRemovesContactById() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 71)         assertEquals(0, contactsRepo!!.revision)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 72)         contactsRepo!!.update(CONTACT_ID, messageLocation)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 73)         assertEquals(1, contactsRepo!!.revision)"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 74)         val c = contactsRepo!!.getById(CONTACT_ID)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 75)         assertFalse(c!!.isDeleted)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 76)         contactsRepo!!.remove(CONTACT_ID)
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 77)         assertEquals(-MemoryContactsRepo.MAJOR_STEP, contactsRepo!!.revision)"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 78)         assertTrue(c.isDeleted)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 79)         assertNull(contactsRepo!!.getById(CONTACT_ID))
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 80)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 81)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 82)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 83)     fun repoCorrectlyHandlesEventModeChanged() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 84)         contactsRepo!!.update(CONTACT_ID, messageLocation)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 85)         (contactsRepo as MemoryContactsRepo?)!!.onEventMainThread(ModeChanged(0, 1))"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 86)         assertTrue(contactsRepo!!.all.value!!.isEmpty())
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 87)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 88)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 89)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 90)     fun repoCorrectlyHandlesEventEndpointChanged() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 91)         contactsRepo!!.update(CONTACT_ID, messageLocation)"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 92)         (contactsRepo as MemoryContactsRepo?)!!.onEventMainThread(EndpointChanged())
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 93)         assertTrue(contactsRepo!!.all.value!!.isEmpty())
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 94)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 95)
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 96)     companion object {
"5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 97)         private const val CONTACT_ID = ""abcd1234"
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 98)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/data/repos/MemoryContactsRepoTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 99) }
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.geocoding
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import com.nhaarman.mockitokotlin2.any
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import okhttp3.*
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import okhttp3.MediaType.Companion.toMediaTypeOrNull
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import okhttp3.ResponseBody.Companion.toResponseBody
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.junit.Assert.assertEquals
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.junit.Assert.assertNotNull
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) class TestOpenCageGeocoder {
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     fun testResultIsDeserializedCorrectly() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)         val openCageJSON = this.javaClass.getResource(""/opencageResult.json"")!!.readText()"
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         assertNotNull(openCageJSON)
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         val httpResponse = Response.Builder()
"5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)                 .body(openCageJSON.toResponseBody(""application/json"".toMediaTypeOrNull()))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)                 .request(Request.Builder().url(""https://example.com"").build())"
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)                 .protocol(Protocol.HTTP_1_1)
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)                 .code(200)
"5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)                 .message(""Ok"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)                 .build()
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         val httpCall: Call = mock { on { execute() } doReturn httpResponse }
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)         val httpClient: OkHttpClient = mock { on { newCall(any()) } doReturn httpCall }
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
"5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         val geocoder = OpenCageGeocoder("""", httpClient)"
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
"5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         val response = geocoder.reverse(0.0, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         assertEquals(""Friedrich-Ebert-Strae 7, 48153 Mnster, Germany"", response)"
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/geocoding/TestOpenCageGeocoder.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35) }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import org.junit.Assert.*
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import org.junit.Before
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.mockito.Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.mockito.Mockito.`when`
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.owntracks.android.model.messages.MessageLocation
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.owntracks.android.services.worker.Scheduler
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.support.EncryptionProvider
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.support.Parser
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.support.interfaces.ConfigurationIncompleteException
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) class MessageProcessorEndpointHttpTest {
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18)     @Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     private lateinit var testPreferences: Preferences
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     @Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)     private var messageProcessor: MessageProcessor? = null
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)     @Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     private val scheduler: Scheduler? = null
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     @Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     private lateinit var encryptionProvider: EncryptionProvider
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private var parser: Parser? = null
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private lateinit var messageLocation: MessageLocation
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     @Before
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)     fun setupPreferences() {
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         testPreferences = mock {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)             on { encryptionKey } doReturn ""testEncryptionKey"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)             on { tlsCaCrt } doReturn 
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)             on { tlsCaCrt } doReturn 
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)             on { tlsClientCrt } doReturn 
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)             on { username } doReturn 
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)             on { deviceId } doReturn 
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)             on { password } doReturn 
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)             on { url } doReturn ""http://example.com/owntracks/test"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         encryptionProvider = mock { on { isPayloadEncryptionEnabled } doReturn false }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         messageProcessor = mock {}
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         messageLocation = MessageLocation()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         messageLocation.accuracy = 10
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         messageLocation.altitude = 20
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         messageLocation.battery = 30
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         messageLocation.conn = ""TestConn"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         messageLocation.latitude = 50.1
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         messageLocation.longitude = 60.2
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         messageLocation.timestamp = 123456789
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         messageLocation.velocity = 5.6.toInt()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         messageLocation.verticalAccuracy = 1.7.toInt()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)     fun `Given a simple request, the auth headers are not set`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         val messageProcessorEndpointHttp = MessageProcessorEndpointHttp(messageProcessor, parser, testPreferences, scheduler, null)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         messageProcessorEndpointHttp.checkConfigurationComplete()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         val request = messageProcessorEndpointHttp.getRequest(messageLocation)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         assertNotNull(request)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         assertNull(request!!.header(MessageProcessorEndpointHttp.HEADER_AUTHORIZATION))
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         assertNull(request.header(MessageProcessorEndpointHttp.HEADER_USERNAME))
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         assertNull(request.header(MessageProcessorEndpointHttp.HEADER_DEVICE))
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         assertEquals(MessageProcessorEndpointHttp.METHOD, request.method)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         assertEquals(""http://example.com/owntracks/test"", request.url.toString())"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)     fun `Given a username and deviceId, correct HTTP headers are set`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)         `when`(testPreferences.username).thenReturn(""username"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         `when`(testPreferences.deviceId).thenReturn(""device"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         val messageProcessorEndpointHttp = MessageProcessorEndpointHttp(messageProcessor, parser, testPreferences, scheduler, null)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         messageProcessorEndpointHttp.checkConfigurationComplete()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         val request = messageProcessorEndpointHttp.getRequest(messageLocation)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         assertNotNull(request)
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         assertEquals(request!!.header(MessageProcessorEndpointHttp.HEADER_USERNAME), ""username"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         assertEquals(request.header(MessageProcessorEndpointHttp.HEADER_DEVICE), ""device"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     fun `Given a username and password, the correct auth HTTP headers are set`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         `when`(testPreferences.username).thenReturn(""username"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         `when`(testPreferences.password).thenReturn(""password"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         val messageProcessorEndpointHttp = MessageProcessorEndpointHttp(messageProcessor, parser, testPreferences, scheduler, null)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         messageProcessorEndpointHttp.checkConfigurationComplete()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         val request = messageProcessorEndpointHttp.getRequest(messageLocation)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         assertNotNull(request)
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         assertEquals(""Basic dXNlcm5hbWU6cGFzc3dvcmQ="", request!!.header(MessageProcessorEndpointHttp.HEADER_AUTHORIZATION))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         assertEquals(""username"", request.header(MessageProcessorEndpointHttp.HEADER_USERNAME))"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)     @Throws(ConfigurationIncompleteException::class)
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)     fun `Given a URL with embedded auth, the correct HTTP headers are set`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         `when`(testPreferences.deviceId).thenReturn(""device_preferences"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         `when`(testPreferences.username).thenReturn(""username_ignored"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         `when`(testPreferences.password).thenReturn(""password_ignored"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         `when`(testPreferences.url).thenReturn(""http://username_url:password_url@example.com/owntracks/test"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         val messageProcessorEndpointHttp = MessageProcessorEndpointHttp(messageProcessor, parser, testPreferences, scheduler, null)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)         messageProcessorEndpointHttp.checkConfigurationComplete()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         val request = messageProcessorEndpointHttp.getRequest(messageLocation)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)         assertNotNull(request)
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         assertEquals(""Basic dXNlcm5hbWVfdXJsOnBhc3N3b3JkX3VybA=="", request!!.header(MessageProcessorEndpointHttp.HEADER_AUTHORIZATION))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         assertEquals(""username_url"", request.header(MessageProcessorEndpointHttp.HEADER_USERNAME))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         assertEquals(""device_preferences"", request.header(MessageProcessorEndpointHttp.HEADER_DEVICE))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         assertEquals(""http://username_url:password_url@example.com/owntracks/test"", request.url.toString())"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)     fun `Given no auth details, the auth HTTP header is not set`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         val messageProcessorEndpointHttp = MessageProcessorEndpointHttp(messageProcessor, parser, testPreferences, scheduler, null)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)         messageProcessorEndpointHttp.checkConfigurationComplete()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         val request = messageProcessorEndpointHttp.getRequest(messageLocation)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         assertNotNull(request)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         assertNull(request!!.header(MessageProcessorEndpointHttp.HEADER_AUTHORIZATION))
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)     @Test(expected = ConfigurationIncompleteException::class)
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)     fun `Given an invalid URL, the messageProcessor throws the right exception`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         val urls = arrayOf(""htt://example.com/owntracks/test"", ""tt://example"", ""example.com"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         for (url in urls) {
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             `when`(testPreferences.url).thenReturn(url)
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)             val messageProcessorEndpointHttp = MessageProcessorEndpointHttp(messageProcessor, parser, testPreferences, scheduler, null)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)             messageProcessorEndpointHttp.checkConfigurationComplete()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointHttpTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132) }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.services
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.nhaarman.mockitokotlin2.any
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.junit.Assert
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) class MessageProcessorEndpointMqttTest {
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)     private val applicationContext: Context = mock {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)         on { getString(any()) } doReturn ""owntracks/+/+"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     fun `MQTT Endpoint generates correct topics to subscribe to from single default subTopic`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         val endpoint = MessageProcessorEndpointMqtt(null, null, null, null, null, null, applicationContext)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)         val subTopic = ""owntracks/+/+"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         val topics = endpoint.getTopicsToSubscribeTo(subTopic, true, ""/info"", ""/events"", ""/waypoints"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)         Assert.assertEquals(
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)                 setOf(
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)                         ""owntracks/+/+"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)                         ""owntracks/+/+/events"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)                         ""owntracks/+/+/info"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)                         ""owntracks/+/+/waypoints"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)                 ), topics)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     fun `MQTT Endpoint generates correct topics to subscribe to from single custom subTopic`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         val endpoint = MessageProcessorEndpointMqtt(null, null, null, null, null, null, applicationContext)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)         val subTopic = ""othertopic/+/+"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         val topics = endpoint.getTopicsToSubscribeTo(subTopic, true, ""/info"", ""/events"", ""/waypoints"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)         Assert.assertEquals(
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)                 setOf(""othertopic/+/+""), topics)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)     fun `MQTT Endpoint generates correct topics to subscribe to from multiple subTopics`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)         val endpoint = MessageProcessorEndpointMqtt(null, null, null, null, null, null, applicationContext)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         val subTopic = ""owntracks/+/+ othertopic/+"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         val topics = endpoint.getTopicsToSubscribeTo(subTopic, true, ""/info"", ""/events"", ""/waypoints"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)         Assert.assertEquals(
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)                 setOf(
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)                         ""owntracks/+/+"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)                         ""othertopic/+"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)                 ), topics)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)     fun `MQTT Endpoint generates correct topics to subscribe to from multiple subTopics with info not requested`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)         val endpoint = MessageProcessorEndpointMqtt(null, null, null, null, null, null, applicationContext)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)         val subTopic = ""owntracks/+/+ othertopic/+"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)         val topics = endpoint.getTopicsToSubscribeTo(subTopic, false, ""/info"", ""/events"", ""/waypoints"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)         Assert.assertEquals(
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)                 setOf(
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)                         ""owntracks/+/+"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)                         ""othertopic/+"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)                 ), topics)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)     fun `MQTT Endpoint generates correct topics to subscribe to from wildcard topic`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)         val endpoint = MessageProcessorEndpointMqtt(null, null, null, null, null, null, applicationContext)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)         val subTopic = ""owntracks/#"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)         val topics = endpoint.getTopicsToSubscribeTo(subTopic, true, ""/info"", ""/events"", ""/waypoints"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67)         Assert.assertEquals(setOf(""owntracks/#""), topics)"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 68)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MessageProcessorEndpointMqttTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 69) }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.services
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import org.junit.Assert.assertFalse
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import org.junit.Assert.assertTrue
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import java.io.ByteArrayInputStream
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import java.security.Principal
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import java.security.cert.Certificate
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import java.security.cert.CertificateFactory
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import javax.net.ssl.SSLSession
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import javax.net.ssl.SSLSessionContext
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import javax.security.cert.X509Certificate
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) class MqttHostnameVerifierTest {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15)     private val letsEncryptRootCert = this.javaClass.getResource(""/letsEncryptRootCA.pem"")!!.readBytes()"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16)     private val letsEncryptSignedLeaf = this.javaClass.getResource(""/letsEncryptSignedLeafX509Certificate.pem"")!!.readBytes()"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17)     private val selfSignedCert = this.javaClass.getResource(""/selfSignedX509Certificate.pem"")!!.readBytes()"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     fun `Given a standard signed certificate, MqttHostnameVerifier should delegate to HTTPS implementation and succeed if hostnames are the same`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)         val testCA = CertificateFactory.getInstance(""X.509"").generateCertificate(ByteArrayInputStream(letsEncryptRootCert))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)         val testLeaf = CertificateFactory.getInstance(""X.509"").generateCertificate(ByteArrayInputStream(letsEncryptSignedLeaf))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)         val sslSession = TestSSLSession(listOf(testLeaf, testCA))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)         assertTrue(MqttHostnameVerifier(testCA).verify(""valid-isrgrootx1.letsencrypt.org"", sslSession))"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     fun `Given a standard signed certificate, MqttHostnameVerifier should delegate to HTTPS implementation and fail if hostnames are the different`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)         val testCA = CertificateFactory.getInstance(""X.509"").generateCertificate(ByteArrayInputStream(letsEncryptRootCert))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)         val testLeaf = CertificateFactory.getInstance(""X.509"").generateCertificate(ByteArrayInputStream(letsEncryptSignedLeaf))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)         val sslSession = TestSSLSession(listOf(testLeaf, testCA))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         assertFalse(MqttHostnameVerifier(testCA).verify(""host.evil.org"", sslSession))"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     fun `Given a self-signed certificate, MqttHostnameVerifier should skip validation and succeed even if hostnames are different`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         val selfSigned = CertificateFactory.getInstance(""X.509"").generateCertificate(ByteArrayInputStream(selfSignedCert))"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         val sslSession = TestSSLSession(listOf(selfSigned))
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         assertTrue(MqttHostnameVerifier(selfSigned).verify(""host.evil.org"", sslSession))"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     fun `Given a self-signed certificate, MqttHostnameVerifier should skip validation and succeed even if hostnames are the same`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         val selfSigned = CertificateFactory.getInstance(""X.509"").generateCertificate(ByteArrayInputStream(selfSignedCert))"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         val sslSession = TestSSLSession(listOf(selfSigned))
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         assertTrue(MqttHostnameVerifier(selfSigned).verify(""test.example.com"", sslSession))"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)     private class TestSSLSession(private val testPeerCertificates: List<Certificate>) : SSLSession {
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         override fun getId(): ByteArray {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         override fun getSessionContext(): SSLSessionContext {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         override fun getCreationTime(): Long {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         override fun getLastAccessedTime(): Long {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         override fun invalidate() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         override fun isValid(): Boolean {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)         override fun putValue(name: String?, value: Any?) {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         override fun getValue(name: String?): Any {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         override fun removeValue(name: String?) {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         override fun getValueNames(): Array<String> {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         override fun getPeerCertificates(): Array<Certificate> {
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)             return testPeerCertificates.toTypedArray()
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         override fun getLocalCertificates(): Array<Certificate> {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         override fun getPeerCertificateChain(): Array<X509Certificate> {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         override fun getPeerPrincipal(): Principal {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)         override fun getLocalPrincipal(): Principal {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         override fun getCipherSuite(): String {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)         override fun getProtocol(): String {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         override fun getPeerHost(): String {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)         override fun getPeerPort(): Int {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         override fun getPacketBufferSize(): Int {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         override fun getApplicationBufferSize(): Int {
"5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)             TODO(""Not implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134) }
5c49fd3 project/app/src/test/java/org/owntracks/android/services/MqttHostnameVerifierTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.support
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import org.owntracks.android.support.preferences.OnModeChangedPreferenceChangedListener
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import org.owntracks.android.support.preferences.PreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) class InMemoryPreferencesStore : PreferencesStore {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7)     private val valueMap: MutableMap<String, Any> = HashMap()"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)     override fun getSharedPreferencesName(): String {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9)         return 
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     override fun setMode(key: String, mode: Int) {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)         valueMap[key] = mode
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     override fun getInitMode(key: String, default: Int): Int {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)         return getInt(key, default)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     override fun getBoolean(key: String, default: Boolean): Boolean {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)         return valueMap[key] as Boolean? ?: default
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     override fun putBoolean(key: String, value: Boolean) {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)         valueMap[key] = value
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     override fun putInt(key: String, value: Int) {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)         valueMap[key] = value
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     override fun getInt(key: String, default: Int): Int {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)         return valueMap[key] as Int? ?: default
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     override fun putString(key: String, value: String) {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         valueMap[key] = value
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     override fun getString(key: String, default: String): String? {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         return valueMap[key] as String? ?: default
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44)     override fun getStringSet(key: String): Set<String> {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)         return (valueMap[key] ?: setOf<String>()) as Set<String>
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 46)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 47)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 48)     override fun hasKey(key: String): Boolean {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 49)         return (valueMap.keys.contains(key))
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 50)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 51)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 52)     override fun putStringSet(key: String, values: Set<String>) {"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 53)         valueMap[key] = values
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 54)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 55)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 56)     override fun remove(key: String) {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 57)         valueMap.remove(key)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 58)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 59)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 60)     override fun registerOnSharedPreferenceChangeListener(listenerModeChanged: OnModeChangedPreferenceChangedListener) {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 61)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 62)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 63)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 64)     override fun unregisterOnSharedPreferenceChangeListener(listenerModeChanged: OnModeChangedPreferenceChangedListener) {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 65)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 66)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/InMemoryPreferencesStore.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 67) }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import com.fasterxml.jackson.core.JsonParseException
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import com.fasterxml.jackson.databind.exc.InvalidFormatException
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import com.google.android.gms.location.Geofence
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.junit.Assert.*
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.junit.Before
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.mockito.Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.mockito.Mockito
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.model.BatteryStatus
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.owntracks.android.model.CommandAction
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.owntracks.android.model.messages.*
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.support.Parser.EncryptionException
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import java.io.ByteArrayInputStream
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import java.io.IOException
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import java.util.*
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22) class ParserTest {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)     private var messageLocation: MessageLocation? = null
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)     @Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)     private lateinit var testPreferences: Preferences
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     // Need to mock this as we can't unit test native lib off-device
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)     @Mock
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     private lateinit var encryptionProvider: EncryptionProvider
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     //region Location Messages
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     private val locationWithRegionsJSON = ""{\""_type\"":\""location\"",\""acc\"":10,\""alt\"":20,\""batt\"":30,\""bs\"":2,\""conn\"":\""TestConn\"",\""created_at\"":25,\""inregions\"":[\""Testregion1\"",\""Testregion2\""],\""lat\"":50.1,\""lon\"":60.2,\""tst\"":123456789,\""vac\"":1,\""vel\"":5}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @Before
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     fun setupMessageLocation() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         val regions: MutableList<String> = LinkedList()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         regions.add(""Testregion1"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         regions.add(""Testregion2"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         messageLocation = MessageLocation(MessageCreatedAtNow(FakeClock()))
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         messageLocation!!.accuracy = 10
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         messageLocation!!.altitude = 20
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)         messageLocation!!.battery = 30
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)         messageLocation!!.batteryStatus = BatteryStatus.CHARGING
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         messageLocation!!.conn = ""TestConn"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         messageLocation!!.latitude = 50.1
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         messageLocation!!.longitude = 60.2
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         messageLocation!!.timestamp = 123456789
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         messageLocation!!.velocity = 5.6.toInt()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         messageLocation!!.verticalAccuracy = 1.7.toInt()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)         messageLocation!!.inregions = regions
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     @Before
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)     fun setupEncryptionProvider() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         testPreferences = mock {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)             on { encryptionKey } doReturn ""testEncryptionKey"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         encryptionProvider = mock { on { isPayloadEncryptionEnabled } doReturn false }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     fun `Parser can serialize location message to a pretty JSON message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         val parser = Parser(null)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         val expected = 
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)             {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)               ""_type"" : ""location"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)               ""acc"" : 10,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)               ""alt"" : 20,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)               ""batt"" : 30,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)               ""bs"" : 2,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)               ""conn"" : ""TestConn"","
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)               ""created_at"" : 25,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)               ""inregions"" : [ ""Testregion1"", ""Testregion2"" ],"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)               ""lat"" : 50.1,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)               ""lon"" : 60.2,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)               ""tst"" : 123456789,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)               ""vac"" : 1,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)               ""vel"" : 5"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)             }
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         """""".trimIndent()"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         assertEquals(expected, parser.toJsonPlainPretty(messageLocation!!))"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)     fun `Parser can deserialize a location message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)         val input = ""{\""_type\"":\""location\"",\""tid\"":\""s5\"",\""acc\"":1600,\""alt\"":0.0,\""batt\"":99,\""bs\"":3,\""conn\"":\""w\"",\""lat\"":52.3153748,\""lon\"":5.0408462,\""t\"":\""p\"",\""tst\"":1514455575,\""vac\"":0,\""inregions\"":[\""Testregion1\"",\""Testregion2\""]}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)         assertEquals(MessageLocation::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)         val message = messageBase as MessageLocation
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         assertEquals(1514455575L, message.timestamp)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         assertEquals(""s5"", message.trackerId)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         assertEquals(1600, message.accuracy.toLong())"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         assertEquals(0.0, message.altitude.toDouble(), 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         assertEquals(99, message.battery.toLong())"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         assertEquals(BatteryStatus.FULL, message.batteryStatus)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         assertEquals(""w"", message.conn)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)         assertEquals(52.3153748, message.latitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         assertEquals(5.0408462, message.longitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         assertEquals(""p"", message.trigger)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         assertEquals(0f, message.verticalAccuracy.toFloat(), 0f)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         assertEquals(2, message.inregions?.size)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)     fun `Parser can serialize a location message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)         val input = messageLocation
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)         val serialized = input!!.toJson(parser)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)         assertEquals(locationWithRegionsJSON, serialized)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)     fun `Parser can deserialize an encrypted location message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(true)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)         val messageLocationJSON = ""{\""_type\"":\""location\"",\""tid\"":\""s5\"",\""acc\"":1600,\""alt\"":0.0,\""batt\"":99,\""bs\"":1,\""conn\"":\""w\"",\""lat\"":52.3153748,\""lon\"":5.0408462,\""t\"":\""p\"",\""tst\"":1514455575,\""vac\"":0,\""vel\"":2}"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)         Mockito.`when`(encryptionProvider.decrypt(""TestCipherText"")).thenReturn(messageLocationJSON)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)         val input = ""{\""_type\"":\""encrypted\"",\""data\"":\""TestCipherText\""}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)         assertEquals(MessageLocation::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)         val messageLocation = messageBase as MessageLocation
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)         assertEquals(1514455575L, messageLocation.timestamp)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)         assertEquals(""s5"", messageLocation.trackerId)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)         assertEquals(1600, messageLocation.accuracy.toLong())"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)         assertEquals(0.0, messageLocation.altitude.toDouble(), 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)         assertEquals(99, messageLocation.battery.toLong())"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)         assertEquals(""w"", messageLocation.conn)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)         assertEquals(52.3153748, messageLocation.latitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         assertEquals(5.0408462, messageLocation.longitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)         assertEquals(""p"", messageLocation.trigger)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         assertEquals(0f, messageLocation.verticalAccuracy.toFloat(), 0f)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)         assertEquals(2f, messageLocation.velocity.toFloat(), 0f)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)     fun `Parser can serialize an encrypted location message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(true)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)         Mockito.`when`(encryptionProvider.encrypt(locationWithRegionsJSON)).thenReturn(""TestCipherText"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)         val input = messageLocation
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)         val serialized = input!!.toJson(parser)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)         val expected = """"""{""_type"":""encrypted"",""data"":""TestCipherText""}"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)         assertEquals(expected, serialized)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)     @Test(expected = EncryptionException::class)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)     fun `Parser should raise an exception when given an encrypted message with encryption disabled`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)         val input = ""{\""_type\"":\""encrypted\"",\""data\"":\""TestCipherText\""}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)         parser.fromJson(input)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)     fun `Parser can deserialize multiple location messages in same document`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)         val multipleMessageLocationJSON = ""[{\""_type\"":\""location\"",\""tid\"":\""s5\"",\""acc\"":1600,\""alt\"":0.0,\""batt\"":99,\""conn\"":\""w\"",\""lat\"":52.3153748,\""lon\"":5.0408462,\""t\"":\""p\"",\""tst\"":1514455575,\""vac\"":0},{\""_type\"":\""location\"",\""tid\"":\""s5\"",\""acc\"":95,\""alt\"":0.0,\""batt\"":99,\""conn\"":\""w\"",\""lat\"":12.3153748,\""lon\"":15.0408462,\""t\"":\""p\"",\""tst\"":1514455579,\""vac\"":0}]"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)         val byteArrayInputStream = ByteArrayInputStream(multipleMessageLocationJSON.toByteArray())
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163)         val messages = parser.fromJson(byteArrayInputStream)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 164)         assertEquals(2, messages.size.toLong())"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 165)         for (messageBase in messages) {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 166)             assertEquals(MessageLocation::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 167)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 168)         val firstMessageLocation = messages[0] as MessageLocation
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 169)         assertEquals(1514455575L, firstMessageLocation.timestamp)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 170)         val secondMessageLocation = messages[1] as MessageLocation
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 171)         assertEquals(1514455579L, secondMessageLocation.timestamp)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 172)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 173)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 174)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 175)     //region Command Messages
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 176)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 177)     fun `Parser can deserialize a reportLocation cmd message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 178)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 179)         val input = ""{\""_type\"":\""cmd\"", \""action\"":\""reportLocation\""}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 180)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 181)         messageBase.topic = ""owntracks/username/device/cmd"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 182)         assertEquals(MessageCmd::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 183)         val messageCmd = messageBase as MessageCmd
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 184)         assertTrue(messageCmd.isValidMessage())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 185)         assertEquals(CommandAction.REPORT_LOCATION, messageCmd.action)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 186)         assertEquals(""owntracks/username/device"", messageCmd.contactKey)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 187)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 188)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 189)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 190)     fun `Parser can deserialize a restart cmd message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 191)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 192)         val input = ""{\""_type\"":\""cmd\"", \""action\"":\""restart\""}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 193)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 194)         assertEquals(MessageCmd::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 195)         val messageCmd = messageBase as MessageCmd
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 196)         assertTrue(messageCmd.isValidMessage())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 197)         assertEquals(CommandAction.RESTART, messageCmd.action)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 198)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 199)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 200)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 201)     fun `Parser can deserialize a setWaypoints cmd message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 202)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 203)         val input = ""{\""_type\"":\""cmd\"",\""action\"":\""setWaypoints\"",\""waypoints\"":{\""_type\"":\""waypoints\"",\""waypoints\"":[]}}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 204)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 205)         assertEquals(MessageCmd::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 206)         val messageCmd = messageBase as MessageCmd
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 207)         assertTrue(messageCmd.isValidMessage())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 208)         assertEquals(CommandAction.SET_WAYPOINTS, messageCmd.action)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 209)         assertEquals(0, messageCmd.waypoints!!.waypoints!!.size)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 210)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 211)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 212)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 213)     fun `Parser can deserialize a setConfiguration message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 214)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 215)         val input = ""{\""_type\"":\""cmd\"",\""action\"":\""setConfiguration\"",\""configuration\"":{\""_type\"":\""configuration\"",\""host\"":\""newHost\""}}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 216)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 217)         assertEquals(MessageCmd::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 218)         val messageCmd = messageBase as MessageCmd
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 219)         assertTrue(messageCmd.isValidMessage())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 220)         assertEquals(CommandAction.SET_CONFIGURATION, messageCmd.action)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 221)         assertEquals(""newHost"", messageCmd.configuration!![""host""])"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 222)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 223)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 224)     @Test(expected = InvalidFormatException::class)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 225)     fun `Parser throws exception when given cmd with invalid action`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 226)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 227)         val input = ""{\""_type\"":\""cmd\"", \""action\"":\""nope\"", \""sometgi\"":\""parp\""}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 228)         parser.fromJson(input)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 229)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 230)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 231)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 232)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 233)     //region Transition Messages
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 234)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 235)     fun `Parser can deserialize a transition message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 236)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 237)         val input = ""{\""_type\"":\""transition\"",\""acc\"":3.075,\""desc\"":\""myregion\"",\""event\"":\""leave\"",\""lat\"":52.71234,\""lon\"":-1.61234123,\""t\"":\""l\"",\""tid\"":\""ce\"",\""tst\"":1603209966,\""wtst\"":1558351273}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 238)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 239)         messageBase.topic = ""owntracks/username/device/event"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 240)         assertEquals(MessageTransition::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 241)         val message = messageBase as MessageTransition
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 242)         assertTrue(message.isValidMessage())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 243)         assertEquals(2, message.getTransition())"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 244)         assertEquals(3.075f, message.accuracy, 0f)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 245)         assertEquals(""myregion"", message.description)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 246)         assertEquals(52.71234, message.latitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 247)         assertEquals(-1.61234123, message.longitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 248)         assertEquals(1603209966, message.timestamp)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 249)         assertEquals(1558351273, message.waypointTimestamp)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 250)         assertEquals(""ce"", message.trackerId)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 251)         assertEquals(""l"", message.trigger)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 252)         assertEquals(""owntracks/username/device"", message.contactKey)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 253)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 254)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 255)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 256)     fun `Parser can serialize a transition message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 257)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 258)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 259)         val message = MessageTransition()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 260)         message.latitude = 52.71234
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 261)         message.longitude = -1.61234123
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 262)         message.description = ""myregion"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 263)         message.setTransition(Geofence.GEOFENCE_TRANSITION_EXIT)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 264)         message.accuracy = 3.075f
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 265)         message.timestamp = 1603209966
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 266)         message.waypointTimestamp = 1558351273
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 267)         message.trackerId = ""ce"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 268)         message.trigger = ""l"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 269)         val serialized = message.toJson(parser)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 270)         val expected = ""{\""_type\"":\""transition\"",\""acc\"":3.075,\""desc\"":\""myregion\"",\""event\"":\""leave\"",\""lat\"":52.71234,\""lon\"":-1.61234123,\""t\"":\""l\"",\""tid\"":\""ce\"",\""tst\"":1603209966,\""wtst\"":1558351273}"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 271)         assertEquals(expected, serialized)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 272)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 273)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 274)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 275)     //region Configuration messages
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 276)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 277)     fun `Parser can deserialize a configuration message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 278)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 279)         val input = ""{\""_type\"":\""configuration\"",\""waypoints\"":[{\""_type\"":\""waypoint\"",\""desc\"":\""work\"",\""lat\"":51.504778900000005,\""lon\"":-0.023851299999999995,\""rad\"":150,\""tst\"":1505910709000},{\""_type\"":\""waypoint\"",\""desc\"":\""home\"",\""lat\"":53.6776261,\""lon\"":-1.58268,\""rad\"":100,\""tst\"":1558351273}],\""auth\"":true,\""autostartOnBoot\"":true,\""cleanSession\"":false,\""clientId\"":\""emulator\"",\""cmd\"":true,\""debugLog\"":true,\""deviceId\"":\""testdevice\"",\""fusedRegionDetection\"":true,\""geocodeEnabled\"":true,\""host\"":\""127.0.0.1\"",\""ignoreInaccurateLocations\"":150,\""ignoreStaleLocations\"":0.0,\""keepalive\"":900,\""locatorDisplacement\"":5,\""locatorInterval\"":60,\""locatorPriority\"":2,\""mode\"":0,\""monitoring\"":1,\""moveModeLocatorInterval\"":10,\""mqttProtocolLevel\"":3,\""notificationHigherPriority\"":false,\""notificationLocation\"":true,\""opencageApiKey\"":\""testkey\"",\""password\"":\""testpassword\"",\""ping\"":30,\""port\"":1883,\""pubExtendedData\"":true,\""pubQos\"":1,\""pubRetain\"":true,\""pubTopicBase\"":\""owntracks/%u/%d\"",\""remoteConfiguration\"":true,\""sub\"":true,\""subQos\"":2,\""subTopic\"":\""owntracks/+/+\"",\""tls\"":false,\""usePassword\"":true,\""username\"":\""testusername\"",\""ws\"":false}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 280)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 281)         assertEquals(MessageConfiguration::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 282)         val message = messageBase as MessageConfiguration
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 283)         assertTrue(message.isValidMessage())
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 284)         assertFalse(message.waypoints.isEmpty())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 285)         assertEquals(2, message.waypoints.size)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 286)         assertFalse(message.hasTrackerId())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 287)         assertEquals(true, message.get(""autostartOnBoot""))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 288)         assertEquals(5, message.get(""locatorDisplacement""))"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 289)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 290)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 291)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 292)     fun `Parser can serialize a configuration message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 293)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 294)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 295)         val message = MessageConfiguration()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 296)         message.set(""TestBoolKey"", true)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 297)         message.set(""TestStringKey"", ""testString"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 298)         message.set(""TestIntKey"", 13487)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 299)         message.set(""TestFloatKey"", 13487f)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 300)         val waypoint = MessageWaypoint()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 301)         waypoint.latitude = 51.0
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 302)         waypoint.longitude = -20.0
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 303)         waypoint.description = ""Test waypoint"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 304)         waypoint.radius = 45
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 305)         waypoint.timestamp = 123456789
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 306)         message.waypoints.add(waypoint)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 307)         val serialized = message.toJson(parser)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 308)         val expected = ""{\""_type\"":\""configuration\"",\""waypoints\"":[{\""_type\"":\""waypoint\"",\""desc\"":\""Test waypoint\"",\""lat\"":51.0,\""lon\"":-20.0,\""rad\"":45,\""tst\"":123456789}],\""TestBoolKey\"":true,\""TestFloatKey\"":13487.0,\""TestIntKey\"":13487,\""TestStringKey\"":\""testString\""}"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 309)         assertEquals(expected, serialized)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 310)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 311)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 312)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 313)     //region Waypoint Messages
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 314)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 315)     fun `Parser can deserialize a waypoint message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 316)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 317)         val input = ""{\""_type\"":\""waypoint\"",\""desc\"":\""mypoint\"",\""lat\"":52.0027789,\""lon\"":-1.0829312,\""rad\"":150,\""tst\"":1558351273}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 318)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 319)         assertEquals(MessageWaypoint::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 320)         val message = messageBase as MessageWaypoint
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 321)         assertTrue(message.isValidMessage())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 322)         assertEquals(""mypoint"", message.description)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 323)         assertEquals(52.0027789, message.latitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 324)         assertEquals(-1.0829312, message.longitude, 0.0)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 325)         assertEquals(150, message.radius)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 326)         assertEquals(1558351273, message.timestamp)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 327)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 328)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 329)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 330)     fun `Parser can serialize a waypoint message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 331)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 332)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 333)         val message = MessageWaypoint()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 334)         message.latitude = 52.0027789
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 335)         message.longitude = -1.0829312
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 336)         message.description = ""mypoint"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 337)         message.radius = 150
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 338)         message.timestamp = 1558351273
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 339)         val serialized = message.toJson(parser)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 340)         val expected = ""{\""_type\"":\""waypoint\"",\""desc\"":\""mypoint\"",\""lat\"":52.0027789,\""lon\"":-1.0829312,\""rad\"":150,\""tst\"":1558351273}"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 341)         assertEquals(expected, serialized)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 342)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 343)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 344)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 345)     //region Clear Messages
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 346)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 347)     fun `Parser can serialize a clear messages`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 348)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 349)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 350)         val message = MessageClear()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 351)         val serialized = message.toJson(parser)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 352)         assertEquals("""", serialized)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 353)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 354)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 355)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 356)     fun `Parser can serialize a clear messages to a byte array`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 357)         Mockito.`when`(encryptionProvider.isPayloadEncryptionEnabled).thenReturn(false)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 358)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 359)         val message = MessageClear()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 360)         val serialized = message.toJsonBytes(parser)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 361)         assertEquals(0, serialized.size)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 362)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 363)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 364)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 365)     // Card Messages
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 366)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 367)     fun `Parser can deserialize a MessageCard`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 368)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 369)         val input = ""{\""_type\"": \""card\"",\""face\"": \""iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAABIElEQVRYhe2XsQ2DMBBFvQkrUNEihvEOTMEU9IzAAuxAwxz3UxCIIxw58n0LC/lXURI/Xs65MxhkHnO3QChFUJvnCxpjLq9FRIv9MDWLx3H0Q42hSUYLhgTcymoSTamqivKdUKIF/6nQuq6x+M91ohcWwfd1YheGmkREKJ2sarWu635+tiyLBn1GPQu2bYO1FsBeNWttPoPaDVPKDVWQNZzd0IiHXN/3LOTOpYESVA8gCYoI5nlmoC6h/uyjUZjVpJCGYWBgvKEINk0DEUHbtud70zQx0Nwt9t1dq5lqgCPiNsrtd9ReWM6DGsDXf5CV5z92XoDkbabRUmwvkOAsFhHUdc3C8gTdEZPdUZcyyQSzOup8MtkcdalTBLUpgtq8ACxgjcQLy0DfAAAAAElFTkSuQmCC\"", \""name\"":\""MyName!\""}"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 370)         val messageBase = parser.fromJson(input)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 371)         messageBase.topic = ""owntracks/user/device/info"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 372)         assertEquals(MessageCard::class.java, messageBase.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 373)         val messageCard = messageBase as MessageCard
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 374)         assertTrue(messageCard.isValidMessage())
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 375)         assertEquals(""MyName!"", messageCard.name)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 376)         assertEquals(""owntracks/user/device"", messageCard.contactKey)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 377)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 378)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 379)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 380)     //region  Invalid messages
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 381)     @Test(expected = IOException::class)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 382)     fun `Parser should throw exception given an empty array`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 383)         val parser = Parser(encryptionProvider)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 384)         val byteArrayInputStream = ByteArrayInputStream(ByteArray(0))
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 385)         parser.fromJson(byteArrayInputStream)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 386)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 387)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 388)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 389)     fun `Parser can deserialize an Unknown message`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 390)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 391)         val message = parser.fromJson(""{\""some\"":\""invalid message\""}"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 392)         assertEquals(MessageUnknown::class.java, message.javaClass)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 393)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 394)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 395)     @Test(expected = JsonParseException::class)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 396)     fun `Parser throws exception when given invalid JSON as message body`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 397)         val parser = Parser(encryptionProvider)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 398)         parser.fromJson(""not JSON"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 399)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 400)     //endregion
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 401)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 402)     inner class FakeClock : Clock {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 403)         override val time: Long = 25
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 404)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/ParserTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 405) }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.res.Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import com.nhaarman.mockitokotlin2.any
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import com.nhaarman.mockitokotlin2.eq
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.eclipse.paho.client.mqttv3.MqttConnectOptions.MQTT_VERSION_3_1_1
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.eclipse.paho.client.mqttv3.MqttConnectOptions.MQTT_VERSION_DEFAULT
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.junit.Assert.assertEquals
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.junit.Before
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14) import org.junit.runner.RunWith
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) import org.junit.runners.Parameterized
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16) import org.owntracks.android.R
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17) import org.owntracks.android.model.messages.MessageConfiguration
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18) import org.owntracks.android.services.MessageProcessorEndpointHttp
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19) import org.owntracks.android.services.MessageProcessorEndpointMqtt
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20) import org.owntracks.android.support.preferences.PreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21) import kotlin.reflect.KClass
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23) @RunWith(Parameterized::class)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24) class PreferencesGettersAndSetters(
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)         private val preferenceMethodName: String,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)         private val preferenceName: String,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)         private val preferenceValue: Any,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)         private val preferenceValueExpected: Any,"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)         private val preferenceType: KClass<Any>,"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)         private val httpOnlyMode: Boolean) {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     private lateinit var mockResources: Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)     private lateinit var mockContext: Context
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)     private lateinit var preferencesStore: PreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)     @Before
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)     fun createMocks() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         mockResources = getMockResources()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         mockContext = mock {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)             on { resources } doReturn mockResources
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)             on { packageName } doReturn javaClass.canonicalName
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)         preferencesStore = InMemoryPreferencesStore()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)     fun `when setting a preference ensure that the preference is set correctly on export`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         val preferences = Preferences(mockContext, null, preferencesStore)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         val setter = Preferences::class.java.getMethod(""set$preferenceMethodName"", preferenceType.java)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         if (httpOnlyMode) {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)             preferences.mode = MessageProcessorEndpointHttp.MODE_ID
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)         }
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)         setter.invoke(preferences, preferenceValue)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)         val messageConfiguration = preferences.exportToMessage()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         assertEquals(preferenceValueExpected, messageConfiguration[preferenceName])"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)     fun `when importing a configuration ensure that the supplied preference is set to the given value`() {
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)         val preferences = Preferences(mockContext, null, preferencesStore)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)         val messageConfiguration = MessageConfiguration()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)         messageConfiguration[preferenceName] = preferenceValue
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)         preferences.importFromMessage(messageConfiguration)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         val getter = Preferences::class.java.getMethod(""get$preferenceMethodName"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         assertEquals(preferenceValueExpected, getter.invoke(preferences))"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)     companion object {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)         @JvmStatic
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)         @Parameterized.Parameters(name = ""{index}: {0} (sets={2}, expected={3})"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)         fun data(): Iterable<Array<Any>> {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)             return arrayListOf(
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)                     arrayOf(""AutostartOnBoot"", ""autostartOnBoot"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)                     arrayOf(""CleanSession"", ""cleanSession"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)                     arrayOf(""ClientId"", ""clientId"", ""testClientId"", ""testClientId"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)                     arrayOf(""DebugLog"", ""debugLog"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)                     arrayOf(""DeviceId"", ""deviceId"", ""deviceId"", ""deviceId"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)                     arrayOf(""DontReuseHttpClient"", ""dontReuseHttpClient"", true, true, Boolean::class, true),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)                     arrayOf(""ExperimentalFeatures"", ""experimentalFeatures"", setOf(""this"", ""that"", ""other""), setOf(""this"", ""that"", ""other""), Set::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)                     arrayOf(""FusedRegionDetection"", ""fusedRegionDetection"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)                     arrayOf(""ReverseGeocodeProvider"", ""reverseGeocodeProvider"", ""Google"", ""Google"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)                     arrayOf(""ReverseGeocodeProvider"", ""reverseGeocodeProvider"", ""OpenCage"", ""OpenCage"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)                     arrayOf(""ReverseGeocodeProvider"", ""reverseGeocodeProvider"", ""None"", ""None"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)                     arrayOf(""ReverseGeocodeProvider"", ""reverseGeocodeProvider"", ""Nonsense"", ""None"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)                     arrayOf(""Host"", ""host"", ""testHost"", ""testHost"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)                     arrayOf(""IgnoreInaccurateLocations"", ""ignoreInaccurateLocations"", 123, 123, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)                     arrayOf(""IgnoreStaleLocations"", ""ignoreStaleLocations"", 456.0, 456.0, Double::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)                     arrayOf(""Info"", ""info"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)                     arrayOf(""Keepalive"", ""keepalive"", 1500, 1500, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)                     arrayOf(""Keepalive"", ""keepalive"", 900, 900, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)                     arrayOf(""Keepalive"", ""keepalive"", 899, 900, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)                     arrayOf(""Keepalive"", ""keepalive"", 0, 900, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)                     arrayOf(""Keepalive"", ""keepalive"", -1, 900, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)                     arrayOf(""LocatorDisplacement"", ""locatorDisplacement"", 1690, 1690, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)                     arrayOf(""LocatorInterval"", ""locatorInterval"", 1000, 1000, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)                     arrayOf(""LocatorPriority"", ""locatorPriority"", 2, 2, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)                     arrayOf(""Mode"", ""mode"", MessageProcessorEndpointHttp.MODE_ID, MessageProcessorEndpointHttp.MODE_ID, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)                     arrayOf(""Mode"", ""mode"", MessageProcessorEndpointMqtt.MODE_ID, MessageProcessorEndpointMqtt.MODE_ID, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)                     arrayOf(""Mode"", ""mode"", -1, MessageProcessorEndpointMqtt.MODE_ID, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)                     arrayOf(""Monitoring"", ""monitoring"", 2, 2, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)                     arrayOf(""MoveModeLocatorInterval"", ""moveModeLocatorInterval"", 1500, 1500, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)                     arrayOf(""MqttProtocolLevel"", ""mqttProtocolLevel"", MQTT_VERSION_3_1_1, MQTT_VERSION_3_1_1, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)                     arrayOf(""MqttProtocolLevel"", ""mqttProtocolLevel"", -1, MQTT_VERSION_DEFAULT, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)                     arrayOf(""NotificationEvents"", ""notificationEvents"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)                     arrayOf(""NotificationHigherPriority"", ""notificationHigherPriority"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106)                     arrayOf(""NotificationLocation"", ""notificationLocation"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 107)                     arrayOf(""OpenCageGeocoderApiKey"", ""opencageApiKey"", ""testOpencageAPIKey"", ""testOpencageAPIKey"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 108)                     arrayOf(""Password"", ""password"", ""testPassword!\"""", ""testPassword!\"""", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 109)                     arrayOf(""Ping"", ""ping"", 400, 400, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 110)                     arrayOf(""Port"", ""port"", 9999, 9999, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 111)                     arrayOf(""Port"", ""port"", -50, 0, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 112)                     arrayOf(""Port"", ""port"", 65536, 0, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 113)                     arrayOf(""Port"", ""port"", 65535, 65535, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 114)                     arrayOf(""PubLocationExtendedData"", ""pubExtendedData"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 115)                     arrayOf(""PubQos"", ""pubQos"", 1, 1, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 116)                     arrayOf(""PubRetain"", ""pubRetain"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 117)                     arrayOf(""PubTopicBaseFormatString"", ""pubTopicBase"", ""testDeviceTopic"", ""testDeviceTopic"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 118)                     arrayOf(""RemoteCommand"", ""cmd"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 119)                     arrayOf(""RemoteConfiguration"", ""remoteConfiguration"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 120)                     arrayOf(""Sub"", ""sub"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 121)                     arrayOf(""SubQos"", ""subQos"", 1, 1, Int::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 122)                     arrayOf(""SubTopic"", ""subTopic"", ""testSubTopic"", ""testSubTopic"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 123)                     arrayOf(""Tls"", ""tls"", true, true, Boolean::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 124)                     arrayOf(""TlsCaCrt"", ""tlsCaCrt"", ""caCertName"", ""caCertName"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 125)                     arrayOf(""TlsClientCrt"", ""tlsClientCrt"", ""clientCertName"", ""clientCertName"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 126)                     arrayOf(""TlsClientCrtPassword"", ""tlsClientCrtPassword"", ""clientCrtPassword"", ""clientCrtPassword"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 127)                     arrayOf(""TrackerId"", ""tid"", ""t1"", ""t1"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 128)                     arrayOf(""TrackerId"", ""tid"", ""trackerId"", ""tr"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 129)                     arrayOf(""Url"", ""url"", ""https://www.example.com"", ""https://www.example.com"", String::class, true),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 130)                     arrayOf(""Username"", ""username"", ""testUser"", ""testUser"", String::class, false),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 131)                     arrayOf(""Ws"", ""ws"", true, true, Boolean::class, false)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 132)             ).toList()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 133)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 134)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 135)         fun getMockResources(): Resources {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 136)             return mock {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 137)                 on { getString(any()) } doReturn 
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 138)                 on { getString(eq(R.string.valEmpty)) } doReturn 
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 139)                 on { getString(eq(R.string.preferenceKeyAuth)) } doReturn ""auth"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 140)                 on { getString(eq(R.string.preferenceKeyAutostartOnBoot)) } doReturn ""autostartOnBoot"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 141)                 on { getString(eq(R.string.preferenceKeyCleanSession)) } doReturn ""cleanSession"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 142)                 on { getString(eq(R.string.preferenceKeyClientId)) } doReturn ""clientId"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 143)                 on { getString(eq(R.string.preferenceKeyDebugLog)) } doReturn ""debugLog"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 144)                 on { getString(eq(R.string.preferenceKeyDeviceId)) } doReturn ""deviceId"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 145)                 on { getString(eq(R.string.preferenceKeyDontReuseHttpClient)) } doReturn ""dontReuseHttpClient"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 146)                 on { getString(eq(R.string.preferenceKeyEncryptionKey)) } doReturn ""encryptionKey"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 147)                 on { getString(eq(R.string.preferenceKeyExperimentalFeatures)) } doReturn ""experimentalFeatures"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 148)                 on { getString(eq(R.string.preferenceKeyFirstStart)) } doReturn ""firstStart"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 149)                 on { getString(eq(R.string.preferenceKeyFusedRegionDetection)) } doReturn ""fusedRegionDetection"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 150)                 on { getString(eq(R.string.preferenceKeyGeocodeEnabled)) } doReturn ""geocodeEnabled"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 151)                 on { getString(eq(R.string.preferenceKeyHost)) } doReturn ""host"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 152)                 on { getString(eq(R.string.preferenceKeyIgnoreInaccurateLocations)) } doReturn ""ignoreInaccurateLocations"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 153)                 on { getString(eq(R.string.preferenceKeyIgnoreStaleLocations)) } doReturn ""ignoreStaleLocations"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 154)                 on { getString(eq(R.string.preferenceKeyInfo)) } doReturn ""info"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 155)                 on { getString(eq(R.string.preferenceKeyKeepalive)) } doReturn ""keepalive"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 156)                 on { getString(eq(R.string.preferenceKeyLocatorDisplacement)) } doReturn ""locatorDisplacement"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 157)                 on { getString(eq(R.string.preferenceKeyLocatorInterval)) } doReturn ""locatorInterval"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 158)                 on { getString(eq(R.string.preferenceKeyLocatorPriority)) } doReturn ""locatorPriority"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 159)                 on { getString(eq(R.string.preferenceKeyModeId)) } doReturn ""mode"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 160)                 on { getString(eq(R.string.preferenceKeyMonitoring)) } doReturn ""monitoring"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 161)                 on { getString(eq(R.string.preferenceKeyMoveModeLocatorInterval)) } doReturn ""moveModeLocatorInterval"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 162)                 on { getString(eq(R.string.preferenceKeyMqttProtocolLevel)) } doReturn ""mqttProtocolLevel"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 163)                 on { getString(eq(R.string.preferenceKeyNotificationEvents)) } doReturn ""notificationEvents"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 164)                 on { getString(eq(R.string.preferenceKeyNotificationHigherPriority)) } doReturn ""notificationHigherPriority"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 165)                 on { getString(eq(R.string.preferenceKeyNotificationLocation)) } doReturn ""notificationLocation"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 166)                 on { getString(eq(R.string.preferenceKeyObjectboxMigrated)) } doReturn ""_objectboxMigrated"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 167)                 on { getString(eq(R.string.preferenceKeyOpencageGeocoderApiKey)) } doReturn ""opencageApiKey"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 168)                 on { getString(eq(R.string.preferenceKeyPassword)) } doReturn ""password"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 169)                 on { getString(eq(R.string.preferenceKeyPing)) } doReturn ""ping"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 170)                 on { getString(eq(R.string.preferenceKeyPort)) } doReturn ""port"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 171)                 on { getString(eq(R.string.preferenceKeyPublishExtendedData)) } doReturn ""pubExtendedData"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 172)                 on { getString(eq(R.string.preferenceKeyPubQos)) } doReturn ""pubQos"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 173)                 on { getString(eq(R.string.preferenceKeyPubRetain)) } doReturn ""pubRetain"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 174)                 on { getString(eq(R.string.preferenceKeyPubTopicBase)) } doReturn ""pubTopicBase"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 175)                 on { getString(eq(R.string.preferenceKeyRemoteCommand)) } doReturn ""cmd"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 176)                 on { getString(eq(R.string.preferenceKeyRemoteConfiguration)) } doReturn ""remoteConfiguration"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 177)                 on { getString(eq(R.string.preferenceKeyReverseGeocodeProvider)) } doReturn ""reverseGeocodeProvider"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 178)                 on { getString(eq(R.string.preferenceKeySetupNotCompleted)) } doReturn ""setupNotCompleted"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 179)                 on { getString(eq(R.string.preferenceKeySub)) } doReturn ""sub"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 180)                 on { getString(eq(R.string.preferenceKeySubQos)) } doReturn ""subQos"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 181)                 on { getString(eq(R.string.preferenceKeySubTopic)) } doReturn ""subTopic"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 182)                 on { getString(eq(R.string.preferenceKeyTLS)) } doReturn ""tls"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 183)                 on { getString(eq(R.string.preferenceKeyTLSCaCrt)) } doReturn ""tlsCaCrt"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 184)                 on { getString(eq(R.string.preferenceKeyTLSClientCrt)) } doReturn ""tlsClientCrt"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 185)                 on { getString(eq(R.string.preferenceKeyTLSClientCrtPassword)) } doReturn ""tlsClientCrtPassword"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 186)                 on { getString(eq(R.string.preferenceKeyTrackerId)) } doReturn ""tid"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 187)                 on { getString(eq(R.string.preferenceKeyURL)) } doReturn ""url"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 188)                 on { getString(eq(R.string.preferenceKeyUsepassword)) } doReturn ""usePassword"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 189)                 on { getString(eq(R.string.preferenceKeyUsername)) } doReturn ""username"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 190)                 on { getString(eq(R.string.preferenceKeyVersion)) } doReturn ""_build"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 191)                 on { getString(eq(R.string.preferenceKeyWS)) } doReturn ""ws"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 192)                 on { getString(eq(R.string.valIgnoreStaleLocations)) } doReturn ""0"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 193)                 on { getString(eq(R.string.defaultSubTopic)) } doReturn ""owntracks/+/+"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 194)                 on { getString(eq(R.string.valPubTopic)) } doReturn ""owntracks/%u/%d"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 195)                 on { getInteger(any()) } doReturn 0
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 196)                 on { getBoolean(any()) } doReturn false
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 197)             }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 198)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 199)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 200) }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferencesGettersAndSetters.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 201)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   1) package org.owntracks.android.support
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   2)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   3) import android.content.Context
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   4) import android.content.res.Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   5) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   6) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   7) import org.junit.Assert
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   8) import org.junit.Assert.assertEquals
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20   9) import org.junit.Assert.assertFalse
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  10) import org.junit.Before
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  11) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  12) import org.owntracks.android.model.messages.MessageConfiguration
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  13) import org.owntracks.android.support.preferences.PreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  14)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  15) class PreferenceTest {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  16)     private lateinit var mockResources: Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  17)     private lateinit var mockContext: Context
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  18)     private lateinit var preferencesStore: PreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  19)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  20)     @Before
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  21)     fun createMocks() {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  22)         mockResources = PreferencesGettersAndSetters.getMockResources()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  23)         mockContext = mock {
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  24)             on { resources } doReturn mockResources
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  25)             on { packageName } doReturn javaClass.canonicalName
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  26)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  27)         preferencesStore = InMemoryPreferencesStore()
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  28)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  29)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  30)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  31)     fun `given a configuration message, when importing to preferences, all the keys in the config should be added`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  32)         val preferences = Preferences(mockContext, null, preferencesStore)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  33)         val messageConfiguration = MessageConfiguration()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  34)         messageConfiguration[""autostartOnBoot""] = true"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  35)         messageConfiguration[""host""] = ""testhost"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  36)         messageConfiguration[""port""] = 1234"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  37)         preferences.importFromMessage(messageConfiguration)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  38)         assertEquals(true, preferences.autostartOnBoot)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  39)         assertEquals(""testhost"", preferences.host)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  40)         assertEquals(1234, preferences.port)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  41)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  42)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  43)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  44)     fun `given a configuration message with an entry value of null, when importing to preferences, the config value should be cleared`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  45)         val preferences = Preferences(mockContext, null, preferencesStore)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  46)         val messageConfiguration = MessageConfiguration()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  47)         messageConfiguration[""host""] = null"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  48)         preferences.host = ""testHost"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  49)         preferences.importFromMessage(messageConfiguration)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  50)         assertEquals("""", preferences.host)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  51)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  52)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  53)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  54)     fun `given a configuration message with an invalid key, when importing to preferences, it should be ignored`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  55)         val preferences = Preferences(mockContext, null, preferencesStore)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  56)         val messageConfiguration = MessageConfiguration()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  57)         messageConfiguration[""Invalid""] = ""invalid"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  58)         preferences.importFromMessage(messageConfiguration)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  59)         assertFalse(preferences.exportToMessage().keys.contains(""Invalid""))"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  60)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  61)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  62)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  63)     fun `given a configuration message with a value of the wrong type, when importing to preferences, it should be ignored`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  64)         val preferences = Preferences(mockContext, null, preferencesStore)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  65)         val messageConfiguration = MessageConfiguration()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  66)         messageConfiguration[""host""] = 4"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  67)         preferences.importFromMessage(messageConfiguration)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  68)         assertEquals("""", preferences.host)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  69)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  70)
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  71)     private val preferenceKeys = listOf(""autostartOnBoot"", ""cleanSession"", ""debugLog"", ""deviceId"", ""fusedRegionDetection"", ""reverseGeocodeProvider"", ""ignoreInaccurateLocations"", ""ignoreStaleLocations"", ""locatorDisplacement"", ""locatorInterval"", ""locatorPriority"", ""mode"", ""monitoring"", ""moveModeLocatorInterval"", ""notificationEvents"", ""notificationHigherPriority"", ""notificationLocation"", ""opencageApiKey"", ""password"", ""ping"", ""pubExtendedData"", ""cmd"", ""remoteConfiguration"", ""tid"", ""username"", ""_build"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  72)     private val httpOnlyPreferenceKeys = listOf(""dontReuseHttpClient"", ""url"")"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  73)     private val mqttOnlyPreferenceKeys = listOf(""clientId"", ""host"", ""info"", ""keepalive"", ""mqttProtocolLevel"", ""pubQos"", ""pubRetain"", ""sub"", ""subQos"", ""subTopic"", ""port"", ""pubTopicBase"", ""tls"", ""tlsCaCrt"", ""tlsClientCrt"", ""tlsClientCrtPassword"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  74)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  75)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  76)     fun `given an MQTT configuration message, when imported and then exported, the config is merged and all the preference keys are present`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  77)         val preferences = Preferences(mockContext, null, preferencesStore)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  78)         val messageConfiguration = MessageConfiguration()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  79)         messageConfiguration[""autostartOnBoot""] = true"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  80)         messageConfiguration[""host""] = ""testhost"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  81)         messageConfiguration[""port""] = 1234"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  82)         messageConfiguration[""mode""] = 0"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  83)         preferences.importFromMessage(messageConfiguration)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  84)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  85)         val exportedMessageConfiguration = preferences.exportToMessage()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  86)         preferenceKeys.forEach { Assert.assertTrue(""Exported message contains $it"", exportedMessageConfiguration.containsKey(it)) }"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  87)         mqttOnlyPreferenceKeys.forEach { Assert.assertTrue(""Exported message contains $it"", exportedMessageConfiguration.containsKey(it)) }"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  88)         httpOnlyPreferenceKeys.forEach { assertFalse(""Exported message doesn't contain $it"", exportedMessageConfiguration.containsKey(it)) }"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  89)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  90)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  91)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  92)     fun `given an HTTP configuration message, when imported and then exported, the config is merged and all the preference keys are present`() {"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  93)         val preferences = Preferences(mockContext, null, preferencesStore)"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  94)         val messageConfiguration = MessageConfiguration()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  95)         messageConfiguration[""autostartOnBoot""] = true"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  96)         messageConfiguration[""host""] = ""testhost"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  97)         messageConfiguration[""port""] = 1234"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  98)         messageConfiguration[""mode""] = 3"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  99)         preferences.importFromMessage(messageConfiguration)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 100)
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 101)         val exportedMessageConfiguration = preferences.exportToMessage()
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 102)         preferenceKeys.forEach { Assert.assertTrue(""Exported message contains $it"", exportedMessageConfiguration.containsKey(it)) }"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 103)         httpOnlyPreferenceKeys.forEach { Assert.assertTrue(""Exported message contains $it"", exportedMessageConfiguration.containsKey(it)) }"
"5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 104)         mqttOnlyPreferenceKeys.forEach { assertFalse(""Exported message doesn't contain $it"", exportedMessageConfiguration.containsKey(it)) }"
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 105)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/support/PreferenceTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 106) }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.contacts
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import androidx.lifecycle.MutableLiveData
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.junit.Assert.assertEquals
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.owntracks.android.data.repos.ContactsRepo
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.owntracks.android.model.FusedContact
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) class ContactsViewModelTest {
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     private val testContacts = MutableLiveData(
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)             mutableMapOf(
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)                     Pair(""testContact1"", FusedContact(""testContact1"")),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)                     Pair(""testContact2"", FusedContact(""testContact2"")),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)                     Pair(""testContact3"", FusedContact(""testContact3"")),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)                     Pair(""testContact4"", FusedContact(""testContact4"")),"
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)                     Pair(""testContact5"", FusedContact(""testContact5"")),"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)             )
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     )
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     private val mockContactsRepo: ContactsRepo = mock { on { all } doReturn testContacts }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)     @Test
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     fun `Contacts ViewModel outputs full list of contacts to view`() {
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         val contactsViewModel = ContactsViewModel(mockContactsRepo)
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         assertEquals(5, contactsViewModel.contacts.value?.keys?.size)"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/contacts/ContactsViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29) }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.load
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import io.objectbox.android.ObjectBoxLiveData
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import io.objectbox.query.Query
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import org.owntracks.android.data.WaypointModel
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.owntracks.android.data.repos.WaypointsRepo
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) class InMemoryWaypointsRepo(eventBus: EventBus?) : WaypointsRepo(eventBus) {
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10)     override fun get(tst: Long): WaypointModel {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14)     override fun getAll(): MutableList<WaypointModel> {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18)     override fun getAllWithGeofences(): MutableList<WaypointModel> {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     override fun getAllLive(): ObjectBoxLiveData<WaypointModel> {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)     override fun getAllQuery(): Query<WaypointModel> {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)     override fun insert_impl(w: WaypointModel?) {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)     override fun update_impl(w: WaypointModel?) {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)     override fun delete_impl(w: WaypointModel?) {
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         TODO(""Not yet implemented"")"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/InMemoryWaypointsRepo.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42) }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  1) package org.owntracks.android.ui.preferences.load;
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  2)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  3) import android.content.Context
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  4) import android.content.res.Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  5) import com.nhaarman.mockitokotlin2.doReturn
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  6) import com.nhaarman.mockitokotlin2.mock
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  7) import org.greenrobot.eventbus.EventBus
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  8) import org.junit.Assert.assertEquals
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20  9) import org.junit.Before
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 10) import org.junit.Test
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 11) import org.owntracks.android.support.InMemoryPreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 12) import org.owntracks.android.support.Parser
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 13) import org.owntracks.android.support.Preferences
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 14) import org.owntracks.android.support.PreferencesGettersAndSetters
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 15) import org.owntracks.android.support.preferences.PreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 16) import java.net.URI
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 17)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 18) class LoadViewModelTest {
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 19)     private lateinit var mockResources: Resources
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 20)     private lateinit var mockContext: Context
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 21)     private lateinit var preferencesStore: PreferencesStore
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 22)     private val eventBus: EventBus = mock {}
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 23)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 24)     @Before
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 25)     fun createMocks() {
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 26)         mockResources = PreferencesGettersAndSetters.getMockResources()
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 27)         mockContext = mock {
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 28)             on { resources } doReturn mockResources
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 29)             on { packageName } doReturn javaClass.canonicalName
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 30)         }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 31)         preferencesStore = InMemoryPreferencesStore()
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 32)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 33)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 34)
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 35)     @Test
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 36)     fun `When invalid JSON on an inline owntracks config URL, then the error is correctly set`() {"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 37)         val parser = Parser(null)
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 38)         val preferences = Preferences(mockContext, null, preferencesStore)"
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 39)         val vm = LoadViewModel(preferences, parser, InMemoryWaypointsRepo(eventBus))"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 40)
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 41)         vm.extractPreferences(URI(""owntracks:///config?inline=e30k""))"
"5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 42)         assertEquals(""""""Import failed: Message is not a valid configuration message"""""", vm.displayedConfiguration)"
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 43)     }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 44) }
5c49fd3 project/app/src/test/java/org/owntracks/android/ui/preferences/load/LoadViewModelTest.kt (<eulerhm@dcc.ufmg.br> 2022-12-20 45)
