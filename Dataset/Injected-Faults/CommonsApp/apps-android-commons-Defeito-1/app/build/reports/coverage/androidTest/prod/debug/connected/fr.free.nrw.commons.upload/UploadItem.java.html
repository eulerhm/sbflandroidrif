<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UploadItem.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.upload</a> &gt; <span class="el_source">UploadItem.java</span></div><h1>UploadItem.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.upload;

import android.annotation.SuppressLint;
import android.net.Uri;
import androidx.annotation.Nullable;
import fr.free.nrw.commons.Utils;
import fr.free.nrw.commons.filepicker.MimeTypeMapWrapper;
import fr.free.nrw.commons.nearby.Place;
import fr.free.nrw.commons.utils.ImageUtils;
import io.reactivex.subjects.BehaviorSubject;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class UploadItem {

    private Uri mediaUri;
    private final String mimeType;
    private ImageCoordinates gpsCoords;
    private List&lt;UploadMediaDetail&gt; uploadMediaDetails;
    private Place place;
    private final long createdTimestamp;
    private final String createdTimestampSource;
    private final BehaviorSubject&lt;Integer&gt; imageQuality;
    private boolean hasInvalidLocation;
<span class="nc" id="L26">    private boolean isWLMUpload = false;</span>
    private String countryCode;
    private String fileCreatedDateString; //according to EXIF data

    /**
     * Uri of uploadItem
     * Uri points to image location or name, eg content://media/external/images/camera/10495 (Android 10)
     */
    private  Uri contentUri;


    @SuppressLint(&quot;CheckResult&quot;)
    UploadItem(final Uri mediaUri,
        final String mimeType,
        final ImageCoordinates gpsCoords,
        final Place place,
        final long createdTimestamp,
        final String createdTimestampSource,
        final Uri contentUri,
<span class="nc" id="L45">        final String fileCreatedDateString) {</span>
<span class="nc" id="L46">        this.createdTimestampSource = createdTimestampSource;</span>
<span class="nc" id="L47">        uploadMediaDetails = new ArrayList&lt;&gt;(Collections.singletonList(new UploadMediaDetail()));</span>
<span class="nc" id="L48">        this.place = place;</span>
<span class="nc" id="L49">        this.mediaUri = mediaUri;</span>
<span class="nc" id="L50">        this.mimeType = mimeType;</span>
<span class="nc" id="L51">        this.gpsCoords = gpsCoords;</span>
<span class="nc" id="L52">        this.createdTimestamp = createdTimestamp;</span>
<span class="nc" id="L53">        this.contentUri = contentUri;</span>
<span class="nc" id="L54">        imageQuality = BehaviorSubject.createDefault(ImageUtils.IMAGE_WAIT);</span>
<span class="nc" id="L55">        this.fileCreatedDateString = fileCreatedDateString;</span>
<span class="nc" id="L56">    }</span>

    public String getCreatedTimestampSource() {
<span class="nc" id="L59">        return createdTimestampSource;</span>
    }

    public ImageCoordinates getGpsCoords() {
<span class="nc" id="L63">        return gpsCoords;</span>
    }

    public List&lt;UploadMediaDetail&gt; getUploadMediaDetails() {
<span class="nc" id="L67">        return uploadMediaDetails;</span>
    }

    public long getCreatedTimestamp() {
<span class="nc" id="L71">        return createdTimestamp;</span>
    }

    public Uri getMediaUri() {
<span class="nc" id="L75">        return mediaUri;</span>
    }

    public int getImageQuality() {
<span class="nc" id="L79">        return imageQuality.getValue();</span>
    }

    /**
     * getContentUri.
     * @return Uri of uploadItem
     * Uri points to image location or name, eg content://media/external/images/camera/10495 (Android 10)
     */
<span class="nc" id="L87">    public Uri getContentUri() { return contentUri; }</span>

<span class="nc" id="L89">    public String getFileCreatedDateString() { return fileCreatedDateString; }</span>

    public void setImageQuality(final int imageQuality) {
<span class="nc" id="L92">      this.imageQuality.onNext(imageQuality);</span>
<span class="nc" id="L93">    }</span>

    /**
     * Sets the corresponding place to the uploadItem
     *
     * @param place geolocated Wikidata item
     */
    public void setPlace(Place place) {
<span class="nc" id="L101">        this.place = place;</span>
<span class="nc" id="L102">    }</span>

    public Place getPlace() {
<span class="nc" id="L105">        return place;</span>
    }

    public void setMediaDetails(final List&lt;UploadMediaDetail&gt; uploadMediaDetails) {
<span class="nc" id="L109">        this.uploadMediaDetails = uploadMediaDetails;</span>
<span class="nc" id="L110">    }</span>

    public void setWLMUpload(final boolean WLMUpload) {
<span class="nc" id="L113">        isWLMUpload = WLMUpload;</span>
<span class="nc" id="L114">    }</span>

    public boolean isWLMUpload() {
<span class="nc" id="L117">        return isWLMUpload;</span>
    }

    @Override
    public boolean equals(@Nullable final Object obj) {
<span class="nc bnc" id="L122" title="All 2 branches missed.">        if (!(obj instanceof UploadItem)) {</span>
<span class="nc" id="L123">            return false;</span>
        }
<span class="nc" id="L125">        return mediaUri.toString().contains(((UploadItem) (obj)).mediaUri.toString());</span>

    }

    @Override
    public int hashCode() {
<span class="nc" id="L131">        return mediaUri.hashCode();</span>
    }

    /**
     * Choose a filename for the media. Currently, the caption is used as a filename. If several
     * languages have been entered, the first language is used.
     */
    public String getFileName() {
<span class="nc" id="L139">        return Utils.fixExtension(uploadMediaDetails.get(0).getCaptionText(),</span>
<span class="nc" id="L140">            MimeTypeMapWrapper.getExtensionFromMimeType(mimeType));</span>
    }

    public void setGpsCoords(final ImageCoordinates gpsCoords) {
<span class="nc" id="L144">        this.gpsCoords = gpsCoords;</span>
<span class="nc" id="L145">    }</span>

    public void setHasInvalidLocation(boolean hasInvalidLocation) {
<span class="nc" id="L148">        this.hasInvalidLocation = hasInvalidLocation;</span>
<span class="nc" id="L149">    }</span>

    public boolean hasInvalidLocation() {
<span class="nc" id="L152">        return hasInvalidLocation;</span>
    }

    public void setCountryCode(final String countryCode) {
<span class="nc" id="L156">        this.countryCode = countryCode;</span>
<span class="nc" id="L157">    }</span>

    @Nullable
    public String getCountryCode() {
<span class="nc" id="L161">        return countryCode;</span>
    }

    /**
     * Sets both the contentUri and mediaUri to the specified Uri.
     * This method allows you to assign the same Uri to both the contentUri and mediaUri
     * properties.
     *
     * @param uri The Uri to be set as both the contentUri and mediaUri.
     */
    public void setContentUri(Uri uri) {
<span class="nc" id="L172">        contentUri = uri;</span>
<span class="nc" id="L173">        mediaUri = uri;</span>
<span class="nc" id="L174">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>