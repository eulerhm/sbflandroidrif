<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BookmarkFragment.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=0;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">prodDebug</a> &gt; <a href="index.source.html" class="el_package">fr.free.nrw.commons.bookmarks</a> &gt; <span class="el_source">BookmarkFragment.java</span></div><h1>BookmarkFragment.java</h1><pre class="source lang-java linenums">package fr.free.nrw.commons.bookmarks;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import android.widget.FrameLayout;
import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.FragmentManager;

import com.google.android.material.tabs.TabLayout;

import fr.free.nrw.commons.contributions.MainActivity;
import fr.free.nrw.commons.di.CommonsDaggerSupportFragment;
import fr.free.nrw.commons.explore.ParentViewPager;
import fr.free.nrw.commons.kvstore.JsonKvStore;
import fr.free.nrw.commons.theme.BaseActivity;
import javax.inject.Inject;

import butterknife.BindView;
import butterknife.ButterKnife;
import fr.free.nrw.commons.R;
import fr.free.nrw.commons.contributions.ContributionController;
import javax.inject.Named;

<span class="nc" id="L28">public class BookmarkFragment extends CommonsDaggerSupportFragment {</span>

    private FragmentManager supportFragmentManager;
    private BookmarksPagerAdapter adapter;
    @BindView(R.id.viewPagerBookmarks)
    ParentViewPager viewPager;
    @BindView(R.id.tab_layout)
    TabLayout tabLayout;
    @BindView(R.id.fragmentContainer)
    FrameLayout fragmentContainer;

    @Inject
    ContributionController controller;
    /**
     * To check if the user is loggedIn or not.
     */
    @Inject
    @Named(&quot;default_preferences&quot;)
    public
    JsonKvStore applicationKvStore;

    @NonNull
    public static BookmarkFragment newInstance() {
<span class="nc" id="L51">        BookmarkFragment fragment = new BookmarkFragment();</span>
<span class="nc" id="L52">        fragment.setRetainInstance(true);</span>
<span class="nc" id="L53">        return fragment;</span>
    }

    public void setScroll(boolean canScroll) {
<span class="nc" id="L57">        viewPager.setCanScroll(canScroll);</span>
<span class="nc" id="L58">    }</span>

    @Override
    public void onCreate(@Nullable final Bundle savedInstanceState) {
<span class="nc" id="L62">        super.onCreate(savedInstanceState);</span>
<span class="nc" id="L63">    }</span>

    @Nullable
    @Override
    public View onCreateView(@NonNull final LayoutInflater inflater,
        @Nullable final ViewGroup container,
        @Nullable final Bundle savedInstanceState) {
<span class="nc" id="L70">        super.onCreateView(inflater, container, savedInstanceState);</span>
<span class="nc" id="L71">        View view = inflater.inflate(R.layout.fragment_bookmarks, container, false);</span>
<span class="nc" id="L72">        ButterKnife.bind(this, view);</span>

        // Activity can call methods in the fragment by acquiring a
        // reference to the Fragment from FragmentManager, using findFragmentById()
<span class="nc" id="L76">        supportFragmentManager = getChildFragmentManager();</span>

<span class="nc" id="L78">        adapter = new BookmarksPagerAdapter(supportFragmentManager, getContext(),</span>
<span class="nc" id="L79">            applicationKvStore.getBoolean(&quot;login_skipped&quot;));</span>
<span class="nc" id="L80">        viewPager.setAdapter(adapter);</span>
<span class="nc" id="L81">        tabLayout.setupWithViewPager(viewPager);</span>

<span class="nc" id="L83">        ((MainActivity) getActivity()).showTabs();</span>
<span class="nc" id="L84">        ((BaseActivity) getActivity()).getSupportActionBar().setDisplayHomeAsUpEnabled(false);</span>

<span class="nc" id="L86">        setupTabLayout();</span>
<span class="nc" id="L87">        return view;</span>
    }

    /**
     * This method sets up the tab layout. If the adapter has only one element it sets the
     * visibility of tabLayout to gone.
     */
    public void setupTabLayout() {
<span class="nc" id="L95">        tabLayout.setVisibility(View.VISIBLE);</span>
<span class="nc bnc" id="L96" title="All 2 branches missed.">        if (adapter.getCount() == 1) {</span>
<span class="nc" id="L97">            tabLayout.setVisibility(View.GONE);</span>
        }
<span class="nc" id="L99">    }</span>


    public void onBackPressed() {
<span class="nc" id="L103">        if (((BookmarkListRootFragment) (adapter.getItem(tabLayout.getSelectedTabPosition())))</span>
<span class="nc bnc" id="L104" title="All 2 branches missed.">            .backPressed()) {</span>
            // The event is handled internally by the adapter , no further action required.
<span class="nc" id="L106">            return;</span>
        }
        // Event is not handled by the adapter ( performed back action ) change action bar.
<span class="nc" id="L109">        ((BaseActivity) getActivity()).getSupportActionBar().setDisplayHomeAsUpEnabled(false);</span>
<span class="nc" id="L110">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>Generated by the Android Gradle plugin 8.0.2</div></body></html>